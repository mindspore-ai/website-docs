<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
  lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:th="http://www.thymeleaf.org"
>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>资讯预览</title>
  </head>

  <body style="margin: 0; padding: 0; background: #fff; color: #fff;"></body>
  <script src="../../layui/layui.js"></script>
  <script>
    window.onload = function () {
      layui.config({
        base: "../../static/",
      });
      layui.use(["jquery"], function () {
        var $ = layui.jquery;
        let idPush = sessionStorage.getItem("idpush");
        $.ajax({
          url: "/source/previewInfo",
          method: "get",
          data: "&ids=" + idPush,
          success: function (res) {
            res.reverse();
            res.forEach((item) => {
              console.log(item);
              let lang = item.language || item.tag;
              console.log(lang);

              let header = `
              <table
                width="950"
                cellpadding="0"
                cellspacing="0"
                style="margin: 0 auto;border-left: 1px solid #44bbbd;border-right: 1px solid #44bbbd;border-top: 1px solid #44bbbd"
                >
                <tbody>
                    <tr style="height: 44px; width: 258px;background: #1a1c33">
                    <td style="height: 44px; width: 258px;">
                        <table
                        width="950"
                        height="44px"
                        border="0"
                        cellpadding="0"
                        cellspacing="0"
                        style="border-spacing: 0;border: 0;border-collapse: collapse;"
                        >
                        <tr style="height:29px;"></tr>
                        <tr>
                            <td style="width: 950px;">
                            <table
                                border="0"
                                width="950"
                                cellpadding="0"
                                cellspacing="0"
                                style="border-spacing: 0;border: 0;border-collapse: collapse;"
                            >
                                <tbody>
                                <tr>
                                    <td style="width:48px;height:44px"></td>
                                    <td style="width: 435px;height: 44px;">
                                    <img
                                        id="logoPush"
                                        style="width: 435px;height: 44px;display: inline-block;outline: none"
                                        src="../../images/logoPush_${lang==="zh"?"zh":"en"}.png"
                                        alt="img"
                                    />
                                    </td>
                                    <td style="width:467px;height:44px"></td>
                                </tr>
                                </tbody>
                            </table>
                            </td>
                        </tr>
                        <tr style="height:29px;"></tr>
                        </table>
                    </td>
                    </tr>
                </tbody>
                </table>

              `;

              let content = `
              <!-- 新闻开始 -->
                <table
                width="950"
                cellpadding="0"
                cellspacing="0"
                style="margin: 0 auto;border-left: 1px solid #44bbbd;border-right: 1px solid #44bbbd;"
                >
                <tbody>
                    <tr>
                    <td width="950" style="width: 950px;height:50px"></td>
                    </tr>
                    <tr>
                    <td>
                        <table border="0" width="950" cellpadding="0" cellspacing="0">
                        <tbody>
                            <tr>
                            <td width="30" style="width: 30px;height: 35px;"></td>
                            <td style="width: 8px;height: 35px;">
                                <img
                                id="leftbg"
                                src="../../images/leftbg.png" alt="img" />
                            </td>
                            <td style="width: 10px;height: 35px;"></td>
                            <td
                                style="color: #1a1c33;font-size: 26px;"
                            >${item.title}</td>
                            <td></td>
                            </tr>
                        </tbody>
                        </table>
                    </td>
                    </tr>
                    <tr>
                    <td style="height: 40px"></td>
                    </tr>
                    <tr>
                    <td>
                        <table cellpadding="0" cellspacing="0" width="950">
                        <tbody>
                            <tr
                            style="font-size: 20px;color:#666;width: 950px;overflow: hidden;"
                            >
                            <td style="width: 48px"></td>
                            <td
                                style="color: #666666;letter-spacing: 1px;width:830px;word-wrap:break-word;"
                            >${item.content}</td>
                            <td style="width: 48px"></td>
                            </tr>
                        </tbody>
                        </table>
                    </td>
                    </tr>
                    <tr>
                    <td style="height: 30px"></td>
                    </tr>
                    <tr>
                    <td>
                        <table>
                        <tbody>
                            <tr>
                            <td style="width: 48px"></td>
                            <td style="width: 143px;height: 45px;">
                                <a
                                style="width: 143px;height: 45px;display: inline-block;"
                                href="https://${item.url}"
                                target="_blank"
                                >
                                
                                <button
                                    style="width: 143px;height: 43px;color: #fff !important;background: linear-gradient(45deg, #87e1ff, #628aff);border: none;font-size: 17px;outline: none;"
                                >
                                    ${lang==="zh"?"查看详情":"View Details"}
                                </button>
                                </a>
                            </td>
                            </tr>
                        </tbody>
                        </table>
                    </td>
                    </tr>
                    <tr>
                    <td style="height: 30px"></td>
                    </tr>
                    <!-- 中间虚线 -->
                    <tr>
                    <td>
                        <table>
                        <tbody>
                            <tr>
                            <td style="width: 45px"></td>
                            <td>
                                <table
                                style="border-bottom: 2px dashed #44bbbd;width: 860px;height: 0;"
                                ></table>
                            </td>
                            </tr>
                        </tbody>
                        </table>
                    </td>
                    </tr>
                    <!-- 中间虚线 -->
                </tbody>
                </table>

              `
              let footer = `
              <!-- 新闻结束 -->
              <table width="950" cellpadding="0" cellspacing="0"
                style="margin: 0 auto;border-left: 1px solid #44bbbd;border-right: 1px solid #44bbbd;border-bottom: 1px solid #44bbbd">
                <tbody>
                    <tr>
                    <td>
                    <table width="950" cellpadding="0" cellspacing="0">
                        <tbody>
                            <tr>
                                <td style="width: 710px;">
                                    <table border="0" width="710" cellpadding="0" cellspacing="0"
                                        style="border-spacing: 0;border: 0;border-collapse: collapse;">
                                        <tbody>
                                            <tr>
                                                <td style="height: 50px"></td>
                                            </tr>
                                            <tr style="font-size: 16px;color:#666">
                                                <td style="width: 48px"></td>
                                                <td>${
                                                  lang == "zh"
                                                    ? "想了解更多信息，请访问"
                                                    : "For more information, visit&nbsp;"
                                                }<a style="font-size: 14px;color:#44bbbd"
                                                        href="https://www.mindspore.cn">https://www.mindspore.cn</a>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="height: 10px"></td>
                                            </tr>
                                            <tr>
                                                <td style="width: 48px"></td>
                                                <td style="font-size: 16px;color:#666" id="time"></td>
                                            </tr>
                                            <tr>
                                                <td style="height: 40px"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                                <td style="width: 230px;">
                                    <table border="0" width="228" cellpadding="0" cellspacing="0"
                                        style="border-spacing: 0;border: 0;border-collapse: collapse;">
                                        <tbody>
                                            <tr>
                                                <td style="color: #666;width: 158px">
                                                    <table width="158" height="142" cellpadding="0" cellspacing="0">
                                                        <tbody>
                                                            <tr style="height: 60px;"></tr>

                                                            <tr style="height: 21px;">
                                                                <td style="height: 21px;">
                                                                    <a href="#"
                                                                        target="_self"
                                                                        style="cursor: pointer;color:#666;font-size:16px">${
                                                                          lang ==
                                                                          "zh"
                                                                            ? "点击这里取消订阅"
                                                                            : "click to unsubscribe"
                                                                        }</a>
                                                                </td>
                                                            </tr>

                                                            <tr style="height: 60px;"></tr>
                                                        </tbody>
                                                    </table>

                                                </td>
                                                <td style="width: 53px">
                                                    <table width="53" height="142" cellpadding="0" cellspacing="0">
                                                        <tbody>
                                                            <tr style="height: 60px;"></tr>
                                                            <tr style="height: 6px;"></tr>
                                                            <tr style="height: 11px;">
                                                                <td style="height: 11px;">
                                                                    <a href="#"
                                                                        target="_self" style="cursor: pointer">
                                                                        <img id="arrowPush" width="24" height="11"
                                                                            style="display: block;"
                                                                            src="../../images/arrowPush.png"
                                                                            alt="img" />
                                                                    </a>
                                                                </td>
                                                            </tr>
                                                            <tr style="height: 5px;"></tr>
                                                            <tr style="height: 60px;"></tr>
                                                        </tbody>
                                                    </table>

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
        </tbody>
    </table>`;
              $(document.body).append($(header))
              $(document.body).append($(content))
              $(document.body).append($(footer))
            });
          },
        });
      });
    };
  </script>
</html>
