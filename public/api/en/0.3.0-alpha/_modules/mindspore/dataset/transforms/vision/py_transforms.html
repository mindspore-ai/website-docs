<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>mindspore.dataset.transforms.vision.py_transforms &mdash; MindSpore 0.3.0-alpha documentation</title>
      <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../../index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.html">mindspore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.dtype.html">mindspore.dtype</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.common.initializer.html">mindspore.common.initializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.communication.html">mindspore.communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.context.html">mindspore.context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.nn.html">mindspore.nn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.nn.dynamic_lr.html">mindspore.nn.dynamic_lr</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.ops.html">mindspore.ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.ops.composite.html">mindspore.ops.composite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.ops.operations.html">mindspore.ops.operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.parallel.html">mindspore.parallel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.train.html">mindspore.train</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.dataset.html">mindspore.dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.c_transforms.html">mindspore.dataset.transforms.c_transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.c_transforms.html">mindspore.dataset.transforms.vision.c_transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.py_transforms.html">mindspore.dataset.transforms.py_transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html">mindspore.dataset.transforms.vision.py_transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindspore/mindspore.mindrecord.html">mindspore.mindrecord</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindinsight/mindinsight.lineagemgr.html">mindinsight.lineagemgr</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindinsight/mindinsight.profiler.html">mindinsight.profiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindarmour/mindarmour.html">mindarmour</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindarmour/mindarmour.utils.html">mindarmour.utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindarmour/mindarmour.evaluations.html">mindarmour.evaluations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindarmour/mindarmour.detectors.html">mindarmour.detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindarmour/mindarmour.attacks.html">mindarmour.attacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindarmour/mindarmour.defenses.html">mindarmour.defenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindarmour/mindarmour.fuzzing.html">mindarmour.fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/python/mindarmour/mindarmour.diff_privacy.html">mindarmour.diff_privacy</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../../../index.html">Module code</a> &raquo;</li>
      <li>mindspore.dataset.transforms.vision.py_transforms</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for mindspore.dataset.transforms.vision.py_transforms</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright 2019 Huawei Technologies Co., Ltd</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1"># http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>
<span class="c1"># ==============================================================================</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">The module vision.py_transforms is implemented basing on python</span>
<span class="sd">PIL. This module provides many kinds of image augmentations. It also provides</span>
<span class="sd">transferring methods between PIL Image and numpy array. For users who prefer</span>
<span class="sd">python PIL in image learning task, this module is a good tool to process image</span>
<span class="sd">augmentations. Users could also self-define their own augmentations with python</span>
<span class="sd">PIL.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">numbers</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">py_transforms_util</span> <span class="k">as</span> <span class="n">util</span>
<span class="kn">from</span> <span class="nn">.validators</span> <span class="kn">import</span> <span class="n">check_prob</span><span class="p">,</span> <span class="n">check_crop</span><span class="p">,</span> <span class="n">check_resize_interpolation</span><span class="p">,</span> <span class="n">check_random_resize_crop</span><span class="p">,</span> \
    <span class="n">check_normalize_py</span><span class="p">,</span> <span class="n">check_random_crop</span><span class="p">,</span> <span class="n">check_random_color_adjust</span><span class="p">,</span> <span class="n">check_random_rotation</span><span class="p">,</span> \
    <span class="n">check_transforms_list</span><span class="p">,</span> <span class="n">check_random_apply</span><span class="p">,</span> <span class="n">check_ten_crop</span><span class="p">,</span> <span class="n">check_num_channels</span><span class="p">,</span> <span class="n">check_pad</span><span class="p">,</span> \
    <span class="n">check_random_perspective</span><span class="p">,</span> <span class="n">check_random_erasing</span><span class="p">,</span> <span class="n">check_cutout</span><span class="p">,</span> <span class="n">check_linear_transform</span><span class="p">,</span> <span class="n">check_random_affine</span><span class="p">,</span> \
    <span class="n">check_mix_up</span><span class="p">,</span> <span class="n">check_positive_degrees</span><span class="p">,</span> <span class="n">check_uniform_augment_py</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">Inter</span><span class="p">,</span> <span class="n">Border</span>

<span class="n">DE_PY_INTER_MODE</span> <span class="o">=</span> <span class="p">{</span><span class="n">Inter</span><span class="o">.</span><span class="n">NEAREST</span><span class="p">:</span> <span class="n">Image</span><span class="o">.</span><span class="n">NEAREST</span><span class="p">,</span>
                    <span class="n">Inter</span><span class="o">.</span><span class="n">LINEAR</span><span class="p">:</span> <span class="n">Image</span><span class="o">.</span><span class="n">LINEAR</span><span class="p">,</span>
                    <span class="n">Inter</span><span class="o">.</span><span class="n">CUBIC</span><span class="p">:</span> <span class="n">Image</span><span class="o">.</span><span class="n">CUBIC</span><span class="p">}</span>

<span class="n">DE_PY_BORDER_TYPE</span> <span class="o">=</span> <span class="p">{</span><span class="n">Border</span><span class="o">.</span><span class="n">CONSTANT</span><span class="p">:</span> <span class="s1">&#39;constant&#39;</span><span class="p">,</span>
                     <span class="n">Border</span><span class="o">.</span><span class="n">EDGE</span><span class="p">:</span> <span class="s1">&#39;edge&#39;</span><span class="p">,</span>
                     <span class="n">Border</span><span class="o">.</span><span class="n">REFLECT</span><span class="p">:</span> <span class="s1">&#39;reflect&#39;</span><span class="p">,</span>
                     <span class="n">Border</span><span class="o">.</span><span class="n">SYMMETRIC</span><span class="p">:</span> <span class="s1">&#39;symmetric&#39;</span><span class="p">}</span>


<div class="viewcode-block" id="ComposeOp"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.ComposeOp">[docs]</a><span class="k">class</span> <span class="nc">ComposeOp</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compose a list of transforms.</span>

<span class="sd">    .. Note::</span>
<span class="sd">        ComposeOp takes a list of transformations either provided in py_transforms or from user-defined implementation;</span>
<span class="sd">        each can be an initialized transformation class or a lambda function, as long as the output from the last</span>
<span class="sd">        transformation is a single tensor of type numpy.ndarray. See below for an example of how to use ComposeOp</span>
<span class="sd">        with py_transforms classes and check out FiveCrop or TenCrop for the use of them in conjunction with lambda</span>
<span class="sd">        functions.</span>

<span class="sd">    Args:</span>
<span class="sd">        transforms (list): List of transformations to be applied.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; import mindspore.dataset as ds</span>
<span class="sd">        &gt;&gt;&gt; import mindspore.dataset.transforms.vision.py_transforms as py_transforms</span>
<span class="sd">        &gt;&gt;&gt; dataset_dir = &quot;path/to/imagefolder_directory&quot;</span>
<span class="sd">        &gt;&gt;&gt; # create a dataset that reads all files in dataset_dir with 8 threads</span>
<span class="sd">        &gt;&gt;&gt; dataset = ds.ImageFolderDatasetV2(dataset_dir, num_parallel_workers=8)</span>
<span class="sd">        &gt;&gt;&gt; # create a list of transformations to be applied to the image data</span>
<span class="sd">        &gt;&gt;&gt; transform = py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                                      py_transforms.RandomHorizontalFlip(0.5),</span>
<span class="sd">        &gt;&gt;&gt;                                      py_transforms.ToTensor(),</span>
<span class="sd">        &gt;&gt;&gt;                                      py_transforms.Normalize((0.491, 0.482, 0.447), (0.247, 0.243, 0.262)),</span>
<span class="sd">        &gt;&gt;&gt;                                      py_transforms.RandomErasing()])</span>
<span class="sd">        &gt;&gt;&gt; # apply the transform to the dataset through dataset.map()</span>
<span class="sd">        &gt;&gt;&gt; dataset = dataset.map(input_columns=&quot;image&quot;, operations=transform())</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transforms</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transforms</span> <span class="o">=</span> <span class="n">transforms</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            lambda function, Lambda function that takes in an img to apply transformations on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">util</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transforms</span><span class="p">)</span></div>


<div class="viewcode-block" id="ToTensor"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.ToTensor">[docs]</a><span class="k">class</span> <span class="nc">ToTensor</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the input Numpy image array or PIL image of shape (H,W,C) to a Numpy ndarray of shape (C,H,W).</span>

<span class="sd">    Note:</span>
<span class="sd">        The ranges of values in height and width dimension changes from [0, 255] to [0.0, 1.0]. Type cast to output_type</span>
<span class="sd">        (default Numpy float 32).</span>
<span class="sd">        The range of channel dimension remains the same.</span>

<span class="sd">    Args:</span>
<span class="sd">        output_type (numpy datatype, optional): The datatype of the numpy output (default=np.float32).</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomHorizontalFlip(0.5),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_type</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_type</span> <span class="o">=</span> <span class="n">output_type</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): PIL Image to be converted to numpy.ndarray.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (numpy.ndarray), Converted image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">to_tensor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_type</span><span class="p">)</span></div>


<div class="viewcode-block" id="ToType"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.ToType">[docs]</a><span class="k">class</span> <span class="nc">ToType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the input Numpy image array to desired numpy dtype.</span>

<span class="sd">    Args:</span>
<span class="sd">        output_type (numpy datatype): The datatype of the numpy output. e.g. np.float32.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; import numpy as np</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomHorizontalFlip(0.5),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToType(np.float32)])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_type</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_type</span> <span class="o">=</span> <span class="n">output_type</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            numpy object : numpy object to be type swapped.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (numpy.ndarray), Converted image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">to_type</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_type</span><span class="p">)</span></div>


<div class="viewcode-block" id="HWC2CHW"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.HWC2CHW">[docs]</a><span class="k">class</span> <span class="nc">HWC2CHW</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transpose a Numpy image array; shape (H, W, C) to shape (C, H, W).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (numpy.ndarray): Image array, of shape (H, W, C), to have channels swapped.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (numpy.ndarray), Image array, of shape (C, H, W), with channels swapped.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">hwc_to_chw</span><span class="p">(</span><span class="n">img</span><span class="p">)</span></div>


<div class="viewcode-block" id="ToPIL"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.ToPIL">[docs]</a><span class="k">class</span> <span class="nc">ToPIL</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the input decoded Numpy image array of RGB mode to a PIL Image of RGB mode.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; # data is already decoded, but not in PIL Image format</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.ToPIL(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomHorizontalFlip(0.5),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (numpy.ndarray): Decoded image array, of RGB mode, to be converted to PIL Image.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Image converted to PIL Image of RGB mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">to_pil</span><span class="p">(</span><span class="n">img</span><span class="p">)</span></div>


<div class="viewcode-block" id="Decode"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.Decode">[docs]</a><span class="k">class</span> <span class="nc">Decode</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Decode the input image to PIL Image format in RGB mode.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomHorizontalFlip(0.5),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (Bytes-like Objects):Image to be decoded.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Decoded image in RGB mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">img</span><span class="p">)</span></div>


<div class="viewcode-block" id="Normalize"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.Normalize">[docs]</a><span class="k">class</span> <span class="nc">Normalize</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Normalize the input Numpy image array of shape (C, H, W) with the given mean and standard deviation.</span>

<span class="sd">    The values of the array need to be in range [0.0, 1.0].</span>

<span class="sd">    Args:</span>
<span class="sd">        mean (sequence): List or tuple of mean values for each channel, w.r.t channel order.</span>
<span class="sd">        std (sequence): List or tuple of standard deviations for each channel, w.r.t. channel order.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomHorizontalFlip(0.5),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.Normalize((0.491, 0.482, 0.447), (0.247, 0.243, 0.262))])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_normalize_py</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mean</span><span class="p">,</span> <span class="n">std</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mean</span> <span class="o">=</span> <span class="n">mean</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">std</span> <span class="o">=</span> <span class="n">std</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (numpy.ndarray): Image array to be normalized.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (numpy.ndarray), Normalized Image array.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">std</span><span class="p">)</span></div>


<div class="viewcode-block" id="RandomCrop"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.RandomCrop">[docs]</a><span class="k">class</span> <span class="nc">RandomCrop</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Crop the input PIL Image at a random location.</span>

<span class="sd">    Args:</span>
<span class="sd">        size (int or sequence): The output size of the cropped image.</span>
<span class="sd">            If size is an int, a square crop of size (size, size) is returned.</span>
<span class="sd">            If size is a sequence of length 2, it should be (height, width).</span>
<span class="sd">        padding (int or sequence, optional): The number of pixels to pad the image (default=None).</span>
<span class="sd">            If padding is not None, pad image firstly with padding values.</span>
<span class="sd">            If a single number is provided, it pads all borders with this value.</span>
<span class="sd">            If a tuple or list of 2 values are provided, it pads the (left and top)</span>
<span class="sd">            with the first value and (right and bottom) with the second value.</span>
<span class="sd">            If 4 values are provided as a list or tuple,</span>
<span class="sd">            it pads the left, top, right and bottom respectively.</span>
<span class="sd">        pad_if_needed (bool, optional): Pad the image if either side is smaller than</span>
<span class="sd">            the given output size (default=False).</span>
<span class="sd">        fill_value (int or tuple, optional): filling value (default=0).</span>
<span class="sd">            The pixel intensity of the borders if the padding_mode is Border.CONSTANT.</span>
<span class="sd">            If it is a 3-tuple, it is used to fill R, G, B channels respectively.</span>
<span class="sd">        padding_mode (str, optional): The method of padding (default=Border.CONSTANT). Can be any of</span>
<span class="sd">            [Border.CONSTANT, Border.EDGE, Border.REFLECT, Border.SYMMETRIC].</span>

<span class="sd">            - Border.CONSTANT, means it fills the border with constant values.</span>

<span class="sd">            - Border.EDGE, means it pads with the last value on the edge.</span>

<span class="sd">            - Border.REFLECT, means it reflects the values on the edge omitting the last</span>
<span class="sd">              value of edge.</span>

<span class="sd">            - Border.SYMMETRIC, means it reflects the values on the edge repeating the last</span>
<span class="sd">              value of edge.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomCrop(224),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_random_crop</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pad_if_needed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padding_mode</span><span class="o">=</span><span class="n">Border</span><span class="o">.</span><span class="n">CONSTANT</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="o">=</span> <span class="n">padding</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pad_if_needed</span> <span class="o">=</span> <span class="n">pad_if_needed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_value</span> <span class="o">=</span> <span class="n">fill_value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">padding_mode</span> <span class="o">=</span> <span class="n">DE_PY_BORDER_TYPE</span><span class="p">[</span><span class="n">padding_mode</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be randomly cropped.</span>

<span class="sd">        Returns:</span>
<span class="sd">            PIL Image, Cropped image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">random_crop</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pad_if_needed</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">fill_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding_mode</span><span class="p">)</span></div>


<div class="viewcode-block" id="RandomHorizontalFlip"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.RandomHorizontalFlip">[docs]</a><span class="k">class</span> <span class="nc">RandomHorizontalFlip</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Randomly flip the input image horizontally with a given probability.</span>

<span class="sd">    Args:</span>
<span class="sd">        prob (float, optional): Probability of the image being flipped (default=0.5).</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomHorizontalFlip(0.5),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_prob</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="mf">0.5</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prob</span> <span class="o">=</span> <span class="n">prob</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be flipped horizontally.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Randomly flipped image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">random_horizontal_flip</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob</span><span class="p">)</span></div>


<div class="viewcode-block" id="RandomVerticalFlip"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.RandomVerticalFlip">[docs]</a><span class="k">class</span> <span class="nc">RandomVerticalFlip</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Randomly flip the input image vertically with a given probability.</span>

<span class="sd">    Args:</span>
<span class="sd">        prob (float, optional): Probability of the image being flipped (default=0.5).</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomVerticalFlip(0.5),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_prob</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="mf">0.5</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prob</span> <span class="o">=</span> <span class="n">prob</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be flipped vertically.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Randomly flipped image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">random_vertical_flip</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob</span><span class="p">)</span></div>


<div class="viewcode-block" id="Resize"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.Resize">[docs]</a><span class="k">class</span> <span class="nc">Resize</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Resize the input PIL Image to the given size.</span>

<span class="sd">    Args:</span>
<span class="sd">        size (int or sequence): The output size of the resized image.</span>
<span class="sd">            If size is an int, smaller edge of the image will be resized to this value with</span>
<span class="sd">            the same image aspect ratio.</span>
<span class="sd">            If size is a sequence of length 2, it should be (height, width).</span>
<span class="sd">        interpolation (Inter mode, optional): Image interpolation mode (default=Inter.BILINEAR).</span>
<span class="sd">            It can be any of [Inter.BILINEAR, Inter.NEAREST, Inter.BICUBIC].</span>

<span class="sd">            - Inter.BILINEAR, means interpolation method is bilinear interpolation.</span>

<span class="sd">            - Inter.NEAREST, means interpolation method is nearest-neighbor interpolation.</span>

<span class="sd">            - Inter.BICUBIC, means interpolation method is bicubic interpolation.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.Resize(256),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_resize_interpolation</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="n">Inter</span><span class="o">.</span><span class="n">BILINEAR</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span> <span class="o">=</span> <span class="n">DE_PY_INTER_MODE</span><span class="p">[</span><span class="n">interpolation</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be resized.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Resize image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span><span class="p">)</span></div>


<div class="viewcode-block" id="RandomResizedCrop"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.RandomResizedCrop">[docs]</a><span class="k">class</span> <span class="nc">RandomResizedCrop</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extract crop from the input image and resize it to a random size and aspect ratio.</span>

<span class="sd">    Args:</span>
<span class="sd">        size (int or sequence): The size of the output image.</span>
<span class="sd">            If size is an int, a square crop of size (size, size) is returned.</span>
<span class="sd">            If size is a sequence of length 2, it should be (height, width).</span>
<span class="sd">        scale (tuple, optional): Range (min, max) of respective size of the original size</span>
<span class="sd">            to be cropped (default=(0.08, 1.0)).</span>
<span class="sd">        ratio (tuple, optional): Range (min, max) of aspect ratio to be cropped (default=(3. / 4., 4. / 3.)).</span>
<span class="sd">        interpolation (Inter mode, optional): Image interpolation mode (default=Inter.BILINEAR).</span>
<span class="sd">            It can be any of [Inter.BILINEAR, Inter.NEAREST, Inter.BICUBIC].</span>

<span class="sd">            - Inter.BILINEAR, means interpolation method is bilinear interpolation.</span>

<span class="sd">            - Inter.NEAREST, means interpolation method is nearest-neighbor interpolation.</span>

<span class="sd">            - Inter.BICUBIC, means interpolation method is bicubic interpolation.</span>

<span class="sd">        max_attempts (int, optional): The maximum number of attempts to propose a valid</span>
<span class="sd">            crop_area (default=10). If exceeded, fall back to use center_crop instead.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomResizedCrop(224),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_random_resize_crop</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="p">(</span><span class="mf">0.08</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="n">ratio</span><span class="o">=</span><span class="p">(</span><span class="mf">3.</span> <span class="o">/</span> <span class="mf">4.</span><span class="p">,</span> <span class="mf">4.</span> <span class="o">/</span> <span class="mf">3.</span><span class="p">),</span>
                 <span class="n">interpolation</span><span class="o">=</span><span class="n">Inter</span><span class="o">.</span><span class="n">BILINEAR</span><span class="p">,</span> <span class="n">max_attempts</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ratio</span> <span class="o">=</span> <span class="n">ratio</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span> <span class="o">=</span> <span class="n">DE_PY_INTER_MODE</span><span class="p">[</span><span class="n">interpolation</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_attempts</span> <span class="o">=</span> <span class="n">max_attempts</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be randomly cropped and resized.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Randomly cropped and resized image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">random_resize_crop</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio</span><span class="p">,</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_attempts</span><span class="p">)</span></div>


<div class="viewcode-block" id="CenterCrop"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.CenterCrop">[docs]</a><span class="k">class</span> <span class="nc">CenterCrop</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Crop the central reigion of the input PIL Image to the given size.</span>

<span class="sd">    Args:</span>
<span class="sd">        size (int or sequence): The output size of the cropped image.</span>
<span class="sd">            If size is an int, a square crop of size (size, size) is returned.</span>
<span class="sd">            If size is a sequence of length 2, it should be (height, width).</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.CenterCrop(64),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_crop</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be center cropped.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Cropped image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">center_crop</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span></div>


<div class="viewcode-block" id="RandomColorAdjust"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.RandomColorAdjust">[docs]</a><span class="k">class</span> <span class="nc">RandomColorAdjust</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Perform a random brightness, contrast, saturation, and hue adjustment on the input PIL image.</span>

<span class="sd">    Args:</span>
<span class="sd">        brightness (float or tuple, optional): Brightness adjustment factor (default=(1, 1)). Cannot be negative.</span>
<span class="sd">            If it is a float, the factor is uniformly chosen from the range [max(0, 1-brightness), 1+brightness].</span>
<span class="sd">            If it is a sequence, it should be [min, max] for the range.</span>
<span class="sd">        contrast (float or tuple, optional): Contrast adjustment factor (default=(1, 1)). Cannot be negative.</span>
<span class="sd">            If it is a float, the factor is uniformly chosen from the range [max(0, 1-contrast), 1+contrast].</span>
<span class="sd">            If it is a sequence, it should be [min, max] for the range.</span>
<span class="sd">        saturation (float or tuple, optional): Saturation adjustment factor (default=(1, 1)). Cannot be negative.</span>
<span class="sd">            If it is a float, the factor is uniformly chosen from the range [max(0, 1-saturation), 1+saturation].</span>
<span class="sd">            If it is a sequence, it should be [min, max] for the range.</span>
<span class="sd">        hue (float or tuple, optional): Hue adjustment factor (default=(0, 0)).</span>
<span class="sd">            If it is a float, the range will be [-hue, hue]. Value should be 0 &lt;= hue &lt;= 0.5.</span>
<span class="sd">            If it is a sequence, it should be [min, max] where -0.5 &lt;= min &lt;= max &lt;= 0.5.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomColorAdjust(0.4, 0.4, 0.4, 0.1),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_random_color_adjust</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">brightness</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">contrast</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">saturation</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hue</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">brightness</span> <span class="o">=</span> <span class="n">brightness</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contrast</span> <span class="o">=</span> <span class="n">contrast</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">saturation</span> <span class="o">=</span> <span class="n">saturation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hue</span> <span class="o">=</span> <span class="n">hue</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to have its color adjusted randomly.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Image after random adjustment of its color.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">random_color_adjust</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">brightness</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">contrast</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">saturation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hue</span><span class="p">)</span></div>


<div class="viewcode-block" id="RandomRotation"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.RandomRotation">[docs]</a><span class="k">class</span> <span class="nc">RandomRotation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Rotate the input PIL image by a random angle.</span>

<span class="sd">    Note:</span>
<span class="sd">        See https://pillow.readthedocs.io/en/stable/reference/Image.html#PIL.Image.Image.rotate.</span>

<span class="sd">    Args:</span>
<span class="sd">        degrees (int or float or sequence): Range of random rotation degrees.</span>
<span class="sd">            If degrees is a number, the range will be converted to (-degrees, degrees).</span>
<span class="sd">            If degrees is a sequence, it should be (min, max).</span>
<span class="sd">        resample (Inter mode, optional): An optional resampling filter (default=Inter.NEAREST).</span>
<span class="sd">            If omitted, or if the image has mode &quot;1&quot; or &quot;P&quot;, it is set to be Inter.NEAREST.</span>
<span class="sd">            It can be any of [Inter.BILINEAR, Inter.NEAREST, Inter.BICUBIC].</span>

<span class="sd">            - Inter.BILINEAR, means resampling method is bilinear interpolation.</span>

<span class="sd">            - Inter.NEAREST, means resampling method is nearest-neighbor interpolation.</span>

<span class="sd">            - Inter.BICUBIC, means resampling method is bicubic interpolation.</span>

<span class="sd">        expand (bool, optional):  Optional expansion flag (default=False). If set to True, expand the output</span>
<span class="sd">            image to make it large enough to hold the entire rotated image.</span>
<span class="sd">            If set to False or omitted, make the output image the same size as the input.</span>
<span class="sd">            Note that the expand flag assumes rotation around the center and no translation.</span>
<span class="sd">        center (tuple, optional): Optional center of rotation (a 2-tuple) (default=None).</span>
<span class="sd">            Origin is the top left corner. Default None sets to the center of the image.</span>
<span class="sd">        fill_value (int or tuple, optional): Optional fill color for the area outside the rotated</span>
<span class="sd">            image (default=0).</span>
<span class="sd">            If it is a 3-tuple, it is used for R, G, B channels respectively.</span>
<span class="sd">            If it is an int, it is used for all RGB channels. Default is 0.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomRotation(30),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_random_rotation</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">degrees</span><span class="p">,</span> <span class="n">resample</span><span class="o">=</span><span class="n">Inter</span><span class="o">.</span><span class="n">NEAREST</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">degrees</span> <span class="o">=</span> <span class="n">degrees</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resample</span> <span class="o">=</span> <span class="n">DE_PY_INTER_MODE</span><span class="p">[</span><span class="n">resample</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expand</span> <span class="o">=</span> <span class="n">expand</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">center</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_value</span> <span class="o">=</span> <span class="n">fill_value</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be rotated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Rotated image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">random_rotation</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">resample</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expand</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill_value</span><span class="p">)</span></div>


<div class="viewcode-block" id="RandomOrder"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.RandomOrder">[docs]</a><span class="k">class</span> <span class="nc">RandomOrder</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Perform a series of transforms to the input PIL image in a random oreder.</span>

<span class="sd">    Args:</span>
<span class="sd">        transforms (list): List of the transformations to be applied.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; transforms_list = [py_transforms.CenterCrop(64), py_transforms.RandomRotation(30)]</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomOrder(transforms_list),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_transforms_list</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transforms</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transforms</span> <span class="o">=</span> <span class="n">transforms</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be applied transformations in a random order.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Transformed image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">random_order</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transforms</span><span class="p">)</span></div>


<div class="viewcode-block" id="RandomApply"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.RandomApply">[docs]</a><span class="k">class</span> <span class="nc">RandomApply</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Randomly perform a series of transforms with a given probability.</span>

<span class="sd">    Args:</span>
<span class="sd">        transforms (list): List of transformations to be applied.</span>
<span class="sd">        prob (float, optional): The probability to apply the transformation list (default=0.5).</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; transforms_list = [py_transforms.CenterCrop(64), py_transforms.RandomRotation(30)]</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomApply(transforms_list, prob=0.6),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_random_apply</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transforms</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="mf">0.5</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prob</span> <span class="o">=</span> <span class="n">prob</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transforms</span> <span class="o">=</span> <span class="n">transforms</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be randomly applied a list transformations.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Transformed image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">random_apply</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transforms</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob</span><span class="p">)</span></div>


<div class="viewcode-block" id="RandomChoice"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.RandomChoice">[docs]</a><span class="k">class</span> <span class="nc">RandomChoice</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Randomly select one transform from a series of transforms and applies that on the image.</span>

<span class="sd">    Args:</span>
<span class="sd">         transforms (list): List of transformations to be chosen from to apply.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; transforms_list = [py_transforms.CenterCrop(64), py_transforms.RandomRotation(30)]</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomChoice(transforms_list),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_transforms_list</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transforms</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transforms</span> <span class="o">=</span> <span class="n">transforms</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be applied transformation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Transformed image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">random_choice</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transforms</span><span class="p">)</span></div>


<div class="viewcode-block" id="FiveCrop"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.FiveCrop">[docs]</a><span class="k">class</span> <span class="nc">FiveCrop</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate 5 cropped images (one central and four corners).</span>

<span class="sd">    Args:</span>
<span class="sd">        size (int or sequence): The output size of the crop.</span>
<span class="sd">            If size is an int, a square crop of size (size, size) is returned.</span>
<span class="sd">            If size is a sequence of length 2, it should be (height, width).</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.FiveCrop(size),</span>
<span class="sd">        &gt;&gt;&gt;                          # 4D stack of 5 images</span>
<span class="sd">        &gt;&gt;&gt;                          lambda images: numpy.stack([py_transforms.ToTensor()(image) for image in images])])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_crop</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): PIL Image to be cropped.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img_tuple (tuple), a tuple of 5 PIL images</span>
<span class="sd">                (top_left, top_right, bottom_left, bottom_right, center).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">five_crop</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span></div>


<div class="viewcode-block" id="TenCrop"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.TenCrop">[docs]</a><span class="k">class</span> <span class="nc">TenCrop</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate 10 cropped images (first 5 from FiveCrop, second 5 from their flipped version).</span>

<span class="sd">    Args:</span>
<span class="sd">        size (int or sequence): The output size of the crop.</span>
<span class="sd">            If size is an int, a square crop of size (size, size) is returned.</span>
<span class="sd">            If size is a sequence of length 2, it should be (height, width).</span>
<span class="sd">        use_vertical_flip (bool, optional): Flip the image vertically instead of horizontally</span>
<span class="sd">            if set to True (default=False).</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.TenCrop(size),</span>
<span class="sd">        &gt;&gt;&gt;                          # 4D stack of 10 images</span>
<span class="sd">        &gt;&gt;&gt;                          lambda images: numpy.stack([py_transforms.ToTensor()(image) for image in images])])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_ten_crop</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">use_vertical_flip</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_vertical_flip</span> <span class="o">=</span> <span class="n">use_vertical_flip</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): PIL Image to be cropped.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img_tuple (tuple), a tuple of 10 PIL images</span>
<span class="sd">                (top_left, top_right, bottom_left, bottom_right, center) of original image +</span>
<span class="sd">                (top_left, top_right, bottom_left, bottom_right, center) of flipped image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">ten_crop</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vertical_flip</span><span class="p">)</span></div>


<div class="viewcode-block" id="Grayscale"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.Grayscale">[docs]</a><span class="k">class</span> <span class="nc">Grayscale</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the input PIL image to grayscale image.</span>

<span class="sd">    Args:</span>
<span class="sd">        num_output_channels (int): Number of channels of the output grayscale image (1 or 3).</span>
<span class="sd">            Default is 1. If set to 3, the returned image has 3 identical RGB channels.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.Grayscale(3),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_num_channels</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_output_channels</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_output_channels</span> <span class="o">=</span> <span class="n">num_output_channels</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): PIL image to be converted to grayscale.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), grayscaled image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">grayscale</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">num_output_channels</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_output_channels</span><span class="p">)</span></div>


<div class="viewcode-block" id="RandomGrayscale"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.RandomGrayscale">[docs]</a><span class="k">class</span> <span class="nc">RandomGrayscale</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Randomly convert the input image into grayscale image with a given probability.</span>

<span class="sd">    Args:</span>
<span class="sd">        prob (float, optional): Probability of the image being converted to grayscale (default=0.1).</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomGrayscale(0.3),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_prob</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prob</span> <span class="o">=</span> <span class="n">prob</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): PIL image to be converted to grayscale randomly.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Randomly grayscale image, same number of channels as input image.</span>
<span class="sd">                If input image has 1 channel, the output grayscale image is 1 channel.</span>
<span class="sd">                If input image has 3 channels, the output image has 3 identical grayscale channels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">img</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;L&#39;</span><span class="p">:</span>
            <span class="n">num_output_channels</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">num_output_channels</span> <span class="o">=</span> <span class="mi">3</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob</span> <span class="o">&gt;</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">grayscale</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">num_output_channels</span><span class="o">=</span><span class="n">num_output_channels</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">img</span></div>


<div class="viewcode-block" id="Pad"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.Pad">[docs]</a><span class="k">class</span> <span class="nc">Pad</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pad the input PIL image according to padding parameters.</span>

<span class="sd">    Args:</span>
<span class="sd">        padding (int or sequence): The number of pixels to pad the image.</span>
<span class="sd">            If a single number is provided, it pads all borders with this value.</span>
<span class="sd">            If a tuple or list of 2 values are provided, it pads the (left and top)</span>
<span class="sd">            with the first value and (right and bottom) with the second value.</span>
<span class="sd">            If 4 values are provided as a list or tuple,</span>
<span class="sd">            it pads the left, top, right and bottom respectively.</span>
<span class="sd">        fill_value (int or tuple, optional): Filling value (default=0). The pixel intensity</span>
<span class="sd">            of the borders if the padding_mode is Border.CONSTANT.</span>
<span class="sd">            If it is a 3-tuple, it is used to fill R, G, B channels respectively.</span>
<span class="sd">        padding_mode (Border mode, optional): The method of padding (default=Border.CONSTANT).</span>
<span class="sd">            Can be any of [Border.CONSTANT, Border.EDGE, Border.REFLECT, Border.SYMMETRIC].</span>

<span class="sd">            - Border.CONSTANT, means it fills the border with constant values.</span>

<span class="sd">            - Border.EDGE, means it pads with the last value on the edge.</span>

<span class="sd">            - Border.REFLECT, means it reflects the values on the edge omitting the last</span>
<span class="sd">              value of edge.</span>

<span class="sd">            - Border.SYMMETRIC, means it reflects the values on the edge repeating the last</span>
<span class="sd">              value of edge.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          # adds 10 pixels (default black) to each side of the border of the image</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.Pad(padding=10),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_pad</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">padding</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padding_mode</span><span class="o">=</span><span class="n">Border</span><span class="o">.</span><span class="n">CONSTANT</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="o">=</span> <span class="n">padding</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_value</span> <span class="o">=</span> <span class="n">fill_value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">padding_mode</span> <span class="o">=</span> <span class="n">DE_PY_BORDER_TYPE</span><span class="p">[</span><span class="n">padding_mode</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be padded.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Padded image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">pad</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding_mode</span><span class="p">)</span></div>


<div class="viewcode-block" id="RandomPerspective"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.RandomPerspective">[docs]</a><span class="k">class</span> <span class="nc">RandomPerspective</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Randomly apply perspective transformation to the input PIL Image with a given probability.</span>

<span class="sd">    Args:</span>
<span class="sd">        distortion_scale (float, optional): The scale of distortion, float between 0 and 1 (default=0.5).</span>
<span class="sd">        prob (float, optional): Probability of the image being applied perspective transformation (default=0.5).</span>
<span class="sd">        interpolation (Inter mode, optional): Image interpolation mode (default=Inter.BICUBIC).</span>
<span class="sd">            It can be any of [Inter.BILINEAR, Inter.NEAREST, Inter.BICUBIC].</span>

<span class="sd">            - Inter.BILINEAR, means interpolation method is bilinear interpolation.</span>

<span class="sd">            - Inter.NEAREST, means interpolation method is nearest-neighbor interpolation.</span>

<span class="sd">            - Inter.BICUBIC, means interpolation method is bicubic interpolation.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomPerspective(prob=0.1),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_random_perspective</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distortion_scale</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="n">Inter</span><span class="o">.</span><span class="n">BICUBIC</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">distortion_scale</span> <span class="o">=</span> <span class="n">distortion_scale</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prob</span> <span class="o">=</span> <span class="n">prob</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span> <span class="o">=</span> <span class="n">DE_PY_INTER_MODE</span><span class="p">[</span><span class="n">interpolation</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): PIL Image to be applied perspective transformation randomly.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Image after being perspectively transformed randomly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob</span> <span class="o">&gt;</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">():</span>
            <span class="n">start_points</span><span class="p">,</span> <span class="n">end_points</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">get_perspective_params</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">distortion_scale</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">perspective</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">start_points</span><span class="p">,</span> <span class="n">end_points</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">img</span></div>


<div class="viewcode-block" id="RandomErasing"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.RandomErasing">[docs]</a><span class="k">class</span> <span class="nc">RandomErasing</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Erase the pixels, within a selected rectangle region, to the given value.</span>

<span class="sd">    Randomly applied on the input Numpy image array with a given probability.</span>

<span class="sd">    Zhun Zhong et al. &#39;Random Erasing Data Augmentation&#39; 2017 See https://arxiv.org/pdf/1708.04896.pdf</span>

<span class="sd">    Args:</span>
<span class="sd">        prob (float, optional): Probability of applying RandomErasing (default=0.5).</span>
<span class="sd">        scale (sequence of floats, optional): Range of the relative erase area to the</span>
<span class="sd">            original image (default=(0.02, 0.33)).</span>
<span class="sd">        ratio (sequence of floats, optional): Range of the aspect ratio of the erase</span>
<span class="sd">            area (default=(0.3, 3.3)).</span>
<span class="sd">        value (int or sequence): Erasing value (default=0).</span>
<span class="sd">            If value is a single int, it is applied to all pixels to be erases.</span>
<span class="sd">            If value is a sequence of length 3, it is applied to R, G, B channels respectively.</span>
<span class="sd">            If value is a str &#39;random&#39;, the erase value will be obtained from a standard normal distribution.</span>
<span class="sd">        inplace (bool, optional): Apply this transform inplace (default=False).</span>
<span class="sd">        max_attempts (int, optional): The maximum number of attempts to propose a valid</span>
<span class="sd">            erase_area (default=10). If exceeded, return the original image.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomErasing(value=&#39;random&#39;)])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_random_erasing</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="p">(</span><span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.33</span><span class="p">),</span> <span class="n">ratio</span><span class="o">=</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">3.3</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">max_attempts</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prob</span> <span class="o">=</span> <span class="n">prob</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ratio</span> <span class="o">=</span> <span class="n">ratio</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inplace</span> <span class="o">=</span> <span class="n">inplace</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_attempts</span> <span class="o">=</span> <span class="n">max_attempts</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">np_img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            np_img (numpy.ndarray): Numpy image array of shape (C, H, W) to be randomly erased.</span>

<span class="sd">        Returns:</span>
<span class="sd">            np_img (numpy.ndarray), Erased Numpy image array.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bounded</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob</span> <span class="o">&gt;</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">():</span>
            <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">erase_h</span><span class="p">,</span> <span class="n">erase_w</span><span class="p">,</span> <span class="n">erase_value</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">get_erase_params</span><span class="p">(</span><span class="n">np_img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio</span><span class="p">,</span>
                                                                        <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">bounded</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_attempts</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">erase</span><span class="p">(</span><span class="n">np_img</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">erase_h</span><span class="p">,</span> <span class="n">erase_w</span><span class="p">,</span> <span class="n">erase_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">inplace</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np_img</span></div>


<div class="viewcode-block" id="Cutout"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.Cutout">[docs]</a><span class="k">class</span> <span class="nc">Cutout</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Randomly cut (mask) out a given number of square patches from the input Numpy image array.</span>

<span class="sd">    Terrance DeVries and Graham W. Taylor &#39;Improved Regularization of Convolutional Neural Networks with Cutout&#39; 2017</span>
<span class="sd">    See https://arxiv.org/pdf/1708.04552.pdf</span>

<span class="sd">    Args:</span>
<span class="sd">        length (int): The side length of each square patch.</span>
<span class="sd">        num_patches (int, optional): Number of patches to be cut out of an image (default=1).</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.Cutout(80)])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_cutout</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">num_patches</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">length</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_patches</span> <span class="o">=</span> <span class="n">num_patches</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">np_img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            np_img (numpy.ndarray): Numpy image array of shape (C, H, W) to be cut out.</span>

<span class="sd">        Returns:</span>
<span class="sd">            np_img (numpy.ndarray), Numpy image array with square patches cut out.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">np_img</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;img should be Numpy array. Got </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">np_img</span><span class="p">)))</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">image_h</span><span class="p">,</span> <span class="n">image_w</span> <span class="o">=</span> <span class="n">np_img</span><span class="o">.</span><span class="n">shape</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">image_h</span> <span class="o">*</span> <span class="n">image_w</span><span class="p">)</span>
        <span class="n">bounded</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_patches</span><span class="p">):</span>
            <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">erase_h</span><span class="p">,</span> <span class="n">erase_w</span><span class="p">,</span> <span class="n">erase_value</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">get_erase_params</span><span class="p">(</span><span class="n">np_img</span><span class="p">,</span> <span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">scale</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">bounded</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">np_img</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">erase</span><span class="p">(</span><span class="n">np_img</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">erase_h</span><span class="p">,</span> <span class="n">erase_w</span><span class="p">,</span> <span class="n">erase_value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np_img</span></div>


<div class="viewcode-block" id="LinearTransformation"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.LinearTransformation">[docs]</a><span class="k">class</span> <span class="nc">LinearTransformation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply linear transformation to the input Numpy image array, given a square transformation matrix and</span>
<span class="sd">    a mean_vector.</span>

<span class="sd">    The transformation first flattens the input array and subtract mean_vector from it, then computes the</span>
<span class="sd">    dot product with the transformation matrix, and reshapes it back to its original shape.</span>

<span class="sd">    Args:</span>
<span class="sd">        transformation_matrix (numpy.ndarray): a square transformation matrix of shape (D, D), D = C x H x W.</span>
<span class="sd">        mean_vector (numpy.ndarray): a numpy ndarray of shape (D,) where D = C x H x W.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.Resize(256),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.LinearTransformation(transformation_matrix, mean_vector)])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_linear_transform</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transformation_matrix</span><span class="p">,</span> <span class="n">mean_vector</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformation_matrix</span> <span class="o">=</span> <span class="n">transformation_matrix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mean_vector</span> <span class="o">=</span> <span class="n">mean_vector</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">np_img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            np_img (numpy.ndarray): Numpy image array of shape (C, H, W) to be linear transformed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            np_img (numpy.ndarray), Linear transformed image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">linear_transform</span><span class="p">(</span><span class="n">np_img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transformation_matrix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mean_vector</span><span class="p">)</span></div>


<div class="viewcode-block" id="RandomAffine"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.RandomAffine">[docs]</a><span class="k">class</span> <span class="nc">RandomAffine</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply Random affine transformation to the input PIL image.</span>

<span class="sd">    Args:</span>
<span class="sd">        degrees (int or float or sequence): Range of the rotation degrees.</span>
<span class="sd">            If degrees is a number, the range will be (-degrees, degrees).</span>
<span class="sd">            If degrees is a sequence, it should be (min, max).</span>
<span class="sd">        translate (sequence, optional): Sequence (tx, ty) of maximum translation in</span>
<span class="sd">            x(horizontal) and y(vertical) directions (default=None).</span>
<span class="sd">            The horizontal and vertical shift is selected randomly from the range:</span>
<span class="sd">            (-tx*width, tx*width) and (-ty*height, ty*height), respectively.</span>
<span class="sd">            If None, no translations gets applied.</span>
<span class="sd">        scale (sequence, optional): Scaling factor interval (default=None, riginal scale is used).</span>
<span class="sd">        shear (int or float or sequence, optional): Range of shear factor (default=None).</span>
<span class="sd">            If a number &#39;shear&#39;, then a shear parallel to the x axis in the range of (-shear, +shear) is applied.</span>
<span class="sd">            If a tuple or list of size 2, then a shear parallel to the x axis in the range of (shear[0], shear[1])</span>
<span class="sd">            is applied.</span>
<span class="sd">            If a tuple of list of size 4, then a shear parallel to x axis in the range of (shear[0], shear[1])</span>
<span class="sd">            and a shear parallel to y axis in the range of (shear[2], shear[3]) is applied.</span>
<span class="sd">            If None, no shear is applied.</span>
<span class="sd">        resample (Inter mode, optional): An optional resampling filter (default=Inter.NEAREST).</span>
<span class="sd">            If omitted, or if the image has mode &quot;1&quot; or &quot;P&quot;, it is set to be Inter.NEAREST.</span>
<span class="sd">            It can be any of [Inter.BILINEAR, Inter.NEAREST, Inter.BICUBIC].</span>

<span class="sd">            - Inter.BILINEAR, means resample method is bilinear interpolation.</span>

<span class="sd">            - Inter.NEAREST, means resample method is nearest-neighbor interpolation.</span>

<span class="sd">            - Inter.BICUBIC, means resample method is bicubic interpolation.</span>

<span class="sd">        fill_value (tuple or int, optional): Optional fill_value to fill the area outside the transform</span>
<span class="sd">            in the output image. Used only in Pillow versions &gt; 5.0.0 (default=0, filling is performed).</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If degrees is negative.</span>
<span class="sd">        ValueError: If translation value is not between 0 and 1.</span>
<span class="sd">        ValueError: If scale is not positive.</span>
<span class="sd">        ValueError: If shear is a number but is not positive.</span>
<span class="sd">        TypeError: If degrees is not a number or a list or a tuple.</span>
<span class="sd">            If degrees is a list or tuple, its length is not 2.</span>
<span class="sd">        TypeError: If translate is specified but is not list or a tuple of length 2.</span>
<span class="sd">        TypeError: If scale is not a list or tuple of length 2.</span>
<span class="sd">        TypeError: If shear is not a list or tuple of length 2 or 4.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomAffine(degrees=15, translate=(0.1, 0.1), scale=(0.9, 1.1)),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_random_affine</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">degrees</span><span class="p">,</span> <span class="n">translate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shear</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resample</span><span class="o">=</span><span class="n">Inter</span><span class="o">.</span><span class="n">NEAREST</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="c1"># Parameter checking</span>
        <span class="c1"># rotation</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">degrees</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">degrees</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;If degrees is a single number, it must be positive.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">degrees</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">degrees</span><span class="p">,</span> <span class="n">degrees</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">degrees</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">degrees</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">degrees</span> <span class="o">=</span> <span class="n">degrees</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;If degrees is a list or tuple, it must be of length 2.&quot;</span><span class="p">)</span>

        <span class="c1"># translation</span>
        <span class="k">if</span> <span class="n">translate</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">translate</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">translate</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">translate</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;translation values should be between 0 and 1&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;translate should be a list or tuple of length 2.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">translate</span> <span class="o">=</span> <span class="n">translate</span>

        <span class="c1"># scale</span>
        <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">scale</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">scale</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">s</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;scale values should be positive&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;scale should be a list or tuple of length 2.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale_ranges</span> <span class="o">=</span> <span class="n">scale</span>

        <span class="c1"># shear</span>
        <span class="k">if</span> <span class="n">shear</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">shear</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">shear</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;If shear is a single number, it must be positive.&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">shear</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">shear</span><span class="p">,</span> <span class="n">shear</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">shear</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">shear</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">shear</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">):</span>
                <span class="c1"># X-Axis shear with [min, max]</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shear</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">shear</span> <span class="o">=</span> <span class="p">[</span><span class="n">shear</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">shear</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">shear</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">shear</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">shear</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;shear should be a list or tuple and it must be of length 2 or 4.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shear</span> <span class="o">=</span> <span class="n">shear</span>

        <span class="c1"># resample</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resample</span> <span class="o">=</span> <span class="n">DE_PY_INTER_MODE</span><span class="p">[</span><span class="n">resample</span><span class="p">]</span>

        <span class="c1"># fill_value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_value</span> <span class="o">=</span> <span class="n">fill_value</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be applied affine transformation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Randomly affine transformed image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># rotation</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">degrees</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">degrees</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="c1"># translation</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">translate</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">max_dx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">max_dy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translate</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">translations</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="n">max_dx</span><span class="p">,</span> <span class="n">max_dx</span><span class="p">)),</span>
                            <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="n">max_dy</span><span class="p">,</span> <span class="n">max_dy</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">translations</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># scale</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_ranges</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale_ranges</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_ranges</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="mf">1.0</span>

        <span class="c1"># shear</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">shear</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shear</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">shear</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shear</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">shear</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="mf">0.</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shear</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="n">shear</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shear</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">shear</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                         <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shear</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">shear</span><span class="p">[</span><span class="mi">3</span><span class="p">])]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">shear</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">random_affine</span><span class="p">(</span><span class="n">img</span><span class="p">,</span>
                                  <span class="n">angle</span><span class="p">,</span>
                                  <span class="n">translations</span><span class="p">,</span>
                                  <span class="n">scale</span><span class="p">,</span>
                                  <span class="n">shear</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">resample</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">fill_value</span><span class="p">)</span></div>


<div class="viewcode-block" id="MixUp"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.MixUp">[docs]</a><span class="k">class</span> <span class="nc">MixUp</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply mix up transformation to the input image and label, make one input data combined with others.</span>

<span class="sd">    Args:</span>
<span class="sd">        batch_size (int): the batch size of dataset.</span>
<span class="sd">        alpha (float):  the mix up rate.</span>
<span class="sd">        is_single (bool): for deciding using single batch or muti batch mix up transformation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_mix_up</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">batch_size</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">is_single</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_first</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">batch_size</span> <span class="o">=</span> <span class="n">batch_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">alpha</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_single</span> <span class="o">=</span> <span class="n">is_single</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            image (numpy.ndarray): numpy Image to be applied mix up transformation.</span>
<span class="sd">            label(numpy.ndarray): numpy label to be applied mix up transformation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            image (numpy.ndarray): numpy Image after being applied mix up transformation.</span>
<span class="sd">            label(numpy.ndarray): numpy label after being applied mix up transformation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_single</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">mix_up_single</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">batch_size</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">mix_up_muti</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">batch_size</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">)</span></div>


<div class="viewcode-block" id="RgbToHsv"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.RgbToHsv">[docs]</a><span class="k">class</span> <span class="nc">RgbToHsv</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a Numpy RGB image or one batch Numpy RGB images to HSV images.</span>

<span class="sd">    Args:</span>
<span class="sd">        is_hwc (bool): The flag of image shape, (H, W, C) or (N, H, W, C) if True</span>
<span class="sd">                       and (C, H, W) or (N, C, H, W) if False (default=False).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_hwc</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_hwc</span> <span class="o">=</span> <span class="n">is_hwc</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rgb_imgs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            rgb_imgs (numpy.ndarray): Numpy RGB images array of shape (H, W, C) or (N, H, W, C),</span>
<span class="sd">                                      or (C, H, W) or (N, C, H, W) to be converted.</span>

<span class="sd">        Returns:</span>
<span class="sd">            np_hsv_img (numpy.ndarray), Numpy HSV images with same shape of rgb_imgs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">rgb_to_hsvs</span><span class="p">(</span><span class="n">rgb_imgs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_hwc</span><span class="p">)</span></div>


<div class="viewcode-block" id="HsvToRgb"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.HsvToRgb">[docs]</a><span class="k">class</span> <span class="nc">HsvToRgb</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a Numpy HSV image or one batch Numpy HSV images to RGB images.</span>

<span class="sd">    Args:</span>
<span class="sd">        is_hwc (bool): The flag of image shape, (H, W, C) or (N, H, W, C) if True</span>
<span class="sd">                       and (C, H, W) or (N, C, H, W) if False (default=False).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_hwc</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_hwc</span> <span class="o">=</span> <span class="n">is_hwc</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hsv_imgs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            hsv_imgs (numpy.ndarray): Numpy HSV images array of shape (H, W, C) or (N, H, W, C),</span>
<span class="sd">                                      or (C, H, W) or (N, C, H, W) to be converted.</span>

<span class="sd">        Returns:</span>
<span class="sd">            rgb_imgs (numpy.ndarray), Numpy RGB image with same shape of hsv_imgs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">hsv_to_rgbs</span><span class="p">(</span><span class="n">hsv_imgs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_hwc</span><span class="p">)</span></div>


<div class="viewcode-block" id="RandomColor"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.RandomColor">[docs]</a><span class="k">class</span> <span class="nc">RandomColor</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adjust the color of the input PIL image by a random degree.</span>

<span class="sd">    Args:</span>
<span class="sd">        degrees (sequence): Range of random color adjustment degrees.</span>
<span class="sd">            It should be in (min, max) format (default=(0.1,1.9)).</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomColor((0.5,1.5)),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_positive_degrees</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.9</span><span class="p">)):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">degrees</span> <span class="o">=</span> <span class="n">degrees</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be color adjusted.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Color adjusted image.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">random_color</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">degrees</span><span class="p">)</span></div>


<div class="viewcode-block" id="RandomSharpness"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.RandomSharpness">[docs]</a><span class="k">class</span> <span class="nc">RandomSharpness</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adjust the sharpness of the input PIL image by a random degree.</span>

<span class="sd">    Args:</span>
<span class="sd">        degrees (sequence): Range of random sharpness adjustment degrees.</span>
<span class="sd">            It should be in (min, max) format (default=(0.1,1.9)).</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.RandomSharpness((0.5,1.5)),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_positive_degrees</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">degrees</span><span class="o">=</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.9</span><span class="p">)):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">degrees</span> <span class="o">=</span> <span class="n">degrees</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be sharpness adjusted.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Color adjusted image.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">random_sharpness</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">degrees</span><span class="p">)</span></div>


<div class="viewcode-block" id="AutoContrast"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.AutoContrast">[docs]</a><span class="k">class</span> <span class="nc">AutoContrast</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Automatically maximize the contrast of the input PIL image.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.AutoContrast(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be augmented with AutoContrast.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Augmented image.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">auto_contrast</span><span class="p">(</span><span class="n">img</span><span class="p">)</span></div>


<div class="viewcode-block" id="Invert"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.Invert">[docs]</a><span class="k">class</span> <span class="nc">Invert</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Invert colors of input PIL image.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.Invert(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be color Inverted.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Color inverted image.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">invert_color</span><span class="p">(</span><span class="n">img</span><span class="p">)</span></div>


<div class="viewcode-block" id="Equalize"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.Equalize">[docs]</a><span class="k">class</span> <span class="nc">Equalize</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Equalize the histogram of input PIL image.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.Equalize(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be equalized.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Equalized image.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">equalize</span><span class="p">(</span><span class="n">img</span><span class="p">)</span></div>


<div class="viewcode-block" id="UniformAugment"><a class="viewcode-back" href="../../../../../api/python/mindspore/mindspore.dataset.transforms.vision.py_transforms.html#mindspore.dataset.transforms.vision.py_transforms.UniformAugment">[docs]</a><span class="k">class</span> <span class="nc">UniformAugment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Uniformly select and apply a number of transforms sequentially from</span>
<span class="sd">    a list of transforms. Randomly assigns a probability to each transform for</span>
<span class="sd">    each image to decide whether apply it or not.</span>
<span class="sd">    All the transforms in transform list must have the same input/output data type.</span>

<span class="sd">    Args:</span>
<span class="sd">         transforms (list): List of transformations to be chosen from to apply.</span>
<span class="sd">         num_ops (int, optional): number of transforms to sequentially apply (default=2).</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; transforms_list = [py_transforms.CenterCrop(64),</span>
<span class="sd">        &gt;&gt;&gt;                    py_transforms.RandomColor(),</span>
<span class="sd">        &gt;&gt;&gt;                    py_transforms.RandomSharpness(),</span>
<span class="sd">        &gt;&gt;&gt;                    py_transforms.RandomRotation(30)]</span>
<span class="sd">        &gt;&gt;&gt; py_transforms.ComposeOp([py_transforms.Decode(),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.UniformAugment(transforms_list),</span>
<span class="sd">        &gt;&gt;&gt;                          py_transforms.ToTensor()])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@check_uniform_augment_py</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transforms</span><span class="p">,</span> <span class="n">num_ops</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transforms</span> <span class="o">=</span> <span class="n">transforms</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_ops</span> <span class="o">=</span> <span class="n">num_ops</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call method.</span>

<span class="sd">        Args:</span>
<span class="sd">            img (PIL Image): Image to be applied transformation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            img (PIL Image), Transformed image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">uniform_augment</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transforms</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_ops</span><span class="p">)</span></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>