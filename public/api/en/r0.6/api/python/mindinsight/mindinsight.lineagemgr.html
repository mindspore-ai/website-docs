

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mindinsight.lineagemgr &mdash; MindSpore master documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="mindarmour" href="../mindarmour/mindarmour.html" />
    <link rel="prev" title="mindspore.profiler" href="../mindspore/mindspore.profiler.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> MindSpore
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">MindSpore Python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.html">mindspore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.dtype.html">mindspore.dtype</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.common.initializer.html">mindspore.common.initializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.communication.html">mindspore.communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.context.html">mindspore.context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.hub.html">mindspore.hub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.nn.html">mindspore.nn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.nn.dynamic_lr.html">mindspore.nn.dynamic_lr</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.nn.learning_rate_schedule.html">mindspore.nn.learning_rate_schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.ops.html">mindspore.ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.ops.composite.html">mindspore.ops.composite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.ops.operations.html">mindspore.ops.operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.parallel.html">mindspore.parallel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.train.html">mindspore.train</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.dataset.html">mindspore.dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.dataset.config.html">mindspore.dataset.config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.dataset.text.html">mindspore.dataset.text</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.dataset.transforms.html">mindspore.dataset.transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.dataset.transforms.vision.html">mindspore.dataset.transforms.vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.mindrecord.html">mindspore.mindrecord</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.profiler.html">mindspore.profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">MindInsight Python API</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">mindinsight.lineagemgr</a></li>
</ul>
<p class="caption"><span class="caption-text">MindArmour Python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mindarmour/mindarmour.html">mindarmour</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindarmour/mindarmour.utils.html">mindarmour.utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindarmour/mindarmour.evaluations.html">mindarmour.evaluations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindarmour/mindarmour.detectors.html">mindarmour.detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindarmour/mindarmour.attacks.html">mindarmour.attacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindarmour/mindarmour.defenses.html">mindarmour.defenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindarmour/mindarmour.fuzzing.html">mindarmour.fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindarmour/mindarmour.diff_privacy.html">mindarmour.diff_privacy</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">MindSpore</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>mindinsight.lineagemgr</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/api/python/mindinsight/mindinsight.lineagemgr.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-mindinsight.lineagemgr">
<span id="mindinsight-lineagemgr"></span><h1>mindinsight.lineagemgr<a class="headerlink" href="#module-mindinsight.lineagemgr" title="Permalink to this headline">¶</a></h1>
<p>Lineagemgr Module Introduction.</p>
<p>This module provides Python APIs to query the lineage of models.
The APIs can be used to get the lineage information of the models. For example,
what hyperparameter is used in the model training, which model has the highest
accuracy among all the versions, etc.</p>
<dl class="function">
<dt id="mindinsight.lineagemgr.get_summary_lineage">
<code class="sig-prename descclassname">mindinsight.lineagemgr.</code><code class="sig-name descname">get_summary_lineage</code><span class="sig-paren">(</span><em class="sig-param">summary_dir</em>, <em class="sig-param">keys=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/mindinsight/lineagemgr/api/model.html#get_summary_lineage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindinsight.lineagemgr.get_summary_lineage" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the lineage information according to summary directory and keys.</p>
<p>The function queries lineage information of single train process
corresponding to the given summary directory. Users can query the
information according to <cite>keys</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>summary_dir</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The summary directory. It contains summary logs for
one training.</p></li>
<li><p><strong>keys</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – The filter keys of lineage information. The acceptable
keys are <cite>metric</cite>, <cite>user_defined</cite>, <cite>hyper_parameters</cite>, <cite>algorithm</cite>,
<cite>train_dataset</cite>, <cite>model</cite>, <cite>valid_dataset</cite> and <cite>dataset_graph</cite>.
If it is <cite>None</cite>, all information will be returned. Default: None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict, the lineage information for one training.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>LineageParamSummaryPathError</strong> – If summary path is invalid.</p></li>
<li><p><strong>LineageQuerySummaryDataError</strong> – If querying summary data fails.</p></li>
<li><p><strong>LineageFileNotFoundError</strong> – If the summary log file is not found.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">summary_dir</span> <span class="o">=</span> <span class="s2">&quot;/path/to/summary&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_lineage_info</span> <span class="o">=</span> <span class="n">get_summary_lineage</span><span class="p">(</span><span class="n">summary_dir</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hyper_parameters</span> <span class="o">=</span> <span class="n">get_summary_lineage</span><span class="p">(</span><span class="n">summary_dir</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;hyper_parameters&quot;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mindinsight.lineagemgr.filter_summary_lineage">
<code class="sig-prename descclassname">mindinsight.lineagemgr.</code><code class="sig-name descname">filter_summary_lineage</code><span class="sig-paren">(</span><em class="sig-param">summary_base_dir</em>, <em class="sig-param">search_condition=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/mindinsight/lineagemgr/api/model.html#filter_summary_lineage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindinsight.lineagemgr.filter_summary_lineage" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the lineage information under summary base directory according to search condition.</p>
<p>Users can filter and sort all lineage information according to the search
condition. The supported filter fields include <cite>summary_dir</cite>, <cite>network</cite>,
etc. The filter conditions include <cite>eq</cite>, <cite>lt</cite>, <cite>gt</cite>, <cite>le</cite>, <cite>ge</cite> and <cite>in</cite>.
If the value type of filter condition is <cite>str</cite>, such as summary_dir and
lineage_type, then its key can only be <cite>in</cite> and <cite>eq</cite>. At the same time,
the combined use of these fields and conditions is supported. If you want
to sort based on filter fields, the field of <cite>sorted_name</cite> and <cite>sorted_type</cite>
should be specified.</p>
<p>Users can use <cite>lineage_type</cite> to decide what kind of lineage information to
query. If the <cite>lineage_type</cite> is not defined, the query result is all lineage
information.</p>
<p>Users can paginate query result based on <cite>offset</cite> and <cite>limit</cite>. The <cite>offset</cite>
refers to page number. The <cite>limit</cite> refers to the number in one page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>summary_base_dir</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The summary base directory. It contains summary
directories generated by training.</p></li>
<li><p><strong>search_condition</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – <p>The search condition. When filtering and
sorting, in addition to the following supported fields, fields
prefixed with <cite>metric/</cite> and <cite>user_defined/</cite> are also supported.
For example, the field should be <cite>metric/accuracy</cite> if the key
of <cite>metrics</cite> parameter is <cite>accuracy</cite>. The fields prefixed with
<cite>metric/</cite> and <cite>user_defined/</cite> are related to the <cite>metrics</cite>
parameter in the training script and user defined information in
TrainLineage/EvalLineage callback, respectively. Default: None.</p>
<ul>
<li><p>summary_dir (dict): The filter condition of summary directory.</p></li>
<li><p>loss_function (dict): The filter condition of loss function.</p></li>
<li><p>train_dataset_path (dict): The filter condition of train dataset path.</p></li>
<li><p>train_dataset_count (dict): The filter condition of train dataset count.</p></li>
<li><p>test_dataset_path (dict): The filter condition of test dataset path.</p></li>
<li><p>test_dataset_count (dict): The filter condition of test dataset count.</p></li>
<li><p>network (dict): The filter condition of network.</p></li>
<li><p>optimizer (dict): The filter condition of optimizer.</p></li>
<li><p>learning_rate (dict): The filter condition of learning rate.</p></li>
<li><p>epoch (dict): The filter condition of epoch.</p></li>
<li><p>batch_size (dict): The filter condition of batch size.</p></li>
<li><p>device_num (dict): The filter condition of device num.</p></li>
<li><p>loss (dict): The filter condition of loss.</p></li>
<li><p>model_size (dict): The filter condition of model size.</p></li>
<li><p>dataset_mark (dict): The filter condition of dataset mark.</p></li>
<li><p>lineage_type (dict): The filter condition of lineage type. It decides
what kind of lineage information to query. Its value can be <cite>dataset</cite>
or <cite>model</cite>, e.g., {‘in’: [‘dataset’, ‘model’]}, {‘eq’: ‘model’}, etc.
If its values contain <cite>dataset</cite>, the query result will contain the
lineage information related to data augmentation. If its values contain
<cite>model</cite>, the query result will contain model lineage information.
If it is not defined or it is a dict like {‘in’: [‘dataset’, ‘model’]},
the query result is all lineage information.</p></li>
<li><p>offset (int): Page number, the value range is [0, 100000].</p></li>
<li><p>limit (int): The number in one page, the value range is [1, 100].</p></li>
<li><p>sorted_name (str): Specify which field to sort by.</p></li>
<li><p>sorted_type (str): Specify sort order. It can be <cite>ascending</cite> or
<cite>descending</cite>.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict, lineage information under summary base directory according to
search condition.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>LineageSearchConditionParamError</strong> – If search_condition param is invalid.</p></li>
<li><p><strong>LineageParamSummaryPathError</strong> – If summary path is invalid.</p></li>
<li><p><strong>LineageFileNotFoundError</strong> – If the summary log file is not found.</p></li>
<li><p><strong>LineageQuerySummaryDataError</strong> – If querying summary log file data fails.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">summary_base_dir</span> <span class="o">=</span> <span class="s2">&quot;/path/to/summary_base&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">search_condition</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;summary_dir&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="s1">&#39;in&#39;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">summary_base_dir</span><span class="p">,</span> <span class="s1">&#39;summary_1&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">summary_base_dir</span><span class="p">,</span> <span class="s1">&#39;summary_2&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">summary_base_dir</span><span class="p">,</span> <span class="s1">&#39;summary_3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">},</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;loss&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="s1">&#39;gt&#39;</span><span class="p">:</span> <span class="mf">2.0</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">},</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;batch_size&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="s1">&#39;ge&#39;</span><span class="p">:</span> <span class="mi">128</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="s1">&#39;le&#39;</span><span class="p">:</span> <span class="mi">256</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">},</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;metric/accuracy&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="s1">&#39;lt&#39;</span><span class="p">:</span> <span class="mf">0.1</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">},</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;sorted_name&#39;</span><span class="p">:</span> <span class="s1">&#39;summary_dir&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;sorted_type&#39;</span><span class="p">:</span> <span class="s1">&#39;descending&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;limit&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;offset&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;lineage_type&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="s1">&#39;eq&#39;</span><span class="p">:</span> <span class="s1">&#39;model&#39;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_lineage</span> <span class="o">=</span> <span class="n">filter_summary_lineage</span><span class="p">(</span><span class="n">summary_base_dir</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_lineage_filter</span> <span class="o">=</span> <span class="n">filter_summary_lineage</span><span class="p">(</span><span class="n">summary_base_dir</span><span class="p">,</span> <span class="n">search_condition</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../mindarmour/mindarmour.html" class="btn btn-neutral float-right" title="mindarmour" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../mindspore/mindspore.profiler.html" class="btn btn-neutral float-left" title="mindspore.profiler" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, MindSpore

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>