<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>mindarmour.fuzz_testing &mdash; MindSpore master documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="mindarmour.privacy.diff_privacy" href="mindarmour.privacy.diff_privacy.html" />
    <link rel="prev" title="mindarmour.adv_robustness.evaluations" href="mindarmour.adv_robustness.evaluations.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">MindSpore Python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.html">mindspore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.common.initializer.html">mindspore.common.initializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.communication.html">mindspore.communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.compression.html">mindspore.compression</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.context.html">mindspore.context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.dataset.html">mindspore.dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.dataset.config.html">mindspore.dataset.config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.dataset.text.html">mindspore.dataset.text</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.dataset.transforms.html">mindspore.dataset.transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.dataset.vision.html">mindspore.dataset.vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.explainer.html">mindspore.explainer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.mindrecord.html">mindspore.mindrecord</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.nn.html">mindspore.nn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.numpy.html">mindspore.numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.nn.probability.html">mindspore.nn.probability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.ops.html">mindspore.ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.profiler.html">mindspore.profiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore/mindspore.train.html">mindspore.train</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">MindArmour Python API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="mindarmour.html">mindarmour</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.adv_robustness.attacks.html">mindarmour.adv_robustness.attacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.adv_robustness.defenses.html">mindarmour.adv_robustness.defenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.adv_robustness.detectors.html">mindarmour.adv_robustness.detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.adv_robustness.evaluations.html">mindarmour.adv_robustness.evaluations</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">mindarmour.fuzz_testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.privacy.diff_privacy.html">mindarmour.privacy.diff_privacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.privacy.evaluation.html">mindarmour.privacy.evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.privacy.sup_privacy.html">mindarmour.privacy.sup_privacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.utils.html">mindarmour.utils</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">MindSpore Hub Python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mindspore_hub/mindspore_hub.html">mindspore_hub</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">MindSpore Serving Python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mindspore_serving/mindspore_serving.html">mindspore_serving</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">MindQuantum Python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum/mindquantum.html">mindquantum</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>mindarmour.fuzz_testing</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/mindarmour/mindarmour.fuzz_testing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-mindarmour.fuzz_testing">
<span id="mindarmour-fuzz-testing"></span><h1>mindarmour.fuzz_testing<a class="headerlink" href="#module-mindarmour.fuzz_testing" title="Permalink to this headline"></a></h1>
<p>This module provides a neuron coverage-gain based fuzz method to evaluate the
robustness of given model.</p>
<dl class="py class">
<dt class="sig sig-object py" id="mindarmour.fuzz_testing.Fuzzer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindarmour.fuzz_testing.</span></span><span class="sig-name descname"><span class="pre">Fuzzer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neuron_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segmented_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindarmour/fuzz_testing/fuzzing.html#Fuzzer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindarmour.fuzz_testing.Fuzzer" title="Permalink to this definition"></a></dt>
<dd><p>Fuzzing test framework for deep neural networks.</p>
<p>Reference: <a class="reference external" href="https://dl.acm.org/doi/10.1145/3293882.3330579">DeepHunter: A Coverage-Guided Fuzz Testing Framework for Deep
Neural Networks</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_model</strong> (<a class="reference internal" href="../mindspore/mindspore.html#mindspore.Model" title="mindspore.Model"><em>Model</em></a>) – Target fuzz model.</p></li>
<li><p><strong>train_dataset</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Training dataset used for determining
the neurons’ output boundaries.</p></li>
<li><p><strong>neuron_num</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of testing neurons.</p></li>
<li><p><strong>segmented_num</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of segmented sections of neurons’
output intervals. Default: 1000.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mutate_config</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;Blur&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="s1">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;auto_param&#39;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">]}},</span>
<span class="gp">&gt;&gt;&gt; </span>                 <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;Contrast&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="s1">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;factor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">]}},</span>
<span class="gp">&gt;&gt;&gt; </span>                 <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;Translate&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="s1">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;x_bias&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="s1">&#39;y_bias&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">]}},</span>
<span class="gp">&gt;&gt;&gt; </span>                 <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;FGSM&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="s1">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;eps&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">],</span> <span class="s1">&#39;alpha&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">]}}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">train_images</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_fuzz_test</span> <span class="o">=</span> <span class="n">Fuzzer</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">train_images</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">samples</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">preds</span><span class="p">,</span> <span class="n">strategies</span><span class="p">,</span> <span class="n">report</span> <span class="o">=</span> <span class="n">model_fuzz_test</span><span class="o">.</span><span class="n">fuzz_testing</span><span class="p">(</span><span class="n">mutate_config</span><span class="p">,</span> <span class="n">initial_seeds</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mindarmour.fuzz_testing.Fuzzer.fuzzing">
<span class="sig-name descname"><span class="pre">fuzzing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mutate_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_seeds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coverage_metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'KMNC'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_metrics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_iters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mutate_num_per_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindarmour/fuzz_testing/fuzzing.html#Fuzzer.fuzzing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindarmour.fuzz_testing.Fuzzer.fuzzing" title="Permalink to this definition"></a></dt>
<dd><p>Fuzzing tests for deep neural networks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mutate_config</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a>) – Mutate configs. The format is
[{‘method’: ‘Blur’,
‘params’: {‘radius’: [0.1, 0.2], ‘auto_param’: [True, False]}},
{‘method’: ‘Contrast’,
‘params’: {‘factor’: [1, 1.5, 2]}},
{‘method’: ‘FGSM’,
‘params’: {‘eps’: [0.3, 0.2, 0.4], ‘alpha’: [0.1]}},
…].
The supported methods list is in <cite>self._strategies</cite>, and the
params of each method must within the range of optional parameters.
Supported methods are grouped in three types:
Firstly, pixel value based transform methods include:
‘Contrast’, ‘Brightness’, ‘Blur’ and ‘Noise’. Secondly, affine
transform methods include: ‘Translate’, ‘Scale’, ‘Shear’ and
‘Rotate’. Thirdly, attack methods include: ‘FGSM’, ‘PGD’ and ‘MDIIM’.
<cite>mutate_config</cite> must have method in the type of pixel value based
transform methods. The way of setting parameters for first and
second type methods can be seen in ‘mindarmour/fuzz_testing/image_transform.py’.
For third type methods, the optional parameters refer to
<cite>self._attack_param_checklists</cite>.</p></li>
<li><p><strong>initial_seeds</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>]</em>) – Initial seeds used to generate mutated
samples. The format of initial seeds is [[image_data, label],
[…], …] and the label must be one-hot.</p></li>
<li><p><strong>coverage_metric</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Model coverage metric of neural networks. All
supported metrics are: ‘KMNC’, ‘NBC’, ‘SNAC’. Default: ‘KMNC’.</p></li>
<li><p><strong>eval_metrics</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#tuple" title="(in Python v3.8)"><em>tuple</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – Evaluation metrics. If the
type is ‘auto’, it will calculate all the metrics, else if the
type is list or tuple, it will calculate the metrics specified
by user. All supported evaluate methods are ‘accuracy’,
‘attack_success_rate’, ‘kmnc’, ‘nbc’, ‘snac’. Default: ‘auto’.</p></li>
<li><p><strong>max_iters</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Max number of select a seed to mutate.
Default: 10000.</p></li>
<li><p><strong>mutate_num_per_seed</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of mutate times for a seed.
Default: 20.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>list, mutated samples in fuzz_testing.</p></li>
<li><p>list, ground truth labels of mutated samples.</p></li>
<li><p>list, preds of mutated samples.</p></li>
<li><p>list, strategies of mutated samples.</p></li>
<li><p>dict, metrics report of fuzzer.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If the type of <cite>eval_metrics</cite> is not str, list or tuple.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If the type of metric in list <cite>eval_metrics</cite> is not str.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If <cite>eval_metrics</cite> is not equal to ‘auto’ when it’s type is str.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If metric in list <cite>eval_metrics</cite> is not in [‘accuracy’,
    ‘attack_success_rate’, ‘kmnc’, ‘nbc’, ‘snac’].</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindarmour.fuzz_testing.ModelCoverageMetrics">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindarmour.fuzz_testing.</span></span><span class="sig-name descname"><span class="pre">ModelCoverageMetrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neuron_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segmented_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_dataset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#ModelCoverageMetrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindarmour.fuzz_testing.ModelCoverageMetrics" title="Permalink to this definition"></a></dt>
<dd><p>As we all known, each neuron output of a network will have a output range
after training (we call it original range), and test dataset is used to
estimate the accuracy of the trained network. However, neurons’ output
distribution would be different with different test datasets. Therefore,
similar to function fuzz, model fuzz means testing those neurons’ outputs
and estimating the proportion of original range that has emerged with test
datasets.</p>
<p>Reference: <a class="reference external" href="https://arxiv.org/abs/1803.07519">DeepGauge: Multi-Granularity Testing Criteria for Deep
Learning Systems</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<a class="reference internal" href="../mindspore/mindspore.html#mindspore.Model" title="mindspore.Model"><em>Model</em></a>) – The pre-trained model which waiting for testing.</p></li>
<li><p><strong>neuron_num</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of testing neurons.</p></li>
<li><p><strong>segmented_num</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of segmented sections of neurons’ output intervals.</p></li>
<li><p><strong>train_dataset</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Training dataset used for determine
the neurons’ output boundaries.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If neuron_num is too big (for example, bigger than 1e+9).</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">train_images</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_images</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">5000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_fuzz_test</span> <span class="o">=</span> <span class="n">ModelCoverageMetrics</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">train_images</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_fuzz_test</span><span class="o">.</span><span class="n">calculate_coverage</span><span class="p">(</span><span class="n">test_images</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;KMNC of this test is : </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">model_fuzz_test</span><span class="o">.</span><span class="n">get_kmnc</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;NBC of this test is : </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">model_fuzz_test</span><span class="o">.</span><span class="n">get_nbc</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;SNAC of this test is : </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">model_fuzz_test</span><span class="o">.</span><span class="n">get_snac</span><span class="p">())</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mindarmour.fuzz_testing.ModelCoverageMetrics.calculate_coverage">
<span class="sig-name descname"><span class="pre">calculate_coverage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias_coefficient</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">32</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#ModelCoverageMetrics.calculate_coverage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindarmour.fuzz_testing.ModelCoverageMetrics.calculate_coverage" title="Permalink to this definition"></a></dt>
<dd><p>Calculate the testing adequacy of the given dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Data for fuzz test.</p></li>
<li><p><strong>bias_coefficient</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>]</em>) – The coefficient used
for changing the neurons’ output boundaries. Default: 0.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of samples in a predict batch.
Default: 32.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model_fuzz_test</span> <span class="o">=</span> <span class="n">ModelCoverageMetrics</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">train_images</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_fuzz_test</span><span class="o">.</span><span class="n">calculate_coverage</span><span class="p">(</span><span class="n">test_images</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindarmour.fuzz_testing.ModelCoverageMetrics.get_kmnc">
<span class="sig-name descname"><span class="pre">get_kmnc</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#ModelCoverageMetrics.get_kmnc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindarmour.fuzz_testing.ModelCoverageMetrics.get_kmnc" title="Permalink to this definition"></a></dt>
<dd><p>Get the metric of ‘k-multisection neuron coverage’.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>float, the metric of ‘k-multisection neuron coverage’.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model_fuzz_test</span><span class="o">.</span><span class="n">get_kmnc</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindarmour.fuzz_testing.ModelCoverageMetrics.get_nbc">
<span class="sig-name descname"><span class="pre">get_nbc</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#ModelCoverageMetrics.get_nbc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindarmour.fuzz_testing.ModelCoverageMetrics.get_nbc" title="Permalink to this definition"></a></dt>
<dd><p>Get the metric of ‘neuron boundary coverage’.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>float, the metric of ‘neuron boundary coverage’.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model_fuzz_test</span><span class="o">.</span><span class="n">get_nbc</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindarmour.fuzz_testing.ModelCoverageMetrics.get_snac">
<span class="sig-name descname"><span class="pre">get_snac</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#ModelCoverageMetrics.get_snac"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindarmour.fuzz_testing.ModelCoverageMetrics.get_snac" title="Permalink to this definition"></a></dt>
<dd><p>Get the metric of ‘strong neuron activation coverage’.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>float, the metric of ‘strong neuron activation coverage’.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model_fuzz_test</span><span class="o">.</span><span class="n">get_snac</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mindarmour.adv_robustness.evaluations.html" class="btn btn-neutral float-left" title="mindarmour.adv_robustness.evaluations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mindarmour.privacy.diff_privacy.html" class="btn btn-neutral float-right" title="mindarmour.privacy.diff_privacy" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>