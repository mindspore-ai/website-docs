<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Processing Data &mdash; MindSpore r1.1 documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Augmentation" href="augmentation.html" />
    <link rel="prev" title="Sampler" href="sampler.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api_structure.html">MindSpore API Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_type.html">Data Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="compute_component.html">Compute Component</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="data_pipeline.html">Data Pipeline</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dataset_loading.html">Loading Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="sampler.html">Sampler</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Processing Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-processing-operators">Data Processing Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#shuffle">shuffle</a></li>
<li class="toctree-l4"><a class="reference internal" href="#map">map</a></li>
<li class="toctree-l4"><a class="reference internal" href="#batch">batch</a></li>
<li class="toctree-l4"><a class="reference internal" href="#repeat">repeat</a></li>
<li class="toctree-l4"><a class="reference internal" href="#zip">zip</a></li>
<li class="toctree-l4"><a class="reference internal" href="#concat">concat</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="augmentation.html">Data Augmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tokenizer.html">Tokenizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="dataset_conversion.html">MindSpore Data Format Conversion</a></li>
<li class="toctree-l2"><a class="reference internal" href="auto_augmentation.html">Auto Augmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="cache.html">Single Node Data Cache</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="execution_management.html">Execution Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto_parallel.html">Parallel Distributed Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_usage.html">Advanced Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="network_list.html">Network List</a></li>
<li class="toctree-l1"><a class="reference internal" href="operator_list.html">Operator List</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="data_pipeline.html">Data Pipeline</a> &raquo;</li>
      <li>Processing Data</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/pipeline.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="processing-data">
<h1>Processing Data<a class="headerlink" href="#processing-data" title="Permalink to this headline"></a></h1>
<p><a href="https://gitee.com/mindspore/docs/blob/r1.1/docs/programming_guide/source_en/pipeline.md" target="_blank"><img src="./_static/logo_source.png"></a></p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p>Data is the basis of deep learning. Good data input can play a positive role in the entire deep neural network training. Before training, data processing is performed on a loaded dataset for resolving problems such as an excessively large data volume and uneven sample distribution, thereby obtaining a more optimized data input.</p>
<p>Each dataset class of MindSpore provides multiple data processing operators. You can build a data processing pipeline to define the data processing operations to be used. In this way, data can be continuously transferred to the training system through the data processing pipeline during the training process.</p>
<p>The following table lists part of the common data processing operators supported by MindSpore. For more data processing operations, see <a class="reference external" href="https://www.mindspore.cn/doc/api_python/en/r1.1/mindspore/mindspore.dataset.html">MindSpore API</a>.</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Data Processing Operator</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>shuffle</p></td>
<td><p>Randomly shuffles datasets.</p></td>
</tr>
<tr class="row-odd"><td><p>map</p></td>
<td><p>Provides customized functions or operators for specified column data in a dataset.</p></td>
</tr>
<tr class="row-even"><td><p>batch</p></td>
<td><p>Divides datasets into batches to reduce the number of training steps and accelerate the training process.</p></td>
</tr>
<tr class="row-odd"><td><p>repeat</p></td>
<td><p>Repeats a dataset to expand the data volume.</p></td>
</tr>
<tr class="row-even"><td><p>zip</p></td>
<td><p>Zips two datasets into one vertically.</p></td>
</tr>
<tr class="row-odd"><td><p>concat</p></td>
<td><p>Concatenates two datasets into one horizontally.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="data-processing-operators">
<h2>Data Processing Operators<a class="headerlink" href="#data-processing-operators" title="Permalink to this headline"></a></h2>
<section id="shuffle">
<h3>shuffle<a class="headerlink" href="#shuffle" title="Permalink to this headline"></a></h3>
<p>Randomly shuffles datasets.</p>
<blockquote>
<div><p>The larger the value of <code class="docutils literal notranslate"><span class="pre">buffer_size</span></code>, the higher the shuffle degree, but the more time and computing resources are consumed.</p>
</div></blockquote>
<p><img alt="shuffle" src="_images/shuffle.png" /></p>
<p>The following example builds a random dataset, then shuffles it, and finally shows the shuffled data result.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore.dataset</span> <span class="k">as</span> <span class="nn">ds</span>

<span class="n">ds</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">set_seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">generator_func</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="k">yield</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]),)</span>

<span class="n">dataset1</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">GeneratorDataset</span><span class="p">(</span><span class="n">generator_func</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>

<span class="n">dataset1</span> <span class="o">=</span> <span class="n">dataset1</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">buffer_size</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">dataset1</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>The output is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[0, 1, 2])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[2, 3, 4])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[3, 4, 5])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[1, 2, 3])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[4, 5, 6])}
</pre></div>
</div>
</section>
<section id="map">
<h3>map<a class="headerlink" href="#map" title="Permalink to this headline"></a></h3>
<p>Applies a specified function or operator to specified columns in a dataset to implement data mapping. You can customize the mapping function or use operators in c_transforms or py_transforms to augment image and text data.</p>
<blockquote>
<div><p>For details about how to use data augmentation, see <a class="reference external" href="https://www.mindspore.cn/doc/programming_guide/en/r1.1/augmentation.html">Data Augmentation</a> in the Programming Guide.</p>
</div></blockquote>
<p><img alt="map" src="_images/map.png" /></p>
<p>The following example builds a random dataset, defines a mapping function for data augmentation, applies the function to the dataset, and compares the data results before and after the mapping.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore.dataset</span> <span class="k">as</span> <span class="nn">ds</span>

<span class="k">def</span> <span class="nf">generator_func</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="k">yield</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]),)</span>

<span class="k">def</span> <span class="nf">pyfunc</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="mi">2</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">GeneratorDataset</span><span class="p">(</span><span class="n">generator_func</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>

<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;------ after processing ------&quot;</span><span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">operations</span><span class="o">=</span><span class="n">pyfunc</span><span class="p">,</span> <span class="n">input_columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>

<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>The output is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[0, 1, 2])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[1, 2, 3])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[2, 3, 4])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[3, 4, 5])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[4, 5, 6])}
------ after processing ------
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[0, 2, 4])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[2, 4, 6])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[4, 6, 8])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[ 6,  8, 10])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[ 8, 10, 12])}
</pre></div>
</div>
</section>
<section id="batch">
<h3>batch<a class="headerlink" href="#batch" title="Permalink to this headline"></a></h3>
<p>Divides datasets into batches in the training system to reduce the number of training steps and accelerate the training process.</p>
<p><img alt="batch" src="_images/batch.png" /></p>
<p>The following example builds a random dataset, and then displays the batching results of the datasets that retain and do not retain redundant data. The batch size is 2.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore.dataset</span> <span class="k">as</span> <span class="nn">ds</span>

<span class="k">def</span> <span class="nf">generator_func</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="k">yield</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]),)</span>

<span class="n">dataset1</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">GeneratorDataset</span><span class="p">(</span><span class="n">generator_func</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>

<span class="n">dataset1</span> <span class="o">=</span> <span class="n">dataset1</span><span class="o">.</span><span class="n">batch</span><span class="p">(</span><span class="n">batch_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">drop_remainder</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">dataset1</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;------ drop remainder ------&quot;</span><span class="p">)</span>

<span class="n">dataset2</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">GeneratorDataset</span><span class="p">(</span><span class="n">generator_func</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>

<span class="n">dataset2</span> <span class="o">=</span> <span class="n">dataset2</span><span class="o">.</span><span class="n">batch</span><span class="p">(</span><span class="n">batch_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">drop_remainder</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">dataset2</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>The output is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{&#39;data&#39;: Tensor(shape=[2, 3], dtype=Int64, value=[[0, 1, 2], [1, 2, 3]])}
{&#39;data&#39;: Tensor(shape=[2, 3], dtype=Int64, value=[[2, 3, 4], [3, 4, 5]])}
{&#39;data&#39;: Tensor(shape=[1, 3], dtype=Int64, value=[[4, 5, 6]])}
------ drop remainder ------
{&#39;data&#39;: Tensor(shape=[2, 3], dtype=Int64, value=[[0, 1, 2], [1, 2, 3]])}
{&#39;data&#39;: Tensor(shape=[2, 3], dtype=Int64, value=[[2, 3, 4], [3, 4, 5]])}
</pre></div>
</div>
</section>
<section id="repeat">
<h3>repeat<a class="headerlink" href="#repeat" title="Permalink to this headline"></a></h3>
<p>Repeats a dataset to expand the data volume.</p>
<blockquote>
<div><p>The operation sequence of <code class="docutils literal notranslate"><span class="pre">repeat</span></code> and <code class="docutils literal notranslate"><span class="pre">batch</span></code> affects the number of training batches. You are advised to place <code class="docutils literal notranslate"><span class="pre">repeat</span></code> after <code class="docutils literal notranslate"><span class="pre">batch</span></code>.</p>
</div></blockquote>
<p><img alt="repeat" src="_images/repeat.png" /></p>
<p>The following example builds a random dataset, repeats it twice, and finally shows the data result after repetition.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore.dataset</span> <span class="k">as</span> <span class="nn">ds</span>

<span class="k">def</span> <span class="nf">generator_func</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="k">yield</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]),)</span>

<span class="n">dataset1</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">GeneratorDataset</span><span class="p">(</span><span class="n">generator_func</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>

<span class="n">dataset1</span> <span class="o">=</span> <span class="n">dataset1</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">count</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">dataset1</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>The output is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[0, 1, 2])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[1, 2, 3])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[2, 3, 4])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[3, 4, 5])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[4, 5, 6])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[0, 1, 2])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[1, 2, 3])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[2, 3, 4])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[3, 4, 5])}
{&#39;data&#39;: Tensor(shape=[3], dtype=Int64, value=[4, 5, 6])}
</pre></div>
</div>
</section>
<section id="zip">
<h3>zip<a class="headerlink" href="#zip" title="Permalink to this headline"></a></h3>
<p>Zips two datasets into one vertically.</p>
<blockquote>
<div><p>If the column names in the two datasets are the same, the two datasets will not be zipped. Therefore, ensure that the column name is unique.<br>If the number of rows in the two datasets is different, the number of rows after zipping is the same as the smaller number of rows.</p>
</div></blockquote>
<p><img alt="zip" src="_images/zip.png" /></p>
<p>The following example builds two random datasets with different samples, zips columns, and displays the data result after zipping.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore.dataset</span> <span class="k">as</span> <span class="nn">ds</span>

<span class="k">def</span> <span class="nf">generator_func</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
        <span class="k">yield</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]),)</span>

<span class="k">def</span> <span class="nf">generator_func2</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="k">yield</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),)</span>

<span class="n">dataset1</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">GeneratorDataset</span><span class="p">(</span><span class="n">generator_func</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;data1&quot;</span><span class="p">])</span>
<span class="n">dataset2</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">GeneratorDataset</span><span class="p">(</span><span class="n">generator_func2</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;data2&quot;</span><span class="p">])</span>

<span class="n">dataset3</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">zip</span><span class="p">((</span><span class="n">dataset1</span><span class="p">,</span> <span class="n">dataset2</span><span class="p">))</span>

<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">dataset3</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>The output is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{&#39;data1&#39;: Tensor(shape=[3], dtype=Int64, value= [0, 1, 2]), &#39;data2&#39;: Tensor(shape=[2], dtype=Int64, value= [1, 2])}
{&#39;data1&#39;: Tensor(shape=[3], dtype=Int64, value= [1, 2, 3]), &#39;data2&#39;: Tensor(shape=[2], dtype=Int64, value= [1, 2])}
{&#39;data1&#39;: Tensor(shape=[3], dtype=Int64, value= [2, 3, 4]), &#39;data2&#39;: Tensor(shape=[2], dtype=Int64, value= [1, 2])}
{&#39;data1&#39;: Tensor(shape=[3], dtype=Int64, value= [3, 4, 5]), &#39;data2&#39;: Tensor(shape=[2], dtype=Int64, value= [1, 2])}
</pre></div>
</div>
</section>
<section id="concat">
<h3>concat<a class="headerlink" href="#concat" title="Permalink to this headline"></a></h3>
<p>Concatenates two datasets into one horizontally.</p>
<blockquote>
<div><p>Enter the column name in the dataset. The column data type and column data sequence must be the same.</p>
</div></blockquote>
<p><img alt="concat" src="_images/concat.png" /></p>
<p>The following example builds two random datasets, concatenates them by row, and displays the concatenated data result. Note that the same effect can be achieved by using the <code class="docutils literal notranslate"><span class="pre">+</span></code> operator.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore.dataset</span> <span class="k">as</span> <span class="nn">ds</span>

<span class="k">def</span> <span class="nf">generator_func</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="k">yield</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),)</span>

<span class="k">def</span> <span class="nf">generator_func2</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="k">yield</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),)</span>

<span class="n">dataset1</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">GeneratorDataset</span><span class="p">(</span><span class="n">generator_func</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;data1&quot;</span><span class="p">])</span>
<span class="n">dataset2</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">GeneratorDataset</span><span class="p">(</span><span class="n">generator_func2</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;data1&quot;</span><span class="p">])</span>

<span class="n">dataset3</span> <span class="o">=</span> <span class="n">dataset1</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">dataset2</span><span class="p">)</span>

<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">dataset3</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>The output is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{&#39;data1&#39;: Tensor(shape=[3], dtype=Int64, value= [0, 0, 0])}
{&#39;data1&#39;: Tensor(shape=[3], dtype=Int64, value= [0, 0, 0])}
{&#39;data1&#39;: Tensor(shape=[3], dtype=Int64, value= [1, 2, 3])}
{&#39;data1&#39;: Tensor(shape=[3], dtype=Int64, value= [1, 2, 3])}
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="sampler.html" class="btn btn-neutral float-left" title="Sampler" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="augmentation.html" class="btn btn-neutral float-right" title="Data Augmentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>