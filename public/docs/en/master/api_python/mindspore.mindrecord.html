<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>mindspore.mindrecord &mdash; MindSpore master documentation</title>
      <link rel="stylesheet" href="../_static/css/bootstrap.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/training.css" type="text/css" /><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/training.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="mindspore.nn.probability" href="mindspore.nn.probability.html" />
    <link rel="prev" title="mindspore.dataset.audio.melscale_fbanks" href="dataset_audio/mindspore.dataset.audio.melscale_fbanks.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../design/overview.html">MindSpore Design Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/programming_paradigm.html">Functional and Object-Oriented Fusion Programming Paradigm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/all_scenarios.html">Full-scenarios Unified Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/dynamic_graph_and_static_graph.html">Combination of Dynamic and Static Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/pluggable_device.html">Third-Party Hardware Interconnection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/distributed_training_design.html">Native Distributed Parallel Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/graph_fusion_engine.html">Graph-Kernel Fusion Acceleration Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/data_engine.html">High Performance Data Processing Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Models</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../note/official_models.html">Official Models</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="mindspore.html">mindspore</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.nn.html">mindspore.nn</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.ops.html">mindspore.ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.ops.primitive.html">mindspore.ops.primitive</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.amp.html">mindspore.amp</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.train.html">mindspore.train</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.communication.html">mindspore.communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.common.initializer.html">mindspore.common.initializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.dataset.html">mindspore.dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.dataset.transforms.html">mindspore.dataset.transforms</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">mindspore.mindrecord</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.nn.probability.html">mindspore.nn.probability</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.rewrite.html">mindspore.rewrite</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.boost.html">mindspore.boost</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.numpy.html">mindspore.numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.scipy.html">mindspore.scipy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Mapping</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../note/api_mapping/pytorch_api_mapping.html">PyTorch and MindSpore API Mapping Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/api_mapping/tensorflow_api_mapping.html">TensorFlow and MindSpore API Mapping Table</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Migration Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/overview.html">Overview of Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/enveriment_preparation.html">Environment Preparation and Information Acquisition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/analysis_and_preparation.html">Model Analysis and Preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/typical_api_comparision.html">Differences Between MindSpore and PyTorch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/model_development/model_development.html">Constructing MindSpore Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/debug_and_tune.html">Debugging and Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/sample_code.html">Network Migration Debugging Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/migrator_with_tools.html">Application Practice Guide for Network Migration Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/faq.html">FAQs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Syntax Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../note/static_graph_syntax_support.html">Static Graph Syntax Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/static_graph_syntax/operators.html">Static Graph Syntax —— Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/static_graph_syntax/statements.html">Static Graph Syntax —— Python Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/static_graph_syntax/python_builtin_functions.html">Static Graph Syntax —— Python Built-in Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/index_support.html">Tensor Index Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Environment Variables</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../note/env_var_list.html">Environment Variables</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/data_processing.html">Data Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/implement_problem.html">Implement Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/network_compilation.html">Network Compilation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/operators_compile.html">Operators Compile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/usage_migrate_3rd.html">Migration from a Third-party Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/performance_tuning.html">Performance Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/precision_tuning.html">Precision Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/distributed_parallel.html">Distributed Parallel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/inference.html">Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/feature_advice.html">Feature Advice</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../RELEASE.html">Release Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>mindspore.mindrecord</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api_python/mindspore.mindrecord.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="module-mindspore.mindrecord">
<span id="mindspore-mindrecord"></span><h1>mindspore.mindrecord<a class="headerlink" href="#module-mindspore.mindrecord" title="Permalink to this headline"></a></h1>
<p>Introduction of MindRecord.</p>
<p>MindRecord is a module to implement reading, writing, searching and
converting for MindSpore format dataset. Users could use the FileWriter
API to generate MindRecord data and use the MindDataset API to load
MindRecord data. Users could also convert other format datasets to
mindrecord data through corresponding sub-module.</p>
<dl class="py class">
<dt class="sig sig-object py" id="mindspore.mindrecord.Cifar100ToMR">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.mindrecord.</span></span><span class="sig-name descname"><span class="pre">Cifar100ToMR</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/tools/cifar100_to_mr.html#Cifar100ToMR"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.Cifar100ToMR" title="Permalink to this definition"></a></dt>
<dd><p>A class to transform from cifar100 which needs to be a Python version with a name
similar to: <code class="docutils literal notranslate"><span class="pre">cifar-100-python.tar.gz</span></code> to MindRecord.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The cifar100 directory to be transformed.</p></li>
<li><p><strong>destination</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – MindRecord file path to transform into, ensure that the directory is created in advance and
no file with the same name exists in the directory.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If source or destination is invalid.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.mindrecord</span> <span class="kn">import</span> <span class="n">Cifar100ToMR</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cifar100_dir</span> <span class="o">=</span> <span class="s2">&quot;/path/to/cifar100&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mindrecord_file</span> <span class="o">=</span> <span class="s2">&quot;/path/to/mindrecord/file&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cifar100_to_mr</span> <span class="o">=</span> <span class="n">Cifar100ToMR</span><span class="p">(</span><span class="n">cifar100_dir</span><span class="p">,</span> <span class="n">mindrecord_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">cifar100_to_mr</span><span class="o">.</span><span class="n">transform</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.Cifar100ToMR.transform">
<span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/tools/cifar100_to_mr.html#Cifar100ToMR.transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.Cifar100ToMR.transform" title="Permalink to this definition"></a></dt>
<dd><p>Execute transformation from cifar100 to MindRecord.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.Cifar100ToMR" title="mindspore.mindrecord.Cifar100ToMR"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.Cifar100ToMR</span></code></a> .</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fields</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>, </em><em>optional</em>) – A list of index field, e.g.[“fine_label”, “coarse_label”]. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code> . For index
field settings, please refer to <a class="reference internal" href="#mindspore.mindrecord.FileWriter.add_index" title="mindspore.mindrecord.FileWriter.add_index"><code class="xref py py-func docutils literal notranslate"><span class="pre">mindspore.mindrecord.FileWriter.add_index()</span></code></a> .</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>MSRStatus, SUCCESS or FAILED.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ParamTypeError</strong> – If index field is invalid.</p></li>
<li><p><strong>MRMOpenError</strong> – If failed to open MindRecord file.</p></li>
<li><p><strong>MRMValidateDataError</strong> – If data does not match blob fields.</p></li>
<li><p><strong>MRMSetHeaderError</strong> – If failed to set header.</p></li>
<li><p><strong>MRMWriteDatasetError</strong> – If failed to write dataset.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>parallel_writer</cite> is not bool.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If parameter <cite>fields</cite> is invalid.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.mindrecord.Cifar10ToMR">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.mindrecord.</span></span><span class="sig-name descname"><span class="pre">Cifar10ToMR</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/tools/cifar10_to_mr.html#Cifar10ToMR"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.Cifar10ToMR" title="Permalink to this definition"></a></dt>
<dd><p>A class to transform from cifar10 which needs to be a Python version with a name
similar to: <code class="docutils literal notranslate"><span class="pre">cifar-10-python.tar.gz</span></code> to MindRecord.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The cifar10 directory to be transformed.</p></li>
<li><p><strong>destination</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – MindRecord file path to transform into, ensure that the directory is created in advance and
no file with the same name exists in the directory.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If source or destination is invalid.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.mindrecord</span> <span class="kn">import</span> <span class="n">Cifar10ToMR</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cifar10_dir</span> <span class="o">=</span> <span class="s2">&quot;/path/to/cifar10&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mindrecord_file</span> <span class="o">=</span> <span class="s2">&quot;/path/to/mindrecord/file&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cifar10_to_mr</span> <span class="o">=</span> <span class="n">Cifar10ToMR</span><span class="p">(</span><span class="n">cifar10_dir</span><span class="p">,</span> <span class="n">mindrecord_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">cifar10_to_mr</span><span class="o">.</span><span class="n">transform</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.Cifar10ToMR.transform">
<span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/tools/cifar10_to_mr.html#Cifar10ToMR.transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.Cifar10ToMR.transform" title="Permalink to this definition"></a></dt>
<dd><p>Execute transformation from cifar10 to MindRecord.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.Cifar10ToMR" title="mindspore.mindrecord.Cifar10ToMR"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.Cifar10ToMR</span></code></a> .</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fields</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>, </em><em>optional</em>) – A list of index fields. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code> . For index field settings,
please refer to <a class="reference internal" href="#mindspore.mindrecord.FileWriter.add_index" title="mindspore.mindrecord.FileWriter.add_index"><code class="xref py py-func docutils literal notranslate"><span class="pre">mindspore.mindrecord.FileWriter.add_index()</span></code></a> .</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>MSRStatus, SUCCESS or FAILED.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ParamTypeError</strong> – If index field is invalid.</p></li>
<li><p><strong>MRMOpenError</strong> – If failed to open MindRecord file.</p></li>
<li><p><strong>MRMValidateDataError</strong> – If data does not match blob fields.</p></li>
<li><p><strong>MRMSetHeaderError</strong> – If failed to set header.</p></li>
<li><p><strong>MRMWriteDatasetError</strong> – If failed to write dataset.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>parallel_writer</cite> is not bool.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If parameter <cite>fields</cite> is invalid.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.mindrecord.CsvToMR">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.mindrecord.</span></span><span class="sig-name descname"><span class="pre">CsvToMR</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition_number</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/tools/csv_to_mr.html#CsvToMR"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.CsvToMR" title="Permalink to this definition"></a></dt>
<dd><p>A class to transform from csv to MindRecord.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The file path of csv.</p></li>
<li><p><strong>destination</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The MindRecord file path to transform into, ensure that the directory is created in advance
and no file with the same name exists in the directory.</p></li>
<li><p><strong>columns_list</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>, </em><em>optional</em>) – A list of columns to be read. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code> .</p></li>
<li><p><strong>partition_number</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>optional</em>) – The partition size, Default: <code class="docutils literal notranslate"><span class="pre">1</span></code> .</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If <cite>source</cite> , <cite>destination</cite> , <cite>partition_number</cite> is invalid.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#RuntimeError" title="(in Python v3.8)"><strong>RuntimeError</strong></a> – If <cite>columns_list</cite> is invalid.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.mindrecord</span> <span class="kn">import</span> <span class="n">CsvToMR</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">csv_file</span> <span class="o">=</span> <span class="s2">&quot;/path/to/csv/file&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mindrecord_file</span> <span class="o">=</span> <span class="s2">&quot;/path/to/mindrecord/file&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">csv_to_mr</span> <span class="o">=</span> <span class="n">CsvToMR</span><span class="p">(</span><span class="n">csv_file</span><span class="p">,</span> <span class="n">mindrecord_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">csv_to_mr</span><span class="o">.</span><span class="n">transform</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.CsvToMR.transform">
<span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/tools/csv_to_mr.html#CsvToMR.transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.CsvToMR.transform" title="Permalink to this definition"></a></dt>
<dd><p>Execute transformation from csv to MindRecord.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.CsvToMR" title="mindspore.mindrecord.CsvToMR"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.CsvToMR</span></code></a> .</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>MSRStatus, SUCCESS or FAILED.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ParamTypeError</strong> – If index field is invalid.</p></li>
<li><p><strong>MRMOpenError</strong> – If failed to open MindRecord file.</p></li>
<li><p><strong>MRMValidateDataError</strong> – If data does not match blob fields.</p></li>
<li><p><strong>MRMSetHeaderError</strong> – If failed to set header.</p></li>
<li><p><strong>MRMWriteDatasetError</strong> – If failed to write dataset.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If parallel_writer is not bool.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#IOError" title="(in Python v3.8)"><strong>IOError</strong></a> – Csv file does not exist.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – The first line of the CSV file is used as column name and each field cannot start with a number.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.mindrecord.FileReader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.mindrecord.</span></span><span class="sig-name descname"><span class="pre">FileReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_consumer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/filereader.html#FileReader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.FileReader" title="Permalink to this definition"></a></dt>
<dd><p>Class to read MindRecord files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <cite>file_name</cite> is a file path, it tries to load all MindRecord files generated         in a conversion, and throws an exception if a MindRecord file is missing.
If <cite>file_name</cite> is file path list, only the MindRecord files in the list are loaded.
The parameter <cite>operator</cite> has no effect and will be deprecated in a future version.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – One of MindRecord file path or file path list.</p></li>
<li><p><strong>num_consumer</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>optional</em>) – Number of reader workers which load data. Default: <code class="docutils literal notranslate"><span class="pre">4</span></code> .
It should not be smaller than 1 or larger than the number of processor cores.</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>, </em><em>optional</em>) – A list of fields where corresponding data would be read. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code> .</p></li>
<li><p><strong>operator</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>optional</em>) – Reserved parameter for operators. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code> .</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ParamValueError</strong> – If <cite>file_name</cite> , <cite>num_consumer</cite> or <cite>columns</cite> is invalid.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.mindrecord</span> <span class="kn">import</span> <span class="n">FileReader</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mindrecord_file</span> <span class="o">=</span> <span class="s2">&quot;/path/to/mindrecord/file&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reader</span> <span class="o">=</span> <span class="n">FileReader</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="n">mindrecord_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create iterator for mindrecord and get saved data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">get_next</span><span class="p">()):</span>
<span class="gp">... </span>    <span class="n">ori_data</span> <span class="o">=</span> <span class="n">item</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reader</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.FileReader.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/filereader.html#FileReader.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.FileReader.close" title="Permalink to this definition"></a></dt>
<dd><p>Stop reader worker and close file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.FileReader" title="mindspore.mindrecord.FileReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.FileReader</span></code></a> .</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.FileReader.get_next">
<span class="sig-name descname"><span class="pre">get_next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/filereader.html#FileReader.get_next"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.FileReader.get_next" title="Permalink to this definition"></a></dt>
<dd><p>Yield a batch of data according to columns at a time.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.FileReader" title="mindspore.mindrecord.FileReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.FileReader</span></code></a> .</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict, a batch whose keys are the same as columns.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>MRMUnsupportedSchemaError</strong> – If schema is invalid.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.FileReader.len">
<span class="sig-name descname"><span class="pre">len</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/filereader.html#FileReader.len"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.FileReader.len" title="Permalink to this definition"></a></dt>
<dd><p>Get the number of the samples in MindRecord.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>int, the number of the samples in MindRecord.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.mindrecord</span> <span class="kn">import</span> <span class="n">FileReader</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mindrecord_file</span> <span class="o">=</span> <span class="s2">&quot;/path/to/mindrecord/file&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reader</span> <span class="o">=</span> <span class="n">FileReader</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="n">mindrecord_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">len</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reader</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.FileReader.schema">
<span class="sig-name descname"><span class="pre">schema</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/filereader.html#FileReader.schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.FileReader.schema" title="Permalink to this definition"></a></dt>
<dd><p>Get the schema of the MindRecord.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict, the schema info.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.mindrecord</span> <span class="kn">import</span> <span class="n">FileReader</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mindrecord_file</span> <span class="o">=</span> <span class="s2">&quot;/path/to/mindrecord/file&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reader</span> <span class="o">=</span> <span class="n">FileReader</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="n">mindrecord_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">schema</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reader</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.mindrecord.FileWriter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.mindrecord.</span></span><span class="sig-name descname"><span class="pre">FileWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shard_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/filewriter.html#FileWriter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.FileWriter" title="Permalink to this definition"></a></dt>
<dd><p>Class to write user defined raw data into MindRecord files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After the MindRecord file is generated, if the file name is changed,
the file may fail to be read.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – File name of MindRecord file.</p></li>
<li><p><strong>shard_num</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>optional</em>) – The Number of MindRecord files.
It should be between [1, 1000]. Default: <code class="docutils literal notranslate"><span class="pre">1</span></code> .</p></li>
<li><p><strong>overwrite</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to overwrite if the file already exists. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> .</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ParamValueError</strong> – If <cite>file_name</cite> or <cite>shard_num</cite> or <cite>overwrite</cite> is invalid.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.mindrecord</span> <span class="kn">import</span> <span class="n">FileWriter</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writer</span> <span class="o">=</span> <span class="n">FileWriter</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;test.mindrecord&quot;</span><span class="p">,</span> <span class="n">shard_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema_json</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;file_name&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span> <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;int32&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bytes&quot;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema_id</span> <span class="o">=</span> <span class="n">writer</span><span class="o">.</span><span class="n">add_schema</span><span class="p">(</span><span class="n">schema_json</span><span class="p">,</span> <span class="s2">&quot;test_schema&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;file_name&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">writer</span><span class="o">.</span><span class="n">add_index</span><span class="p">(</span><span class="n">indexes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">data</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;file_name&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.jpg&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span>
<span class="gp">... </span>             <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x10</span><span class="s2">c</span><span class="se">\xb3</span><span class="s2">w</span><span class="se">\xa8\xee</span><span class="s2">$o&amp;&lt;q</span><span class="se">\x8c\x8e</span><span class="s2">(</span><span class="se">\xa2\x90\x90\x96\xbc\xb1\x1e\xd4</span><span class="s2">QER</span><span class="se">\x13</span><span class="s2">?</span><span class="se">\xff</span><span class="s2">&quot;</span><span class="p">}]</span>
<span class="gp">... </span>    <span class="n">status</span> <span class="o">=</span> <span class="n">writer</span><span class="o">.</span><span class="n">write_raw_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">writer</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.FileWriter.add_index">
<span class="sig-name descname"><span class="pre">add_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_fields</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/filewriter.html#FileWriter.add_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.FileWriter.add_index" title="Permalink to this definition"></a></dt>
<dd><p>Select index fields from schema to accelerate reading.
schema is added through <cite>add_schema</cite> .</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The index fields should be primitive type. e.g. int/float/str.
If the function is not called, the fields of the primitive type
in schema are set as indexes by default.</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.FileWriter" title="mindspore.mindrecord.FileWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.FileWriter</span></code></a> .</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>index_fields</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – fields from schema.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>MSRStatus, SUCCESS or FAILED.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ParamTypeError</strong> – If index field is invalid.</p></li>
<li><p><strong>MRMDefineIndexError</strong> – If index field is not primitive type.</p></li>
<li><p><strong>MRMAddIndexError</strong> – If failed to add index field.</p></li>
<li><p><strong>MRMGetMetaError</strong> – If the schema is not set or failed to get meta.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.FileWriter.add_schema">
<span class="sig-name descname"><span class="pre">add_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">desc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/filewriter.html#FileWriter.add_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.FileWriter.add_schema" title="Permalink to this definition"></a></dt>
<dd><p>The schema is added to describe the raw data to be written.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.FileWriter" title="mindspore.mindrecord.FileWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.FileWriter</span></code></a> .</p>
</div>
<table class="colwidths-given docutils align-default" id="id1">
<caption><span class="caption-text">The data types supported by MindRecord.</span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Data Type</p></th>
<th class="head"><p>Data Shape</p></th>
<th class="head"><p>Details</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>int32</p></td>
<td><p>/</p></td>
<td><p>integer number</p></td>
</tr>
<tr class="row-odd"><td><p>int64</p></td>
<td><p>/</p></td>
<td><p>integer number</p></td>
</tr>
<tr class="row-even"><td><p>float32</p></td>
<td><p>/</p></td>
<td><p>real number</p></td>
</tr>
<tr class="row-odd"><td><p>float64</p></td>
<td><p>/</p></td>
<td><p>real number</p></td>
</tr>
<tr class="row-even"><td><p>string</p></td>
<td><p>/</p></td>
<td><p>string data</p></td>
</tr>
<tr class="row-odd"><td><p>bytes</p></td>
<td><p>/</p></td>
<td><p>binary data</p></td>
</tr>
<tr class="row-even"><td><p>int32</p></td>
<td><p>[-1] / [-1, 32, 32] / [3, 224, 224]</p></td>
<td><p>numpy ndarray</p></td>
</tr>
<tr class="row-odd"><td><p>int64</p></td>
<td><p>[-1] / [-1, 32, 32] / [3, 224, 224]</p></td>
<td><p>numpy ndarray</p></td>
</tr>
<tr class="row-even"><td><p>float32</p></td>
<td><p>[-1] / [-1, 32, 32] / [3, 224, 224]</p></td>
<td><p>numpy ndarray</p></td>
</tr>
<tr class="row-odd"><td><p>float64</p></td>
<td><p>[-1] / [-1, 32, 32] / [3, 224, 224]</p></td>
<td><p>numpy ndarray</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>content</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – Dictionary of schema content.</p></li>
<li><p><strong>desc</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>optional</em>) – String of schema description, Default: <code class="docutils literal notranslate"><span class="pre">None</span></code> .</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>int, schema id.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>MRMInvalidSchemaError</strong> – If schema is invalid.</p></li>
<li><p><strong>MRMBuildSchemaError</strong> – If failed to build schema.</p></li>
<li><p><strong>MRMAddSchemaError</strong> – If failed to add schema.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Examples of available schemas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema1</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;file_name&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span> <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;int32&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bytes&quot;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema2</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;input_ids&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;int32&quot;</span><span class="p">,</span> <span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]},</span>
<span class="gp">... </span>           <span class="s2">&quot;input_masks&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;int32&quot;</span><span class="p">,</span> <span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.FileWriter.commit">
<span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/filewriter.html#FileWriter.commit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.FileWriter.commit" title="Permalink to this definition"></a></dt>
<dd><p>Flush data in memory to disk and generate the corresponding database files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.FileWriter" title="mindspore.mindrecord.FileWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.FileWriter</span></code></a> .</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>MSRStatus, SUCCESS or FAILED.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>MRMOpenError</strong> – If failed to open MindRecord file.</p></li>
<li><p><strong>MRMSetHeaderError</strong> – If failed to set header.</p></li>
<li><p><strong>MRMIndexGeneratorError</strong> – If failed to create index generator.</p></li>
<li><p><strong>MRMGenerateIndexError</strong> – If failed to write to database.</p></li>
<li><p><strong>MRMCommitError</strong> – If failed to flush data to disk.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#RuntimeError" title="(in Python v3.8)"><strong>RuntimeError</strong></a> – Parallel write failed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.FileWriter.open_for_append">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">open_for_append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/filewriter.html#FileWriter.open_for_append"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.FileWriter.open_for_append" title="Permalink to this definition"></a></dt>
<dd><p>Open MindRecord file and get ready to append data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – String of MindRecord file name.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>FileWriter, file writer object for the opened MindRecord file.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ParamValueError</strong> – If file_name is invalid.</p></li>
<li><p><strong>FileNameError</strong> – If path contains invalid characters.</p></li>
<li><p><strong>MRMOpenError</strong> – If failed to open MindRecord file.</p></li>
<li><p><strong>MRMOpenForAppendError</strong> – If failed to open file for appending data.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.mindrecord</span> <span class="kn">import</span> <span class="n">FileWriter</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;file_name&quot;</span><span class="p">:</span> <span class="s2">&quot;0.jpg&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="gp">... </span>         <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x10</span><span class="s2">c</span><span class="se">\xb3</span><span class="s2">w</span><span class="se">\xa8\xee</span><span class="s2">$o&amp;&lt;q</span><span class="se">\x8c\x8e</span><span class="s2">(</span><span class="se">\xa2\x90\x90\x96\xbc\xb1\x1e\xd4</span><span class="s2">QER</span><span class="se">\x13</span><span class="s2">?</span><span class="se">\xff</span><span class="s2">&quot;</span><span class="p">}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writer</span> <span class="o">=</span> <span class="n">FileWriter</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;test.mindrecord&quot;</span><span class="p">,</span> <span class="n">shard_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema_json</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;file_name&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span> <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;int32&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bytes&quot;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema_id</span> <span class="o">=</span> <span class="n">writer</span><span class="o">.</span><span class="n">add_schema</span><span class="p">(</span><span class="n">schema_json</span><span class="p">,</span> <span class="s2">&quot;test_schema&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">writer</span><span class="o">.</span><span class="n">write_raw_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">writer</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">write_append</span> <span class="o">=</span> <span class="n">FileWriter</span><span class="o">.</span><span class="n">open_for_append</span><span class="p">(</span><span class="s2">&quot;test.mindrecord&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">data</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;file_name&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.jpg&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span>
<span class="gp">... </span>             <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x10</span><span class="s2">c</span><span class="se">\xb3</span><span class="s2">w</span><span class="se">\xa8\xee</span><span class="s2">$o&amp;&lt;q</span><span class="se">\x8c\x8e</span><span class="s2">(</span><span class="se">\xa2\x90\x90\x96\xbc\xb1\x1e\xd4</span><span class="s2">QER</span><span class="se">\x13</span><span class="s2">?</span><span class="se">\xff</span><span class="s2">&quot;</span><span class="p">}]</span>
<span class="gp">... </span>    <span class="n">status</span> <span class="o">=</span> <span class="n">write_append</span><span class="o">.</span><span class="n">write_raw_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">write_append</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.FileWriter.set_header_size">
<span class="sig-name descname"><span class="pre">set_header_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header_size</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/filewriter.html#FileWriter.set_header_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.FileWriter.set_header_size" title="Permalink to this definition"></a></dt>
<dd><p>Set the size of header which contains shard information, schema information,         page meta information, etc. The larger a header, the more data         the MindRecord file can store. If the size of header is larger than         the default size (16MB), users need to call the API to set a proper size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>header_size</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Size of header, between 16*1024(16KB) and
128*1024*1024(128MB).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>MSRStatus, SUCCESS or FAILED.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>MRMInvalidHeaderSizeError</strong> – If failed to set header size.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.mindrecord</span> <span class="kn">import</span> <span class="n">FileWriter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writer</span> <span class="o">=</span> <span class="n">FileWriter</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;test.mindrecord&quot;</span><span class="p">,</span> <span class="n">shard_num</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">writer</span><span class="o">.</span><span class="n">set_header_size</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">25</span><span class="p">)</span> <span class="c1"># 32MB</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.FileWriter.set_page_size">
<span class="sig-name descname"><span class="pre">set_page_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">page_size</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/filewriter.html#FileWriter.set_page_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.FileWriter.set_page_size" title="Permalink to this definition"></a></dt>
<dd><p>Set the size of page that represents the area where data is stored,         and the areas are divided into two types: raw page and blob page.         The larger a page, the more data the page can store. If the size of         a sample is larger than the default size (32MB), users need to call the API         to set a proper size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>page_size</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Size of page, between 32*1024(32KB) and
256*1024*1024(256MB).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>MSRStatus, SUCCESS or FAILED.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>MRMInvalidPageSizeError</strong> – If failed to set page size.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.mindrecord</span> <span class="kn">import</span> <span class="n">FileWriter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writer</span> <span class="o">=</span> <span class="n">FileWriter</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;test.mindrecord&quot;</span><span class="p">,</span> <span class="n">shard_num</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">writer</span><span class="o">.</span><span class="n">set_page_size</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">26</span><span class="p">)</span>  <span class="c1"># 64MB</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.FileWriter.write_raw_data">
<span class="sig-name descname"><span class="pre">write_raw_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel_writer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/filewriter.html#FileWriter.write_raw_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.FileWriter.write_raw_data" title="Permalink to this definition"></a></dt>
<dd><p>Convert raw data into a series of consecutive MindRecord         files after the raw data is verified against the schema.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.FileWriter" title="mindspore.mindrecord.FileWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.FileWriter</span></code></a> .</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>raw_data</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a><em>]</em>) – List of raw data.</p></li>
<li><p><strong>parallel_writer</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><em>optional</em>) – Write raw data in parallel if it equals to True. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> .</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>MSRStatus, SUCCESS or FAILED.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ParamTypeError</strong> – If index field is invalid.</p></li>
<li><p><strong>MRMOpenError</strong> – If failed to open MindRecord file.</p></li>
<li><p><strong>MRMValidateDataError</strong> – If data does not match blob fields.</p></li>
<li><p><strong>MRMSetHeaderError</strong> – If failed to set header.</p></li>
<li><p><strong>MRMWriteDatasetError</strong> – If failed to write dataset.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If parallel_writer is not bool.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.mindrecord.ImageNetToMR">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.mindrecord.</span></span><span class="sig-name descname"><span class="pre">ImageNetToMR</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition_number</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/tools/imagenet_to_mr.html#ImageNetToMR"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.ImageNetToMR" title="Permalink to this definition"></a></dt>
<dd><p>A class to transform from imagenet to MindRecord.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>map_file</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – <p>The map file that indicates label. This file can be generated by command
<code class="code docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-l</span> <span class="pre">[image_dir]</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-vE</span> <span class="pre">&quot;total|\.&quot;</span> <span class="pre">|</span> <span class="pre">awk</span> <span class="pre">-F</span> <span class="pre">&quot;</span> <span class="pre">&quot;</span> <span class="pre">'{print</span> <span class="pre">$9,</span> <span class="pre">NR-1;}'</span> <span class="pre">&gt;</span> <span class="pre">[file_path]</span></code> ,
where <cite>image_dir</cite> is image directory contains n01440764, n01443537, n01484850 and n15075141 directory
and <cite>file_path</cite> is the generated <cite>map_file</cite> . An example of <cite>map_file</cite> is as below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">n01440764</span> <span class="mi">0</span>
<span class="n">n01443537</span> <span class="mi">1</span>
<span class="n">n01484850</span> <span class="mi">2</span>
<span class="n">n01491361</span> <span class="mi">3</span>
<span class="o">...</span>
<span class="n">n15075141</span> <span class="mi">999</span>
</pre></div>
</div>
</p></li>
<li><p><strong>image_dir</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Image directory contains n01440764, n01443537, n01484850 and n15075141 directory.</p></li>
<li><p><strong>destination</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – MindRecord file path to transform into, ensure that the directory is created in advance and
no file with the same name exists in the directory.</p></li>
<li><p><strong>partition_number</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>optional</em>) – The partition size. Default: <code class="docutils literal notranslate"><span class="pre">1</span></code> .</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If <cite>map_file</cite> , <cite>image_dir</cite> or <cite>destination</cite> is invalid.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.mindrecord</span> <span class="kn">import</span> <span class="n">ImageNetToMR</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">map_file</span> <span class="o">=</span> <span class="s2">&quot;/path/to/imagenet/map_file&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">imagenet_dir</span> <span class="o">=</span> <span class="s2">&quot;/path/to/imagenet/train&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mindrecord_file</span> <span class="o">=</span> <span class="s2">&quot;/path/to/mindrecord/file&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">imagenet_to_mr</span> <span class="o">=</span> <span class="n">ImageNetToMR</span><span class="p">(</span><span class="n">map_file</span><span class="p">,</span> <span class="n">imagenet_dir</span><span class="p">,</span> <span class="n">mindrecord_file</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">imagenet_to_mr</span><span class="o">.</span><span class="n">transform</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.ImageNetToMR.transform">
<span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/tools/imagenet_to_mr.html#ImageNetToMR.transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.ImageNetToMR.transform" title="Permalink to this definition"></a></dt>
<dd><p>Execute transformation from imagenet to MindRecord.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.ImageNetToMR" title="mindspore.mindrecord.ImageNetToMR"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.ImageNetToMR</span></code></a> .</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>MSRStatus, SUCCESS or FAILED.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ParamTypeError</strong> – If index field is invalid.</p></li>
<li><p><strong>MRMOpenError</strong> – If failed to open MindRecord file.</p></li>
<li><p><strong>MRMValidateDataError</strong> – If data does not match blob fields.</p></li>
<li><p><strong>MRMSetHeaderError</strong> – If failed to set header.</p></li>
<li><p><strong>MRMWriteDatasetError</strong> – If failed to write dataset.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>parallel_writer</cite> is not bool.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.mindrecord.MindPage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.mindrecord.</span></span><span class="sig-name descname"><span class="pre">MindPage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_consumer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/mindpage.html#MindPage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.MindPage" title="Permalink to this definition"></a></dt>
<dd><p>Class to read MindRecord files in pagination.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>]</em>) – One of MindRecord files or a file list.</p></li>
<li><p><strong>num_consumer</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>optional</em>) – The number of reader workers which load data. Default: <code class="docutils literal notranslate"><span class="pre">4</span></code> .
It should not be smaller than 1 or larger than the number of processor cores.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ParamValueError</strong> – If <cite>file_name</cite> , <cite>num_consumer</cite> or columns is invalid.</p></li>
<li><p><strong>MRMInitSegmentError</strong> – If failed to initialize ShardSegment.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.mindrecord</span> <span class="kn">import</span> <span class="n">MindPage</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mindrecord_file</span> <span class="o">=</span> <span class="s2">&quot;/path/to/mindrecord/file&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mind_page</span> <span class="o">=</span> <span class="n">MindPage</span><span class="p">(</span><span class="n">mindrecord_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># get all the index fields</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fields</span> <span class="o">=</span> <span class="n">mind_page</span><span class="o">.</span><span class="n">candidate_fields</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># set the field to be retrieved</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mind_page</span><span class="o">.</span><span class="n">category_field</span> <span class="o">=</span> <span class="s2">&quot;file_name&quot;</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># get all the group info</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">info</span> <span class="o">=</span> <span class="n">mind_page</span><span class="o">.</span><span class="n">read_category_info</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># get the row by id which is from category info</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">row_by_id</span> <span class="o">=</span> <span class="n">mind_page</span><span class="o">.</span><span class="n">read_at_page_by_id</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># get the row by name which is from category info</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">row_by_name</span> <span class="o">=</span> <span class="n">mind_page</span><span class="o">.</span><span class="n">read_at_page_by_name</span><span class="p">(</span><span class="s2">&quot;8.jpg&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="mindspore.mindrecord.MindPage.candidate_fields">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">candidate_fields</span></span><a class="headerlink" href="#mindspore.mindrecord.MindPage.candidate_fields" title="Permalink to this definition"></a></dt>
<dd><p>Return candidate category fields.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.MindPage" title="mindspore.mindrecord.MindPage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.MindPage</span></code></a> .</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list[str], by which data could be grouped.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mindspore.mindrecord.MindPage.category_field">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">category_field</span></span><a class="headerlink" href="#mindspore.mindrecord.MindPage.category_field" title="Permalink to this definition"></a></dt>
<dd><p>Getter function for category fields.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.MindPage" title="mindspore.mindrecord.MindPage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.MindPage</span></code></a> .</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list[str], by which data could be grouped.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.MindPage.read_at_page_by_id">
<span class="sig-name descname"><span class="pre">read_at_page_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">category_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">page</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_row</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/mindpage.html#MindPage.read_at_page_by_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.MindPage.read_at_page_by_id" title="Permalink to this definition"></a></dt>
<dd><p>Query by category id in pagination.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.MindPage" title="mindspore.mindrecord.MindPage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.MindPage</span></code></a> .</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>category_id</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Category id, referred to the return of <cite>read_category_info</cite> .</p></li>
<li><p><strong>page</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Index of page.</p></li>
<li><p><strong>num_row</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Number of rows in a page.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list[dict], data queried by category id.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ParamValueError</strong> – If any parameter is invalid.</p></li>
<li><p><strong>MRMFetchDataError</strong> – If failed to fetch data by category.</p></li>
<li><p><strong>MRMUnsupportedSchemaError</strong> – If schema is invalid.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.MindPage.read_at_page_by_name">
<span class="sig-name descname"><span class="pre">read_at_page_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">category_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">page</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_row</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/mindpage.html#MindPage.read_at_page_by_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.MindPage.read_at_page_by_name" title="Permalink to this definition"></a></dt>
<dd><p>Query by category name in pagination.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.MindPage" title="mindspore.mindrecord.MindPage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.MindPage</span></code></a> .</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>category_name</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – String of category field’s value,
referred to the return of <cite>read_category_info</cite> .</p></li>
<li><p><strong>page</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Index of page.</p></li>
<li><p><strong>num_row</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Number of row in a page.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list[dict], data queried by category name.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.MindPage.read_category_info">
<span class="sig-name descname"><span class="pre">read_category_info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/mindpage.html#MindPage.read_category_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.MindPage.read_category_info" title="Permalink to this definition"></a></dt>
<dd><p>Return category information when data is grouped by indicated category field.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.MindPage" title="mindspore.mindrecord.MindPage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.MindPage</span></code></a> .</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>str, description of group information.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>MRMReadCategoryInfoError</strong> – If failed to read category information.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.mindrecord.MnistToMR">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.mindrecord.</span></span><span class="sig-name descname"><span class="pre">MnistToMR</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition_number</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/tools/mnist_to_mr.html#MnistToMR"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.MnistToMR" title="Permalink to this definition"></a></dt>
<dd><p>A class to transform from Mnist to MindRecord.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Directory that contains t10k-images-idx3-ubyte.gz,
train-images-idx3-ubyte.gz, t10k-labels-idx1-ubyte.gz
and train-labels-idx1-ubyte.gz.</p></li>
<li><p><strong>destination</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – MindRecord file path to transform into, ensure that the directory is created in advance and
no file with the same name exists in the directory.</p></li>
<li><p><strong>partition_number</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>optional</em>) – The partition size. Default: <code class="docutils literal notranslate"><span class="pre">1</span></code> .</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If <cite>source</cite> , <cite>destination</cite> , <cite>partition_number</cite> is invalid.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.mindrecord</span> <span class="kn">import</span> <span class="n">MnistToMR</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mnist_dir</span> <span class="o">=</span> <span class="s2">&quot;/path/to/mnist&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mindrecord_file</span> <span class="o">=</span> <span class="s2">&quot;/path/to/mindrecord/file&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mnist_to_mr</span> <span class="o">=</span> <span class="n">MnistToMR</span><span class="p">(</span><span class="n">mnist_dir</span><span class="p">,</span> <span class="n">mindrecord_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">mnist_to_mr</span><span class="o">.</span><span class="n">transform</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.MnistToMR.transform">
<span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/tools/mnist_to_mr.html#MnistToMR.transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.MnistToMR.transform" title="Permalink to this definition"></a></dt>
<dd><p>Execute transformation from Mnist to MindRecord.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.MnistToMR" title="mindspore.mindrecord.MnistToMR"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.MnistToMR</span></code></a> .</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>MSRStatus, SUCCESS or FAILED.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ParamTypeError</strong> – If index field is invalid.</p></li>
<li><p><strong>MRMOpenError</strong> – If failed to open MindRecord file.</p></li>
<li><p><strong>MRMValidateDataError</strong> – If data does not match blob fields.</p></li>
<li><p><strong>MRMSetHeaderError</strong> – If failed to set header.</p></li>
<li><p><strong>MRMWriteDatasetError</strong> – If failed to write dataset.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>parallel_writer</cite> is not bool.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.mindrecord.TFRecordToMR">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.mindrecord.</span></span><span class="sig-name descname"><span class="pre">TFRecordToMR</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bytes_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/tools/tfrecord_to_mr.html#TFRecordToMR"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.TFRecordToMR" title="Permalink to this definition"></a></dt>
<dd><p>A class to transform from TFRecord to MindRecord.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – TFRecord file to be transformed.</p></li>
<li><p><strong>destination</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – MindRecord file path to transform into, ensure that the directory is created in advance and
no file with the same name exists in the directory.</p></li>
<li><p><strong>feature_dict</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>FixedLenFeature</em><em>]</em>) – Dictionary that states the feature type, and
<a class="reference external" href="https://www.tensorflow.org/api_docs/python/tf/io/FixedLenFeature">FixedLenFeature</a> is supported.</p></li>
<li><p><strong>bytes_fields</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>, </em><em>optional</em>) – The bytes fields which are in <cite>feature_dict</cite> and can be images bytes.
Default: <code class="docutils literal notranslate"><span class="pre">None</span></code> , means that there is no byte dtype field such as image.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If parameter is invalid.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#Exception" title="(in Python v3.8)"><strong>Exception</strong></a> – when tensorflow module is not found or version is not correct.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.mindrecord</span> <span class="kn">import</span> <span class="n">TFRecordToMR</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tensorflow</span> <span class="k">as</span> <span class="nn">tf</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tfrecord_file</span> <span class="o">=</span> <span class="s2">&quot;/path/to/tfrecord/file&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mindrecord_file</span> <span class="o">=</span> <span class="s2">&quot;/path/to/mindrecord/file&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feature_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;file_name&quot;</span><span class="p">:</span> <span class="n">tf</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">FixedLenFeature</span><span class="p">([],</span> <span class="n">tf</span><span class="o">.</span><span class="n">string</span><span class="p">),</span>
<span class="gp">... </span>                <span class="s2">&quot;image_bytes&quot;</span><span class="p">:</span> <span class="n">tf</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">FixedLenFeature</span><span class="p">([],</span> <span class="n">tf</span><span class="o">.</span><span class="n">string</span><span class="p">),</span>
<span class="gp">... </span>                <span class="s2">&quot;int64_scalar&quot;</span><span class="p">:</span> <span class="n">tf</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">FixedLenFeature</span><span class="p">([],</span> <span class="n">tf</span><span class="o">.</span><span class="n">int64</span><span class="p">),</span>
<span class="gp">... </span>                <span class="s2">&quot;float_scalar&quot;</span><span class="p">:</span> <span class="n">tf</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">FixedLenFeature</span><span class="p">([],</span> <span class="n">tf</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>                <span class="s2">&quot;int64_list&quot;</span><span class="p">:</span> <span class="n">tf</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">FixedLenFeature</span><span class="p">([</span><span class="mi">6</span><span class="p">],</span> <span class="n">tf</span><span class="o">.</span><span class="n">int64</span><span class="p">),</span>
<span class="gp">... </span>                <span class="s2">&quot;float_list&quot;</span><span class="p">:</span> <span class="n">tf</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">FixedLenFeature</span><span class="p">([</span><span class="mi">7</span><span class="p">],</span> <span class="n">tf</span><span class="o">.</span><span class="n">float32</span><span class="p">)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tfrecord_to_mr</span> <span class="o">=</span> <span class="n">TFRecordToMR</span><span class="p">(</span><span class="n">tfrecord_file</span><span class="p">,</span> <span class="n">mindrecord_file</span><span class="p">,</span> <span class="n">feature_dict</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;image_bytes&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="n">tfrecord_to_mr</span><span class="o">.</span><span class="n">transform</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.mindrecord.TFRecordToMR.transform">
<span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/mindrecord/tools/tfrecord_to_mr.html#TFRecordToMR.transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.mindrecord.TFRecordToMR.transform" title="Permalink to this definition"></a></dt>
<dd><p>Execute transformation from TFRecord to MindRecord.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to the Examples of <a class="reference internal" href="#mindspore.mindrecord.TFRecordToMR" title="mindspore.mindrecord.TFRecordToMR"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.mindrecord.TFRecordToMR</span></code></a> .</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>MSRStatus, SUCCESS or FAILED.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ParamTypeError</strong> – If index field is invalid.</p></li>
<li><p><strong>MRMOpenError</strong> – If failed to open MindRecord file.</p></li>
<li><p><strong>MRMValidateDataError</strong> – If data does not match blob fields.</p></li>
<li><p><strong>MRMSetHeaderError</strong> – If failed to set header.</p></li>
<li><p><strong>MRMWriteDatasetError</strong> – If failed to write dataset.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>parallel_writer</cite> is not bool.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="dataset_audio/mindspore.dataset.audio.melscale_fbanks.html" class="btn btn-neutral float-left" title="mindspore.dataset.audio.melscale_fbanks" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mindspore.nn.probability.html" class="btn btn-neutral float-right" title="mindspore.nn.probability" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>