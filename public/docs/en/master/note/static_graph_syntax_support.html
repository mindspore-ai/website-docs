<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Static Graph Syntax Support &mdash; MindSpore master documentation</title>
      <link rel="stylesheet" href="../_static/css/bootstrap.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/training.css" type="text/css" /><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/training.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Static Graph Syntax —— Operators" href="static_graph_syntax/operators.html" />
    <link rel="prev" title="Method for Converting TensorFlow Models to MindSpore Models" href="../migration_guide/tensorflow2mindspore.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../design/overview.html">MindSpore Design Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/programming_paradigm.html">Functional and Object-Oriented Fusion Programming Paradigm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/all_scenarios.html">Full-scenarios Unified Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/dynamic_graph_and_static_graph.html">Combination of Dynamic and Static Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/pluggable_device.html">Third-Party Hardware Interconnection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/distributed_training_design.html">Native Distributed Parallel Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/graph_fusion_engine.html">Graph-Kernel Fusion Acceleration Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/data_engine.html">High Performance Data Processing Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Models</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="official_models.html">Official Models</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.html">mindspore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.nn.html">mindspore.nn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.ops.html">mindspore.ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.ops.primitive.html">mindspore.ops.primitive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.amp.html">mindspore.amp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.train.html">mindspore.train</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.communication.html">mindspore.communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.common.initializer.html">mindspore.common.initializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.dataset.html">mindspore.dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.dataset.transforms.html">mindspore.dataset.transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.mindrecord.html">mindspore.mindrecord</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.nn.probability.html">mindspore.nn.probability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.rewrite.html">mindspore.rewrite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.boost.html">mindspore.boost</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.numpy.html">mindspore.numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.scipy.html">mindspore.scipy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Mapping</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_mapping/pytorch_api_mapping.html">PyTorch and MindSpore API Mapping Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_mapping/tensorflow_api_mapping.html">TensorFlow and MindSpore API Mapping Table</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Migration Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/overview.html">Overview of Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/enveriment_preparation.html">Environment Preparation and Information Acquisition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/analysis_and_preparation.html">Model Analysis and Preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/typical_api_comparision.html">Differences Between MindSpore and PyTorch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/model_development/model_development.html">Constructing MindSpore Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/debug_and_tune.html">Debugging and Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/sample_code.html">Network Migration Debugging Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/faq.html">FAQs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Syntax Support</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Static Graph Syntax Support</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-types">Data Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#built-in-python-data-types">Built-in Python Data Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#number">Number</a></li>
<li class="toctree-l4"><a class="reference internal" href="#string">String</a></li>
<li class="toctree-l4"><a class="reference internal" href="#list">List</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tuple">Tuple</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dictionary">Dictionary</a></li>
<li class="toctree-l4"><a class="reference internal" href="#none">None</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#mindspore-user-defined-data-types">MindSpore User-defined Data Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tensor">Tensor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#primitive">Primitive</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cell">Cell</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameter">Parameter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#operators">Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="#primaries">Primaries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#attribute-references-and-attribute-modification">Attribute References and Attribute Modification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#index-value">Index Value</a></li>
<li class="toctree-l3"><a class="reference internal" href="#calls">Calls</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#statements">Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#python-built-in-functions">Python Built-in Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#network-definition">Network Definition</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#network-input-parameters">Network Input parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#network-constraints">Network Constraints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#jit-fallback">JIT Fallback</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#annotation">Annotation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#calling-the-third-party-libraries">Calling the Third-party Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supporting-control-flow">Supporting Control Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#support-jit-fallback-in-the-runtime-phase">Support JIT Fallback in the Runtime Phase</a></li>
<li class="toctree-l3"><a class="reference internal" href="#instructions-for-use">Instructions for Use</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="static_graph_syntax/operators.html">Static Graph Syntax —— Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="static_graph_syntax/statements.html">Static Graph Syntax —— Python Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="static_graph_syntax/python_builtin_functions.html">Static Graph Syntax —— Python Built-in Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="index_support.html">Tensor Index Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Environment Variables</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="env_var_list.html">Environment Variables</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/data_processing.html">Data Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/implement_problem.html">Implement Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/network_compilation.html">Network Compilation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/operators_compile.html">Operators Compile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/usage_migrate_3rd.html">Migration from a Third-party Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/performance_tuning.html">Performance Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/precision_tuning.html">Precision Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/distributed_parallel.html">Distributed Parallel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/inference.html">Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/feature_advice.html">Feature Advice</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../RELEASE.html">Release Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Static Graph Syntax Support</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/note/static_graph_syntax_support.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="static-graph-syntax-support">
<h1>Static Graph Syntax Support<a class="headerlink" href="#static-graph-syntax-support" title="Permalink to this headline"></a></h1>
<p><a href="https://gitee.com/mindspore/docs/blob/master/docs/mindspore/source_en/note/static_graph_syntax_support.md" target="_blank"><img src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/master/resource/_static/logo_source_en.png"></a></p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p>In graph mode, Python code is not executed by the Python interpreter. Instead, the code is compiled into a static computation graph, and then the static computation graph is executed.</p>
<p>There are two ways to use the graph mode. The first way is to call the <code class="docutils literal notranslate"><span class="pre">&#64;jit</span></code> decorator to modify a function or a class member method, and then the decorated function or method will be compiled into a static computation graph. For details about how to use <code class="docutils literal notranslate"><span class="pre">jit</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/en/master/api_python/mindspore/mindspore.jit.html#mindspore.jit">jit API document</a>. The second way is to set <code class="docutils literal notranslate"><span class="pre">ms.set_context(mode=ms.GRAPH_MODE)</span></code>, then write the code in the <code class="docutils literal notranslate"><span class="pre">construct</span></code> function of the <code class="docutils literal notranslate"><span class="pre">Cell</span></code> so that the code in the <code class="docutils literal notranslate"><span class="pre">construct</span></code> function will be compiled into a static computation graph. For details about the definition of <code class="docutils literal notranslate"><span class="pre">Cell</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/en/master/api_python/nn/mindspore.nn.Cell.html">Cell API document</a>.</p>
<p>Due to syntax parsing restrictions, the supported data types, syntax, and related operations during graph building are not completely consistent with the Python syntax. As a result, some usage is restricted. JIT Fallback scheme considers the unification of static and dynamic graphs from the perspective of graph mode and extends the syntax capabilities of graph patterns. Borrowing the traditional JIT compilation idea, when it is found to be the Python syntax that is not supported in the graph mode, interpretation and execution are performed by Fallback. For more information, please refer to the <span class="xref myst">JIT Fallback</span> section.</p>
<p>The following describes the data types, syntax, and related operations supported during static graph building. These rules apply only to graph mode.</p>
</section>
<section id="data-types">
<h2>Data Types<a class="headerlink" href="#data-types" title="Permalink to this headline"></a></h2>
<section id="built-in-python-data-types">
<h3>Built-in Python Data Types<a class="headerlink" href="#built-in-python-data-types" title="Permalink to this headline"></a></h3>
<p>Currently, the following built-in <code class="docutils literal notranslate"><span class="pre">Python</span></code> data types are supported: <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">String</span></code>, <code class="docutils literal notranslate"><span class="pre">List</span></code>, <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, and <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code>.</p>
<section id="number">
<h4>Number<a class="headerlink" href="#number" title="Permalink to this headline"></a></h4>
<p>Supports <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, and <code class="docutils literal notranslate"><span class="pre">bool</span></code>, but does not support <code class="docutils literal notranslate"><span class="pre">complex</span></code> numbers.</p>
<p><code class="docutils literal notranslate"><span class="pre">Number</span></code> can be defined on the network. That is, the syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">1.2</span></code>, and <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">True</span></code> are supported.</p>
<p>When the data is a constant, the value of the data can be achieved at compile time, the forcible conversion to <code class="docutils literal notranslate"><span class="pre">Number</span></code> is supported in the network. The syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">int(x)</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">float(x)</span></code>, and <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">bool(x)</span></code> are supported.
When the data is a variable, i.e., you can get the value only at runtime. It also supports data type conversion using built-in functions <span class="xref myst">Python Built-in Functions</span> such as int(), float() and bool(). For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">Tensor</span><span class="p">,</span> <span class="n">jit</span>

<span class="nd">@jit</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
  <span class="n">out1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">11.1</span><span class="p">)</span>
  <span class="n">out2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">10</span><span class="p">]))</span>
  <span class="n">out3</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">())</span>
  <span class="k">return</span> <span class="n">out1</span><span class="p">,</span> <span class="n">out2</span><span class="p">,</span> <span class="n">out3</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="n">Tensor</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;res[0]:&quot;</span><span class="p">,</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;res[1]:&quot;</span><span class="p">,</span> <span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;res[2]:&quot;</span><span class="p">,</span> <span class="n">res</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>res[0]: 11
res[0]: 10
res[2]: 2
</pre></div>
</div>
<p>Supports returning numbers. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">test_return_scalar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">test_return_scalar</span><span class="p">(</span><span class="n">ms</span><span class="o">.</span><span class="n">mutable</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">ms</span><span class="o">.</span><span class="n">mutable</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
<p>Output the results:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>3
</pre></div>
</div>
</section>
<section id="string">
<h4>String<a class="headerlink" href="#string" title="Permalink to this headline"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">String</span></code> can be constructed on the network, i.e., support for using quotes (<code class="docutils literal notranslate"><span class="pre">'</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;</span></code>) to create strings such as <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">'abcd'</span></code> or <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">&quot;efgh&quot;</span></code>. Convert constants to strings by means of str(). Support string concatenation, truncation, and the use of membership operators (<code class="docutils literal notranslate"><span class="pre">in</span></code> or <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code>) to determine whether a string contains the specified character. Support for formatting string output by inserting a value into a string with the string format <code class="docutils literal notranslate"><span class="pre">%s</span></code>. Support for using the format string function str.format().</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">jit</span>

<span class="nd">@jit</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
  <span class="n">var1</span> <span class="o">=</span> <span class="s1">&#39;Hello!&#39;</span>
  <span class="n">var2</span> <span class="o">=</span> <span class="s2">&quot;MindSpore&quot;</span>
  <span class="n">var3</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
  <span class="n">var4</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> is </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="n">var3</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">var1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">var2</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">9</span><span class="p">],</span> <span class="n">var1</span> <span class="o">+</span> <span class="n">var2</span><span class="p">,</span> <span class="n">var2</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;H&quot;</span> <span class="ow">in</span> <span class="n">var1</span><span class="p">,</span> <span class="s2">&quot;My name is </span><span class="si">%s</span><span class="s2">!&quot;</span> <span class="o">%</span> <span class="n">var2</span><span class="p">,</span> <span class="n">var4</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">foo</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;res:&quot;</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>res: (&#39;H&#39;, &#39;Spore&#39;, &#39;Hello!MindSpore&#39;, &#39;MindSporeMindSpore&#39;, True, &#39;My name is MindSpore!&#39;, &#39;string is 123&#39;)
</pre></div>
</div>
</section>
<section id="list">
<h4>List<a class="headerlink" href="#list" title="Permalink to this headline"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">List</span></code> and the <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> are the most basic sequence built-in types in Python, and the core difference between <code class="docutils literal notranslate"><span class="pre">List</span></code> and <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> is that <code class="docutils literal notranslate"><span class="pre">List</span></code> is an object that can be changed, while <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> is not, which means that <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, once created, cannot be changed without the address of the object remaining the same and a <code class="docutils literal notranslate"><span class="pre">List</span></code> can be modified without changing the address of the object through a series of inplace operations. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">a_id</span> <span class="o">=</span> <span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">a_after_id</span> <span class="o">=</span> <span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">a_id</span> <span class="o">==</span> <span class="n">a_after_id</span>
</pre></div>
</div>
<p>In the above sample code, through the <code class="docutils literal notranslate"><span class="pre">append</span></code>, the inplace syntax, to change the <code class="docutils literal notranslate"><span class="pre">List</span></code> object, the address of the object has not been modified. <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> does not support this inplace operation. In the case of <code class="docutils literal notranslate"><span class="pre">JIT_SYNTAX_LEVEL</span></code> set to <code class="docutils literal notranslate"><span class="pre">COMPATIBLE</span></code> and <code class="docutils literal notranslate"><span class="pre">LAX</span></code>, the static graph mode can support inplace operation of some <code class="docutils literal notranslate"><span class="pre">List</span></code> objects.</p>
<p>MindSpore graph mode syntax extends support for <code class="docutils literal notranslate"><span class="pre">List</span></code> to facilitate network construction using <code class="docutils literal notranslate"><span class="pre">List</span></code>.</p>
<ul>
<li><p>The graph mode supports creating <code class="docutils literal notranslate"><span class="pre">Lists</span></code> in graph.</p>
<p>Support creating <code class="docutils literal notranslate"><span class="pre">List</span></code> objects within graph mode, and the elements of the <code class="docutils literal notranslate"><span class="pre">List</span></code> objects can contain any of the types supported by the graph mode, as well as multiple levels of nesting. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">generate_list</span><span class="p">():</span>
  <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
  <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">]</span>
  <span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">]),</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">2</span><span class="p">])]</span>
  <span class="n">d</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot;1, 2, 3&quot;</span><span class="p">])]</span>
  <span class="n">d</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>
  <span class="k">return</span> <span class="n">d</span>
</pre></div>
</div>
<p>The above sample code, all <code class="docutils literal notranslate"><span class="pre">List</span></code> objects can be created normally.</p>
</li>
<li><p>The graph mode supports returning <code class="docutils literal notranslate"><span class="pre">List</span></code></p>
<p>Before MindSpore version 2.0, <code class="docutils literal notranslate"><span class="pre">List</span></code> is converted to <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> when the graph mode returns a <code class="docutils literal notranslate"><span class="pre">List</span></code> object. In MindSpore version 2.0, <code class="docutils literal notranslate"><span class="pre">List</span></code> objects can be returned. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">list_func</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">a</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">list_func</span><span class="p">()</span>  <span class="c1"># output: [1, 2, 3, 4]</span>
</pre></div>
</div>
<p>In the same way that a <code class="docutils literal notranslate"><span class="pre">List</span></code> is created within a graph mode, the graph mode returns a <code class="docutils literal notranslate"><span class="pre">List</span></code> object that can include any of the types supported by the graph mode, as well as multiple levels of nesting.</p>
</li>
<li><p>The graph mode supports obtaining <code class="docutils literal notranslate"><span class="pre">List</span></code> objects from global variables</p>
<p>In the following example, the static graph obtains the <code class="docutils literal notranslate"><span class="pre">List</span></code> object, performs the replace operation <code class="docutils literal notranslate"><span class="pre">list.reverse()</span></code> supported by the graph mode on the original object, and returns the original object. You can see that the object returned by the graph mode has the same id as the original global variable object, i.e. they are the same object. If <code class="docutils literal notranslate"><span class="pre">JIT_SYNTAX_LEVEL</span></code> is set to the <code class="docutils literal notranslate"><span class="pre">STRICT</span></code> option, the returned <code class="docutils literal notranslate"><span class="pre">List</span></code> object and the global object are two different objects.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="n">global_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">list_func</span><span class="p">():</span>
    <span class="n">global_list</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">global_list</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">list_func</span><span class="p">()</span>  <span class="c1"># output: [4, 3, 2, 1]</span>
<span class="k">assert</span> <span class="nb">id</span><span class="p">(</span><span class="n">global_list</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Graph mode supports <code class="docutils literal notranslate"><span class="pre">List</span></code> as input</p>
<p>The graph mode supports <code class="docutils literal notranslate"><span class="pre">List</span></code> as input to static graphs. The elements of the <code class="docutils literal notranslate"><span class="pre">List</span></code> object used as input must be of an input type supported by the graph mode, which also supports multiple levels of nesting.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="n">list_input</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">list_func</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">list_func</span><span class="p">()</span>  <span class="c1"># output: [1, 2, 3, 4]</span>
</pre></div>
</div>
<p>Two precautions exist for <code class="docutils literal notranslate"><span class="pre">List</span></code> as static graph input:</p>
<ol class="arabic simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">List</span></code>, as static graph input, is treated as a constant regardless of the type of the elements inside it.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">List</span></code>, as static graph input, copies <code class="docutils literal notranslate"><span class="pre">List</span></code> object for one time, and subsequent calculations are performed using that copied object, so it is not possible to perform an inplace operation on the original input object. For example:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="n">list_input</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">list_func</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">list_func</span><span class="p">()</span>  <span class="c1"># output: [4, 3, 2, 1]  list_input: [1, 2, 3, 4]</span>
<span class="k">assert</span> <span class="nb">id</span><span class="p">(</span><span class="n">output</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">id</span><span class="p">(</span><span class="n">list_input</span><span class="p">)</span>
</pre></div>
</div>
<p>As shown in the above use case, the <code class="docutils literal notranslate"><span class="pre">List</span></code> object cannot perform inplace operation on the original object when it is graph mode input. The object returned by the graph mode is different from the input object id, which is a different object.</p>
</li>
<li><p>The graph mode supports the built-in methods of List</p>
<p>With <code class="docutils literal notranslate"><span class="pre">JIT_SYNTAX_LEVEL</span></code> set to <code class="docutils literal notranslate"><span class="pre">COMPATIBLE</span></code> as well as <code class="docutils literal notranslate"><span class="pre">LAX</span></code>, part of the <code class="docutils literal notranslate"><span class="pre">List</span></code> built-in function in graph mode supports inplace. All methods do not support inplace operations when <code class="docutils literal notranslate"><span class="pre">JIT_SYNTAX_LEVEL</span></code> is <code class="docutils literal notranslate"><span class="pre">STRICT</span></code>.
The <code class="docutils literal notranslate"><span class="pre">List</span></code> built-in methods supported by the graph mode are shown in the following table:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method names</p></th>
<th class="head"><p>Whether the inplace operation is supported （JIT_SYNTAX_LEVEL=COMPATIBLE/LAX）</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Index values</p></td>
<td><p>Non-inplace operations</p></td>
</tr>
<tr class="row-odd"><td><p>Index assignments</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>append</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>clear</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>extend</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>pop</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>reverse</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>insert</p></td>
<td><p>Yes</p></td>
</tr>
</tbody>
</table>
<p>The details of the <code class="docutils literal notranslate"><span class="pre">List</span></code> built-in methods are described below:</p>
<ul>
<li><p>List index values</p>
<p>Basic syntax: <code class="docutils literal notranslate"><span class="pre">element</span> <span class="pre">=</span> <span class="pre">list_object[index]</span></code>.</p>
<p>Basic semantics: Extract the element at the <code class="docutils literal notranslate"><span class="pre">index</span></code> position in a <code class="docutils literal notranslate"><span class="pre">List</span></code> object (<code class="docutils literal notranslate"><span class="pre">index</span></code> starts at 0). Support multiple levels of index values.</p>
<p>The index value <code class="docutils literal notranslate"><span class="pre">index</span></code> supports types <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> and <code class="docutils literal notranslate"><span class="pre">slice</span></code>. Of these, inputs of type <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> can support constants as well as variables, and the internal data of <code class="docutils literal notranslate"><span class="pre">slice</span></code> must be a constant that can be determined at compile time.</p>
<p>The example is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">list_getitem_func</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">])]</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span>

<span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">list_getitem_func</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;b:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;c:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>a:[1, 2]
b:2
c:[3, 4]
</pre></div>
</div>
</li>
<li><p>List index assignments</p>
<p>Basic syntax: <code class="docutils literal notranslate"><span class="pre">list_object[index]</span> <span class="pre">=</span> <span class="pre">target_element</span></code>.</p>
<p>Basic semantics: Assigns the element at <code class="docutils literal notranslate"><span class="pre">index</span></code> in a <code class="docutils literal notranslate"><span class="pre">List</span></code> object to <code class="docutils literal notranslate"><span class="pre">target_element</span></code> (<code class="docutils literal notranslate"><span class="pre">index</span></code> starts at 0). Multiple levels of index assignment are supported.</p>
<p>The index value <code class="docutils literal notranslate"><span class="pre">index</span></code> supports the types <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> and <code class="docutils literal notranslate"><span class="pre">slice</span></code>. Of these, inputs of type <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> can support constants as well as variables, and the internal data of <code class="docutils literal notranslate"><span class="pre">slice</span></code> must be a constant that can be determined at compile time.</p>
<p>The index assignment object <code class="docutils literal notranslate"><span class="pre">target_element</span></code> supports all data types supported by the graph mode.</p>
<p>Currently, <code class="docutils literal notranslate"><span class="pre">List</span></code> index assignment does not support inplace operation, and a new object will be created after index assignment. This operation will be supported later.</p>
<p>The example is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_setitem_func</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ok&quot;</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">88</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">test_index</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;output:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">output</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>output:[[0, 88], 10, &quot;ok&quot;, (1, 2, 3)]
</pre></div>
</div>
</li>
<li><p>List.append</p>
<p>Basic syntax: <code class="docutils literal notranslate"><span class="pre">list_object.append(target_element)</span></code>.</p>
<p>Basic semantics: Appends element <code class="docutils literal notranslate"><span class="pre">target_element</span></code> to the end of <code class="docutils literal notranslate"><span class="pre">list</span></code> object <code class="docutils literal notranslate"><span class="pre">list_object</span></code>.</p>
<p>Currently, <code class="docutils literal notranslate"><span class="pre">List.append</span></code> does not support the inplace operation, and a new object will be created after the index assignment. This operation will be supported later.</p>
<p>The example is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_list</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">test_list</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>x:[1, 2, 3, 4]
</pre></div>
</div>
</li>
<li><p>List.clear</p>
<p>Basic syntax: <code class="docutils literal notranslate"><span class="pre">list_object.clear()</span></code>.</p>
<p>Basic semantics: Clear the elements contained in the <code class="docutils literal notranslate"><span class="pre">List</span></code> object <code class="docutils literal notranslate"><span class="pre">list_object</span></code>.</p>
<p>Currently, <code class="docutils literal notranslate"><span class="pre">List.clear</span></code> does not support inplace, and a new object will be created after the index assignment. This operation will support inplace in the future.</p>
<p>The example is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_list_clear</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
    <span class="n">x</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">test_list_clear</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>x:[]
</pre></div>
</div>
</li>
<li><p>List.extend</p>
<p>Basic syntax: <code class="docutils literal notranslate"><span class="pre">list_object.extend(target)</span></code>.</p>
<p>Basic semantics: Insert all elements within <code class="docutils literal notranslate"><span class="pre">target</span></code> in order to the end of the <code class="docutils literal notranslate"><span class="pre">List</span></code> object <code class="docutils literal notranslate"><span class="pre">list_object</span></code>.</p>
<p>The types supported for <code class="docutils literal notranslate"><span class="pre">target</span></code> are <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">List</span></code> and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>. In this case, if <code class="docutils literal notranslate"><span class="pre">target</span></code> is of type <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, the <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> will be converted to <code class="docutils literal notranslate"><span class="pre">List</span></code> before insertion.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">JIT_SYNTAX_LEVEL</span></code> set to <code class="docutils literal notranslate"><span class="pre">COMPATIBLE</span></code> as well as <code class="docutils literal notranslate"><span class="pre">LAX</span></code>, <code class="docutils literal notranslate"><span class="pre">List.extend</span></code> supports the inplace operation, which does not generate a new object after the function is run.</p>
<p>The example is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_list_extend</span><span class="p">():</span>
    <span class="n">x1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="n">x1</span><span class="o">.</span><span class="n">extends</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">))</span>
    <span class="n">x2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="n">x2</span><span class="o">.</span><span class="n">extends</span><span class="p">(</span><span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>
    <span class="k">return</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span>

<span class="n">output1</span><span class="p">,</span> <span class="n">output2</span> <span class="o">=</span> <span class="n">test_list_extend</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;output1:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">output1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;output2:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">output2</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>output1:[1, 2, 3, 4, &quot;a&quot;]
output2:[1, 2, 3, Tensor(shape=[1], dtype=Int64, value= [4]), Tensor(shape=[1], dtype=Int64, value= [5])]
</pre></div>
</div>
</li>
<li><p>List.pop</p>
<p>Basic syntax: <code class="docutils literal notranslate"><span class="pre">pop_element</span> <span class="pre">=</span> <span class="pre">list_object.pop(index=-1)</span></code>.</p>
<p>Basic semantics: Remove the <code class="docutils literal notranslate"><span class="pre">index</span></code> element of the <code class="docutils literal notranslate"><span class="pre">List</span></code> object <code class="docutils literal notranslate"><span class="pre">list_object</span></code> from <code class="docutils literal notranslate"><span class="pre">list_object</span></code> and return that element.</p>
<p><code class="docutils literal notranslate"><span class="pre">index</span></code> is required to be a constant <code class="docutils literal notranslate"><span class="pre">int</span></code>, and when <code class="docutils literal notranslate"><span class="pre">list_object</span></code> is of length <code class="docutils literal notranslate"><span class="pre">list_obj_size</span></code>, <code class="docutils literal notranslate"><span class="pre">index</span></code> is taken in the range <code class="docutils literal notranslate"><span class="pre">[-list_obj_size,</span> <span class="pre">list_obj_size-1]</span></code>. A negative number for <code class="docutils literal notranslate"><span class="pre">index</span></code> represents the number of bits from back to front. When there is no <code class="docutils literal notranslate"><span class="pre">index</span></code> input, the default value is -1, which means the last element is removed.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">JIT_SYNTAX_LEVEL</span></code> set to <code class="docutils literal notranslate"><span class="pre">COMPATIBLE</span></code> as well as <code class="docutils literal notranslate"><span class="pre">LAX</span></code>, <code class="docutils literal notranslate"><span class="pre">List.pop</span></code> supports the inplace operation, which does not generate a new object after the function is run.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_list_pop</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">b</span><span class="p">,</span> <span class="n">x</span>

<span class="n">pop_element</span><span class="p">,</span> <span class="n">res_list</span> <span class="o">=</span> <span class="n">test_list_pop</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pop_element:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pop_element</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;res_list:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">res_list</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>pop_element:3
res_list:[1, 2]
</pre></div>
</div>
</li>
<li><p>List.reverse</p>
<p>Basic syntax: <code class="docutils literal notranslate"><span class="pre">list_object.reverse()</span></code>.</p>
<p>Basic semantics: Reverse the order of the elements of the <code class="docutils literal notranslate"><span class="pre">List</span></code> object <code class="docutils literal notranslate"><span class="pre">list_object</span></code>.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">JIT_SYNTAX_LEVEL</span></code> set to <code class="docutils literal notranslate"><span class="pre">COMPATIBLE</span></code> as well as <code class="docutils literal notranslate"><span class="pre">LAX</span></code>, <code class="docutils literal notranslate"><span class="pre">List.reverse</span></code> supports the inplace operation, which does not generate a new object after the function is run.</p>
<p>The example is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_list_reverse</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="n">x</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">test_list_reverse</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;output:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">output</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>output1:[3, 2, 1]
</pre></div>
</div>
</li>
<li><p>List.insert</p>
<p>Basic syntax: <code class="docutils literal notranslate"><span class="pre">list_object.insert(index,</span> <span class="pre">target_obj)</span></code>.</p>
<p>Basic semantics: Insert <code class="docutils literal notranslate"><span class="pre">target_obj</span></code> into the <code class="docutils literal notranslate"><span class="pre">index</span></code> position of <code class="docutils literal notranslate"><span class="pre">list_object</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">index</span></code> requires to be the constant <code class="docutils literal notranslate"><span class="pre">int</span></code>. If <code class="docutils literal notranslate"><span class="pre">list_object</span></code> is of length <code class="docutils literal notranslate"><span class="pre">list_obj_size</span></code>, when <code class="docutils literal notranslate"><span class="pre">index</span> <span class="pre">&lt;</span> <span class="pre">-list_obj_size</span></code>, insert into the first position of <code class="docutils literal notranslate"><span class="pre">List</span></code>. When <code class="docutils literal notranslate"><span class="pre">index</span> <span class="pre">&gt;=</span> <span class="pre">-list_obj_size</span></code>, insert to the end of <code class="docutils literal notranslate"><span class="pre">List</span></code>. A negative <code class="docutils literal notranslate"><span class="pre">index</span></code> represents the number of digits from back to front.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">JIT_SYNTAX_LEVEL</span></code> set to <code class="docutils literal notranslate"><span class="pre">COMPATIBLE</span></code> as well as <code class="docutils literal notranslate"><span class="pre">LAX</span></code>, <code class="docutils literal notranslate"><span class="pre">List.insert</span></code> supports the inplace operation, and the function runs without generating a new object.</p>
<p>The example is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_list_insert</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="n">x</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">test_list_insert</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;output:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">output</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>output:[1, 2, 3, 4]
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</section>
<section id="tuple">
<h4>Tuple<a class="headerlink" href="#tuple" title="Permalink to this headline"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Tuple</span></code> can be constructed on the network, that is, the syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">(1,</span> <span class="pre">2,</span> <span class="pre">3)</span></code> is supported. The elements of the tuple <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> cannot be modified, but indexed access to elements in the tuple <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> is supported, and concatenated combinations of tuples are supported.</p>
<ul>
<li><p>Supported index values</p>
<p>Support accessing elements in the tuple <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> using square brackets plus subscripted indexes. The index value can be <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">slice</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and multi-level index value. That is, the syntax <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">=</span> <span class="pre">tuple_x[index0][index1]...</span></code> is supported.</p>
<p>Restrictions on the index value <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Tuple</span></code> stores <code class="docutils literal notranslate"><span class="pre">Cell</span></code>. Each <code class="docutils literal notranslate"><span class="pre">Cell</span></code> must be defined before a tuple is defined. The number of input parameters, input parameter type, and input parameter <code class="docutils literal notranslate"><span class="pre">shape</span></code> of each <code class="docutils literal notranslate"><span class="pre">Cell</span></code> must be the same. The number of outputs of each <code class="docutils literal notranslate"><span class="pre">Cell</span></code> must be the same. The output type must be the same as the output <code class="docutils literal notranslate"><span class="pre">shape</span></code>.</p></li>
<li><p>The index <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> is a scalar <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> whose <code class="docutils literal notranslate"><span class="pre">dtype</span></code> is <code class="docutils literal notranslate"><span class="pre">int32</span></code>. The value range is <code class="docutils literal notranslate"><span class="pre">[-tuple_len,</span> <span class="pre">tuple_len)</span></code>, and negative index is not supported in <code class="docutils literal notranslate"><span class="pre">Ascend</span></code> backend.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CPU</span></code>, <code class="docutils literal notranslate"><span class="pre">GPU</span></code> and <code class="docutils literal notranslate"><span class="pre">Ascend</span></code> backend is supported.</p></li>
</ul>
<p>An example of the <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">slice</span></code> indexes is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_index</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span>

<span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">test_index</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;y:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;z:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;m:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">m</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;n:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>y:3
z:[1 2 3]
m:((2, 3, 4), 3, 4)
n:(2, 3, 4)
</pre></div>
</div>
<p>An example of the <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> index is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">set_context</span>

<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relu</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">softmax</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Softmax</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layers</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relu</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">softmax</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="n">index</span><span class="p">](</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">([</span><span class="o">-</span><span class="mf">1.0</span><span class="p">],</span> <span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">net</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ret:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ret</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ret:[0.]
</pre></div>
</div>
</li>
<li><p>Support connection combinations</p>
<p>Similar to the string <code class="docutils literal notranslate"><span class="pre">String</span></code>, tuples support combining using <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">*</span></code> to get a new tuple <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_index</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span>

<span class="n">out1</span><span class="p">,</span> <span class="n">out2</span> <span class="o">=</span> <span class="n">test_index</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;out1:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;out2:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out2</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>out1:(1, 2, 3, 4, 5, 6)
out2:(1, 2, 3, 1, 2, 3)
</pre></div>
</div>
</li>
</ul>
</section>
<section id="dictionary">
<h4>Dictionary<a class="headerlink" href="#dictionary" title="Permalink to this headline"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Dictionary</span></code> can be constructed on the network. Each key value <code class="docutils literal notranslate"><span class="pre">key:value</span></code> is separated by a colon <code class="docutils literal notranslate"><span class="pre">:</span></code>, and each key value pair is separated by a comma <code class="docutils literal notranslate"><span class="pre">,</span></code>. The entire dictionary contains the key-value pairs using curly braces <code class="docutils literal notranslate"><span class="pre">{}</span></code>. That is, the syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">{&quot;a&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;b&quot;:</span> <span class="pre">2}</span></code> is supported.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">key</span></code> is unique, and if there are multiple identical <code class="docutils literal notranslate"><span class="pre">keys</span></code> in the dictionary, the duplicate <code class="docutils literal notranslate"><span class="pre">keys</span></code> are finalized with the last one and the value <code class="docutils literal notranslate"><span class="pre">value</span></code> can be non-unique. The key <code class="docutils literal notranslate"><span class="pre">key</span></code> needs to be guaranteed to be immutable. Currently, the <code class="docutils literal notranslate"><span class="pre">key</span></code> can be <code class="docutils literal notranslate"><span class="pre">String</span></code>, <code class="docutils literal notranslate"><span class="pre">Number</span></code>, constant <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, or <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> that contains these types. The <code class="docutils literal notranslate"><span class="pre">value</span></code> can be <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="docutils literal notranslate"><span class="pre">List</span></code> or <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code>.</p>
<ul>
<li><p>Supported APIs</p>
<p><code class="docutils literal notranslate"><span class="pre">keys</span></code>: extracts all <code class="docutils literal notranslate"><span class="pre">key</span></code> values from <code class="docutils literal notranslate"><span class="pre">dict</span></code> to form <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> and return it.</p>
<p><code class="docutils literal notranslate"><span class="pre">values</span></code>: extracts all <code class="docutils literal notranslate"><span class="pre">value</span></code> values from <code class="docutils literal notranslate"><span class="pre">dict</span></code> to form <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> and return it.</p>
<p><code class="docutils literal notranslate"><span class="pre">items</span></code>: extracts <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> composed of each pair of <code class="docutils literal notranslate"><span class="pre">value</span></code> values and <code class="docutils literal notranslate"><span class="pre">key</span></code> values in <code class="docutils literal notranslate"><span class="pre">dict</span></code> to form <code class="docutils literal notranslate"><span class="pre">List</span></code> and return it.</p>
<p><code class="docutils literal notranslate"><span class="pre">get</span></code>: <code class="docutils literal notranslate"><span class="pre">dict.get(key[,</span> <span class="pre">value])</span></code> returns the <code class="docutils literal notranslate"><span class="pre">value</span></code> value corresponding to the specified <code class="docutils literal notranslate"><span class="pre">key</span></code>, if the specified <code class="docutils literal notranslate"><span class="pre">key</span></code> does not exist, the default value <code class="docutils literal notranslate"><span class="pre">None</span></code> or the set default value <code class="docutils literal notranslate"><span class="pre">value</span></code> is returned .</p>
<p><code class="docutils literal notranslate"><span class="pre">clear</span></code>: removes all elements in <code class="docutils literal notranslate"><span class="pre">dict</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">has_key</span></code>: <code class="docutils literal notranslate"><span class="pre">dict.has_key(key)</span></code> determines whether the specified <code class="docutils literal notranslate"><span class="pre">key</span></code> exists in <code class="docutils literal notranslate"><span class="pre">dict</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">update</span></code>: <code class="docutils literal notranslate"><span class="pre">dict1.update(dict2)</span></code> updates the elements in <code class="docutils literal notranslate"><span class="pre">dict2</span></code> to <code class="docutils literal notranslate"><span class="pre">dict1</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">fromkeys</span></code>: <code class="docutils literal notranslate"><span class="pre">dict.fromkeys(seq([,</span> <span class="pre">value]))</span></code> is used to create a new <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code>, using the elements in the sequence <code class="docutils literal notranslate"><span class="pre">seq</span></code> as the <code class="docutils literal notranslate"><span class="pre">key</span></code> of the <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code>, and the <code class="docutils literal notranslate"><span class="pre">value</span></code> is initial value corresponding to all <code class="docutils literal notranslate"><span class="pre">key</span></code>.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])),</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])),</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]))}</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_dict</span><span class="p">():</span>
    <span class="n">x_keys</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">x_values</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
    <span class="n">x_items</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="n">value_a</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="n">check_key</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]))}</span>
    <span class="n">x</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="n">new_dict</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="s2">&quot;abcd&quot;</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x_keys</span><span class="p">,</span> <span class="n">x_values</span><span class="p">,</span> <span class="n">x_items</span><span class="p">,</span> <span class="n">value_a</span><span class="p">,</span> <span class="n">check_key</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">new_dict</span>

<span class="n">x_keys</span><span class="p">,</span> <span class="n">x_values</span><span class="p">,</span> <span class="n">x_items</span><span class="p">,</span> <span class="n">value_a</span><span class="p">,</span> <span class="n">check_key</span><span class="p">,</span> <span class="n">new_x</span><span class="p">,</span> <span class="n">new_dict</span> <span class="o">=</span> <span class="n">test_dict</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x_keys:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x_keys</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x_values:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x_values</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x_items:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x_items</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;value_a:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value_a</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;check_key:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">check_key</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;new_x:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">new_x</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;new_dict:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">new_dict</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>x_keys:(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)
x_values:(Tensor(shape=[3], dtype=Int64, value= [1, 2, 3]), Tensor(shape=[3], dtype=Int64, value= [4, 5, 6]), Tensor(shape=[3], dtype=Int64, value= [7, 8, 9]))
x_items:[(&#39;a&#39;, Tensor(shape=[3], dtype=Int64, value= [1, 2, 3])), (&#39;b&#39;, Tensor(shape=[3], dtype=Int64, value= [4, 5, 6])), (&#39;c&#39;, Tensor(shape=[3], dtype=Int64, value= [7, 8, 9]))]
value_a:[1 2 3]
check_key:True
new_x:{&#39;a&#39;: Tensor(shape=[3], dtype=Int64, value= [0, 0, 0]), &#39;b&#39;: Tensor(shape=[3], dtype=Int64, value= [4, 5, 6]), &#39;c&#39;: Tensor(shape=[3], dtype=Int64, value= [7, 8, 9])}
new_dict:{&#39;a&#39;: 123, &#39;b&#39;: 123, &#39;c&#39;: 123, &#39;d&#39;: 123}
</pre></div>
</div>
</li>
<li><p>Supported index values and value assignment</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])),</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])),</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]))}</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_dict</span><span class="p">():</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span>
    <span class="n">x</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>

<span class="n">out1</span><span class="p">,</span> <span class="n">out2</span> <span class="o">=</span> <span class="n">test_dict</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;out1:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;out2:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out2</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>out1:{&#39;a&#39;: (2, 3, 4), &#39;b&#39;: Tensor(shape=[3], dtype=Int64, value= [4, 5, 6]), &#39;c&#39;: Tensor(shape=[3], dtype=Int64, value= [7, 8, 9])}
out2:[4 5 6]
</pre></div>
</div>
</li>
<li><p>Supported calculation graph return <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code></p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_dict</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">}</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
    <span class="n">z</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">z</span>

<span class="n">out</span> <span class="o">=</span> <span class="n">test_dict</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;out:&quot;</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>out:{&#39;y&#39;: &#39;a&#39;}
</pre></div>
</div>
</li>
</ul>
</section>
<section id="none">
<h4>None<a class="headerlink" href="#none" title="Permalink to this headline"></a></h4>
<p>Support using and returning None.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">test_return_none</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="kc">None</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">test_return_none</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
<p>Output the results:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(1, &#39;a&#39;, None)
</pre></div>
</div>
</section>
</section>
<section id="mindspore-user-defined-data-types">
<h3>MindSpore User-defined Data Types<a class="headerlink" href="#mindspore-user-defined-data-types" title="Permalink to this headline"></a></h3>
<p>Currently, MindSpore supports the following user-defined data types: <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="docutils literal notranslate"><span class="pre">Primitive</span></code>, and <code class="docutils literal notranslate"><span class="pre">Cell</span></code>.</p>
<section id="tensor">
<h4>Tensor<a class="headerlink" href="#tensor" title="Permalink to this headline"></a></h4>
<p>For details of <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, click <a class="reference external" href="https://mindspore.cn/docs/en/master/api_python/mindspore/mindspore.Tensor.html#mindspore-tensor">Tensor API document</a>.</p>
<p>JIT Fallback supports creating and using <a class="reference external" href="https://www.mindspore.cn/docs/en/master/api_python/mindspore/mindspore.Tensor.html">Tensor</a> in static graph mode.</p>
<p>The code case is as follows, and <code class="docutils literal notranslate"><span class="pre">Tensor(1,</span> <span class="pre">dtype=mstype.int32)</span></code> is supported by JIT Fallback.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore.nn</span> <span class="k">as</span> <span class="nn">nn</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>

<span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">net</span><span class="p">())</span>
</pre></div>
</div>
<p>Output the result:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
<p>The above example uses the interface of Tensor class to create a Tensor.
In some cases, it may be necessary to create a Tensor at runtime.
In this case, you can use either the aforementioned ms.Tensor interface or the <a class="reference external" href="https://www.mindspore.cn/docs/en/master/api_python/mindspore/mindspore.tensor.html#mindspore.tensor">tensor function interface</a>to create a Tensor.
The code example is shown below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">import</span> <span class="nn">mindspore.nn</span> <span class="k">as</span> <span class="nn">nn</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ms</span><span class="o">.</span><span class="n">tensor</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>

<span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">net</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
<p>Output the result:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>1.0
</pre></div>
</div>
</section>
<section id="primitive">
<h4>Primitive<a class="headerlink" href="#primitive" title="Permalink to this headline"></a></h4>
<p>Currently, <code class="docutils literal notranslate"><span class="pre">Primitive</span></code> and its subclass instances can be constructed in construct.</p>
<p>However, during call, the parameter can be specified only in position parameter mode, and cannot be specified in the key-value pair mode.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">ops</span><span class="p">,</span> <span class="n">Tensor</span><span class="p">,</span> <span class="n">set_context</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="n">reduce_sum</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">ReduceSum</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span> <span class="c1">#`Primitive` and its subclass instances can be constructed in construct.</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">reduce_sum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">net</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ret.shape:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ret</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
</pre></div>
</div>
<p>In the network defined above, the parameters of reduce_sum(x, axis=2) cannot be specified in the key-value pair mode. The parameter can be specified only in position parameter mode, that is, reduce_sum(x, 2).</p>
<p>The error is reported as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>TypeError: Only supported positional parameter type for python primitive, but got keyword parameter type.
</pre></div>
</div>
<p>Currently, the attributes and APIs related to <code class="docutils literal notranslate"><span class="pre">Primitive</span></code> and its subclasses cannot be called on the network.</p>
<p>For details about the defined <code class="docutils literal notranslate"><span class="pre">Primitive</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/en/master/api_python/ops/mindspore.ops.Primitive.html#mindspore.ops.Primitive">Primitive API document</a>.</p>
</section>
<section id="cell">
<h4>Cell<a class="headerlink" href="#cell" title="Permalink to this headline"></a></h4>
<p>Currently, <code class="docutils literal notranslate"><span class="pre">Cell</span></code> and its subclass instances can be constructed on the network. That is, the syntax <code class="docutils literal notranslate"><span class="pre">cell</span> <span class="pre">=</span> <span class="pre">Cell(args...)</span></code> is supported.</p>
<p>However, during call, the parameter can be specified only in position parameter mode, and cannot be specified in the key-value pair mode. That is, the syntax <code class="docutils literal notranslate"><span class="pre">cell</span> <span class="pre">=</span> <span class="pre">Cell(arg_name=value)</span></code> is not supported.</p>
<p>Currently, the attributes and APIs related to <code class="docutils literal notranslate"><span class="pre">Cell</span></code> and its subclasses cannot be called on the network unless they are called through <code class="docutils literal notranslate"><span class="pre">self</span></code> in <code class="docutils literal notranslate"><span class="pre">construct</span></code> of <code class="docutils literal notranslate"><span class="pre">Cell</span></code>.</p>
<p>For details about the definition of <code class="docutils literal notranslate"><span class="pre">Cell</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/en/master/api_python/nn/mindspore.nn.Cell.html">Cell API document</a>.</p>
</section>
<section id="parameter">
<h4>Parameter<a class="headerlink" href="#parameter" title="Permalink to this headline"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Parameter</span></code> is a variable tensor, indicating the parameters that need to be updated during network training.</p>
<p>For details about the definition of <code class="docutils literal notranslate"><span class="pre">Parameter</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/en/master/api_python/mindspore/mindspore.Parameter.html#mindspore.Parameter">Parameter API document</a>.</p>
</section>
</section>
</section>
<section id="operators">
<h2>Operators<a class="headerlink" href="#operators" title="Permalink to this headline"></a></h2>
<p>Arithmetic operators and assignment operators support the <code class="docutils literal notranslate"><span class="pre">Number</span></code> and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> operations, as well as the <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> operations of different <code class="docutils literal notranslate"><span class="pre">dtype</span></code>. For more details, please refer to <a class="reference external" href="https://www.mindspore.cn/docs/en/master/note/static_graph_syntax/operators.html">Operators</a></p>
</section>
<section id="primaries">
<h2>Primaries<a class="headerlink" href="#primaries" title="Permalink to this headline"></a></h2>
<p>Primaries represent the most tightly bound operations of the language.</p>
<section id="attribute-references-and-attribute-modification">
<h3>Attribute References and Attribute Modification<a class="headerlink" href="#attribute-references-and-attribute-modification" title="Permalink to this headline"></a></h3>
<p>An attribute reference is a primary followed by a period and a name. The following two cases of attribute references are allowed to be modified:</p>
<ul>
<li><p>The modified attribute belongs to this <code class="docutils literal notranslate"><span class="pre">cell</span></code> object, i.e. it must be <code class="docutils literal notranslate"><span class="pre">self.xxx</span></code>. The attribute is initialized in the Cell’s <code class="docutils literal notranslate"><span class="pre">__init__</span></code> function. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">set_context</span>
<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">]),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">x</span>  <span class="c1"># modified if conditions are met</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">=</span> <span class="mi">3</span>  <span class="c1"># modified if conditions are met</span>
        <span class="c1"># self.a = 2 Attribute a is not initialized within __init__ and cannot be modified.</span>
        <span class="k">return</span> <span class="n">x</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">net</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;net.weight:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">net</span><span class="o">.</span><span class="n">weight</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;net.m:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">net</span><span class="o">.</span><span class="n">m</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>net.weight:Parameter (name=w, shape=(1,), dtype=Int64, requires_grad=True)
net.x:3
</pre></div>
</div>
</li>
<li><p>The object whose attributes are modified is a global object, as exemplified by the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">set_context</span>

<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">AssignTarget</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">data_obj</span> <span class="o">=</span> <span class="n">AssignTarget</span><span class="p">()</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">test_assign</span><span class="p">():</span>
    <span class="n">data_obj</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">test_assign</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;data_obj.x:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data_obj</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>data_obj.x:10
</pre></div>
</div>
</li>
</ul>
</section>
<section id="index-value">
<h3>Index Value<a class="headerlink" href="#index-value" title="Permalink to this headline"></a></h3>
<p>Index value of  a sequence <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">List</span></code>, <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> which called subscription in Python.</p>
<p>Index value of <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> refers to chapter <span class="xref myst">Tuple</span> of this page.</p>
<p>Index value of <code class="docutils literal notranslate"><span class="pre">List</span></code> refers to chapter <span class="xref myst">List</span> of this page.</p>
<p>Index value of <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code> refers to chapter <span class="xref myst">Dictionary</span> of this page.</p>
<p>Index value of <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> refers to <a class="reference external" href="https://www.mindspore.cn/docs/en/master/note/index_support.html#index-values">Tensor index value document</a>.</p>
</section>
<section id="calls">
<h3>Calls<a class="headerlink" href="#calls" title="Permalink to this headline"></a></h3>
<p>A call calls a callable object (e.g., <code class="docutils literal notranslate"><span class="pre">Cell</span></code> or <code class="docutils literal notranslate"><span class="pre">Primitive</span></code>) with a possibly empty series of arguments.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">ops</span><span class="p">,</span> <span class="n">set_context</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matmul</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">MatMul</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matmul</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>  <span class="c1"># A call of Primitive</span>
        <span class="k">return</span> <span class="n">out</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]),</span> <span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">net</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ret:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ret</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ret:[[3. 3. 3. 3.]]
</pre></div>
</div>
</section>
</section>
<section id="statements">
<h2>Statements<a class="headerlink" href="#statements" title="Permalink to this headline"></a></h2>
<p>Currently supported Python statements include raise statement, assert statement, pass statement, return statement, break statement, continue statement, if statement, for statement, while statement, with statement, list comprehension, generator expression and function definition statement. For more details, please refer to <a class="reference external" href="https://www.mindspore.cn/docs/en/master/note/static_graph_syntax/statements.html">Statements</a></p>
</section>
<section id="python-built-in-functions">
<h2>Python Built-in Functions<a class="headerlink" href="#python-built-in-functions" title="Permalink to this headline"></a></h2>
<p>Currently supported Python built-in functions include <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">bool</span></code>, <code class="docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">getattr</span></code>, <code class="docutils literal notranslate"><span class="pre">hasattr</span></code>, <code class="docutils literal notranslate"><span class="pre">len</span></code>, <code class="docutils literal notranslate"><span class="pre">isinstance</span></code>, <code class="docutils literal notranslate"><span class="pre">all</span></code>, <code class="docutils literal notranslate"><span class="pre">any</span></code>, <code class="docutils literal notranslate"><span class="pre">round</span></code>, <code class="docutils literal notranslate"><span class="pre">max</span></code>, <code class="docutils literal notranslate"><span class="pre">min</span></code> , <code class="docutils literal notranslate"><span class="pre">sum</span></code>, <code class="docutils literal notranslate"><span class="pre">abs</span></code>, <code class="docutils literal notranslate"><span class="pre">partial</span></code>, <code class="docutils literal notranslate"><span class="pre">map</span></code>, <code class="docutils literal notranslate"><span class="pre">range</span></code>, <code class="docutils literal notranslate"><span class="pre">enumerate</span></code>, <code class="docutils literal notranslate"><span class="pre">super</span></code>, <code class="docutils literal notranslate"><span class="pre">pow</span></code>, <code class="docutils literal notranslate"><span class="pre">filter</span></code>. The use of built-in functions in graph mode is similar to the corresponding Python built-in functions. For more details, please refer to <a class="reference external" href="https://www.mindspore.cn/docs/en/master/note/static_graph_syntax/python_builtin_functions.html">Python Built-in Functions</a></p>
</section>
<section id="network-definition">
<h2>Network Definition<a class="headerlink" href="#network-definition" title="Permalink to this headline"></a></h2>
<section id="network-input-parameters">
<h3>Network Input parameters<a class="headerlink" href="#network-input-parameters" title="Permalink to this headline"></a></h3>
<p>The input parameters of the outermost network only can be <code class="docutils literal notranslate"><span class="pre">lool</span></code>, <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">mstype.number(mstype.bool,</span> <span class="pre">mstype.int,</span> <span class="pre">mstype.float,</span> <span class="pre">mstype.uint)</span></code>, <code class="docutils literal notranslate"><span class="pre">List</span></code> or <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> that contains these types, and <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code> whose values are these types.</p>
<p>While calculating gradient for outermost network, only <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> input could be calculated, input of other type will be ignored. For example, input parameter <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span>&#160; <span class="pre">z)</span></code> of outermost network, <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">z</span></code> are <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> type, <code class="docutils literal notranslate"><span class="pre">y</span></code> is other type. While calculating gradient for the network, only gradients of <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">z</span></code> are calculated, and <code class="docutils literal notranslate"><span class="pre">(grad_x,</span> <span class="pre">grad_y)</span></code> is returned.</p>
<p>If you want to use other types of input for the network, please transfer them to the network while initializing network, and save them as network attributes, then use  in the <code class="docutils literal notranslate"><span class="pre">construct</span></code>. The input parameters of inner network do not have this restriction.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">ops</span><span class="p">,</span> <span class="n">set_context</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flag</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flag</span> <span class="o">=</span> <span class="n">flag</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flag</span> <span class="o">==</span> <span class="s2">&quot;ok&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="n">z</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span> <span class="o">-</span> <span class="n">z</span>

<span class="k">class</span> <span class="nc">GradNet</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">net</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">GradNet</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward_net</span> <span class="o">=</span> <span class="n">net</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ms</span><span class="o">.</span><span class="n">grad</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">forward_net</span><span class="p">,</span> <span class="n">grad_position</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

<span class="n">flag</span> <span class="o">=</span> <span class="s2">&quot;ok&quot;</span>
<span class="n">input_x</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>
<span class="n">input_y</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">input_z</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">(</span><span class="n">flag</span><span class="p">)</span>
<span class="n">grad_net</span> <span class="o">=</span> <span class="n">GradNet</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">grad_net</span><span class="p">(</span><span class="n">input_x</span><span class="p">,</span> <span class="n">input_y</span><span class="p">,</span> <span class="n">input_z</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ret:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ret</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ret:(Tensor(shape=[2, 3], dtype=Float32, value=
[[ 1.00000000e+00,  1.00000000e+00,  1.00000000e+00],
 [ 1.00000000e+00,  1.00000000e+00,  1.00000000e+00]]), Tensor(shape=[2, 3], dtype=Float32, value=
[[ 1.00000000e+00,  1.00000000e+00,  1.00000000e+00],
 [ 1.00000000e+00,  1.00000000e+00,  1.00000000e+00]]))
</pre></div>
</div>
<p>In the <code class="docutils literal notranslate"><span class="pre">Net</span></code> defined above,  <code class="docutils literal notranslate"><span class="pre">string</span></code> flag is transferred during initialization and saved as attribute <code class="docutils literal notranslate"><span class="pre">self.flag</span></code>, then used in the <code class="docutils literal notranslate"><span class="pre">construct</span></code>.</p>
<p>The input parameter <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">z</span></code> are <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code> is <code class="docutils literal notranslate"><span class="pre">int</span></code>. While <code class="docutils literal notranslate"><span class="pre">grad_net</span></code> calculates gradient of the input parameters <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">z)</span></code> for the outermost network, gradient of <code class="docutils literal notranslate"><span class="pre">y</span></code> is automatically ignored, only the gradient of <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">z</span></code> is calculated, <code class="docutils literal notranslate"><span class="pre">ret</span> <span class="pre">=</span> <span class="pre">(grad_x,</span> <span class="pre">grad_z)</span></code>.</p>
</section>
<section id="network-constraints">
<h3>Network Constraints<a class="headerlink" href="#network-constraints" title="Permalink to this headline"></a></h3>
<ol class="arabic">
<li><p>When an undefined class member is used in the <code class="docutils literal notranslate"><span class="pre">construct</span></code> function, <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> exception will be thrown.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">set_context</span>

<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">net</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The result would be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>AttributeError: External object has no attribute y
</pre></div>
</div>
</li>
<li><p>Class methods modified by <code class="docutils literal notranslate"><span class="pre">classmethod</span></code> in <code class="docutils literal notranslate"><span class="pre">nn.Cell</span></code> are not supported.</p></li>
</ol>
</section>
</section>
<section id="jit-fallback">
<h2>JIT Fallback<a class="headerlink" href="#jit-fallback" title="Permalink to this headline"></a></h2>
<p>In MindSpore static diagram mode, users need to follow MindSpore <a class="reference external" href="https://www.mindspore.cn/docs/en/master/note/static_graph_syntax_support.html">static diagram syntax support</a> when writing programs. Constraints exist on the use of the syntax.In dynamic graph mode, Python script code is executed according to the Python syntax, and users can use any Python syntax. It can be seen that the syntax constraint restrictions are different for static and dynamic graphs.</p>
<p>JIT Fallback considers the unification of static and dynamic graphs from the perspective of static graphs. Through the JIT Fallback feature, static graphs can support as many dynamic diagram syntaxes as possible, making static graphs provide a syntax experience close to that of dynamic graphs, thus achieving dynamic unity. To facilitate the user’s ability to choose to use the JIT Fallback feature, the JIT syntax support level option ‘jit_syntax_level’ is provided. The value must be in [STRICT(0), COMPATIBLE(1), LAX(2)]. Default: LAX(2). All levels support all backends.
STRICT(0): Only basic syntax is supported, and execution performance is optimal.
COMPATIBLE(1): Besides basic syntax, supports more syntax, such as operations of dict, list, and scalar.
LAX(2): Compatible with all Python syntax as much as possible. However, execution performance may be affected and not optimal.</p>
<p>This document describes the support scope and usage notes of JIT Fallback so that you can use JIT Fallback features more effectively.</p>
<p>The JIT Fallback feature is still being improved, and the following is a list of static graph compilation syntaxes that are currently supported by this feature.</p>
<section id="annotation">
<h3>Annotation<a class="headerlink" href="#annotation" title="Permalink to this headline"></a></h3>
<p>For JIT fallback support at runtime, nodes are generated that cannot be derived by type and are called Any types. Since the correct type cannot be inferred at compile time, Any types will be operated with a default maximum precision of Float64 to prevent loss of precision. To optimize performance, it is recommended to minimize the generation of Any types. When the user knows exactly what type of statement will be generated through JIT fallback support, it is recommended to use <code class="docutils literal notranslate"><span class="pre">Annotation</span> <span class="pre">&#64;jit.typing:</span></code> to specify the corresponding Python statement type, thereby determining the type of the interpretation node and avoiding the generation of Any types.</p>
<p>For example, the difference between the Tensor class and the tensor interface in the above example is that the annotation mechanism is used within the tensor interface. When the dtype of the tensor function is determined, the function will use annotations to specify the output type and avoid the generation of Any types. To use annotations, simply add a comment above or below the corresponding Python statement, such as # &#64;jit.typing: () -&gt; tensor_type[float32], where -&gt; tensor_type[float32] indicates the output type of the annotated statement.</p>
<p>The code example is as follows.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">import</span> <span class="nn">mindspore.nn</span> <span class="k">as</span> <span class="nn">nn</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">ops</span><span class="p">,</span> <span class="n">Tensor</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abs</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">Abs</span><span class="p">()</span>

    <span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">tensor</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">()</span> <span class="o">+</span> <span class="n">y</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
        <span class="n">y2</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">()</span> <span class="o">+</span> <span class="n">y</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span> <span class="c1"># @jit.typing: () -&gt; tensor_type[float32]</span>
        <span class="n">y3</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">()</span> <span class="o">+</span> <span class="n">y</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">())</span>
        <span class="n">y4</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">()</span> <span class="o">+</span> <span class="n">y</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y1</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y2</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y3</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y4</span><span class="p">)</span>

<span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">y4</span> <span class="o">=</span> <span class="n">net</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;y1 value is </span><span class="si">{</span><span class="n">y1</span><span class="si">}</span><span class="s2">, dtype is </span><span class="si">{</span><span class="n">y1</span><span class="o">.</span><span class="n">dtype</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;y2 value is </span><span class="si">{</span><span class="n">y2</span><span class="si">}</span><span class="s2">, dtype is </span><span class="si">{</span><span class="n">y2</span><span class="o">.</span><span class="n">dtype</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;y3 value is </span><span class="si">{</span><span class="n">y3</span><span class="si">}</span><span class="s2">, dtype is </span><span class="si">{</span><span class="n">y3</span><span class="o">.</span><span class="n">dtype</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;y4 value is </span><span class="si">{</span><span class="n">y4</span><span class="si">}</span><span class="s2">, dtype is </span><span class="si">{</span><span class="n">y4</span><span class="o">.</span><span class="n">dtype</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Output the result:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>y1 value is 2.0, dtype is Float32
y2 value is 2.0, dtype is Float32
y3 value is 2.0, dtype is Float64
y4 value is 2.0, dtype is Float64
</pre></div>
</div>
<p>“The above examples show the differences in creating Tensors using JIT Fallback Runtime. Due to the lack of Annotation indication in the Tensor class, y3 and y4 cannot infer the correct type and can only perform operations in the highest precision Float64. For y2, the corresponding type for JIT Fallback was specified through Annotation during Tensor creation, allowing it to perform operations according to the specified type. y1 created the Tensor using the tensor function interface and passed the dtype parameter as an Annotation indication, avoiding the generation of Any type.”</p>
</section>
<section id="calling-the-third-party-libraries">
<h3>Calling the Third-party Libraries<a class="headerlink" href="#calling-the-third-party-libraries" title="Permalink to this headline"></a></h3>
<p>JIT Fallback supports calling objects and methods of third-party libraries in the static graph mode.</p>
<p>It should be noted that for methods with return values, you need to use variables to save their results, otherwise an error may be reported. This usage will be supported in subsequent versions.</p>
<p>An code example to call a third-party library is shown below. The use case calls the NumPy third-party library, where <code class="docutils literal notranslate"><span class="pre">np.array([1,</span> <span class="pre">2,</span> <span class="pre">3])</span></code> and <code class="docutils literal notranslate"><span class="pre">np.array([4,</span> <span class="pre">5,</span> <span class="pre">6])</span></code> are supported via JIT Fallback.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">import</span> <span class="nn">mindspore.nn</span> <span class="k">as</span> <span class="nn">nn</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
        <span class="k">return</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

<span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">net</span><span class="p">())</span>
</pre></div>
</div>
<p>Output the result:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[5 7 9]
</pre></div>
</div>
</section>
<section id="supporting-control-flow">
<h3>Supporting Control Flow<a class="headerlink" href="#supporting-control-flow" title="Permalink to this headline"></a></h3>
<p>In order to improve Python standard syntax support and achieve dynamic unification, the use of control flow statements is achieved through JIT Fallback. Control flow statements are process control statements such as if, for, and while. The JIT Fallback feature supports creating and using Tensor in static graph mode, calling third-party libraries such as Numpy to create and use constants and variables, and supporting some of Python built-in functions. In theory, the syntax supported by JIT Fallback is also supported in control flow scenarios.</p>
<p>Examples of code usage are as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;res: &quot;</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
<p>Output the result:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>res: 2
</pre></div>
</div>
</section>
<section id="support-jit-fallback-in-the-runtime-phase">
<h3>Support JIT Fallback in the Runtime Phase<a class="headerlink" href="#support-jit-fallback-in-the-runtime-phase" title="Permalink to this headline"></a></h3>
<p>When JIT Fallback handles unsupported syntax expressions, it will generate corresponding nodes, and constants will derive values at compile time, otherwise these nodes will be passed to the backend runtime, where the result is obtained through capable execution of Python. The sample code is as follows. <code class="docutils literal notranslate"><span class="pre">np.add(x,</span> <span class="pre">y)</span></code> will generate the corresponding node, and the node, as the return value of the function, will be passed to the runtime. Currently, JIT Fallback for the runtime phase in some scenarios is supported.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">test_np_add</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="n">np_add_res</span> <span class="o">=</span> <span class="n">test_np_add</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np_add_res</span><span class="p">)</span>
</pre></div>
</div>
<p>Output the result:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[ 2  4  6  8  10]
</pre></div>
</div>
</section>
<section id="instructions-for-use">
<h3>Instructions for Use<a class="headerlink" href="#instructions-for-use" title="Permalink to this headline"></a></h3>
<p>When using JIT Fallback, please note the following points:</p>
<ol class="arabic">
<li><p>The ability of JIT Fallback to support scalar dynamic graphs shall be within the scope of dynamic graph syntax, including but not limited to data types.</p></li>
<li><p>The current constant control flow scenario does not support the assignment of subscripts to Numpy Array data at this time, and the wrong code example is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;res: &quot;</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
<p>The error message is reported as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>RuntimeError: For operation &#39;setitem&#39;, current input arguments types are &lt;External, Number, Number&gt;. The 1-th argument type &#39;External&#39; is not supported now.
</pre></div>
</div>
</li>
</ol>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../migration_guide/tensorflow2mindspore.html" class="btn btn-neutral float-left" title="Method for Converting TensorFlow Models to MindSpore Models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="static_graph_syntax/operators.html" class="btn btn-neutral float-right" title="Static Graph Syntax —— Operators" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>