

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mindspore.rewrite &mdash; MindSpore master documentation</title>
  

  
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/bootstrap.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/training.css" type="text/css" />
   
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  
  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/training.js"></script>
        
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="mindspore.boost" href="mindspore.boost.html" />
    <link rel="prev" title="mindspore.nn.transformer" href="mindspore.nn.transformer.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> MindSpore
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../design/overview.html">MindSpore Design Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/auto_gradient.html">Functional Differential Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/distributed_training_design.html">Distributed Training Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/dynamic_graph_and_static_graph.html">Combination of Dynamic and Static Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/graph_fusion_engine.html">Graph-Kernel Fusion Acceleration Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/mindir.html">MindSpore IR (MindIR)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/all_scenarios.html">Full-scenarios Unification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/thor.html">Second Order Optimizer</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.mindspore.cn/mindinsight/docs/en/r2.0.0-alpha/training_visual_design.html">Design of Visualization↗</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/data_engine.html">High Performance Data Processing Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Specification</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../note/benchmark.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference external" href="https://gitee.com/mindspore/models/blob/r2.0.0-alpha/README.md#table-of-contents">Network List↗</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/operator_list.html">API List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/syntax_list.html">Syntax Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="mindspore.html">mindspore</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.nn.html">mindspore.nn</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.ops.html">mindspore.ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.ops.primitive.html">mindspore.ops.primitive</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.amp.html">mindspore.amp</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.train.html">mindspore.train</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.communication.html">mindspore.communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.common.initializer.html">mindspore.common.initializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.dataset.html">mindspore.dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.dataset.transforms.html">mindspore.dataset.transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.mindrecord.html">mindspore.mindrecord</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.nn.probability.html">mindspore.nn.probability</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.nn.transformer.html">mindspore.nn.transformer</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">mindspore.rewrite</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.boost.html">mindspore.boost</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.numpy.html">mindspore.numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.scipy.html">mindspore.scipy</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.mindspore.cn/lite/api/en/r2.0.0-alpha/api_cpp/mindspore.html">C++ API↗</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Mapping</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../note/api_mapping/pytorch_api_mapping.html">PyTorch and MindSpore API Mapping Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/api_mapping/tensorflow_api_mapping.html">TensorFlow and MindSpore API Mapping Table</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Migration Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/overview.html">Overview of Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/enveriment_preparation.html">Environment Preparation and Information Acquisition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/analysis_and_preparation.html">Model Analysis and Preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/model_development/model_development.html">Constructing MindSpore Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/debug_and_tune.html">Debugging and Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/sample_code.html">Network Migration Debugging Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/faq.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/typical_api_comparision.html">Differences Between MindSpore and PyTorch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/use_third_party_op.html">Using Third-party Operator Libraries Based on Customized Interfaces</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/data_processing.html">Data Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/implement_problem.html">Implement Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/network_compilation.html">Network Compilation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/operators_compile.html">Operators Compile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/usage_migrate_3rd.html">Migration from a Third-party Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/performance_tuning.html">Performance Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/precision_tuning.html">Precision Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/distributed_configure.html">Distributed Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/inference.html">Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/feature_advice.html">Feature Advice</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../RELEASE.html">Release Notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MindSpore</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>mindspore.rewrite</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api_python/mindspore.rewrite.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="module-mindspore.rewrite">
<span id="mindspore-rewrite"></span><h1>mindspore.rewrite<a class="headerlink" href="#module-mindspore.rewrite" title="Permalink to this headline"></a></h1>
<p>MindSpore Rewrite package.
This is an experimental python package that is subject to change or deletion.</p>
<dl class="py class">
<dt class="sig sig-object py" id="mindspore.rewrite.Node">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.rewrite.</span></span><span class="sig-name descname"><span class="pre">Node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">NodeImpl</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node" title="Permalink to this definition"></a></dt>
<dd><p>Node is a data structure represents a source code line in network.</p>
<p>For the most part, Node represents an operator invoking in forward which could be an instance of <cite>Cell</cite>, an instance
of <cite>Primitive</cite> or a callable method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<em>NodeImpl</em>) – A handler of <cite>NodeImpl</cite>. <cite>NodeImpl</cite> mentioned below is implementation of <cite>Node</cite> which is not
an interface of Rewrite. Rewrite recommend invoking specific create method of <cite>Node</cite>
to instantiate an instance of Node such as <cite>create_call_cell</cite> rather than invoking constructor of <cite>Node</cite>
directly, so don’t care about what is <cite>NodeImpl</cite> and use its instance just as a handler.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.create_call_cell">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_call_cell</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cell</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="nn/mindspore.nn.Cell.html#mindspore.nn.Cell" title="mindspore.nn.Cell"><span class="pre">Cell</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><span class="pre">ScopedValue</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><span class="pre">ScopedValue</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">{str:</span> <span class="pre">ScopedValue}</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_sub_net</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.create_call_cell"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.create_call_cell" title="Permalink to this definition"></a></dt>
<dd><p>Create a node. Only support create from a <cite>Cell</cite> now.</p>
<p>A node is corresponding to source code like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>`targets` = self.`name`(*`args`, **`kwargs`)
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cell</strong> (<a class="reference internal" href="nn/mindspore.nn.Cell.html#mindspore.nn.Cell" title="mindspore.nn.Cell"><em>Cell</em></a>) – Cell-operator of this forward-layer.</p></li>
<li><p><strong>targets</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><em>ScopedValue</em></a><em>]</em>) – Indicate output names. Used as targets of an assign statement in source code.
Rewrite will check and ensure the uniqueness of each target while node being inserted.</p></li>
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><em>ScopedValue</em></a><em>]</em>) – Indicate input names. Used as args of a call expression of an assign statement in
source code. Default is None indicate the <cite>cell</cite> has no args inputs. Rewrite will check and ensure the
uniqueness of each arg while node being inserted.</p></li>
<li><p><strong>kwargs</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – Type of key must be <cite>str</cite> and type of value must be <cite>ScopedValue</cite>.
Indicate keyword input names. Used as kwargs of a call expression of an assign statement in source code.
Default is None indicate the <cite>cell</cite> has no kwargs inputs. Rewrite will check and ensure the uniqueness
of each kwarg while node being inserted.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Indicate the name of node. Used as field name in source code. Default is None. Rewrite will
generate name from <cite>targets</cite> when name is None. Rewrite will check and ensure the uniqueness of <cite>name</cite>
while node being inserted.</p></li>
<li><p><strong>is_sub_net</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Indicate that is <cite>cell</cite> a network. If <cite>is_sub_net</cite> is true, Rewrite will try to parse the
<cite>cell</cite> to a TreeNode, else a CallCell Node. Default is a False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of <cite>Node</cite>.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>cell</cite> is not a <cite>Cell</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>targets</cite> is not <cite>list</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If the type of <cite>targets</cite> is not in <cite>[ScopedValue, str]</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If arg in <cite>args</cite> is not a <cite>ScopedValue</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If key of <cite>kwarg</cite> is not a str or value of kwarg in <cite>kwargs</cite> is not a <cite>ScopedValue</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_args">
<span class="sig-name descname"><span class="pre">get_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_args" title="Permalink to this definition"></a></dt>
<dd><p>Get the arguments of current node.</p>
<ul class="simple">
<li><p>When <cite>node_type</cite> of current node is <cite>CallCell</cite>, <cite>CallPrimitive</cite> or <cite>Tree</cite>, arguments are corresponding to args
of ast.Call which represents arguments to invoke forward method of cell-op or primitive-op.</p></li>
<li><p>When <cite>node_type</cite> of current node is <cite>Input</cite>, arguments represents default-value of argument of function.</p></li>
<li><p>When <cite>node_type</cite> of current node is <cite>Output</cite>, arguments represents the return values of network.</p></li>
<li><p>When <cite>node_type</cite> of current node is <cite>Python</cite>, arguments are don’t-care.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of instances of <cite>ScopedValue</cite>.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_args</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_attribute">
<span class="sig-name descname"><span class="pre">get_attribute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_attribute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_attribute" title="Permalink to this definition"></a></dt>
<dd><p>Get attribute of current node by key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Key of attribute.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A object as attribute, can be any type.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>key</cite> is not a <cite>str</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_attributes">
<span class="sig-name descname"><span class="pre">get_attributes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_attributes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_attributes" title="Permalink to this definition"></a></dt>
<dd><p>Get all attributes of current node.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dict of str to instance of object as attributes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_handler">
<span class="sig-name descname"><span class="pre">get_handler</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_handler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_handler" title="Permalink to this definition"></a></dt>
<dd><p>Get handler of node implementation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An instance of <cite>NodeImpl</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_inputs">
<span class="sig-name descname"><span class="pre">get_inputs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_inputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_inputs" title="Permalink to this definition"></a></dt>
<dd><p>Get input nodes of current node in topological order.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of instances of <cite>Node</cite> as input nodes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_instance">
<span class="sig-name descname"><span class="pre">get_instance</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_instance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_instance" title="Permalink to this definition"></a></dt>
<dd><p>Get the instance of current node.</p>
<ul class="simple">
<li><p>When node_type of current node is <cite>CallCell</cite>, instance is an instance of Cell.</p></li>
<li><p>When node_type of current node is <cite>CallPrimitive</cite>, instance is an instance of primitive.</p></li>
<li><p>When node_type of current node is <cite>Tree</cite>, instance is an instance of network-cell.</p></li>
<li><p>When node_type of current node is <cite>Python</cite>, <cite>Input</cite>, <cite>Output</cite> or <cite>CallMethod</cite>, instance should be None.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A object represents corresponding instance of current node.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_instance_type">
<span class="sig-name descname"><span class="pre">get_instance_type</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_instance_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_instance_type" title="Permalink to this definition"></a></dt>
<dd><p>Get the instance_type of current node.</p>
<ul class="simple">
<li><p>When node_type of current node is <cite>CallCell</cite>, instance_type is type of cell-op.</p></li>
<li><p>When node_type of current node is <cite>CallPrimitive</cite>, instance_type is type of primitive-op.</p></li>
<li><p>When node_type of current node is <cite>Tree</cite>, instance_type is type of network-cell.</p></li>
<li><p>When node_type of current node is <cite>Python</cite>, <cite>Input</cite>, <cite>Output</cite> or <cite>CallMethod</cite>, instance_type should be
NoneType.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A type object represents corresponding instance type of current node.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_kwargs">
<span class="sig-name descname"><span class="pre">get_kwargs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_kwargs" title="Permalink to this definition"></a></dt>
<dd><p>Get the keyword arguments of current node.</p>
<ul class="simple">
<li><p>When node_type of current node is <cite>CallCell</cite>, <cite>CallPrimitive</cite> or <cite>Tree</cite>, keyword arguments are corresponding
to kwargs of ast.Call which represents arguments to invoke forward method of cell-op or primitive-op.</p></li>
<li><p>When node_type of current node is <cite>Python</cite>, <cite>Input</cite> or <cite>Output</cite>, keyword arguments are don’t-care.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dict of str to instance of <cite>ScopedValue</cite>.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_kwargs</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_name">
<span class="sig-name descname"><span class="pre">get_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_name" title="Permalink to this definition"></a></dt>
<dd><p>Get the name of current node.</p>
<p>When node has been inserted into <cite>SymbolTree</cite>, the name of node should be unique in <cite>SymbolTree</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A string as name of node.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">name</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_node_type">
<span class="sig-name descname"><span class="pre">get_node_type</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_node_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_node_type" title="Permalink to this definition"></a></dt>
<dd><p>Get the node_type of current node.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A NodeType as node_type of node.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node_type</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_node_type</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_targets">
<span class="sig-name descname"><span class="pre">get_targets</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_targets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_targets" title="Permalink to this definition"></a></dt>
<dd><p>Get targets of current node.</p>
<ul class="simple">
<li><p>When node_type of current node is <cite>CallCell</cite>, <cite>CallPrimitive</cite>, <cite>CallMethod</cite> or <cite>Tree</cite>, <cite>targets</cite> are strings
represents invoke result of the cell-op or primitive-op or function-call which are corresponding to targets of
ast.Assign.</p></li>
<li><p>When node_type of current node is Input, <cite>targets</cite> should have only one element which is a string represents
parameter of function.</p></li>
<li><p>When node_type of current node is <cite>Python</cite> or <cite>Output</cite>, <cite>targets</cite> are don’t-care.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of instances of ScopedValue as targets of node.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">targets</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_targets</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_users">
<span class="sig-name descname"><span class="pre">get_users</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_users"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_users" title="Permalink to this definition"></a></dt>
<dd><p>Get output nodes of current node in topological order.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of nodes represents users.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">users</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_users</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.set_arg">
<span class="sig-name descname"><span class="pre">set_arg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><span class="pre">ScopedValue</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.set_arg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.set_arg" title="Permalink to this definition"></a></dt>
<dd><p>Set argument of current node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Indicate which input being modified.</p></li>
<li><p><strong>arg</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><em>ScopedValue</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – New argument to been set.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>index</cite> is not a <cite>int</cite> number.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If the type of <cite>arg</cite> is not in [<cite>ScopedValue</cite>, <cite>str</cite>].</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">set_arg</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.set_arg_by_node">
<span class="sig-name descname"><span class="pre">set_arg_by_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg_idx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="s"><span class="pre">'Node'</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_idx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.set_arg_by_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.set_arg_by_node" title="Permalink to this definition"></a></dt>
<dd><p>Set argument of current node by another Node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arg_idx</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Indicate which input being modified.</p></li>
<li><p><strong>src_node</strong> (<a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a>) – A <cite>Node</cite> as new input. Can be a node or name of node.</p></li>
<li><p><strong>out_idx</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>optional</em>) – Indicate which output of <cite>src_node</cite> as new input of current node. Default is None
which means use first output of <cite>src_node</cite> as new input.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#RuntimeError" title="(in Python v3.8)"><strong>RuntimeError</strong></a> – If <cite>src_node</cite> is not belong to current <cite>SymbolTree</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#RuntimeError" title="(in Python v3.8)"><strong>RuntimeError</strong></a> – If current node and <cite>src_node</cite> is not belong to same <cite>SymbolTree</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>arg_idx</cite> is not a <cite>int</cite> number.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If <cite>arg_idx</cite> is out of range.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>src_node</cite> is not a <cite>Node</cite> instance.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>out_idx</cite> is not a <cite>int</cite> number.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If <cite>out_idx</cite> is out of range.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If <cite>src_node</cite> has multi-outputs while <cite>out_idx</cite> is None or <cite>out_idx</cite> is not offered.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">src_node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dst_node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dst_node</span><span class="o">.</span><span class="n">set_arg_by_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">src_node</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.set_attribute">
<span class="sig-name descname"><span class="pre">set_attribute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.set_attribute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.set_attribute" title="Permalink to this definition"></a></dt>
<dd><p>Set attribute of current node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Key of attribute.</p></li>
<li><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#object" title="(in Python v3.8)"><em>object</em></a>) – Value of attribute.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>key</cite> is not a <cite>str</cite>.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span><span class="s2">&quot;channel&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.rewrite.NodeType">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.rewrite.</span></span><span class="sig-name descname"><span class="pre">NodeType</span></span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node_type.html#NodeType"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.NodeType" title="Permalink to this definition"></a></dt>
<dd><p><cite>NodeType</cite> represents type of <cite>Node</cite>.</p>
<ul class="simple">
<li><p>Unknown: Not inited NodeType.</p></li>
<li><p>CallCell: <cite>CallCell</cite> node represents invoking cell-op in forward method.</p></li>
<li><p>CallPrimitive: <cite>CallPrimitive</cite> node represents invoking primitive-op in forward method.</p></li>
<li><p>CallMethod: <cite>CallMethod</cite> node represents invoking of method in forward method which can not be mapped to
cell-op or primitive-op in MindSpore.</p></li>
<li><p>Python: <cite>Python</cite> node holds unsupported-ast-node or unnecessary-to-parse-ast-node.</p></li>
<li><p>Input: <cite>Input</cite> node represents input of <cite>SymbolTree</cite> corresponding to arguments of forward method.</p></li>
<li><p>Output: <cite>Output</cite> node represents output of SymbolTree corresponding to return statement of forward method.</p></li>
<li><p>Tree: <cite>Tree</cite> node represents sub-network invoking in forward method.</p></li>
</ul>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.rewrite.PatternEngine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.rewrite.</span></span><span class="sig-name descname"><span class="pre">PatternEngine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mindspore.rewrite.PatternNode" title="mindspore.rewrite.PatternNode"><span class="pre">PatternNode</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replacement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mindspore.rewrite.Replacement" title="mindspore.rewrite.Replacement"><span class="pre">Replacement</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/pattern_engine.html#PatternEngine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.PatternEngine" title="Permalink to this definition"></a></dt>
<dd><p><cite>PatternEngine</cite> is defined how to transform a <cite>SymbolTree</cite> by <cite>PattenNode</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#mindspore.rewrite.PatternNode" title="mindspore.rewrite.PatternNode"><em>PatternNode</em></a><em>, </em><em>List</em><em>]</em>) – An instance of <cite>PatternNode</cite> or a cell-type-list to construct <cite>PatternNode</cite>
as root of a pattern.</p></li>
<li><p><strong>replacement</strong> (<em>callable</em>) – A callable define how to generate new_node.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.PatternEngine.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stree</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mindspore.rewrite.SymbolTree" title="mindspore.rewrite.SymbolTree"><span class="pre">SymbolTree</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/pattern_engine.html#PatternEngine.apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.PatternEngine.apply" title="Permalink to this definition"></a></dt>
<dd><p>Apply current pattern to a <cite>SymbolTree</cite>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Sub-tree node will be supported in the near feature.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>stree</strong> (<a class="reference internal" href="#mindspore.rewrite.SymbolTree" title="mindspore.rewrite.SymbolTree"><em>SymbolTree</em></a>) – A <cite>SymbolTree</cite> to be transformed.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A bool represents if <cite>stree</cite> been changed.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>stree</cite> is not a <cite>SymbolTree</cite> instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.PatternEngine.pattern">
<span class="sig-name descname"><span class="pre">pattern</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/pattern_engine.html#PatternEngine.pattern"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.PatternEngine.pattern" title="Permalink to this definition"></a></dt>
<dd><p>Getter of pattern.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A instance of <cite>PatternNode</cite>, used to indicate the type that the current pattern needs to match.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.rewrite.PatternNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.rewrite.</span></span><span class="sig-name descname"><span class="pre">PatternNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern_node_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">match_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Type[None]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'PatternNode'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/pattern_engine.html#PatternNode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.PatternNode" title="Permalink to this definition"></a></dt>
<dd><p><cite>PatternNode</cite> is defined as a node while defining pattern.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern_node_name</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Name of current node.</p></li>
<li><p><strong>match_type</strong> (<em>Type</em>) – A type represents what type would be matched of current node. Default: None.</p></li>
<li><p><strong>inputs</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference internal" href="#mindspore.rewrite.PatternNode" title="mindspore.rewrite.PatternNode"><em>PatternNode</em></a><em>]</em>) – Input nodes of current node. Default: None.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.PatternNode.add_input">
<span class="sig-name descname"><span class="pre">add_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/pattern_engine.html#PatternNode.add_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.PatternNode.add_input" title="Permalink to this definition"></a></dt>
<dd><p>Add an input for current <cite>PatternNode</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference internal" href="#mindspore.rewrite.PatternNode" title="mindspore.rewrite.PatternNode"><em>PatternNode</em></a>) – Cell type as an input.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>node</cite> is not a <cite>PatternNode</cite> instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.PatternNode.create_pattern_from_list">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_pattern_from_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/pattern_engine.html#PatternNode.create_pattern_from_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.PatternNode.create_pattern_from_list" title="Permalink to this definition"></a></dt>
<dd><p>Create a Pattern from a cell type list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>type_list</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/library/functions.html#type" title="(in Python v3.8)"><em>type</em></a><em>]</em>) – Input cell type list.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <cite>PatternNode</cite> as root of pattern created from cell type list.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>type_list</cite> is not a <cite>list</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.PatternNode.create_pattern_from_node">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_pattern_from_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><span class="pre">Node</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/pattern_engine.html#PatternNode.create_pattern_from_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.PatternNode.create_pattern_from_node" title="Permalink to this definition"></a></dt>
<dd><p>Create a Pattern from <cite>node</cite> with its inputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a>) – Input rewrite node.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <cite>PatternNode</cite> as root of pattern created from rewrite node.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>node</cite> is not a <cite>Node</cite> instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.PatternNode.from_node">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><span class="pre">Node</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/pattern_engine.html#PatternNode.from_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.PatternNode.from_node" title="Permalink to this definition"></a></dt>
<dd><p>Create a <cite>PatternNode</cite> from <cite>node</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a>) – Input rewrite node.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <cite>PatternNode</cite> created from <cite>node</cite>.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>node</cite> is not a <cite>Node</cite> instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.PatternNode.get_inputs">
<span class="sig-name descname"><span class="pre">get_inputs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/pattern_engine.html#PatternNode.get_inputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.PatternNode.get_inputs" title="Permalink to this definition"></a></dt>
<dd><p>Getter of inputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of <cite>PatternNode</cite>, the inputs of current node.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.PatternNode.match">
<span class="sig-name descname"><span class="pre">match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><span class="pre">Node</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/pattern_engine.html#PatternNode.match"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.PatternNode.match" title="Permalink to this definition"></a></dt>
<dd><p>Check if current <cite>PatternNode</cite> can match with <cite>node</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a>) – A rewrite node to be match.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>node</cite> is not a <cite>Node</cite> instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.PatternNode.name">
<span class="sig-name descname"><span class="pre">name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/pattern_engine.html#PatternNode.name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.PatternNode.name" title="Permalink to this definition"></a></dt>
<dd><p>Getter of PatternNode name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.PatternNode.set_inputs">
<span class="sig-name descname"><span class="pre">set_inputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/pattern_engine.html#PatternNode.set_inputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.PatternNode.set_inputs" title="Permalink to this definition"></a></dt>
<dd><p>Set inputs for current <cite>PatternNode</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference internal" href="#mindspore.rewrite.PatternNode" title="mindspore.rewrite.PatternNode"><em>PatternNode</em></a><em>]</em>) – Inputs to be set as inputs of current <cite>PatternNode</cite>.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>inputs</cite> is not a <cite>list</cite> or input in <cite>inputs</cite> is not <cite>PatternNode</cite> instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.PatternNode.type">
<span class="sig-name descname"><span class="pre">type</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/pattern_engine.html#PatternNode.type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.PatternNode.type" title="Permalink to this definition"></a></dt>
<dd><p>Getter of PatternNode type.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.rewrite.Replacement">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.rewrite.</span></span><span class="sig-name descname"><span class="pre">Replacement</span></span><a class="reference internal" href="../_modules/mindspore/rewrite/api/pattern_engine.html#Replacement"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Replacement" title="Permalink to this definition"></a></dt>
<dd><p>Interface of replacement function.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">Replacement</span><span class="p">,</span> <span class="n">Node</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.nn</span> <span class="kn">import</span> <span class="n">nn</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">BnReplacement</span><span class="p">(</span><span class="n">Replacement</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">is_chain_pattern</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">matched</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">bn_node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">=</span> <span class="n">matched</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">name</span><span class="p">())</span>
<span class="gp">... </span>        <span class="n">conv</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Conv2d</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">conv_node</span> <span class="o">=</span> <span class="n">Node</span><span class="o">.</span><span class="n">create_call_cell</span><span class="p">(</span><span class="n">conv</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x1&#39;</span><span class="p">],</span> <span class="n">bn_node</span><span class="o">.</span><span class="n">get_args</span><span class="p">(),</span> <span class="n">bn_node</span><span class="o">.</span><span class="n">get_kwargs</span><span class="p">())</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="p">[</span><span class="n">conv_node</span><span class="p">]</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Replacement.build">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">build</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mindspore.rewrite.PatternNode" title="mindspore.rewrite.PatternNode"><span class="pre">PatternNode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_chain_pattern</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><span class="pre">bool</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">matched</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrderedDict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/pattern_engine.html#Replacement.build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Replacement.build" title="Permalink to this definition"></a></dt>
<dd><p>Interface define for creating replacement nodes from matched result.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Return value will be delivered into replace api of <cite>SymbolTree</cite> as argument, return value should follow
restraint of parameter <cite>new_nodes</cite> of <cite>replace</cite> api if <cite>SymbolTree</cite>. See detail in docstring of <cite>replace</cite>
api of <cite>SymbolTree</cite>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern</strong> (<a class="reference internal" href="#mindspore.rewrite.PatternNode" title="mindspore.rewrite.PatternNode"><em>PatternNode</em></a>) – A <cite>PatternNode</cite> represents root node of current pattern.</p></li>
<li><p><strong>is_chain_pattern</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – A bool indicated if pattern is a chain pattern or a tree pattern.</p></li>
<li><p><strong>matched</strong> (<em>OrderedDict</em>) – An OrderedDict map from pattern_node name to node represents matched result.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of instance of <cite>Node</cite> as replacement nodes.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.rewrite.ScopedValue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.rewrite.</span></span><span class="sig-name descname"><span class="pre">ScopedValue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mindspore.rewrite.ValueType" title="mindspore.rewrite.ValueType"><span class="pre">ValueType</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/scoped_value.html#ScopedValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.ScopedValue" title="Permalink to this definition"></a></dt>
<dd><p><cite>ScopedValue</cite> represents a value with its full-scope.</p>
<p><cite>ScopedValue</cite> is used to express: a left-value such as target of an assign statement, or a callable object such as
func of a call statement, or a right-value such as args and kwargs of an assign statement.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arg_type</strong> (<a class="reference internal" href="#mindspore.rewrite.ValueType" title="mindspore.rewrite.ValueType"><em>ValueType</em></a>) – A <cite>ValueType</cite> represents type of current value.</p></li>
<li><p><strong>scope</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – A string represents scope of current value. Take “self.var1” as an example, <cite>scope</cite> of this
var1 is “self”.</p></li>
<li><p><strong>value</strong> – A handler represents value of current value. The type of value is corresponding to <cite>arg_type</cite>.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.ScopedValue.create_name_values">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_name_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><span class="pre">list</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#tuple" title="(in Python v3.8)"><span class="pre">tuple</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scopes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><span class="pre">list</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#tuple" title="(in Python v3.8)"><span class="pre">tuple</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/scoped_value.html#ScopedValue.create_name_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.ScopedValue.create_name_values" title="Permalink to this definition"></a></dt>
<dd><p>Create a list of naming <cite>ScopedValue</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>names</strong> – (list[str] or tuple[str]): List or tuple of <cite>str</cite> represents names of referenced variables.</p></li>
<li><p><strong>scopes</strong> – (list[str] or tuple[str]): List or tuple of <cite>str</cite> represents scopes of referenced variables.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An list of instance of <cite>ScopedValue</cite>.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#RuntimeError" title="(in Python v3.8)"><strong>RuntimeError</strong></a> – If the length of names is not equal to the length of scopes when scopes are not None.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>names</cite> is not <cite>list</cite> or <cite>tuple</cite> and name in <cite>names</cite> is not <cite>str</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>scopes</cite> is not <cite>list</cite> or <cite>tuple</cite> and scope in <cite>scopes</cite> is not <cite>str</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">ScopedValue</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">variables</span> <span class="o">=</span> <span class="n">ScopedValue</span><span class="o">.</span><span class="n">create_name_values</span><span class="p">([</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;z_1&quot;</span><span class="p">]),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;subnet&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.ScopedValue.create_naming_value">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_naming_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/scoped_value.html#ScopedValue.create_naming_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.ScopedValue.create_naming_value" title="Permalink to this definition"></a></dt>
<dd><p>Create a naming <cite>ScopedValue</cite>. A <cite>NamingValue</cite> represents a reference to another variable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – (str): A string represents the identifier of another variable.</p></li>
<li><p><strong>scope</strong> – (str): A string represents the scope of another variable.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of <cite>ScopedValue</cite>.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>name</cite> is not <cite>str</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>scope</cite> is not <cite>str</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">ScopedValue</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">variable</span> <span class="o">=</span> <span class="n">ScopedValue</span><span class="o">.</span><span class="n">create_naming_value</span><span class="p">(</span><span class="s2">&quot;conv&quot;</span><span class="p">,</span> <span class="s2">&quot;self&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.ScopedValue.create_variable_value">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_variable_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/scoped_value.html#ScopedValue.create_variable_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.ScopedValue.create_variable_value" title="Permalink to this definition"></a></dt>
<dd><p>Create <cite>ScopedValue</cite> from a variable.</p>
<p><cite>ScopedValue</cite>’s type is determined by type of value. <cite>ScopedValue</cite>’s scope is empty.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – The value to be converted to <cite>ScopedValue</cite>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of <cite>ScopedValue</cite>.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">ScopedValue</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">variable</span> <span class="o">=</span> <span class="n">ScopedValue</span><span class="o">.</span><span class="n">create_variable_value</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.rewrite.</span></span><span class="sig-name descname"><span class="pre">SymbolTree</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">SymbolTreeImpl</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree" title="Permalink to this definition"></a></dt>
<dd><p>A <cite>SymbolTree</cite> usually corresponding to forward method of a network.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>handler</strong> (<em>SymbolTreeImpl</em>) – SymbolTree internal implementation instance.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.after">
<span class="sig-name descname"><span class="pre">after</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><span class="pre">Node</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.after"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.after" title="Permalink to this definition"></a></dt>
<dd><p>Get insert position after input <cite>node</cite>.</p>
<p><cite>Position</cite> is used to indicate where to insert node, it indicates position in source code rather than position
in topological order. We don’t need to care about what <cite>Position</cite> is, just treat it as a handler and use it as
an arguments of <cite>insert</cite> api of <cite>SymbolTree</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a>) – Indicate the position after which node. Can be a node or name of node.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <cite>Position</cite> to indicate where to insert node.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>node</cite> is not a <cite>Node</cite>.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">stree</span><span class="o">.</span><span class="n">nodes</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;conv1&quot;</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">position</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.before">
<span class="sig-name descname"><span class="pre">before</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><span class="pre">Node</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.before"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.before" title="Permalink to this definition"></a></dt>
<dd><p>Get insert position before input <cite>node</cite>.</p>
<p><cite>Position</cite> is used to indicate where to insert node, it indicates position in source code rather than position
in topological order. We don’t need to care about what <cite>Position</cite> is, just treat it as a handler and use it as
an arguments of <cite>insert</cite> api of <cite>SymbolTree</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a>) – Indicate the position before which node. Can be a node or name of node.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <cite>Position</cite> to indicate where to insert node.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – if <cite>node</cite> is not a <cite>Node</cite>.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">stree</span><span class="o">.</span><span class="n">nodes</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;conv1&quot;</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">position</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">before</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.create">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.create"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.create" title="Permalink to this definition"></a></dt>
<dd><p>Create a new <cite>SymbolTree</cite> of the input <cite>network</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>network</strong> (<a class="reference internal" href="nn/mindspore.nn.Cell.html#mindspore.nn.Cell" title="mindspore.nn.Cell"><em>Cell</em></a>) – <cite>network</cite> used to create <cite>SymbolTree</cite>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Symboltree, a <cite>Symboltree</cite> created based on <cite>network</cite>.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>network</cite> is not a <cite>Cell</cite> instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.create_call_function">
<span class="sig-name descname"><span class="pre">create_call_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.create_call_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.create_call_function" title="Permalink to this definition"></a></dt>
<dd><p>Create a Node object and generate the execution code to insert into the source code.
The source code calls the ‘func’ function with ‘args’ and’ kwargs’ as parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>FunctionType</em>) – The function to be called.</p></li>
<li><p><strong>targets</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – indicates the output name. As the output of the node in the source code.</p></li>
<li><p><strong>args</strong> (<em>Union</em><em>[</em><em>MsDtypes</em><em>, </em><em>ParamTypes</em><em>]</em>) – parameter name of the node. Used as a parameter to a code statement in
source code. The default value is None, which means there is no parameter input in the cell.</p></li>
<li><p><strong>kwargs</strong> (<em>dict{str</em><em>,</em><em>Union</em><em>[</em><em>MsDtypes</em><em>, </em><em>ParamTypes</em><em>]</em><em>}</em>) – The key type must be str,
and the value must be value or type must be ParamTypes.
The input parameter name used to describe the formal parameter with a keyword.
Enter the name in the source code as the ‘kwargs’ in the statement expression.The default value is
None, which means there is no ‘kwargs’ input.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of <cite>Node</cite>.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>func</cite> is not FunctionType.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>targets</cite> is not <cite>list</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If the type of <cite>targets</cite> is not str.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If arg in <cite>args</cite> is not ParamType.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If key of <cite>kwarg</cite> is not a str or value of kwarg in <cite>kwargs</cite> is not ParamType.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">create_call_function</span><span class="p">(</span><span class="n">F</span><span class="o">.</span><span class="n">abs</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">node</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.dump">
<span class="sig-name descname"><span class="pre">dump</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.dump" title="Permalink to this definition"></a></dt>
<dd><p>Print the ir map information corresponding to the network in ‘SymbolTree’ to the screen.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.erase_node">
<span class="sig-name descname"><span class="pre">erase_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><span class="pre">Node</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.erase_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.erase_node" title="Permalink to this definition"></a></dt>
<dd><p>Erase a <cite>node</cite> from rewrite. Can only erase a node not being depended on.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a>) – A <cite>Node</cite> to be erased. Can be a node or name of node.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of <cite>Node</cite> being erased if node is in <cite>SymbolTree</cite> else None.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>node</cite> is not a <cite>Node</cite>.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_inputs</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output_nodes</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_users</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">output_nodes</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">n</span><span class="o">.</span><span class="n">set_arg</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span><span class="o">.</span><span class="n">erase_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.get_code">
<span class="sig-name descname"><span class="pre">get_code</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.get_code"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.get_code" title="Permalink to this definition"></a></dt>
<dd><p>Get source code of modified network.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A str represents source code of modified network.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span><span class="o">.</span><span class="n">get_code</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.get_handler">
<span class="sig-name descname"><span class="pre">get_handler</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.get_handler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.get_handler" title="Permalink to this definition"></a></dt>
<dd><p>Get handler of <cite>SymbolTree</cite> implementation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An instance of <cite>SymbolTree</cite>.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">handler</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_handler</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.get_network">
<span class="sig-name descname"><span class="pre">get_network</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.get_network"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.get_network" title="Permalink to this definition"></a></dt>
<dd><p>Get modified network.
The source code of network is saved to a file, the default file name is <cite>network_define.py</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A network object.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span><span class="o">.</span><span class="n">get_network</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.get_node">
<span class="sig-name descname"><span class="pre">get_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.get_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.get_node" title="Permalink to this definition"></a></dt>
<dd><p>Get node by <cite>node_name</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node_name</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – A string represents name of node.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of node if find else None.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>node_name</cite> is not <cite>str</cite>.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.insert">
<span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><span class="pre">Node</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.insert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.insert" title="Permalink to this definition"></a></dt>
<dd><p>Insert a <cite>node</cite> into <cite>SymbolTree</cite> at <cite>position</cite>.</p>
<p><cite>position</cite> is obtained from <cite>before</cite> api or <cite>after</cite> api of <cite>SymbolTree</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>position</strong> (<em>Position</em>) – Indicate where to insert <cite>node</cite>.</p></li>
<li><p><strong>node</strong> (<a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a>) – An instance of Node to be inserted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of Node being inserted. <cite>node</cite> could be changed while calling this method for uniqueness and
custom-object in args or kwargs.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#RuntimeError" title="(in Python v3.8)"><strong>RuntimeError</strong></a> – If <cite>position</cite> is not belong to current <cite>SymbolTree</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>position</cite> is not a <cite>Position</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>node</cite> is not a <cite>Node</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">position</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">create_call_function</span><span class="p">(</span><span class="n">F</span><span class="o">.</span><span class="n">abs</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">node</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">new_node</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.nodes">
<span class="sig-name descname"><span class="pre">nodes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.nodes" title="Permalink to this definition"></a></dt>
<dd><p>Get a generator for node of corresponding network.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A generator for node of current <cite>SymbolTree</cite>.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">stree</span><span class="o">.</span><span class="n">nodes</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">node</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span><span class="s2">&quot;channel&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.print_node_tabulate">
<span class="sig-name descname"><span class="pre">print_node_tabulate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.print_node_tabulate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.print_node_tabulate" title="Permalink to this definition"></a></dt>
<dd><p>Print node information of graph.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span><span class="o">.</span><span class="n">print_node_tabulate</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.replace">
<span class="sig-name descname"><span class="pre">replace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><span class="pre">Node</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><span class="pre">Node</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.replace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.replace" title="Permalink to this definition"></a></dt>
<dd><p>Replace <cite>old_node</cite> with a node_tree.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>Replace support one-to-one replacement or one-to-multi replacement. If you need multi-to-multi
replacement, please refer to <cite>PatternEngine</cite>.</p></li>
<li><p>When applying one-to-multi replacement, Rewrite will insert all <cite>new_nodes</cite> into symbol_tree.</p></li>
<li><p>Caller should maintain arguments and targets of nodes intra sub-tree for specifying topological relation
intra sub-tree.</p></li>
<li><p>Caller should maintain arguments of input nodes of sub-tree and for specifying topological relation of
inputs of sub-tree.</p></li>
<li><p>Rewrite will maintain arguments of prepend node of sub-tree for specifying topological relation of
outputs of sub-tree.</p></li>
<li><p>Rewrite will maintain all inputs of nodes after replace <cite>new_nodes</cite> into <cite>SymbolTree</cite>.</p></li>
</ol>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>old_node</strong> (<a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a>) – Node to be replaced.</p></li>
<li><p><strong>new_nodes</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a><em>]</em>) – Nodes of the node_tree to replace in.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of Node represents root of node_tree been replaced in.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#RuntimeError" title="(in Python v3.8)"><strong>RuntimeError</strong></a> – Old node is not isolated.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>old_node</cite> is not a <cite>Node</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>new_nodes</cite> is not a <cite>list</cite> or node in <cite>new_nodes</cite> is not a <cite>Node</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenet</span> <span class="kn">import</span> <span class="n">Lenet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Lenet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">create_call_function</span><span class="p">(</span><span class="n">F</span><span class="o">.</span><span class="n">abs</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">node</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="p">[</span><span class="n">new_node</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.rewrite.TreeNodeHelper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.rewrite.</span></span><span class="sig-name descname"><span class="pre">TreeNodeHelper</span></span><a class="reference internal" href="../_modules/mindspore/rewrite/api/tree_node_helper.html#TreeNodeHelper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.TreeNodeHelper" title="Permalink to this definition"></a></dt>
<dd><p><cite>TreeNodeHelper</cite> is used to break circle reference while getting symbol_tree from a <cite>Tree</cite> type <cite>Node</cite>.</p>
<p><cite>TreeNodeHelper</cite> provides a staticmethod <cite>get_sub_tree</cite> for getting symbol_tree from a <cite>Tree</cite> type <cite>Node</cite>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.TreeNodeHelper.get_sub_tree">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_sub_tree</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><span class="pre">Node</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/tree_node_helper.html#TreeNodeHelper.get_sub_tree"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.TreeNodeHelper.get_sub_tree" title="Permalink to this definition"></a></dt>
<dd><p>Getting symbol_tree from a <cite>Tree</cite> type <cite>Node</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a>) – A <cite>Node</cite> which may hold a sub-symbol_tree.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of SymbolTree represents sub-symbol_tree. Note that <cite>node</cite>’s symbol_tree maybe None, in this
case, method will return None.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#RuntimeError" title="(in Python v3.8)"><strong>RuntimeError</strong></a> – If <cite>node</cite>’s type is not <cite>NodeType.Tree</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>node</cite> is not a <cite>Node</cite> instance.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.rewrite.ValueType">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.rewrite.</span></span><span class="sig-name descname"><span class="pre">ValueType</span></span><a class="reference internal" href="../_modules/mindspore/rewrite/api/scoped_value.html#ValueType"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.ValueType" title="Permalink to this definition"></a></dt>
<dd><p>ValueType represents type of <cite>ScopedValue</cite>.</p>
<ul class="simple">
<li><p>A <cite>NamingValue</cite> represents a reference to another variable.</p></li>
<li><p>A <cite>CustomObjValue</cite> represents an instance of custom class or an object whose type is out of range of base-type
and container-type of ValueType.</p></li>
</ul>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.rewrite.VarNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.rewrite.</span></span><span class="sig-name descname"><span class="pre">VarNode</span></span><a class="reference internal" href="../_modules/mindspore/rewrite/api/pattern_engine.html#VarNode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.VarNode" title="Permalink to this definition"></a></dt>
<dd><p>VarNode is a subclass of <cite>PatternNode</cite> whose <cite>match</cite> method is always return True.</p>
</dd></dl>

</section>


           </div>
           
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mindspore.nn.transformer.html" class="btn btn-neutral float-left" title="mindspore.nn.transformer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mindspore.boost.html" class="btn btn-neutral float-right" title="mindspore.boost" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   
</body>
</html>