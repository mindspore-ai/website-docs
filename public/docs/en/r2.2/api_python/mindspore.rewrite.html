<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>mindspore.rewrite &mdash; MindSpore master documentation</title><script>;(()=>{const e=localStorage.getItem("ms-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;(e?"dark"===e:t)&&document.documentElement.setAttribute("data-o-theme","dark")})();</script><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script><script src="../_static/jquery.js"></script>
        <script src="../_static/js/theme.js"></script><script src="../_static/underscore.js"></script><script src="../_static/doctools.js"></script><script crossorigin="anonymous" integrity="sha256-1fEPhSsRKlFKGfK3eO710tEweHh1fwokU5wFGDHO+vg=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="mindspore.boost" href="mindspore.boost.html" />
    <link rel="prev" title="mindspore.nn.probability.distribution.Uniform" href="nn_probability/mindspore.nn.probability.distribution.Uniform.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../design/overview.html">MindSpore Design Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/programming_paradigm.html">Functional and Object-Oriented Fusion Programming Paradigm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/dynamic_graph_and_static_graph.html">Combination of Dynamic and Static Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/distributed_training_design.html">Distributed Parallel Native</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/data_engine.html">High Performance Data Processing Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/all_scenarios.html">Full-scenarios Unified Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/graph_fusion_engine.html">Graph-Kernel Fusion Acceleration Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/pluggable_device.html">Third-Party Hardware Interconnection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Models</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../note/official_models.html">Official Models</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="mindspore.html">mindspore</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.nn.html">mindspore.nn</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.ops.html">mindspore.ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.ops.primitive.html">mindspore.ops.primitive</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.amp.html">mindspore.amp</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.train.html">mindspore.train</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.communication.html">mindspore.communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.common.initializer.html">mindspore.common.initializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.dataset.html">mindspore.dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.dataset.transforms.html">mindspore.dataset.transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.mindrecord.html">mindspore.mindrecord</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.nn.probability.html">mindspore.nn.probability</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">mindspore.rewrite</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.boost.html">mindspore.boost</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.numpy.html">mindspore.numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.scipy.html">mindspore.scipy</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindspore.experimental.html">mindspore.experimental</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Mapping</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../note/api_mapping/pytorch_api_mapping.html">PyTorch and MindSpore API Mapping Table</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Migration Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/overview.html">Overview of Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/enveriment_preparation.html">Environment Preparation and Information Acquisition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/analysis_and_preparation.html">Model Analysis and Preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/typical_api_comparision.html">Differences between PyTorch and MindSpore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/model_development/model_development.html">Constructing MindSpore Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/debug_and_tune.html">Debugging and Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/sample_code.html">Network Migration Debugging Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/migrator_with_tools.html">Application Practice Guide for Network Migration Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/faq.html">FAQs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Syntax Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../note/static_graph_syntax_support.html">Static Graph Syntax Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/static_graph_syntax/operators.html">Static Graph Syntax - Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/static_graph_syntax/statements.html">Static Graph Syntax - Python Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/static_graph_syntax/python_builtin_functions.html">Static Graph Syntax - Python Built-in Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/index_support.html">Tensor Index Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Environment Variables</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../note/env_var_list.html">Environment Variables</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/data_processing.html">Data Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/implement_problem.html">Implement Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/network_compilation.html">Network Compilation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/operators_compile.html">Operators Compile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/usage_migrate_3rd.html">Migration from a Third-party Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/performance_tuning.html">Performance Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/precision_tuning.html">Precision Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/distributed_parallel.html">Distributed Parallel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/inference.html">Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/feature_advice.html">Feature Advice</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../RELEASE.html">Release Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>mindspore.rewrite</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api_python/mindspore.rewrite.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="mindspore-rewrite">
<h1>mindspore.rewrite<a class="headerlink" href="#mindspore-rewrite" title="Permalink to this headline"></a></h1>
<p>The ReWrite module in MindSpore provides users with the ability to modify the network’s forward computation
process based on custom rules, such as inserting, deleting, and replacing statements.</p>
<p>For a quick start of using ReWrite, please refer to <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/api_python/samples/rewrite/rewrite_tutorial.html">Modifying Network With ReWrite</a> .</p>
<span class="target" id="module-mindspore.rewrite"></span><p>MindSpore Rewrite package.
This is an experimental python package that is subject to change or deletion.</p>
<dl class="py class">
<dt class="sig sig-object py" id="mindspore.rewrite.Node">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.rewrite.</span></span><span class="sig-name descname"><span class="pre">Node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">NodeImpl</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node" title="Permalink to this definition"></a></dt>
<dd><p>A node is a data structure that expresses source code statements in a network.</p>
<p>Each node usually corresponds to a statement in expanded forward evaluation process.</p>
<p>Nodes can express a <code class="docutils literal notranslate"><span class="pre">Cell</span></code> call statement, a <code class="docutils literal notranslate"><span class="pre">Primitive</span></code> call statement, an arithmetic operation statement, a
return statements, etc. of the forward calculation process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<em>NodeImpl</em>) – A handler of <cite>NodeImpl</cite>. It is recommended to call the specific methods in Node to create
a Node, such as ‘create_call_cell’, rather than calling the Node’s constructor directly.
Don’t care what <cite>NodeImpl</cite> is, just treat it as a handle.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.create_call_cell">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_call_cell</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cell</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="nn/mindspore.nn.Cell.html#mindspore.nn.Cell" title="mindspore.nn.Cell"><span class="pre">Cell</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><span class="pre">ScopedValue</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><span class="pre">ScopedValue</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><span class="pre">ScopedValue</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_sub_net</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.create_call_cell"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.create_call_cell" title="Permalink to this definition"></a></dt>
<dd><p>Create a node. Only support create from a <cite>Cell</cite> now.</p>
<p>A node is corresponding to source code like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>`targets` = self.`name`(*`args`, **`kwargs`)
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cell</strong> (<a class="reference internal" href="nn/mindspore.nn.Cell.html#mindspore.nn.Cell" title="mindspore.nn.Cell"><em>Cell</em></a>) – Cell-operator of this forward-layer.</p></li>
<li><p><strong>targets</strong> (<em>List</em><em>[</em><em>Union</em><em>[</em><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><em>ScopedValue</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>]</em>) – Indicate output names. Used as targets of an assign statement in
source code.</p></li>
<li><p><strong>args</strong> (<em>List</em><em>[</em><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><em>ScopedValue</em></a><em>]</em>) – Indicate input names. Used as args of a call expression of an assign statement in
source code. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code> , which indicates the <cite>cell</cite> has no args inputs.</p></li>
<li><p><strong>kwargs</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><em>ScopedValue</em></a><em>]</em>) – Type of key must be <cite>str</cite> and type of value must be <cite>ScopedValue</cite>.
Indicate keyword input names. Used as kwargs of a call expression of an assign statement in source
code. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code> , which indicates the <cite>cell</cite> has no kwargs inputs.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Indicate the name of node. Used as field name in source code. Default is None. Rewrite will
generate name from <cite>cell</cite> when name is None. Rewrite will check and ensure the uniqueness of <cite>name</cite>
while node being inserted. Default: <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> .</p></li>
<li><p><strong>is_sub_net</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Indicate that is <cite>cell</cite> a network. If <cite>is_sub_net</cite> is true, Rewrite will try to parse
the <cite>cell</cite> to a TreeNode, otherwise the <cite>cell</cite> is parsed to a CallCell node. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> .</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of <cite>Node</cite>.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>cell</cite> is not a <cite>Cell</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>targets</cite> is not <cite>list</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If the type of <cite>targets</cite> is not in <cite>[ScopedValue, str]</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If arg in <cite>args</cite> is not a <cite>ScopedValue</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If key of <cite>kwarg</cite> is not a str or value of kwarg in <cite>kwargs</cite> is not a <cite>ScopedValue</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span><span class="p">,</span> <span class="n">ScopedValue</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mindspore.nn</span> <span class="k">as</span> <span class="nn">nn</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">position</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">create_call_cell</span><span class="p">(</span><span class="n">cell</span><span class="o">=</span><span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">(),</span> <span class="n">targets</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                 <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">ScopedValue</span><span class="o">.</span><span class="n">create_naming_value</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;new_relu&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">new_node</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">new_node</span><span class="p">))</span>
<span class="go">&lt;class &#39;mindspore.rewrite.api.node.Node&#39;&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.create_call_function">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_call_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">function</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FunctionType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><span class="pre">ScopedValue</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><span class="pre">ScopedValue</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><span class="pre">ScopedValue</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.create_call_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.create_call_function" title="Permalink to this definition"></a></dt>
<dd><p>Create a node that corresponds to a function call. The <cite>function</cite> object is saved into network, and used via
getting object from <cite>self.</cite> .</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>function</strong> (<em>FunctionType</em>) – The function to be called.</p></li>
<li><p><strong>targets</strong> (<em>List</em><em>[</em><em>Union</em><em>[</em><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><em>ScopedValue</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>]</em>) – indicates output names. Used as targets of an assign statement in
source code.</p></li>
<li><p><strong>args</strong> (<em>List</em><em>[</em><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><em>ScopedValue</em></a><em>]</em>) – Indicate input names. Used as args of a call expression of an assign statement in
source code. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code> , which indicates the <cite>function</cite> has no args inputs.</p></li>
<li><p><strong>kwargs</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><em>ScopedValue</em></a><em>]</em>) – Type of key must be <cite>str</cite> and type of value must be <cite>ScopedValue</cite>.
Indicate keyword input names. Used as kwargs of a call expression of an assign statement in source
code. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code> , which indicates the <cite>function</cite> has no kwargs inputs.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of <cite>Node</cite>.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>function</cite> is not a <cite>FunctionType</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>targets</cite> is not <cite>list</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If the type of <cite>targets</cite> is not in <cite>[ScopedValue, str]</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If arg in <cite>args</cite> is not a <cite>ScopedValue</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If key of <cite>kwarg</cite> is not a str or value of kwarg in <cite>kwargs</cite> is not a <cite>ScopedValue</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span><span class="p">,</span> <span class="n">ScopedValue</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mindspore.nn</span> <span class="k">as</span> <span class="nn">nn</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mindspore.ops</span> <span class="k">as</span> <span class="nn">ops</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">position</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">create_call_function</span><span class="p">(</span><span class="n">function</span><span class="o">=</span><span class="n">ops</span><span class="o">.</span><span class="n">abs</span><span class="p">,</span> <span class="n">targets</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                     <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">ScopedValue</span><span class="o">.</span><span class="n">create_naming_value</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">new_node</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">new_node</span><span class="o">.</span><span class="n">get_node_type</span><span class="p">())</span>
<span class="go">NodeType.CallFunction</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_args">
<span class="sig-name descname"><span class="pre">get_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_args" title="Permalink to this definition"></a></dt>
<dd><p>Get arguments of current node.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of arguments of type <code class="docutils literal notranslate"><span class="pre">ScopedValue</span></code> .</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">get_args</span><span class="p">())</span>
<span class="go">[x]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_inputs">
<span class="sig-name descname"><span class="pre">get_inputs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_inputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_inputs" title="Permalink to this definition"></a></dt>
<dd><p>Gets a list of nodes whose output values are used as input values for the current node.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of nodes.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_inputs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">([</span><span class="nb">input</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="k">for</span> <span class="nb">input</span> <span class="ow">in</span> <span class="n">inputs</span><span class="p">])</span>
<span class="go">[&#39;max_pool2d&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_instance_type">
<span class="sig-name descname"><span class="pre">get_instance_type</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_instance_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_instance_type" title="Permalink to this definition"></a></dt>
<dd><p>Gets the instance type called in the code corresponding to the current node.</p>
<ul class="simple">
<li><p>When <cite>node_type</cite> of current node is <cite>CallCell</cite>, the code for that node calls an instance of type <code class="docutils literal notranslate"><span class="pre">Cell</span></code> .</p></li>
<li><p>When <cite>node_type</cite> of current node is <cite>CallPrimitive</cite>, the code for that node calls an instance of
type <code class="docutils literal notranslate"><span class="pre">Primitive</span></code> .</p></li>
<li><p>When <cite>node_type</cite> of current node is <cite>Tree</cite>, the code for that node calls an instance of network type.</p></li>
<li><p>When <cite>node_type</cite> of current node is <cite>Python</cite>, <cite>Input</cite>, <cite>Output</cite> or <cite>CallMethod</cite>, the instance type
is <code class="docutils literal notranslate"><span class="pre">NoneType</span></code> .</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The type of instance called in the statement corresponding to the current node.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance_type</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_instance_type</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">instance_type</span><span class="p">)</span>
<span class="go">&lt;class &#39;mindspore.nn.layer.conv.Conv2d&#39;&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_name">
<span class="sig-name descname"><span class="pre">get_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_name" title="Permalink to this definition"></a></dt>
<dd><p>Get the name of current node.</p>
<p>When node has been inserted into <cite>SymbolTree</cite>, the name of node should be unique in <cite>SymbolTree</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A string as name of node.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">name</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="go">conv1</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_node_type">
<span class="sig-name descname"><span class="pre">get_node_type</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_node_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_node_type" title="Permalink to this definition"></a></dt>
<dd><p>Get the node_type of current node. See <a class="reference internal" href="#mindspore.rewrite.NodeType" title="mindspore.rewrite.NodeType"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.rewrite.NodeType</span></code></a> for details on node types.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A NodeType as node_type of node.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node_type</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_node_type</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">node_type</span><span class="p">)</span>
<span class="go">NodeType.CallCell</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_symbol_tree">
<span class="sig-name descname"><span class="pre">get_symbol_tree</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_symbol_tree"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_symbol_tree" title="Permalink to this definition"></a></dt>
<dd><p>Get the symbol tree which current node belongs to.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>SymbolTree, None if current node does not belong to any SymbolTree.</p>
</dd>
</dl>
<p>Examples:
&gt;&gt;&gt; from mindspore.rewrite import SymbolTree
&gt;&gt;&gt; # Define the network structure of LeNet5. Refer to
&gt;&gt;&gt; # <a class="reference external" href="https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py">https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</a>
&gt;&gt;&gt; net = LeNet5()
&gt;&gt;&gt; stree = SymbolTree.create(net)
&gt;&gt;&gt; node = stree.get_node(“conv1”)
&gt;&gt;&gt; print(type(node.get_symbol_tree()))
&lt;class ‘mindspore.rewrite.api.symbol_tree.SymbolTree’&gt;</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_targets">
<span class="sig-name descname"><span class="pre">get_targets</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_targets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_targets" title="Permalink to this definition"></a></dt>
<dd><p>Gets a list of output values for the current node.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of outputs of type <code class="docutils literal notranslate"><span class="pre">ScopedValue</span></code> .</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.get_users">
<span class="sig-name descname"><span class="pre">get_users</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.get_users"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.get_users" title="Permalink to this definition"></a></dt>
<dd><p>Get a list of nodes that use the output of the current node as input.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of nodes.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">users</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_users</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">([</span><span class="n">user</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">])</span>
<span class="go">[&#39;relu&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.set_arg">
<span class="sig-name descname"><span class="pre">set_arg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><span class="pre">ScopedValue</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.set_arg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.set_arg" title="Permalink to this definition"></a></dt>
<dd><p>Set argument of current node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Indicate which input being modified.</p></li>
<li><p><strong>arg</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#mindspore.rewrite.ScopedValue" title="mindspore.rewrite.ScopedValue"><em>ScopedValue</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – New argument to been set.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>index</cite> is not a <cite>int</cite> number.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If the type of <cite>arg</cite> is not in [<cite>ScopedValue</cite>, <cite>str</cite>].</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;relu_3&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">set_arg</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;fc1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">get_args</span><span class="p">())</span>
<span class="go">[fc1]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.Node.set_arg_by_node">
<span class="sig-name descname"><span class="pre">set_arg_by_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg_idx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="s"><span class="pre">'Node'</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_idx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node.html#Node.set_arg_by_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.Node.set_arg_by_node" title="Permalink to this definition"></a></dt>
<dd><p>Set argument of current node by another Node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arg_idx</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Indicate which input being modified.</p></li>
<li><p><strong>src_node</strong> (<a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a>) – A <cite>Node</cite> as new input. Can be a node or name of node.</p></li>
<li><p><strong>out_idx</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>optional</em>) – Indicate which output of <cite>src_node</cite> as new input of current node.
Default: <code class="docutils literal notranslate"><span class="pre">None</span></code> ,
which means use first output of <cite>src_node</cite> as new input.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#RuntimeError" title="(in Python v3.8)"><strong>RuntimeError</strong></a> – If <cite>src_node</cite> is not belong to current <cite>SymbolTree</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>arg_idx</cite> is not a <cite>int</cite> number.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If <cite>arg_idx</cite> is out of range.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>src_node</cite> is not a <cite>Node</cite> instance.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>out_idx</cite> is not a <cite>int</cite> number.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If <cite>out_idx</cite> is out of range.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If <cite>src_node</cite> has multi-outputs while <cite>out_idx</cite> is None or <cite>out_idx</cite> is not offered.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">src_node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;fc1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dst_node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;relu_3&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dst_node</span><span class="o">.</span><span class="n">set_arg_by_node</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">src_node</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dst_node</span><span class="o">.</span><span class="n">get_args</span><span class="p">())</span>
<span class="go">[fc1]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.rewrite.NodeType">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.rewrite.</span></span><span class="sig-name descname"><span class="pre">NodeType</span></span><a class="reference internal" href="../_modules/mindspore/rewrite/api/node_type.html#NodeType"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.NodeType" title="Permalink to this definition"></a></dt>
<dd><p><cite>NodeType</cite> represents type of <cite>Node</cite>.</p>
<ul class="simple">
<li><p>Unknown: Not inited NodeType.</p></li>
<li><p>CallCell: <cite>CallCell</cite> node represents invoking cell-op in forward method.</p></li>
<li><p>CallPrimitive: <cite>CallPrimitive</cite> node represents invoking primitive-op in forward method.</p></li>
<li><p>CallFunction: <cite>CallFunction</cite> node represents invoking a function in forward method.</p></li>
<li><p>CallMethod: <cite>CallMethod</cite> node represents invoking of method in forward method which can not be mapped to
cell-op or primitive-op in MindSpore.</p></li>
<li><p>Python: <cite>Python</cite> node holds unsupported-ast-node or unnecessary-to-parse-ast-node.</p></li>
<li><p>Input: <cite>Input</cite> node represents input of <cite>SymbolTree</cite> corresponding to arguments of forward method.</p></li>
<li><p>Output: <cite>Output</cite> node represents output of SymbolTree corresponding to return statement of forward method.</p></li>
<li><p>Tree: <cite>Tree</cite> node represents sub-network invoking in forward method.</p></li>
<li><p>CellContainer: <cite>CellContainer</cite> node represents invoking method <a class="reference internal" href="nn/mindspore.nn.SequentialCell.html#mindspore.nn.SequentialCell" title="mindspore.nn.SequentialCell"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.nn.SequentialCell</span></code></a> in
forward method.</p></li>
<li><p>MathOps: <cite>MathOps</cite> node represents a mathematical operation, such as adding or comparing in forward method.</p></li>
<li><p>ControlFlow: <cite>ControlFlow</cite> node represents a control flow statement, such as if statement.</p></li>
</ul>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.rewrite.ScopedValue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.rewrite.</span></span><span class="sig-name descname"><span class="pre">ScopedValue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mindspore.rewrite.ValueType" title="mindspore.rewrite.ValueType"><span class="pre">ValueType</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/scoped_value.html#ScopedValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.ScopedValue" title="Permalink to this definition"></a></dt>
<dd><p><cite>ScopedValue</cite> represents a value with its full-scope.</p>
<p><cite>ScopedValue</cite> is used to express: a left-value such as target of an assign statement, or a callable object such as
func of a call statement, or a right-value such as args and kwargs of an assign statement.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arg_type</strong> (<a class="reference internal" href="#mindspore.rewrite.ValueType" title="mindspore.rewrite.ValueType"><em>ValueType</em></a>) – A <cite>ValueType</cite> represents type of current value.</p></li>
<li><p><strong>scope</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – A string represents scope of current value. Take “self.var1” as an example, <cite>scope</cite> of this
var1 is “self”. Default: <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> .</p></li>
<li><p><strong>value</strong> – A handler represents value of current value. The type of value is corresponding to <cite>arg_type</cite>.
Default: <code class="docutils literal notranslate"><span class="pre">None</span></code> .</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.ScopedValue.create_name_values">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_name_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scopes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/scoped_value.html#ScopedValue.create_name_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.ScopedValue.create_name_values" title="Permalink to this definition"></a></dt>
<dd><p>Create a list of naming <cite>ScopedValue</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>names</strong> (<em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>] or </em><em>Tuple</em><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – List or tuple of <cite>str</cite> represents names of referenced variables.</p></li>
<li><p><strong>scopes</strong> (<em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>] or </em><em>Tuple</em><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – List or tuple of <cite>str</cite> represents scopes of referenced variables.
Default: <code class="docutils literal notranslate"><span class="pre">None</span></code> .</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An list of instance of <cite>ScopedValue</cite>.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#RuntimeError" title="(in Python v3.8)"><strong>RuntimeError</strong></a> – If the length of names is not equal to the length of scopes when scopes are not None.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>names</cite> is not <cite>list</cite> or <cite>tuple</cite> and name in <cite>names</cite> is not <cite>str</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>scopes</cite> is not <cite>list</cite> or <cite>tuple</cite> and scope in <cite>scopes</cite> is not <cite>str</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">ScopedValue</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">variables</span> <span class="o">=</span> <span class="n">ScopedValue</span><span class="o">.</span><span class="n">create_name_values</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;z_1&quot;</span><span class="p">],</span> <span class="n">scopes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;self&quot;</span><span class="p">,</span> <span class="s2">&quot;self&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
<span class="go">[self.z, self.z_1]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.ScopedValue.create_naming_value">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_naming_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/scoped_value.html#ScopedValue.create_naming_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.ScopedValue.create_naming_value" title="Permalink to this definition"></a></dt>
<dd><p>Create a naming <cite>ScopedValue</cite>. A <cite>NamingValue</cite> represents a reference to another variable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – (str): A string represents the identifier of another variable.</p></li>
<li><p><strong>scope</strong> – (str): A string represents the scope of another variable. Default: <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> .</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of <cite>ScopedValue</cite>.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>name</cite> is not <cite>str</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>scope</cite> is not <cite>str</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">ScopedValue</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">variable</span> <span class="o">=</span> <span class="n">ScopedValue</span><span class="o">.</span><span class="n">create_naming_value</span><span class="p">(</span><span class="s2">&quot;conv&quot;</span><span class="p">,</span> <span class="s2">&quot;self&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
<span class="go">self.conv</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.ScopedValue.create_variable_value">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_variable_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/scoped_value.html#ScopedValue.create_variable_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.ScopedValue.create_variable_value" title="Permalink to this definition"></a></dt>
<dd><p>Create <cite>ScopedValue</cite> from a variable.</p>
<p><cite>ScopedValue</cite>’s type is determined by type of value. <cite>ScopedValue</cite>’s scope is empty.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – The value to be converted to <cite>ScopedValue</cite>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of <cite>ScopedValue</cite>.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">ScopedValue</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">variable</span> <span class="o">=</span> <span class="n">ScopedValue</span><span class="o">.</span><span class="n">create_variable_value</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.rewrite.</span></span><span class="sig-name descname"><span class="pre">SymbolTree</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">SymbolTreeImpl</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree" title="Permalink to this definition"></a></dt>
<dd><p>SymbolTree stores information about a network, including statements of the network’s forward
computation process and the topological relationship between statement input and output.</p>
<p>The statements in the network are saved in the SymbolTree in the form of nodes, and by processing
the nodes in the SymbolTree, you can delete the network code, insert and replace it, and get the
modified network code and network instances.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>handler</strong> (<em>SymbolTreeImpl</em>) – SymbolTree internal implementation instance. It is recommended to call the <cite>create</cite>
method in SymbolTree to create a SymbolTree, rather than calling SymbolTree’s constructor directly.
Don’t care what <cite>SymbolTreeImpl</cite> is, just treat it as a handle.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.after">
<span class="sig-name descname"><span class="pre">after</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><span class="pre">Node</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.after"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.after" title="Permalink to this definition"></a></dt>
<dd><p>Returns a location information after <cite>node</cite>. The return value of this interface is
used as a parameter for the insert operation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – Indicate the position after which node. Can be a node or name of node.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <cite>Position</cite> to indicate where to insert node.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>node</cite> is not a <cite>Node</cite>.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">stree</span><span class="o">.</span><span class="n">nodes</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;conv1&quot;</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">position</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.before">
<span class="sig-name descname"><span class="pre">before</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><span class="pre">Node</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.before"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.before" title="Permalink to this definition"></a></dt>
<dd><p>Returns a location information before <cite>node</cite>. The return value of this interface is
used as a parameter for the insert operation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – Indicate the position before which node. Can be a node or name of node.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <cite>Position</cite> to indicate where to insert node.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – if <cite>node</cite> is not a <cite>Node</cite>.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">stree</span><span class="o">.</span><span class="n">nodes</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;conv1&quot;</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">position</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">before</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.create">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.create"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.create" title="Permalink to this definition"></a></dt>
<dd><p>Create a SymbolTree object by passing in the network instance <cite>network</cite>.</p>
<p>This interface parses the <cite>network</cite> instance, expands each source
code statement of the forward computation process, and parses it into nodes,
which is stored in the SymbolTree. The specific process is as follows:</p>
<ol class="arabic simple">
<li><p>Obtain the source code of the network instance.</p></li>
<li><p>Perform AST parsing on the network and obtain the AST nodes (abstract syntax trees) of each
statement in the network.</p></li>
<li><p>Expand complex statements in the network forward evaluation process into multiple simple statements.</p></li>
<li><p>Create a SymbolTree object. Each SymbolTree corresponds to one network instance.</p></li>
<li><p>Use the rewrite node to store each statement of the network forward computation process. The node records
the input, output, and other information of the statement.</p></li>
<li><p>Save the rewrite node to the SymbolTree, and update and maintain the topological connection between
the nodes.</p></li>
<li><p>Return the SymbolTree object corresponding to the network instance.</p></li>
</ol>
<p>If a user-defined network of type <a class="reference internal" href="nn/mindspore.nn.Cell.html#mindspore.nn.Cell" title="mindspore.nn.Cell"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.nn.Cell</span></code></a> is called in the forward computation process
of the network, rewrite will generate a node of type <cite>NodeType.Tree</cite> for the corresponding statement. This
type of node stores a new SymbolTree, which parses and maintains the node information of the user-defined
network.</p>
<p>If the following types of statements are called in the forward computation process of the network, rewrite
will parse the internal statements in the statement and generate corresponding nodes:</p>
<ul class="simple">
<li><p><a class="reference internal" href="nn/mindspore.nn.SequentialCell.html#mindspore.nn.SequentialCell" title="mindspore.nn.SequentialCell"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.nn.SequentialCell</span></code></a></p></li>
<li><p>Functions within classes</p></li>
<li><p>Control flow statements, such as <cite>if</cite> statements</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because the specific execution branch of control flows are still unknown during the rewrite operation
of the network, no topology information will be established between the nodes inside the control flow
and the nodes outside.
Users cannot obtain nodes inside the control flow when they acquire nodes outside the control flow using
interfaces like <a class="reference internal" href="#mindspore.rewrite.Node.get_inputs" title="mindspore.rewrite.Node.get_inputs"><code class="xref py py-func docutils literal notranslate"><span class="pre">mindspore.rewrite.Node.get_inputs()</span></code></a> and <a class="reference internal" href="#mindspore.rewrite.Node.get_users" title="mindspore.rewrite.Node.get_users"><code class="xref py py-func docutils literal notranslate"><span class="pre">mindspore.rewrite.Node.get_users()</span></code></a> .
Users also cannot obtain nodes outside the control flow, if they use these interfaces inside the control
flow.
Therefore, when users modify the network, they need to manually handle the node information inside and
outside the control flow.</p>
</div>
<p>The current rewrite module has the following syntax limitations:</p>
<ul class="simple">
<li><p>Only networks of type <a class="reference internal" href="nn/mindspore.nn.Cell.html#mindspore.nn.Cell" title="mindspore.nn.Cell"><code class="xref py py-class docutils literal notranslate"><span class="pre">mindspore.nn.Cell</span></code></a> are supported as input to the rewrite module.</p></li>
<li><p>Parsing assignment statements with multiple output values is not currently supported.</p></li>
<li><p>Parsing loop statements is not currently supported.</p></li>
<li><p>Parsing decorator syntax is not currently supported.</p></li>
<li><dl class="simple">
<dt>Parsing class variable syntax is not currently supported. If class variable uses external data,</dt><dd><p>the network after rewrite may be missing data.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Parsing local classes and embedded classes is not currently supported, that is, the definition</dt><dd><p>of classes need to be placed on the outermost layer.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Parsing closure syntax is not currently supported, that is, the definition of out-of-class</dt><dd><p>functions need to be placed at the outermost layer.</p>
</dd>
</dl>
</li>
<li><p>Parsing lambda expression syntax is not currently supported.</p></li>
</ul>
<p>For statements that do not support parsing, rewrite will generate nodes of type <cite>NodeType.Python</cite>
for corresponding statements to ensure that the network after rewrite can run normally.
The <cite>Python</cite> node does not support modifying the input and output of statements, and there may be
a problem between variable names and those generated by the rewrite. In this case, users need to
adjust the variable names manually.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>network</strong> (<a class="reference internal" href="nn/mindspore.nn.Cell.html#mindspore.nn.Cell" title="mindspore.nn.Cell"><em>Cell</em></a>) – <cite>network</cite> used to create SymbolTree.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Symboltree, a SymbolTree created based on <cite>network</cite>.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>network</cite> is not a <cite>Cell</cite> instance.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">stree</span><span class="p">))</span>
<span class="go">&lt;class &#39;mindspore.rewrite.api.symbol_tree.SymbolTree&#39;&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.erase">
<span class="sig-name descname"><span class="pre">erase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><span class="pre">Node</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.erase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.erase" title="Permalink to this definition"></a></dt>
<dd><p>Erase a <cite>node</cite> from rewrite.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A <cite>Node</cite> to be erased. Can be a node or name of node.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of <cite>Node</cite> being erased if node is in <cite>SymbolTree</cite> else None.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – The type of <cite>node</cite> is not Node.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span><span class="o">.</span><span class="n">erase</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.get_code">
<span class="sig-name descname"><span class="pre">get_code</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.get_code"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.get_code" title="Permalink to this definition"></a></dt>
<dd><p>Get source code corresponding to the network information in SymbolTree.
If the network has already been modified, the source code of modified network is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A str represents source code of modified network.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">codes</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_code</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">codes</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.get_network">
<span class="sig-name descname"><span class="pre">get_network</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.get_network"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.get_network" title="Permalink to this definition"></a></dt>
<dd><p>Get the network object generated based on SymbolTree.
The source code is saved to a file in the ‘rewritten_network’ folder of the current directory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The modification of network by rewrite module is based on the modification of AST tree of
original network instance, and the new network instance will obtain attribute information
from original network instance, so the new network instance and the original network instance
have data association, and the original network should no longer be used.</p></li>
<li><p>Due to the data association between the new network and the original network instance, manually creating
a network instance using the source code file generated by rewrite is not currently supported.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A network object generated from SymbolTree.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_net</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_network</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.get_node">
<span class="sig-name descname"><span class="pre">get_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.get_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.get_node" title="Permalink to this definition"></a></dt>
<dd><p>Get the node with the name <cite>node_name</cite> in the SymbolTree.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node_name</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The name of node.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Node with name of <cite>node_name</cite> . Return <code class="docutils literal notranslate"><span class="pre">None</span></code> if there is no node named <cite>node_name</cite> in SymbolTree.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s1">&#39;conv1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
<span class="go">conv1</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.insert">
<span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><span class="pre">Node</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.insert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.insert" title="Permalink to this definition"></a></dt>
<dd><p>Insert a <cite>node</cite> into <cite>SymbolTree</cite> at <cite>position</cite>.</p>
<p><cite>position</cite> is obtained from <cite>before</cite> api or <cite>after</cite> api of <cite>SymbolTree</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>position</strong> (<em>Position</em>) – Indicate where to insert <cite>node</cite>.</p></li>
<li><p><strong>node</strong> (<a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a>) – An instance of Node to be inserted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of Node being inserted.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#RuntimeError" title="(in Python v3.8)"><strong>RuntimeError</strong></a> – If <cite>position</cite> is not belong to current <cite>SymbolTree</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>position</cite> is not a <cite>Position</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>node</cite> is not a <cite>Node</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span><span class="p">,</span> <span class="n">ScopedValue</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mindspore.nn</span> <span class="k">as</span> <span class="nn">nn</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">position</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">create_call_cell</span><span class="p">(</span><span class="n">cell</span><span class="o">=</span><span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">(),</span> <span class="n">targets</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                 <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">ScopedValue</span><span class="o">.</span><span class="n">create_naming_value</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;new_relu&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">new_node</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.nodes">
<span class="sig-name descname"><span class="pre">nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">all_nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.nodes" title="Permalink to this definition"></a></dt>
<dd><p>Get the generator of the node in the current SymbolTree, which is used to iterate
through the nodes in SymbolTree.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>all_nodes</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Get all nodes including nodes in CallFunction node, CellContainer node
and sub symbol tree. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> .</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A generator for nodes in SymbolTree.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>all_nodes</cite> is not bool.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">([</span><span class="n">node</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">stree</span><span class="o">.</span><span class="n">nodes</span><span class="p">()])</span>
<span class="go">[&#39;input_x&#39;, &#39;Expr&#39;, &#39;conv1&#39;, &#39;relu&#39;, &#39;max_pool2d&#39;, &#39;conv2&#39;, &#39;relu_1&#39;, &#39;max_pool2d_1&#39;,</span>
<span class="go"> &#39;flatten&#39;, &#39;fc1&#39;, &#39;relu_2&#39;, &#39;fc2&#39;, &#39;relu_3&#39;, &#39;fc3&#39;, &#39;return&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.print_node_tabulate">
<span class="sig-name descname"><span class="pre">print_node_tabulate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">all_nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.print_node_tabulate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.print_node_tabulate" title="Permalink to this definition"></a></dt>
<dd><p>Print the topology information of nodes in SymbolTree, including node type, node name, node code,
and node input-output relationship.</p>
<p>The information is output to the screen using the print interface, including the following information:</p>
<ul class="simple">
<li><p><strong>node type</strong> (str): The type of node, refer to class:<cite>mindspore.rewrite.NodeType</cite> .</p></li>
<li><p><strong>name</strong> (str): The name of node.</p></li>
<li><p><strong>codes</strong> (str): The source code statement corresponding to the node.</p></li>
<li><p><strong>arg providers</strong> (Dict[int, Tuple[str, int]]): The format is <cite>{[idx, (n, k)]}</cite> , which means the
<cite>idx</cite> th parameter of the node is provided by the <cite>k</cite> th output of node <cite>n</cite> .</p></li>
<li><p><strong>target users</strong> (Dict[int, List[Tuple[str, int]]]): The format is ‘{[idx, [(n, k)]]}’ , which means
the <cite>idx</cite> th output of the node is used as the <cite>k</cite> th parameter of node <cite>n</cite> .</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>all_nodes</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Print information of all nodes, including nodes in CallFunction
node, CellContainer node and sub symbol tree. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> .</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>all_nodes</cite> is not bool.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span><span class="o">.</span><span class="n">print_node_tabulate</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.replace">
<span class="sig-name descname"><span class="pre">replace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><span class="pre">Node</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><span class="pre">Node</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.replace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.replace" title="Permalink to this definition"></a></dt>
<dd><p>Replace the <cite>old_node</cite> with nodes in the <cite>new_nodes</cite> list.</p>
<p>Nodes in <cite>new_nodes</cite> will be inserted into SymbolTree sequentially, and then <cite>old_node</cite> will be deleted.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Replace support one-to-one replacement or one-to-multi replacement. If you need multi-to-multi
replacement, please refer to <cite>PatternEngine</cite>.</p></li>
<li><p>Caller should maintain the topological relationship between each node in the <cite>new_nodes</cite> , as well as
the topological relationship between nodes in the <cite>new_nodes</cite> and nodes in the original tree.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>old_node</strong> (<a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a>) – Node to be replaced.</p></li>
<li><p><strong>new_nodes</strong> (<em>List</em><em>[</em><a class="reference internal" href="#mindspore.rewrite.Node" title="mindspore.rewrite.Node"><em>Node</em></a><em>]</em>) – Nodes of the node_tree to replace in.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of Node represents root of node_tree been replaced in.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#RuntimeError" title="(in Python v3.8)"><strong>RuntimeError</strong></a> – Old node is not isolated.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>old_node</cite> is not a <cite>Node</cite>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – If <cite>new_nodes</cite> is not a <cite>list</cite> or node in <cite>new_nodes</cite> is not a <cite>Node</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.rewrite</span> <span class="kn">import</span> <span class="n">SymbolTree</span><span class="p">,</span> <span class="n">ScopedValue</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mindspore.nn</span> <span class="k">as</span> <span class="nn">nn</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define the network structure of LeNet5. Refer to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/code/lenet.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">LeNet5</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span> <span class="o">=</span> <span class="n">SymbolTree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="n">stree</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;conv1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">create_call_cell</span><span class="p">(</span><span class="n">cell</span><span class="o">=</span><span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">(),</span> <span class="n">targets</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                 <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">ScopedValue</span><span class="o">.</span><span class="n">create_naming_value</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;new_relu&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stree</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="p">[</span><span class="n">new_node</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindspore.rewrite.SymbolTree.unique_name">
<span class="sig-name descname"><span class="pre">unique_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'output'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore/rewrite/api/symbol_tree.html#SymbolTree.unique_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.SymbolTree.unique_name" title="Permalink to this definition"></a></dt>
<dd><p>Based on the given <cite>name</cite> , returns a new name that is unique within the symbol tree.
This interface can be used when a variable name that does not conflict is required.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>optional</em>) – The prefix of the name. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;output&quot;</span></code> .</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str, A new, unique name within a symbol tree in the format <cite>name_n</cite>, where <cite>n</cite> is a numeric subscript.
If there is no name conflict when entered <cite>name</cite>, there is no numeric subscript.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – The type of <cite>name</cite> is not str.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindspore.rewrite.ValueType">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore.rewrite.</span></span><span class="sig-name descname"><span class="pre">ValueType</span></span><a class="reference internal" href="../_modules/mindspore/rewrite/api/scoped_value.html#ValueType"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.rewrite.ValueType" title="Permalink to this definition"></a></dt>
<dd><p>ValueType represents type of <cite>ScopedValue</cite>.</p>
<ul class="simple">
<li><p>A <cite>NamingValue</cite> represents a reference to another variable.</p></li>
<li><p>A <cite>CustomObjValue</cite> represents an instance of custom class or an object whose type is out of range of base-type
and container-type of ValueType.</p></li>
</ul>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="nn_probability/mindspore.nn.probability.distribution.Uniform.html" class="btn btn-neutral float-left" title="mindspore.nn.probability.distribution.Uniform" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mindspore.boost.html" class="btn btn-neutral float-right" title="mindspore.boost" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>