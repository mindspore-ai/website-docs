<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Static Graph Syntax Support &mdash; MindSpore master documentation</title><script>;(()=>{const e=localStorage.getItem("ms-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;(e?"dark"===e:t)&&document.documentElement.setAttribute("data-o-theme","dark")})();</script><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script><script src="../_static/jquery.js"></script>
        <script src="../_static/js/theme.js"></script><script src="../_static/underscore.js"></script><script src="../_static/doctools.js"></script><script crossorigin="anonymous" integrity="sha256-1fEPhSsRKlFKGfK3eO710tEweHh1fwokU5wFGDHO+vg=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Static Graph Syntax - Operators" href="static_graph_syntax/operators.html" />
    <link rel="prev" title="Method for Converting TensorFlow Models to MindSpore Models" href="../migration_guide/tensorflow2mindspore.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../design/overview.html">MindSpore Design Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/programming_paradigm.html">Functional and Object-Oriented Fusion Programming Paradigm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/dynamic_graph_and_static_graph.html">Combination of Dynamic and Static Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/distributed_training_design.html">Distributed Parallel Native</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/data_engine.html">High Performance Data Processing Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/all_scenarios.html">Full-scenarios Unified Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/graph_fusion_engine.html">Graph-Kernel Fusion Acceleration Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/pluggable_device.html">Third-Party Hardware Interconnection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Models</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="official_models.html">Official Models</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.html">mindspore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.nn.html">mindspore.nn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.ops.html">mindspore.ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.ops.primitive.html">mindspore.ops.primitive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.amp.html">mindspore.amp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.train.html">mindspore.train</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.communication.html">mindspore.communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.common.initializer.html">mindspore.common.initializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.dataset.html">mindspore.dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.dataset.transforms.html">mindspore.dataset.transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.mindrecord.html">mindspore.mindrecord</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.nn.probability.html">mindspore.nn.probability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.rewrite.html">mindspore.rewrite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.boost.html">mindspore.boost</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.numpy.html">mindspore.numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.scipy.html">mindspore.scipy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.experimental.html">mindspore.experimental</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Mapping</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_mapping/pytorch_api_mapping.html">PyTorch and MindSpore API Mapping Table</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Migration Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/overview.html">Overview of Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/enveriment_preparation.html">Environment Preparation and Information Acquisition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/analysis_and_preparation.html">Model Analysis and Preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/typical_api_comparision.html">Differences between PyTorch and MindSpore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/model_development/model_development.html">Constructing MindSpore Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/debug_and_tune.html">Debugging and Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/sample_code.html">Network Migration Debugging Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/migrator_with_tools.html">Application Practice Guide for Network Migration Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/faq.html">FAQs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Syntax Support</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Static Graph Syntax Support</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-syntaxes-strict-level">Basic Syntaxes (STRICT Level)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#constants-and-variables-within-static-graphs">Constants and Variables Within Static Graphs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#constants-generate-scenes">Constants Generate Scenes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#variables-generate-scenes">Variables Generate Scenes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#data-types">Data Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#built-in-python-data-types">Built-in Python Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mindspore-user-defined-data-types">MindSpore User-defined Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#operators">Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#primaries">Primaries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#attribute-references-and-attribute-modification">Attribute References and Attribute Modification</a></li>
<li class="toctree-l4"><a class="reference internal" href="#index-value">Index Value</a></li>
<li class="toctree-l4"><a class="reference internal" href="#calls">Calls</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#statements">Statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-built-in-functions">Python Built-in Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#network-definition">Network Definition</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#network-input-parameters">Network Input parameters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#syntax-constraints-of-basic-syntaxes">Syntax Constraints of Basic Syntaxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extended-syntaxes-lax-level">Extended Syntaxes (LAX level)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#calling-the-third-party-libraries">Calling the Third-party Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supporting-the-use-of-custom-classes">Supporting the Use of Custom Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-operators-support-more-data-type">Basic Operators Support More Data Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="#base-type">Base Type</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supporting-list-inplace-modification-operations">Supporting List Inplace Modification Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#supporting-the-high-level-usage-of-dictionary">Supporting the High-Level Usage of Dictionary</a></li>
<li class="toctree-l4"><a class="reference internal" href="#supporting-the-usage-of-none">Supporting the Usage of None</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#built-in-functions-support-more-data-types">Built-in Functions Support More Data Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supporting-control-flow">Supporting Control Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supporting-property-setting-and-modification">Supporting Property Setting and Modification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supporting-derivation">Supporting Derivation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#annotation-type">Annotation Type</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#syntax-constraints-of-extended-syntaxes">Syntax Constraints of Extended Syntaxes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="static_graph_syntax/operators.html">Static Graph Syntax - Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="static_graph_syntax/statements.html">Static Graph Syntax - Python Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="static_graph_syntax/python_builtin_functions.html">Static Graph Syntax - Python Built-in Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="index_support.html">Tensor Index Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Environment Variables</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="env_var_list.html">Environment Variables</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/data_processing.html">Data Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/implement_problem.html">Implement Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/network_compilation.html">Network Compilation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/operators_compile.html">Operators Compile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/usage_migrate_3rd.html">Migration from a Third-party Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/performance_tuning.html">Performance Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/precision_tuning.html">Precision Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/distributed_parallel.html">Distributed Parallel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/inference.html">Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/feature_advice.html">Feature Advice</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../RELEASE.html">Release Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Static Graph Syntax Support</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/note/static_graph_syntax_support.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section class="tex2jax_ignore mathjax_ignore" id="static-graph-syntax-support">
<h1>Static Graph Syntax Support<a class="headerlink" href="#static-graph-syntax-support" title="Permalink to this headline"></a></h1>
<p><a class="reference external" href="https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/source_en/note/static_graph_syntax_support.md"><img alt="View Source On Gitee" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.2/resource/_static/logo_source_en.svg" /></a></p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p>In graph mode, Python code is not executed by the Python interpreter. Instead, the code is compiled into a static computation graph, and then the static computation graph is executed.</p>
<p>In static graph mode, MindSpore converts Python source code into Intermediate Representation IR by means of source code conversion and optimizes IR graphs on this basis, and finally executes the optimized graphs on hardware devices. MindSpore uses a functional IR based on graph representations, called MindIR. See <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/design/all_scenarios.html#mindspore-ir-mindir">middle representation MindIR</a> for details .</p>
<p>MindSpore static graph execution process actually consists of two steps, corresponding to the Define and Run phases of the static graph, but in practice, the user will not perceive these two phases when the instantiated Cell object is called. MindSpore encapsulates both phases in the Cell <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method, so the actual calling process is:</p>
<p><code class="docutils literal notranslate"><span class="pre">model(inputs)</span> <span class="pre">=</span> <span class="pre">model.compile(inputs)</span> <span class="pre">+</span> <span class="pre">model.construct(inputs)</span></code>, where <code class="docutils literal notranslate"><span class="pre">model</span></code> is the instantiated Cell object.</p>
<p>There are two ways to use the graph mode. The first way is to call the <code class="docutils literal notranslate"><span class="pre">&#64;jit</span></code> decorator to modify a function or a class member method, and then the decorated function or method will be compiled into a static computation graph. For details about how to use <code class="docutils literal notranslate"><span class="pre">jit</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/api_python/mindspore/mindspore.jit.html#mindspore.jit">jit API document</a>. The second way is to set <code class="docutils literal notranslate"><span class="pre">ms.set_context(mode=ms.GRAPH_MODE)</span></code>, then write the code in the <code class="docutils literal notranslate"><span class="pre">construct</span></code> function of the <code class="docutils literal notranslate"><span class="pre">Cell</span></code> so that the code in the <code class="docutils literal notranslate"><span class="pre">construct</span></code> function will be compiled into a static computation graph. For details about the definition of <code class="docutils literal notranslate"><span class="pre">Cell</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/api_python/nn/mindspore.nn.Cell.html">Cell API document</a>.</p>
<p>Due to syntax parsing restrictions, the supported data types, syntax, and related operations during graph building are not completely consistent with the Python syntax. As a result, some usage is restricted. Borrowing the traditional JIT compilation idea, considers the unification of static and dynamic graphs from the perspective of graph mode and extends the syntax capabilities of graph patterns. The static graph provides a syntax experience close to that of the dynamic graph, so as to realize the unity of dynamic and static. In order to facilitate users to choose whether to extend the static graph syntax, the JIT syntax support level option ‘jit_syntax_level’ is provided, and its value must be in the range of [STRICT,LAX], and selecting ‘STRICT’ is considered to use the basic syntax and do not extend the static graph syntax. The default value is ‘LAX’, please refer to the <a class="reference internal" href="#extended-syntaxes-lax-level"><span class="std std-doc">Extended Syntaxes (LAX level)</span></a> section of this article for more information. All backends are supported at all levels.</p>
<ul class="simple">
<li><p>STRICT: Only basic syntaxes is supported, and execution performance is optimal. Can be used for MindIR load and export.</p></li>
<li><p>LAX: Supporting more complex syntaxes, compatible with all Python syntax as much as possible. Cannot be used for MindIR load and export due to some syntax that may not be able to be exported.</p></li>
</ul>
<p>The following describes the data types, syntax, and related operations supported during static graph building. These rules apply only to graph mode.</p>
</section>
<section id="basic-syntaxes-strict-level">
<h2>Basic Syntaxes (STRICT Level)<a class="headerlink" href="#basic-syntaxes-strict-level" title="Permalink to this headline"></a></h2>
<section id="constants-and-variables-within-static-graphs">
<h3>Constants and Variables Within Static Graphs<a class="headerlink" href="#constants-and-variables-within-static-graphs" title="Permalink to this headline"></a></h3>
<p>In static graphs, constants and variables are an important concept for understanding static graph syntax, and many syntaxes support different methods and degrees in the case of constant input and variable input. Therefore, before introducing the specific syntax supported by static graphs, this section first explains the concepts of constants and variables in static graphs.</p>
<p>In static graph mode, the operation of a program is divided into compilation period and execution period. During compilation, the program is compiled into an intermediate representation graph, and the program does not actually execute, but statically parses the intermediate representation through abstract deduction. This makes it impossible to guarantee that we will get the values of all intermediate representation nodes at compile time. Constants and variables are distinguished by their true values in the compiler.</p>
<ul class="simple">
<li><p>Constant: The amount of value that can be obtained during compilation.</p></li>
<li><p>Variable: The amount of value that cannot be obtained during compilation.</p></li>
</ul>
<section id="constants-generate-scenes">
<h4>Constants Generate Scenes<a class="headerlink" href="#constants-generate-scenes" title="Permalink to this headline"></a></h4>
<ul>
<li><p>Scalars, lists, and tuples entered as graph mode are constants (without using the mutable interface). For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">Tensor</span><span class="p">,</span> <span class="n">jit</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">]),</span> <span class="n">Tensor</span><span class="p">([</span><span class="mi">2</span><span class="p">])]</span>
<span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]</span>

<span class="nd">@jit</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span>
</pre></div>
</div>
<p>In the above code, enter ‘a’, ‘b’, ‘c’ are constants.</p>
</li>
<li><p>The result of the constant operation is constant. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">jit</span><span class="p">,</span> <span class="n">Tensor</span>

<span class="nd">@jit</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;2&quot;</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span>
</pre></div>
</div>
<p>In the above code, enter ‘a’, ‘b’, ‘c’ are constants.</p>
</li>
<li><p>Constant operations obtain a constant result. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">jit</span><span class="p">,</span> <span class="n">Tensor</span>

<span class="nd">@jit</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
    <span class="k">return</span> <span class="n">c</span>
</pre></div>
</div>
<p>In the above code, ‘a’ and ‘b’ are constants of Tensor generated in the graph mode, so the result of their calculation is also constant. However, if one of them is a variable, its return value will also be a variable.</p>
</li>
</ul>
</section>
<section id="variables-generate-scenes">
<h4>Variables Generate Scenes<a class="headerlink" href="#variables-generate-scenes" title="Permalink to this headline"></a></h4>
<ul>
<li><p>The return value of all mutable interfaces is a variable (whether mutable is used outside the graph or inside the graph). For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">Tensor</span><span class="p">,</span> <span class="n">jit</span>
<span class="kn">from</span> <span class="nn">mindspore.common</span> <span class="kn">import</span> <span class="n">mutable</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">mutable</span><span class="p">([</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">]),</span> <span class="n">Tensor</span><span class="p">([</span><span class="mi">2</span><span class="p">])])</span>

<span class="nd">@jit</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">mutable</span><span class="p">(</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">3</span><span class="p">]))</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">mutable</span><span class="p">((</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">]),</span> <span class="n">Tensor</span><span class="p">([</span><span class="mi">2</span><span class="p">])))</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span>
</pre></div>
</div>
<p>In the above code, ‘a’ is generated by calling the mutable interface outside the graph, ‘b’ and ‘c’ are generated by calling the mutable interface inside the graph, and ‘a’, ‘b’, and ‘c’ are variables.</p>
</li>
<li><p>Tensors that are inputs to static graphs are variables. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">Tensor</span><span class="p">,</span> <span class="n">jit</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">]),</span> <span class="n">Tensor</span><span class="p">([</span><span class="mi">2</span><span class="p">]))</span>

<span class="nd">@jit</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
</pre></div>
</div>
<p>In the above code, ‘a’ is the Tensor input as the graph pattern, so it is a variable. But ‘b’ is a tuple that is input to the graph schema, not a Tensor type, and even if its internal elements are Tensor, ‘b’ is a constant.</p>
</li>
<li><p>What is calculated by variables is the variable</p>
<p>If a quantity is the output of an operator, then it is in most cases constant. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">Tensor</span><span class="p">,</span> <span class="n">jit</span><span class="p">,</span> <span class="n">ops</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">([</span><span class="mi">2</span><span class="p">])</span>

<span class="nd">@jit</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
    <span class="k">return</span> <span class="n">c</span>
</pre></div>
</div>
<p>In this case , ‘c’ is the result of calculations of ‘a’ and ‘b’ , and the inputs ‘a’ and ‘b’ used for the calculation are variables , so ‘c’ is also a variable.</p>
</li>
</ul>
</section>
</section>
<section id="data-types">
<h3>Data Types<a class="headerlink" href="#data-types" title="Permalink to this headline"></a></h3>
<section id="built-in-python-data-types">
<h4>Built-in Python Data Types<a class="headerlink" href="#built-in-python-data-types" title="Permalink to this headline"></a></h4>
<p>Currently, the following built-in <code class="docutils literal notranslate"><span class="pre">Python</span></code> data types are supported: <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">String</span></code>, <code class="docutils literal notranslate"><span class="pre">List</span></code>, <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, and <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code>.</p>
<section id="number">
<h5>Number<a class="headerlink" href="#number" title="Permalink to this headline"></a></h5>
<p>Supporting <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, and <code class="docutils literal notranslate"><span class="pre">bool</span></code>, but does not support <code class="docutils literal notranslate"><span class="pre">complex</span></code> numbers.</p>
<p><code class="docutils literal notranslate"><span class="pre">Number</span></code> can be defined on the network. That is, the syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">1.2</span></code>, and <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">True</span></code> are supported.</p>
<p>When the data is a constant, the value of the data can be achieved at compile time, the forcible conversion to <code class="docutils literal notranslate"><span class="pre">Number</span></code> is supported in the network. The syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">int(x)</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">float(x)</span></code>, and <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">bool(x)</span></code> are supported.
When the data is a variable, i.e., you can get the value only at runtime. It also supports data type conversion using built-in functions <a class="reference internal" href="#python-built-in-functions"><span class="std std-doc">Python Built-in Functions</span></a> such as int(), float() and bool(). For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">Tensor</span><span class="p">,</span> <span class="n">jit</span>

<span class="nd">@jit</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
  <span class="n">out1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">11.1</span><span class="p">)</span>
  <span class="n">out2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">10</span><span class="p">]))</span>
  <span class="n">out3</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">())</span>
  <span class="k">return</span> <span class="n">out1</span><span class="p">,</span> <span class="n">out2</span><span class="p">,</span> <span class="n">out3</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="n">Tensor</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;res[0]:&quot;</span><span class="p">,</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;res[1]:&quot;</span><span class="p">,</span> <span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;res[2]:&quot;</span><span class="p">,</span> <span class="n">res</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>res[0]: 11
res[1]: 10
res[2]: 2
</pre></div>
</div>
<p>Supporting returning numbers. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">test_return_scalar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">test_return_scalar</span><span class="p">(</span><span class="n">ms</span><span class="o">.</span><span class="n">mutable</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">ms</span><span class="o">.</span><span class="n">mutable</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>3
</pre></div>
</div>
</section>
<section id="string">
<h5>String<a class="headerlink" href="#string" title="Permalink to this headline"></a></h5>
<p><code class="docutils literal notranslate"><span class="pre">String</span></code> can be constructed on the network, i.e., support for using quotes (<code class="docutils literal notranslate"><span class="pre">'</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;</span></code>) to create strings such as <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">'abcd'</span></code> or <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">&quot;efgh&quot;</span></code>. Convert constants to strings by means of <code class="docutils literal notranslate"><span class="pre">str()</span></code>. Support string concatenation, truncation, and the use of membership operators (<code class="docutils literal notranslate"><span class="pre">in</span></code> or <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code>) to determine whether a string contains the specified character. Support for formatting string output by inserting a value into a string with the string format <code class="docutils literal notranslate"><span class="pre">%s</span></code>. Support for using the format string function <code class="docutils literal notranslate"><span class="pre">str.format()</span></code> in constant scenarios.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">jit</span>

<span class="nd">@jit</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
  <span class="n">var1</span> <span class="o">=</span> <span class="s1">&#39;Hello!&#39;</span>
  <span class="n">var2</span> <span class="o">=</span> <span class="s2">&quot;MindSpore&quot;</span>
  <span class="n">var3</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
  <span class="n">var4</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> is </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="n">var3</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">var1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">var2</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">9</span><span class="p">],</span> <span class="n">var1</span> <span class="o">+</span> <span class="n">var2</span><span class="p">,</span> <span class="n">var2</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;H&quot;</span> <span class="ow">in</span> <span class="n">var1</span><span class="p">,</span> <span class="s2">&quot;My name is </span><span class="si">%s</span><span class="s2">!&quot;</span> <span class="o">%</span> <span class="n">var2</span><span class="p">,</span> <span class="n">var4</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">foo</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;res:&quot;</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>res: (&#39;H&#39;, &#39;Spore&#39;, &#39;Hello!MindSpore&#39;, &#39;MindSporeMindSpore&#39;, True, &#39;My name is MindSpore!&#39;, &#39;string is 123&#39;)
</pre></div>
</div>
</section>
<section id="list">
<h5>List<a class="headerlink" href="#list" title="Permalink to this headline"></a></h5>
<p>When ‘JIT_SYNTAX_LEVEL’ is set to ‘LAX’, static graph mode can support the inplace operation of some ‘List’ objects, see <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/note/static_graph_syntax_support.html#supporting-list-inplace-modification-operations">Supporting List Inplace Modification Operations</a>.</p>
<p>The basic usage scenarios of ‘List’ are as follows:</p>
<ul>
<li><p>The graph mode supports creating <code class="docutils literal notranslate"><span class="pre">Lists</span></code> in graph.</p>
<p>Support creating <code class="docutils literal notranslate"><span class="pre">List</span></code> objects within graph mode, and the elements of the <code class="docutils literal notranslate"><span class="pre">List</span></code> objects can contain any of the types supported by the graph mode, as well as multiple levels of nesting. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">generate_list</span><span class="p">():</span>
  <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
  <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">]</span>
  <span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">]),</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">2</span><span class="p">])]</span>
  <span class="n">d</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>
  <span class="k">return</span> <span class="n">d</span>
</pre></div>
</div>
<p>The above sample code, all <code class="docutils literal notranslate"><span class="pre">List</span></code> objects can be created normally.</p>
</li>
<li><p>The graph mode supports returning <code class="docutils literal notranslate"><span class="pre">List</span></code></p>
<p>Before MindSpore version 2.0, <code class="docutils literal notranslate"><span class="pre">List</span></code> is converted to <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> when the graph mode returns a <code class="docutils literal notranslate"><span class="pre">List</span></code> object. In MindSpore version 2.0, <code class="docutils literal notranslate"><span class="pre">List</span></code> objects can be returned. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">list_func</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">a</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">list_func</span><span class="p">()</span>  <span class="c1"># output: [1, 2, 3, 4]</span>
</pre></div>
</div>
<p>In the same way that a <code class="docutils literal notranslate"><span class="pre">List</span></code> is created within a graph mode, the graph mode returns a <code class="docutils literal notranslate"><span class="pre">List</span></code> object that can include any of the types supported by the graph mode, as well as multiple levels of nesting.</p>
</li>
<li><p>The graph mode supports obtaining <code class="docutils literal notranslate"><span class="pre">List</span></code> objects from global variables</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="n">global_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">list_func</span><span class="p">():</span>
    <span class="n">global_list</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">global_list</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">list_func</span><span class="p">()</span>  <span class="c1"># output: [4, 3, 2, 1]</span>
</pre></div>
</div>
<p>It should be noted that the list returned in the following pattern in the basic scenario is not the same object as the list of global variables, and when ‘JIT_SYNTAX_LEVEL’ is set to ‘LAX’, the returned object and the global object are unified objects.</p>
</li>
<li><p>Graph mode supports <code class="docutils literal notranslate"><span class="pre">List</span></code> as input</p>
<p>The graph mode supports <code class="docutils literal notranslate"><span class="pre">List</span></code> as input to static graphs. The elements of the <code class="docutils literal notranslate"><span class="pre">List</span></code> object used as input must be of an input type supported by the graph mode, which also supports multiple levels of nesting.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="n">list_input</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">list_func</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">list_func</span><span class="p">(</span><span class="n">list_input</span><span class="p">)</span>  <span class="c1"># output: [1, 2, 3, 4]</span>
</pre></div>
</div>
<p>It should be noted that when ‘List’ is input as a static graph, it is always treated as a constant, regardless of the type of element inside it.</p>
</li>
<li><p>Graph mode supports built-in methods for List</p>
<p>The ‘List’ built-in method is described in detail below:</p>
<ul>
<li><p>List Index Value</p>
<p>Basic syntax: <code class="docutils literal notranslate"><span class="pre">element</span> <span class="pre">=</span> <span class="pre">list_object[index]</span></code>.</p>
<p>Basic semantics: Extract the element in the ‘List’ object in the ‘index’ bit (‘index’ starts at 0). Supporting multi-level index values.</p>
<p>Index value ‘index’ supported types include ‘int’, ‘Tensor’, and ‘slice’. Among them, inputs of type ‘int’ and ‘Tensor’ can support constants and variables, and ‘slice’ internal data must be constants that can be determined at compile time.</p>
<p>Examples are as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">list_getitem_func</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">])]</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span>

<span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">list_getitem_func</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;b:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;c:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
</pre></div>
</div>
<p>The results are as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>a:[1, 2]
b:2
c:[3, 4]
</pre></div>
</div>
</li>
<li><p>List index assignment</p>
<p>Basic syntax: <code class="docutils literal notranslate"><span class="pre">list_object[index]</span> <span class="pre">=</span> <span class="pre">target_element</span></code>.</p>
<p>Basic semantics: Assign the element in the ‘List’ object at bit ‘index’ to ‘target_element’ (‘index’ starts at 0). Support for multi-tier index assignment.</p>
<p>Index value ‘index’ supported types include ‘int’, ‘Tensor’, and ‘slice’. Among them, inputs of type ‘int’ and ‘Tensor’ can support constants and variables, and the internal data of ‘slice’ must be constant that can be determined at compile time.</p>
<p>The index assignment object ‘target_element’ supports all data types supported by graph modes.</p>
<p>Currently, the ‘List’ index assignment does not support the inplace operation, and a new object will be generated after the index is assigned. This operation will support the inplace operation in the future.</p>
<p>Examples are as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_setitem_func</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ok&quot;</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">88</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">test_setitem_func</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;output:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">output</span><span class="p">))</span>
</pre></div>
</div>
<p>The results are as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>output:[[0, 88], 10, &#39;ok&#39;, (1, 2, 3)]
</pre></div>
</div>
</li>
<li><p>List.append</p>
<p>Basic syntax: <code class="docutils literal notranslate"><span class="pre">list_object.append(target_element)</span></code>.</p>
<p>Basic semantics: Append the element ‘target_element’ to the last list_object’ of the ‘List’ object.</p>
<p>Currently, ‘List.append’ does not support the inplace operation, and a new object will be generated after index assignment. This operation will support the inplace operation in the future.</p>
<p>Examples are as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_list</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">test_list</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
<p>The results are as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>x:[1, 2, 3, 4]
</pre></div>
</div>
</li>
<li><p>List.clear</p>
<p>Basic syntax: <code class="docutils literal notranslate"><span class="pre">list_object.clear()</span></code>.</p>
<p>Base semantics: Empty the elements contained in the ‘List’ object ‘list_object’.</p>
<p>Currently, ‘List.clear’ does not support inplace, and a new object will be generated after index assignment. This operation will support inplace in the future.</p>
<p>Examples are as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_list_clear</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
    <span class="n">x</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">test_list_clear</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
<p>The results are as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>x:[]
</pre></div>
</div>
</li>
<li><p>List.extend</p>
<p>Basic syntax: <code class="docutils literal notranslate"><span class="pre">list_object.extend(target)</span></code>.</p>
<p>Basic semantics: Insert all elements inside the ‘target’ to the end of the ‘List’ object ‘list_object’.</p>
<p>The supported types for ‘target’ are ‘Tuple’, ‘List’, and ‘Tensor’. Among them, if the ‘target’ type is ‘Tensor’, the ‘Tensor’ will be converted to ‘List’ before inserting it.</p>
<p>Examples are as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_list_extend</span><span class="p">():</span>
    <span class="n">x1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="n">x1</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">))</span>
    <span class="n">x2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="n">x2</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>
    <span class="k">return</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span>

<span class="n">output1</span><span class="p">,</span> <span class="n">output2</span> <span class="o">=</span> <span class="n">test_list_extend</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;output1:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">output1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;output2:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">output2</span><span class="p">))</span>
</pre></div>
</div>
<p>The results are as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>output1:[1, 2, 3, 4, &#39;a&#39;]
output2:[1, 2, 3, Tensor(shape=[1], dtype=Int64, value= [4]), Tensor(shape=[1], dtype=Int64, value= [5])]
</pre></div>
</div>
</li>
<li><p>List.pop</p>
<p>Basic syntax: <code class="docutils literal notranslate"><span class="pre">pop_element</span> <span class="pre">=</span> <span class="pre">list_object.pop(index=-1)</span></code>.</p>
<p>Basic semantics: Remove the ‘index’ element of the ‘List’ object ‘list_object’ from the ‘list_object’ and return the element.</p>
<p>The ‘index’ requires that it must be a constant ‘int’, and when ‘list_object’ has a length of ‘list_obj_size’, ‘index’ has a value range of ‘[-list_obj_size,list_obj_size-1]’. ‘index’ is a negative number representing the number of digits from back to front. When no ‘index’ is entered, the default value is -1, i.e. the last element is removed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_list_pop</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">b</span><span class="p">,</span> <span class="n">x</span>

<span class="n">pop_element</span><span class="p">,</span> <span class="n">res_list</span> <span class="o">=</span> <span class="n">test_list_pop</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pop_element:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pop_element</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;res_list:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">res_list</span><span class="p">))</span>
</pre></div>
</div>
<p>The results are as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>pop_element:3
res_list:[1, 2]
</pre></div>
</div>
</li>
<li><p>List.reverse</p>
<p>Basic syntax: <code class="docutils literal notranslate"><span class="pre">list_object.reverse()</span></code>.</p>
<p>Basic semantics: Reverse the order of the elements of the ‘List’ object ‘list_object’.</p>
<p>Examples are as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_list_reverse</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="n">x</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">test_list_reverse</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;output:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">output</span><span class="p">))</span>
</pre></div>
</div>
<p>The results are as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>output1:[3, 2, 1]
</pre></div>
</div>
</li>
<li><p>List.insert</p>
<p>Basic syntax: <code class="docutils literal notranslate"><span class="pre">list_object.insert(index,</span> <span class="pre">target_obj)</span></code>.</p>
<p>Basic semantics: insert ‘target_obj’ into the ‘index’ bit of ‘list_object’.</p>
<p>The ‘index’ requirement must be a constant ‘int’. If the length of ‘list_object’ is ‘list_obj_size’. When ‘index &lt; -list_obj_size’, insert the first place in ‘List’. When ‘index &gt;= list_obj_size’, insert at the end of ‘List’. A negative ‘index’ represents the number of digits from back to front.</p>
<p>Examples are as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_list_insert</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="n">x</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">test_list_insert</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;output:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">output</span><span class="p">))</span>
</pre></div>
</div>
<p>The results are as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>output:[1, 2, 3, 4]
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</section>
<section id="tuple">
<h5>Tuple<a class="headerlink" href="#tuple" title="Permalink to this headline"></a></h5>
<p><code class="docutils literal notranslate"><span class="pre">Tuple</span></code> can be constructed on the network, that is, the syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">(1,</span> <span class="pre">2,</span> <span class="pre">3)</span></code> is supported. The elements of the tuple <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> cannot be modified, but indexed access to elements in the tuple <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> is supported, and concatenated combinations of tuples are supported.</p>
<ul>
<li><p>Supported index values</p>
<p>Support accessing elements in the tuple <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> using square brackets plus subscripted indexes. The index value can be <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">slice</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and multi-level index value. That is, the syntax <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">=</span> <span class="pre">tuple_x[index0][index1]...</span></code> is supported.</p>
<p>Restrictions on the index value <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Tuple</span></code> stores <code class="docutils literal notranslate"><span class="pre">Cell</span></code>. Each <code class="docutils literal notranslate"><span class="pre">Cell</span></code> must be defined before a tuple is defined. The number of input parameters, input parameter type, and input parameter <code class="docutils literal notranslate"><span class="pre">shape</span></code> of each <code class="docutils literal notranslate"><span class="pre">Cell</span></code> must be the same. The number of outputs of each <code class="docutils literal notranslate"><span class="pre">Cell</span></code> must be the same. The output type must be the same as the output <code class="docutils literal notranslate"><span class="pre">shape</span></code>.</p></li>
<li><p>The index <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> is a scalar <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> whose <code class="docutils literal notranslate"><span class="pre">dtype</span></code> is <code class="docutils literal notranslate"><span class="pre">int32</span></code>. The value range is <code class="docutils literal notranslate"><span class="pre">[-tuple_len,</span> <span class="pre">tuple_len)</span></code>, and negative index is not supported in <code class="docutils literal notranslate"><span class="pre">Ascend</span></code> backend.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CPU</span></code>, <code class="docutils literal notranslate"><span class="pre">GPU</span></code> and <code class="docutils literal notranslate"><span class="pre">Ascend</span></code> backend is supported.</p></li>
</ul>
<p>An example of the <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">slice</span></code> indexes is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_index</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span>

<span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">test_index</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;y:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;z:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;m:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">m</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;n:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>y:3
z:[1 2 3]
m:((2, 3, 4), 3, 4)
n:(2, 3, 4)
</pre></div>
</div>
<p>An example of the <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> index is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">set_context</span>

<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relu</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">softmax</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Softmax</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layers</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relu</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">softmax</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="n">index</span><span class="p">](</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">([</span><span class="o">-</span><span class="mf">1.0</span><span class="p">],</span> <span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">net</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ret:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ret</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ret:[0.]
</pre></div>
</div>
</li>
<li><p>Support connection combinations</p>
<p>Similar to the string <code class="docutils literal notranslate"><span class="pre">String</span></code>, tuples support combining using <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">*</span></code> to get a new tuple <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_index</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span>

<span class="n">out1</span><span class="p">,</span> <span class="n">out2</span> <span class="o">=</span> <span class="n">test_index</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;out1:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;out2:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out2</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>out1:(1, 2, 3, 4, 5, 6)
out2:(1, 2, 3, 1, 2, 3)
</pre></div>
</div>
</li>
</ul>
</section>
<section id="dictionary">
<h5>Dictionary<a class="headerlink" href="#dictionary" title="Permalink to this headline"></a></h5>
<p><code class="docutils literal notranslate"><span class="pre">Dictionary</span></code> can be constructed on the network. Each key value <code class="docutils literal notranslate"><span class="pre">key:value</span></code> is separated by a colon <code class="docutils literal notranslate"><span class="pre">:</span></code>, and each key value pair is separated by a comma <code class="docutils literal notranslate"><span class="pre">,</span></code>. The entire dictionary contains the key-value pairs using curly braces <code class="docutils literal notranslate"><span class="pre">{}</span></code>. That is, the syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">{&quot;a&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;b&quot;:</span> <span class="pre">2}</span></code> is supported.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">key</span></code> is unique, and if there are multiple identical <code class="docutils literal notranslate"><span class="pre">keys</span></code> in the dictionary, the duplicate <code class="docutils literal notranslate"><span class="pre">keys</span></code> are finalized with the last one and the value <code class="docutils literal notranslate"><span class="pre">value</span></code> can be non-unique. The key <code class="docutils literal notranslate"><span class="pre">key</span></code> needs to be guaranteed to be immutable. Currently, the <code class="docutils literal notranslate"><span class="pre">key</span></code> can be <code class="docutils literal notranslate"><span class="pre">String</span></code>, <code class="docutils literal notranslate"><span class="pre">Number</span></code>, constant <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, or <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> that contains these types. The <code class="docutils literal notranslate"><span class="pre">value</span></code> can be <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="docutils literal notranslate"><span class="pre">List</span></code> or <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code>.</p>
<ul>
<li><p>Supported APIs</p>
<p><code class="docutils literal notranslate"><span class="pre">keys</span></code>: extracts all <code class="docutils literal notranslate"><span class="pre">key</span></code> values from <code class="docutils literal notranslate"><span class="pre">dict</span></code> to form <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> and return it.</p>
<p><code class="docutils literal notranslate"><span class="pre">values</span></code>: extracts all <code class="docutils literal notranslate"><span class="pre">value</span></code> values from <code class="docutils literal notranslate"><span class="pre">dict</span></code> to form <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> and return it.</p>
<p><code class="docutils literal notranslate"><span class="pre">items</span></code>: extracts <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> composed of each pair of <code class="docutils literal notranslate"><span class="pre">value</span></code> values and <code class="docutils literal notranslate"><span class="pre">key</span></code> values in <code class="docutils literal notranslate"><span class="pre">dict</span></code> to form <code class="docutils literal notranslate"><span class="pre">List</span></code> and return it.</p>
<p><code class="docutils literal notranslate"><span class="pre">get</span></code>: <code class="docutils literal notranslate"><span class="pre">dict.get(key[,</span> <span class="pre">value])</span></code> returns the <code class="docutils literal notranslate"><span class="pre">value</span></code> value corresponding to the specified <code class="docutils literal notranslate"><span class="pre">key</span></code>, if the specified <code class="docutils literal notranslate"><span class="pre">key</span></code> does not exist, the default value <code class="docutils literal notranslate"><span class="pre">None</span></code> or the set default value <code class="docutils literal notranslate"><span class="pre">value</span></code> is returned .</p>
<p><code class="docutils literal notranslate"><span class="pre">clear</span></code>: removes all elements in <code class="docutils literal notranslate"><span class="pre">dict</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">has_key</span></code>: <code class="docutils literal notranslate"><span class="pre">dict.has_key(key)</span></code> determines whether the specified <code class="docutils literal notranslate"><span class="pre">key</span></code> exists in <code class="docutils literal notranslate"><span class="pre">dict</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">update</span></code>: <code class="docutils literal notranslate"><span class="pre">dict1.update(dict2)</span></code> updates the elements in <code class="docutils literal notranslate"><span class="pre">dict2</span></code> to <code class="docutils literal notranslate"><span class="pre">dict1</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">fromkeys</span></code>: <code class="docutils literal notranslate"><span class="pre">dict.fromkeys(seq([,</span> <span class="pre">value]))</span></code> is used to create a new <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code>, using the elements in the sequence <code class="docutils literal notranslate"><span class="pre">seq</span></code> as the <code class="docutils literal notranslate"><span class="pre">key</span></code> of the <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code>, and the <code class="docutils literal notranslate"><span class="pre">value</span></code> is initial value corresponding to all <code class="docutils literal notranslate"><span class="pre">key</span></code>.</p>
<p>The example is as follows, where the ‘x’ and ‘new_dict’ in the return value are a ‘Dictionary’, and the support is extended under the JIT syntax support level option LAX in graph mode, for more advanced use of Dictionary, please refer to the <a class="reference internal" href="#supporting-the-high-level-usage-of-dictionary"><span class="std std-doc">Supporting the high-level usage of Dictionary</span></a> section of this article.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])),</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])),</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]))}</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_dict</span><span class="p">():</span>
    <span class="n">x_keys</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">x_values</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
    <span class="n">x_items</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="n">value_a</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="n">check_key</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]))}</span>
    <span class="n">x</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="n">new_dict</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="s2">&quot;abcd&quot;</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x_keys</span><span class="p">,</span> <span class="n">x_values</span><span class="p">,</span> <span class="n">x_items</span><span class="p">,</span> <span class="n">value_a</span><span class="p">,</span> <span class="n">check_key</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">new_dict</span>

<span class="n">x_keys</span><span class="p">,</span> <span class="n">x_values</span><span class="p">,</span> <span class="n">x_items</span><span class="p">,</span> <span class="n">value_a</span><span class="p">,</span> <span class="n">check_key</span><span class="p">,</span> <span class="n">new_x</span><span class="p">,</span> <span class="n">new_dict</span> <span class="o">=</span> <span class="n">test_dict</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x_keys:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x_keys</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x_values:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x_values</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x_items:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x_items</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;value_a:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value_a</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;check_key:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">check_key</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;new_x:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">new_x</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;new_dict:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">new_dict</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>x_keys:(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)
x_values:(Tensor(shape=[3], dtype=Int64, value= [1, 2, 3]), Tensor(shape=[3], dtype=Int64, value= [4, 5, 6]), Tensor(shape=[3], dtype=Int64, value= [7, 8, 9]))
x_items:[(&#39;a&#39;, Tensor(shape=[3], dtype=Int64, value= [1, 2, 3])), (&#39;b&#39;, Tensor(shape=[3], dtype=Int64, value= [4, 5, 6])), (&#39;c&#39;, Tensor(shape=[3], dtype=Int64, value= [7, 8, 9]))]
value_a:[1 2 3]
check_key:True
new_x:{&#39;a&#39;: Tensor(shape=[3], dtype=Int64, value= [0, 0, 0]), &#39;b&#39;: Tensor(shape=[3], dtype=Int64, value= [4, 5, 6]), &#39;c&#39;: Tensor(shape=[3], dtype=Int64, value= [7, 8, 9])}
new_dict:{&#39;a&#39;: 123, &#39;b&#39;: 123, &#39;c&#39;: 123, &#39;d&#39;: 123}
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="mindspore-user-defined-data-types">
<h4>MindSpore User-defined Data Types<a class="headerlink" href="#mindspore-user-defined-data-types" title="Permalink to this headline"></a></h4>
<p>Currently, MindSpore supports the following user-defined data types: <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="docutils literal notranslate"><span class="pre">Primitive</span></code>, and <code class="docutils literal notranslate"><span class="pre">Cell</span></code>.</p>
<section id="tensor">
<h5>Tensor<a class="headerlink" href="#tensor" title="Permalink to this headline"></a></h5>
<p>For details of <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, click <a class="reference external" href="https://mindspore.cn/docs/en/r2.2/api_python/mindspore/mindspore.Tensor.html#mindspore-tensor">Tensor API document</a>.</p>
<p>Supporting creating and using Tensor. The ways to create a <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> include using <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/api_python/mindspore/mindspore.tensor.html#mindspore.tensor">tensor function interface</a> and using the class ‘ms.Tensor’ interface. It is recommended to use the former because users can specify the required dtype. The code case is as follows.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">import</span> <span class="nn">mindspore.nn</span> <span class="k">as</span> <span class="nn">nn</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ms</span><span class="o">.</span><span class="n">tensor</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>

<span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">net</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>1.0
</pre></div>
</div>
</section>
<section id="primitive">
<h5>Primitive<a class="headerlink" href="#primitive" title="Permalink to this headline"></a></h5>
<p>Currently, <code class="docutils literal notranslate"><span class="pre">Primitive</span></code> and its subclass instances can be constructed in construct.</p>
<p>However, during call, the parameter can be specified only in position parameter mode, and cannot be specified in the key-value pair mode.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">ops</span><span class="p">,</span> <span class="n">Tensor</span><span class="p">,</span> <span class="n">set_context</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="n">reduce_sum</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">ReduceSum</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span> <span class="c1">#`Primitive` and its subclass instances can be constructed in construct.</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">reduce_sum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">net</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ret.shape:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ret</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
</pre></div>
</div>
<p>In the network defined above, the parameters of reduce_sum(x, axis=2) cannot be specified in the key-value pair mode. The parameter can be specified only in position parameter mode, that is, reduce_sum(x, 2).</p>
<p>The error is reported as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ValueError: For &#39;ReduceSum&#39;, the second input type should be tensor or scalar, but got invalid abstract type:AbstractKeywordArg.
</pre></div>
</div>
<p>Currently, the attributes and APIs related to <code class="docutils literal notranslate"><span class="pre">Primitive</span></code> and its subclasses cannot be called on the network.</p>
<p>For details about the defined <code class="docutils literal notranslate"><span class="pre">Primitive</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/api_python/ops/mindspore.ops.Primitive.html#mindspore.ops.Primitive">Primitive API document</a>.</p>
</section>
<section id="cell">
<h5>Cell<a class="headerlink" href="#cell" title="Permalink to this headline"></a></h5>
<p>Currently, <code class="docutils literal notranslate"><span class="pre">Cell</span></code> and its subclass instances can be constructed on the network. That is, the syntax <code class="docutils literal notranslate"><span class="pre">cell</span> <span class="pre">=</span> <span class="pre">Cell(args...)</span></code> is supported.</p>
<p>However, during call, the parameter can be specified only in position parameter mode, and cannot be specified in the key-value pair mode. That is, the syntax <code class="docutils literal notranslate"><span class="pre">cell</span> <span class="pre">=</span> <span class="pre">Cell(arg_name=value)</span></code> is not supported.</p>
<p>Currently, the attributes and APIs related to <code class="docutils literal notranslate"><span class="pre">Cell</span></code> and its subclasses cannot be called on the network unless they are called through <code class="docutils literal notranslate"><span class="pre">self</span></code> in <code class="docutils literal notranslate"><span class="pre">construct</span></code> of <code class="docutils literal notranslate"><span class="pre">Cell</span></code>.</p>
<p>For details about the definition of <code class="docutils literal notranslate"><span class="pre">Cell</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/api_python/nn/mindspore.nn.Cell.html">Cell API document</a>.</p>
</section>
<section id="parameter">
<h5>Parameter<a class="headerlink" href="#parameter" title="Permalink to this headline"></a></h5>
<p><code class="docutils literal notranslate"><span class="pre">Parameter</span></code> is a variable tensor, indicating the parameters that need to be updated during network training.</p>
<p>For details about the definition of <code class="docutils literal notranslate"><span class="pre">Parameter</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/api_python/mindspore/mindspore.Parameter.html#mindspore.Parameter">Parameter API document</a>.</p>
</section>
</section>
</section>
<section id="operators">
<h3>Operators<a class="headerlink" href="#operators" title="Permalink to this headline"></a></h3>
<p>Arithmetic operators and assignment operators support the <code class="docutils literal notranslate"><span class="pre">Number</span></code> and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> operations, as well as the <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> operations of different <code class="docutils literal notranslate"><span class="pre">dtype</span></code>. For more details, please refer to <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/note/static_graph_syntax/operators.html">Operators</a></p>
</section>
<section id="primaries">
<h3>Primaries<a class="headerlink" href="#primaries" title="Permalink to this headline"></a></h3>
<p>Primaries represent the most tightly bound operations of the language.</p>
<section id="attribute-references-and-attribute-modification">
<h4>Attribute References and Attribute Modification<a class="headerlink" href="#attribute-references-and-attribute-modification" title="Permalink to this headline"></a></h4>
<p>An attribute reference is a primary followed by a period and a name.</p>
<p>Using attribute references as l-values in Cell instances of MindSpore requires the following requirements:</p>
<ul class="simple">
<li><p>The modified attribute belongs to this <code class="docutils literal notranslate"><span class="pre">cell</span></code> object, i.e. it must be <code class="docutils literal notranslate"><span class="pre">self.xxx</span></code>.</p></li>
<li><p>The attribute is initialized in Cell’s ‘<strong>init</strong>’ function and is of type Parameter.</p></li>
</ul>
<p>When the JIT syntax support level option is ‘LAX’, can support attribute modification in more situations, see <a class="reference internal" href="#supporting-property-setting-and-modification"><span class="std std-doc">Support Attribute Setting and Modification</span></a>.</p>
<p>Examples are as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">set_context</span>

<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">x</span>  <span class="c1"># The conditions are met, they can be modified</span>
        <span class="c1"># self.m = 3     # self.m is not of type Parameter and modification is prohibited</span>
        <span class="c1"># y.weight = x   # y is not self, modification is prohibited</span>
        <span class="k">return</span> <span class="n">x</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">net</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ret:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ret</span><span class="p">))</span>
</pre></div>
</div>
<p>The results are as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ret:1
</pre></div>
</div>
</section>
<section id="index-value">
<h4>Index Value<a class="headerlink" href="#index-value" title="Permalink to this headline"></a></h4>
<p>Index value of  a sequence <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">List</span></code>, <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> which called subscription in Python.</p>
<p>Index value of <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> refers to chapter <a class="reference internal" href="#tuple"><span class="std std-doc">Tuple</span></a> of this page.</p>
<p>Index value of <code class="docutils literal notranslate"><span class="pre">List</span></code> refers to chapter <a class="reference internal" href="#list"><span class="std std-doc">List</span></a> of this page.</p>
<p>Index value of <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code> refers to chapter <a class="reference internal" href="#dictionary"><span class="std std-doc">Dictionary</span></a> of this page.</p>
<p>Index value of <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> refers to <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/note/index_support.html#index-values">Tensor index value document</a>.</p>
</section>
<section id="calls">
<h4>Calls<a class="headerlink" href="#calls" title="Permalink to this headline"></a></h4>
<p>A call calls a callable object (e.g., <code class="docutils literal notranslate"><span class="pre">Cell</span></code> or <code class="docutils literal notranslate"><span class="pre">Primitive</span></code>) with a possibly empty series of arguments.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">ops</span><span class="p">,</span> <span class="n">set_context</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matmul</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">MatMul</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matmul</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>  <span class="c1"># A call of Primitive</span>
        <span class="k">return</span> <span class="n">out</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]),</span> <span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">net</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ret:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ret</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ret:[[3. 3. 3. 3.]]
</pre></div>
</div>
</section>
</section>
<section id="statements">
<h3>Statements<a class="headerlink" href="#statements" title="Permalink to this headline"></a></h3>
<p>Currently supported Python statements include raise statement, assert statement, pass statement, return statement, break statement, continue statement, if statement, for statement, while statement, with statement, list comprehension, generator expression and function definition statement. For more details, please refer to <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/note/static_graph_syntax/statements.html">Statements</a></p>
</section>
<section id="python-built-in-functions">
<h3>Python Built-in Functions<a class="headerlink" href="#python-built-in-functions" title="Permalink to this headline"></a></h3>
<p>Currently supported Python built-in functions include <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">bool</span></code>, <code class="docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">getattr</span></code>, <code class="docutils literal notranslate"><span class="pre">hasattr</span></code>, <code class="docutils literal notranslate"><span class="pre">len</span></code>, <code class="docutils literal notranslate"><span class="pre">isinstance</span></code>, <code class="docutils literal notranslate"><span class="pre">all</span></code>, <code class="docutils literal notranslate"><span class="pre">any</span></code>, <code class="docutils literal notranslate"><span class="pre">round</span></code>, <code class="docutils literal notranslate"><span class="pre">max</span></code>, <code class="docutils literal notranslate"><span class="pre">min</span></code> , <code class="docutils literal notranslate"><span class="pre">sum</span></code>, <code class="docutils literal notranslate"><span class="pre">abs</span></code>, <code class="docutils literal notranslate"><span class="pre">partial</span></code>, <code class="docutils literal notranslate"><span class="pre">map</span></code>, <code class="docutils literal notranslate"><span class="pre">range</span></code>, <code class="docutils literal notranslate"><span class="pre">enumerate</span></code>, <code class="docutils literal notranslate"><span class="pre">super</span></code>, <code class="docutils literal notranslate"><span class="pre">pow</span></code>, <code class="docutils literal notranslate"><span class="pre">filter</span></code>. The use of built-in functions in graph mode is similar to the corresponding Python built-in functions. For more details, please refer to <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/note/static_graph_syntax/python_builtin_functions.html">Python Built-in Functions</a>.</p>
</section>
<section id="network-definition">
<h3>Network Definition<a class="headerlink" href="#network-definition" title="Permalink to this headline"></a></h3>
<section id="network-input-parameters">
<h4>Network Input parameters<a class="headerlink" href="#network-input-parameters" title="Permalink to this headline"></a></h4>
<p>While calculating gradient for outermost network, only <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> input could be calculated, input of other type will be ignored.</p>
<p>The code example is shown below. Among the input parameter <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span>&#160; <span class="pre">z)</span></code> of outermost network, <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">z</span></code> are <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> type but <code class="docutils literal notranslate"><span class="pre">y</span></code> is not. While <code class="docutils literal notranslate"><span class="pre">grad_net</span></code> calculating gradient of the input parameters <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">z)</span></code> for the network, gradient of <code class="docutils literal notranslate"><span class="pre">y</span></code> is automatically ignored. Only gradients of <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">z</span></code> are calculated, and <code class="docutils literal notranslate"><span class="pre">(grad_x,</span> <span class="pre">grad_y)</span></code> is returned.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span>

<span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="n">z</span>

<span class="k">class</span> <span class="nc">GradNet</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">net</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">GradNet</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward_net</span> <span class="o">=</span> <span class="n">net</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ms</span><span class="o">.</span><span class="n">grad</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">forward_net</span><span class="p">,</span> <span class="n">grad_position</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

<span class="n">input_x</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span>
<span class="n">input_y</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">input_z</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">3</span><span class="p">])</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">grad_net</span> <span class="o">=</span> <span class="n">GradNet</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">grad_net</span><span class="p">(</span><span class="n">input_x</span><span class="p">,</span> <span class="n">input_y</span><span class="p">,</span> <span class="n">input_z</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ret:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ret</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ret:(Tensor(shape=[1], dtype=Int64, value= [1]), Tensor(shape=[1], dtype=Int64, value= [1]))
</pre></div>
</div>
</section>
</section>
</section>
<section id="syntax-constraints-of-basic-syntaxes">
<h2>Syntax Constraints of Basic Syntaxes<a class="headerlink" href="#syntax-constraints-of-basic-syntaxes" title="Permalink to this headline"></a></h2>
<p>The execution graph in graph mode is converted from source code, and not all Python syntax can support it. The following describes some of the syntax constraints that exist under the basic syntax. More network compilation problems can be found in <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/faq/network_compilation.html">Network compilation</a>.</p>
<ol class="arabic">
<li><p>When an undefined class member is used in the <code class="docutils literal notranslate"><span class="pre">construct</span></code> function, <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> exception will be thrown. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">set_context</span>

<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">net</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>AttributeError: External object has no attribute y
</pre></div>
</div>
</li>
<li><p>Class methods modified by <code class="docutils literal notranslate"><span class="pre">classmethod</span></code> in <code class="docutils literal notranslate"><span class="pre">nn.Cell</span></code> are not supported. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">ms</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">out</span> <span class="o">=</span> <span class="n">net</span><span class="p">(</span><span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-Text notranslate"><div class="highlight"><pre><span></span>TypeError: The parameters number of the function is 3, but the number of provided arguments is 2.
</pre></div>
</div>
</li>
<li><p>In graph mode, some Python syntax is difficult to convert to <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/design/all_scenarios.html#mindspore-ir-mindir">intermediate MindIR</a> in graph mode. For Python keywords, there are some keywords that are not supported in graph mode: AsyncFunctionDef, Delete, AnnAssign, AsyncFor, AsyncWith, Match, Try, Import, ImportFrom, Nonlocal, NamedExpr, Set, SetComp, Await, Yield, YieldFrom, Starred. If the relevant syntax is used in graph mode, an error message will alert the user.</p>
<p>If you use the Try statement, the following example is used:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">test_try_except</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">global_out</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">global_out</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span>
    <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;division by zero, y is zero.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">global_out</span>

<span class="n">test_try_except_out</span> <span class="o">=</span> <span class="n">test_try_except</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;out:&quot;</span><span class="p">,</span> <span class="n">test_try_except_out</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-Text notranslate"><div class="highlight"><pre><span></span>RuntimeError: Unsupported statement &#39;Try&#39;.
</pre></div>
</div>
</li>
<li><p>Benchmarking Python built-in data types, except for <a class="reference internal" href="#built-in-python-data-types"><span class="std std-doc">Built-in Python Data Types</span></a> supported in the current graph mode, complex ‘complex’ and collection ‘set’ types are not supported. Some high-level uses of the list ‘list’ and dictionary ‘dictionary’ are not supported in the basic syntax scenario, and need to be supported when the JIT syntax support level option ‘jit_syntax_level’ is ‘LAX’, please refer to the <a class="reference internal" href="#extended-syntaxes-lax-level"><span class="std std-doc">Extended Syntaxes (LAX level)</span></a> section of this article for more information.</p></li>
<li><p>In the basic syntax scenario, in addition to the <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/note/static_graph_syntax/python_builtin_functions.html">Python Built-in Functions</a> supported in the current graph mode, there are still some built-in functions that are not supported in graph mode. For example: basestring, bin, bytearray, callable, chr, cmp, compile, delattr, dir, divmod, eval, execfile, file, frozenset, hash, hex, id, input, issubclass, iter, locals, long, memoryview, next, object, oct, open, ord, property, raw_input, reduce, reload, repr, reverse, set, slice, sorted, unichr, unicode, vars, xrange, __import__.</p></li>
<li><p>Python provides a number of third-party libraries that usually need to be called via import statements. In graph mode, when the JIT syntax support level is ‘STRICT’, you cannot directly use third-party libraries. If you need to use the data types of third-party libraries in graph mode or call methods of third-party libraries, you need to support them only if the JIT syntax support level option ‘jit_syntax_level’ is ‘LAX’, please refer to the <a class="reference internal" href="#calling-the-third-party-libraries"><span class="std std-doc">Calling the Third-party Libraries</span></a> section in <a class="reference internal" href="#extended-syntaxes-lax-level"><span class="std std-doc">Extended Syntaxes (LAX level)</span></a> of this article.</p></li>
<li><p>In graph mode, when the JIT syntax support level is ‘STRICT’, you cannot directly use objects, properties, and methods of custom classes. If you need to use custom classes in graph mode, refer to the <a class="reference internal" href="#supporting-the-use-of-custom-classes"><span class="std std-doc">Supporting the Use of Custom Classes</span></a> section of <a class="reference internal" href="#extended-syntaxes-lax-level"><span class="std std-doc">Extended Syntaxes (LAX level)</span></a> in this article.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">,</span> <span class="n">jit_syntax_level</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">STRICT</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">GetattrClass</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attr1</span> <span class="o">=</span> <span class="mi">99</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attr2</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">method1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">attr2</span>

<span class="k">class</span> <span class="nc">GetattrClassNet</span><span class="p">(</span><span class="n">ms</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">GetattrClassNet</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cls</span> <span class="o">=</span> <span class="n">GetattrClass</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="o">.</span><span class="n">method1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="o">.</span><span class="n">attr1</span><span class="p">)</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">GetattrClassNet</span><span class="p">()</span>
<span class="n">out</span> <span class="o">=</span> <span class="n">net</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">out</span> <span class="o">==</span> <span class="mi">100</span>
</pre></div>
</div>
<p>There will be related errors:</p>
<div class="highlight-Text notranslate"><div class="highlight"><pre><span></span>TypeError: Do not support to convert &lt;class &#39;__main__.GetattrClass&#39;&gt; object into graph node.
</pre></div>
</div>
</li>
</ol>
</section>
<section id="extended-syntaxes-lax-level">
<h2>Extended Syntaxes (LAX level)<a class="headerlink" href="#extended-syntaxes-lax-level" title="Permalink to this headline"></a></h2>
<p>The following mainly introduces the static graph syntax supported by the current extension.</p>
<section id="calling-the-third-party-libraries">
<h3>Calling the Third-party Libraries<a class="headerlink" href="#calling-the-third-party-libraries" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Third-party libraries.</p>
<ol class="arabic simple">
<li><p>Python built-in modules and Python standard libraries, such as <code class="docutils literal notranslate"><span class="pre">os</span></code>, <code class="docutils literal notranslate"><span class="pre">sys</span></code>, <code class="docutils literal notranslate"><span class="pre">math</span></code>, <code class="docutils literal notranslate"><span class="pre">time</span></code> and other modules.</p></li>
<li><p>Third-party code libraries. Their module paths are under the <code class="docutils literal notranslate"><span class="pre">site-packages</span></code> directory of the Python installation directory, which need to be installed first and then imported, such <code class="docutils literal notranslate"><span class="pre">NumPy</span></code> and <code class="docutils literal notranslate"><span class="pre">Scipy</span></code>. It should be noted that MindSpore suites such as <code class="docutils literal notranslate"><span class="pre">mindyolo</span></code> and <code class="docutils literal notranslate"><span class="pre">mindflow</span></code> are not treated as third-party libraries.</p></li>
<li><p>Modules specified by the environment variable <code class="docutils literal notranslate"><span class="pre">MS_JIT_IGNORE_MODULES</span></code>. In contrast, there is the environment variable <code class="docutils literal notranslate"><span class="pre">MS_JIT_MODULES</span></code>. For more details, please refer to <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/note/env_var_list.html">Environment Variables</a>.</p></li>
</ol>
</li>
<li><p>Supporting data types of third-party libraries, allowing calling and returning objects of third-party libraries.</p>
<p>The code example is as follows.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
    <span class="k">return</span> <span class="n">out</span>

<span class="nb">print</span><span class="p">(</span><span class="n">func</span><span class="p">())</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[5 7 9]
</pre></div>
</div>
</li>
<li><p>Supporting calling methods of third-party libraries.</p>
<p>The code example is as follows.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">linalg</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
    <span class="k">return</span> <span class="n">linalg</span><span class="o">.</span><span class="n">qr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">out</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(2, 2)
</pre></div>
</div>
</li>
<li><p>Supporting creating Tensor instances by using the data types of the third-party library NumPy.</p>
<p>The code example is as follows.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">out</span>

<span class="nb">print</span><span class="p">(</span><span class="n">func</span><span class="p">())</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[2, 3, 4]
</pre></div>
</div>
</li>
<li><p>The assignment of subscripts for data types in third-party libraries is not currently supported.</p>
<p>The code example is as follows.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;res: &quot;</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
<p>The error message is reported as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>RuntimeError: For operation &#39;setitem&#39;, current input arguments types are &lt;External, Number, Number&gt;. The 1-th argument type &#39;External&#39; is not supported now.
</pre></div>
</div>
</li>
</ul>
</section>
<section id="supporting-the-use-of-custom-classes">
<h3>Supporting the Use of Custom Classes<a class="headerlink" href="#supporting-the-use-of-custom-classes" title="Permalink to this headline"></a></h3>
<p>Custom classes can be used in graph mode, and classes can be instantiated and object properties and methods can be used.</p>
<p>For example, where ‘GetattrClass’ is a user-defined class that does not use the ‘&#64;jit_class’ decoration and does not inherit ‘nn. Cell`。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">GetattrClass</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attr1</span> <span class="o">=</span> <span class="mi">99</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attr2</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">method1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">attr2</span>

<span class="k">class</span> <span class="nc">GetattrClassNet</span><span class="p">(</span><span class="n">ms</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">GetattrClassNet</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cls</span> <span class="o">=</span> <span class="n">GetattrClass</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="o">.</span><span class="n">method1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="o">.</span><span class="n">attr1</span><span class="p">)</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">GetattrClassNet</span><span class="p">()</span>
<span class="n">out</span> <span class="o">=</span> <span class="n">net</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">out</span> <span class="o">==</span> <span class="mi">100</span>
</pre></div>
</div>
</section>
<section id="basic-operators-support-more-data-type">
<h3>Basic Operators Support More Data Type<a class="headerlink" href="#basic-operators-support-more-data-type" title="Permalink to this headline"></a></h3>
<p>In the syntax of graph mode, the following basic operators in the list is overloaded: [‘+’, ‘-’, ‘*’, ‘/’, ‘//’, ‘%’, ‘**’, ‘&lt;&lt;’, ‘&gt;&gt;’, ‘&amp;’, ‘|’, ‘^’, ‘not’, ‘==’, ‘!=’, ‘&lt;’, ‘&gt;’, ‘&lt;=’, ‘&gt;=’, ‘in’, ‘not in’, ‘y=x[0]’]. For more details, please refer to <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/note/static_graph_syntax/operators.html">Operators</a>. When getting unsupported input type, those operators need to use extended static graph syntax to support, and make the output consistent with the output in the pynative mode.</p>
<p>The code example is as follows.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">import</span> <span class="nn">mindspore.nn</span> <span class="k">as</span> <span class="nn">nn</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">Tensor</span>
<span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">InnerClass</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">()</span> <span class="o">+</span> <span class="n">y</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">()</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">InnerClass</span><span class="p">()</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">net</span><span class="p">(</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]),</span> <span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[5 7]
</pre></div>
</div>
<p>In the example above, since the output of <code class="docutils literal notranslate"><span class="pre">x.asnumpy()</span></code> is <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> and is an unsupported input type of <code class="docutils literal notranslate"><span class="pre">+</span></code> in the graph mode, <code class="docutils literal notranslate"><span class="pre">x.asnumpy()</span> <span class="pre">+</span> <span class="pre">y.asnumpy()</span></code> will be supported by static graph syntax.</p>
<p>In another example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">InnerClass</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">in</span> <span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">InnerClass</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">net</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">tuple</span></code> in <code class="docutils literal notranslate"><span class="pre">tuple</span></code>is an unsupported operation in original graph mode，and will be supported by static graph syntax.</p>
</section>
<section id="base-type">
<h3>Base Type<a class="headerlink" href="#base-type" title="Permalink to this headline"></a></h3>
<p>Use the JIT Fallback feature to extend support for Python’s native data types ‘List’, ‘Dictionary’, ‘None’.</p>
<section id="supporting-list-inplace-modification-operations">
<h4>Supporting List Inplace Modification Operations<a class="headerlink" href="#supporting-list-inplace-modification-operations" title="Permalink to this headline"></a></h4>
<p>The list ‘List’ and tuple ‘Tuple’ are the most basic sequential built-in types in Python, and the core difference between ‘List’ and ‘Tuple’ is that ‘List’ is an object that can be changed, while ‘Tuple’ cannot be changed. This means that once ‘Tuple’ is created, it cannot be changed without changing the object address. ‘List’, on the other hand, can modify an object without changing its address through a series of inplace operations. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">a_id</span> <span class="o">=</span> <span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">a_after_id</span> <span class="o">=</span> <span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">a_id</span> <span class="o">==</span> <span class="n">a_after_id</span>
</pre></div>
</div>
<p>In the above example code, when you change the ‘List’ object through the ‘append’ inplace syntax, the address of the object is not changed. ‘Tuple’ does not support this kind of inplace. With ‘JIT_SYNTAX_LEVEL’ set to ‘LAX’, static graph mode can support the inplace operation of some ‘List’ objects.</p>
<p>The specific usage scenarios are as follows:</p>
<ul>
<li><p>Support for getting the original ‘List’ object from a global variable</p>
<p>In the following example, the static graph gets the ‘List’ object, performs the inplace operation ‘list.reverse()’ supported by graph mode on the original object, and returns the original object. It can be seen that the object returned by the graph mode has the same ID as the original global variable object, that is, the two are the same object. If ‘JIT_SYNTAX_LEVEL’ is set to the ‘STRICT’ option, the returned ‘List’ object and the global object are two different objects.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="n">global_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">list_func</span><span class="p">():</span>
    <span class="n">global_list</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">global_list</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">list_func</span><span class="p">()</span>  <span class="c1"># output: [4, 3, 2, 1]</span>
<span class="k">assert</span> <span class="nb">id</span><span class="p">(</span><span class="n">global_list</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Inplace operations on input ‘List’ objects are not supported</p>
<p>When List’ is imported as a static graph, the ‘List’ object is copied once, and subsequent calculations are performed using the copied object, so it is not possible to perform an inplace operation on the original input object. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="n">list_input</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">list_func</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">list_func</span><span class="p">(</span><span class="n">list_input</span><span class="p">)</span>  <span class="c1"># output: [4, 3, 2, 1]  list_input: [1, 2, 3, 4]</span>
<span class="k">assert</span> <span class="nb">id</span><span class="p">(</span><span class="n">output</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">id</span><span class="p">(</span><span class="n">list_input</span><span class="p">)</span>
</pre></div>
</div>
<p>As shown in the above use case, the ‘List’ object cannot be inplaced on the original object when input as a graph mode. The object returned by the graph mode is different from the object ID entered.</p>
</li>
<li><p>Support for in-place modification of some ‘List’ built-in functions</p>
<p>With ‘JIT_SYNTAX_LEVEL’ set to ‘LAX’, the graph mode section ‘List’ built-in function supports inplace. In cases where ‘JIT_SYNTAX_LEVEL’ is ‘STRICT’, none of the methods support the inplace operation.</p>
<p>Currently, the built-in methods for ‘List’ in-place modification supported by graph mode are ‘extend’, ‘pop’, ‘reverse’, and ‘insert’. The built-in methods ‘append’, ‘clear’ and index assignment do not support in-place modification at the moment, and will be supported in subsequent versions.</p>
<p>Examples are as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="n">list_input</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">list_func</span><span class="p">():</span>
    <span class="n">list_input</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">list_input</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">list_func</span><span class="p">()</span>  <span class="c1"># output: [4, 3, 2, 1]  list_input: [4, 3, 2, 1]</span>
<span class="k">assert</span> <span class="nb">id</span><span class="p">(</span><span class="n">output</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">list_input</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="supporting-the-high-level-usage-of-dictionary">
<h4>Supporting the High-Level Usage of Dictionary<a class="headerlink" href="#supporting-the-high-level-usage-of-dictionary" title="Permalink to this headline"></a></h4>
<ul>
<li><p>Support Top Graph Return Dictionary</p>
<p>Examples are as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_dict</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">}</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
    <span class="n">z</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">z</span>

<span class="n">out</span> <span class="o">=</span> <span class="n">test_dict</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;out:&quot;</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span>
</pre></div>
</div>
<p>The results are as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>out:{&#39;y&#39;: &#39;a&#39;}
</pre></div>
</div>
</li>
<li><p>Support Dictionary Index Value Retrieval and Assignment</p>
<p>Examples are as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])),</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])),</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]))}</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_dict</span><span class="p">():</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span>
    <span class="n">x</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>

<span class="n">out1</span><span class="p">,</span> <span class="n">out2</span> <span class="o">=</span> <span class="n">test_dict</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;out1:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;out2:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out2</span><span class="p">))</span>
</pre></div>
</div>
<p>The results are as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>out1:{&#39;a&#39;: (2, 3, 4), &#39;b&#39;: Tensor(shape=[3], dtype=Int64, value= [4, 5, 6]), &#39;c&#39;: Tensor(shape=[3], dtype=Int64, value= [7, 8, 9])}
out2:[4 5 6]
</pre></div>
</div>
</li>
</ul>
</section>
<section id="supporting-the-usage-of-none">
<h4>Supporting the Usage of None<a class="headerlink" href="#supporting-the-usage-of-none" title="Permalink to this headline"></a></h4>
<p>‘None’ is a special value in Python that represents null and can be assigned to any variable. Functions that do not have a return value statement are considered to return ‘None’. At the same time, ‘None’ is also supported as the input parameter or return value of the top graph or subgraph. Support ‘None’ as a subscript of a slice as input to ‘List’, ‘Tuple’, ‘Dictionary’.</p>
<p>Examples are as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">test_return_none</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="kc">None</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">test_return_none</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
<p>The results are as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(1, &#39;a&#39;, None)
</pre></div>
</div>
<p>For functions with no return value, the ‘None’ object is returned by default.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;x:&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">foo</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">res</span> <span class="ow">is</span> <span class="kc">None</span>
</pre></div>
</div>
<p>As in the example below, ‘None’ is used as the default input parameter for the top graph.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;y:&quot;</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;y is None&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;x:&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y</span>

<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">res</span> <span class="ow">is</span> <span class="kc">None</span>
</pre></div>
</div>
</section>
</section>
<section id="built-in-functions-support-more-data-types">
<h3>Built-in Functions Support More Data Types<a class="headerlink" href="#built-in-functions-support-more-data-types" title="Permalink to this headline"></a></h3>
<p>Extend the support for built-in functions. Python built-in functions perfectly support more input types, such as third-party library data types.</p>
<p>For example, in the following example, ‘x.asnumpy()’ and ‘np.ndarray’ are both types supported by extensions. More support for built-in functions can be found in the <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/note/static_graph_syntax/python_builtin_functions.html">Python built-in functions</a> section.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">import</span> <span class="nn">mindspore.nn</span> <span class="k">as</span> <span class="nn">nn</span>

<span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">(),</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]))</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">out</span> <span class="o">=</span> <span class="n">net</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">out</span>
</pre></div>
</div>
</section>
<section id="supporting-control-flow">
<h3>Supporting Control Flow<a class="headerlink" href="#supporting-control-flow" title="Permalink to this headline"></a></h3>
<p>In order to improve the support of Python standard syntax, realize dynamic and static unification, and extend the support for more data types in the use of control flow statements. Control flow statements refer to flow control statements such as ‘if’, ‘for’, and ‘while’. Theoretically, by extending the supported syntax, it is also supported in control flow scenarios. The code use cases are as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;res: &quot;</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
<p>The results are as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>res: 2
</pre></div>
</div>
</section>
<section id="supporting-property-setting-and-modification">
<h3>Supporting Property Setting and Modification<a class="headerlink" href="#supporting-property-setting-and-modification" title="Permalink to this headline"></a></h3>
<p>The specific usage scenarios are as follows:</p>
<ul class="simple">
<li><p>Set and modify properties of custom class objects and third-party types</p></li>
</ul>
<p>In graph mode, you can set and modify the properties of custom class objects, such as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">jit</span>

<span class="k">class</span> <span class="nc">AssignClass</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">AssignClass</span><span class="p">()</span>

<span class="nd">@jit</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="k">return</span>

<span class="n">foo</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;obj.x is: </span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>obj.x is: 100
</pre></div>
</div>
<p>In graph mode, you can set and modify the properties of third-party library objects, such as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">jit</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="nd">@jit</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
    <span class="n">a</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">shape</span>

<span class="n">shape</span> <span class="o">=</span> <span class="n">foo</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;shape is </span><span class="si">{</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>shape is (2, 2)
</pre></div>
</div>
<ul>
<li><p>Make changes to the Cell’s self object, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">set_context</span>
<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">=</span> <span class="mi">2</span>

  <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">=</span> <span class="mi">3</span>
      <span class="k">return</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">net</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;net.m is </span><span class="si">{</span><span class="n">net</span><span class="o">.</span><span class="n">m</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>net.m is 3
</pre></div>
</div>
<p>Note that the self object supports property modification and setting. If no attribute is defined in ‘<strong>init</strong>’, align the PYNATIVE mode, and the graph mode also allows this attribute to be set. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">set_context</span>
<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">=</span> <span class="mi">2</span>

  <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">m2</span> <span class="o">=</span> <span class="mi">3</span>
      <span class="k">return</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">net</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>Set and modify Cell objects and jit_class objects in the static graph</p>
<p>Supporting modifying the properties of the graph mode Cell object, such as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">set_context</span>
<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">InnerNet</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">InnerNet</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">inner</span> <span class="o">=</span> <span class="n">InnerNet</span><span class="p">()</span>

  <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">inner</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">100</span>
      <span class="k">return</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">net</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;net.inner.x is </span><span class="si">{</span><span class="n">net</span><span class="o">.</span><span class="n">inner</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>net.inner.x is 100
</pre></div>
</div>
<p>Supporting property modification of objects jit_class graph mode, such as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">set_context</span><span class="p">,</span> <span class="n">jit_class</span>
<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="nd">@jit_class</span>
<span class="k">class</span> <span class="nc">InnerClass</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">inner</span> <span class="o">=</span> <span class="n">InnerClass</span><span class="p">()</span>

  <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">inner</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">100</span>
      <span class="k">return</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">net</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;net.inner.x is </span><span class="si">{</span><span class="n">net</span><span class="o">.</span><span class="n">inner</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>net.inner.x is 100
</pre></div>
</div>
<p>Note that if the same property is obtained before modifying the properties of the Cell/jit_class object in the graph mode, the obtained properties will be parsed as constants. This can cause problems when running the same network multiple times, such as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">nn</span><span class="p">,</span> <span class="n">set_context</span>
<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">InnerNet</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">inner</span> <span class="o">=</span> <span class="n">InnerNet</span><span class="p">()</span>

  <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inner</span><span class="o">.</span><span class="n">x</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">inner</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>
      <span class="k">return</span>

<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">value0</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">inner</span><span class="o">.</span><span class="n">x</span>
<span class="n">net</span><span class="p">()</span>
<span class="n">value1</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">inner</span><span class="o">.</span><span class="n">x</span>
<span class="n">net</span><span class="p">()</span>
<span class="n">value2</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">inner</span><span class="o">.</span><span class="n">x</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;value0 is </span><span class="si">{</span><span class="n">value0</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;value1 is </span><span class="si">{</span><span class="n">value1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;value2 is </span><span class="si">{</span><span class="n">value2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>value0 is 1
value1 is 2
value2 is 2
</pre></div>
</div>
<p>But in dynamic graph mode, the value of ‘value2’ should be 3. However, because ‘self.inner.x’ in the statement ‘a = self.inner.x’ is solidified as a constant 2, the value of ‘self.inner.x’ is set to 2 both times. This issue will be resolved in a subsequent release.</p>
</li>
</ul>
</section>
<section id="supporting-derivation">
<h3>Supporting Derivation<a class="headerlink" href="#supporting-derivation" title="Permalink to this headline"></a></h3>
<p>The static graph syntax supported by the extension also supports its use in derivation, such as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">ops</span><span class="p">,</span> <span class="n">set_context</span>
<span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>

<span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">dict_net</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="n">a</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

<span class="n">out</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">grad</span><span class="p">(</span><span class="n">dict_net</span><span class="p">)(</span><span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">]))</span>
<span class="k">assert</span> <span class="n">out</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>
</div>
</section>
<section id="annotation-type">
<h3>Annotation Type<a class="headerlink" href="#annotation-type" title="Permalink to this headline"></a></h3>
<p>For syntax supported by the runtime extensions, nodes are generated that cannot be derived by type, such as dynamically created Tensors, which are called ‘Any’ types. Because this type cannot be inferred correctly at compile time, the Anytype will be operated on with a default maximum precision of float64 to prevent loss of precision. In order to better optimize performance, it is necessary to reduce the generation of Any type data. When the user can clearly know the specific type that will be generated by the extended syntax, we recommend using Annotation to specify the corresponding Python statement type, thereby determining the type of the interpretation node and avoiding the generation of Any type.</p>
<p>For example, the difference between the <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/api_python/mindspore/mindspore.Tensor.html#mindspore.Tensor">Tensor</a> class and the <a class="reference external" href="https://www.mindspore.cn/docs/en/r2.2/api_python/mindspore/mindspore.tensor.html#mindspore.tensor">tensor</a> interface lies in the use of the Annotation Type mechanism within the tensor interface. When the dtype of the tensor function is determined, the function uses Annotation to specify the output type, thereby avoiding the generation of Any type. The use of <code class="docutils literal notranslate"><span class="pre">Annotation</span> <span class="pre">Type</span></code> only requires adding a comment #() -&gt; tensor_type[float32] above or after the corresponding Python statement, where tensor_type[float32] after -&gt; indicates the output type of the annotated statement.</p>
<p>The code example is as follows.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">import</span> <span class="nn">mindspore.nn</span> <span class="k">as</span> <span class="nn">nn</span>
<span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">ops</span><span class="p">,</span> <span class="n">Tensor</span>

<span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abs</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">Abs</span><span class="p">()</span>

    <span class="nd">@ms</span><span class="o">.</span><span class="n">jit</span>
    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">tensor</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">()</span> <span class="o">+</span> <span class="n">y</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
        <span class="n">y2</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">()</span> <span class="o">+</span> <span class="n">y</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span> <span class="c1"># @jit.typing: () -&gt; tensor_type[float32]</span>
        <span class="n">y3</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">()</span> <span class="o">+</span> <span class="n">y</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">())</span>
        <span class="n">y4</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">()</span> <span class="o">+</span> <span class="n">y</span><span class="o">.</span><span class="n">asnumpy</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y1</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y2</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y3</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y4</span><span class="p">)</span>

<span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">GRAPH_MODE</span><span class="p">)</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">y4</span> <span class="o">=</span> <span class="n">net</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;y1 value is </span><span class="si">{</span><span class="n">y1</span><span class="si">}</span><span class="s2">, dtype is </span><span class="si">{</span><span class="n">y1</span><span class="o">.</span><span class="n">dtype</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;y2 value is </span><span class="si">{</span><span class="n">y2</span><span class="si">}</span><span class="s2">, dtype is </span><span class="si">{</span><span class="n">y2</span><span class="o">.</span><span class="n">dtype</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;y3 value is </span><span class="si">{</span><span class="n">y3</span><span class="si">}</span><span class="s2">, dtype is </span><span class="si">{</span><span class="n">y3</span><span class="o">.</span><span class="n">dtype</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;y4 value is </span><span class="si">{</span><span class="n">y4</span><span class="si">}</span><span class="s2">, dtype is </span><span class="si">{</span><span class="n">y4</span><span class="o">.</span><span class="n">dtype</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>y1 value is 2.0, dtype is Float32
y2 value is 2.0, dtype is Float32
y3 value is 2.0, dtype is Float64
y4 value is 2.0, dtype is Float64
</pre></div>
</div>
<p>In the above example, you can see the difference related to creating ‘Tensor’. Due to the lack of Annotation indication in the Tensor class, y3 and y4 cannot infer the correct type and can only perform operations in the highest precision float64.
For y2, the corresponding type for JIT Fallback was specified through Annotation during Tensor creation, allowing it to perform operations according to the specified type.
y1 created the Tensor using the tensor function interface and passed the dtype parameter as an Annotation indication, avoiding the generation of ‘Any’ type.</p>
</section>
</section>
<section id="syntax-constraints-of-extended-syntaxes">
<h2>Syntax Constraints of Extended Syntaxes<a class="headerlink" href="#syntax-constraints-of-extended-syntaxes" title="Permalink to this headline"></a></h2>
<p>When using the static graph extension support syntax, note the following points:</p>
<ol class="arabic simple">
<li><p>In order to match the support capability of the dynamic graph. That is, it must be within the scope of dynamic graph syntax, including but not limited to data types.</p></li>
<li><p>When extending the static graph syntax, more syntax is supported, but the execution performance may be affected and is not optimal.</p></li>
<li><p>When extending the static graph syntax, more syntax is supported, and the ability to import and export cannot be used with MindIR due to use Python.</p></li>
<li><p>It is not currently supported that the repeated definition of global variables with the same name across Python files, and these global variables are used in the network.</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../migration_guide/tensorflow2mindspore.html" class="btn btn-neutral float-left" title="Method for Converting TensorFlow Models to MindSpore Models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="static_graph_syntax/operators.html" class="btn btn-neutral float-right" title="Static Graph Syntax - Operators" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>