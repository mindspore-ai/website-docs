<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>mindspore.set_context &mdash; MindSpore master documentation</title><script>;(()=>{const e=localStorage.getItem("ms-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;(e?"dark"===e:t)&&document.documentElement.setAttribute("data-o-theme","dark")})();</script><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script><script src="../../_static/jquery.js"></script>
        <script src="../../_static/js/theme.js"></script><script src="../../_static/underscore.js"></script><script src="../../_static/doctools.js"></script><script src="../../_static/js/mermaid-9.3.0.js"></script><script crossorigin="anonymous" integrity="sha256-1fEPhSsRKlFKGfK3eO710tEweHh1fwokU5wFGDHO+vg=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="mindspore.get_context" href="mindspore.get_context.html" />
    <link rel="prev" title="mindspore.QuantDtype" href="mindspore.QuantDtype.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../design/overview.html">MindSpore Design Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../design/tensor_view.html">TENSOR VIEWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../design/programming_paradigm.html">Functional and Object-Oriented Fusion Programming Paradigm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../design/dynamic_graph_and_static_graph.html">Combination of Dynamic and Static Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../design/distributed_training_design.html">Distributed Parallel Native</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../design/data_engine.html">High Performance Data Processing Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../design/all_scenarios.html">Full-scenarios Unified Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../design/graph_fusion_engine.html">Graph-Kernel Fusion Acceleration Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../design/pluggable_device.html">Third-Party Hardware Interconnection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../design/glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Models</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../note/official_models.html">Official Models</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../mindspore.html">mindspore</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../mindspore.html#data-presentation">Data Presentation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../mindspore.html#context">Context</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">mindspore.set_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindspore.get_context.html">mindspore.get_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindspore.set_auto_parallel_context.html">mindspore.set_auto_parallel_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindspore.get_auto_parallel_context.html">mindspore.get_auto_parallel_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindspore.reset_auto_parallel_context.html">mindspore.reset_auto_parallel_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindspore.ParallelMode.html">mindspore.ParallelMode</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindspore.set_ps_context.html">mindspore.set_ps_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindspore.get_ps_context.html">mindspore.get_ps_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindspore.reset_ps_context.html">mindspore.reset_ps_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindspore.set_algo_parameters.html">mindspore.set_algo_parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindspore.get_algo_parameters.html">mindspore.get_algo_parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindspore.reset_algo_parameters.html">mindspore.reset_algo_parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindspore.set_offload_context.html">mindspore.set_offload_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="mindspore.get_offload_context.html">mindspore.get_offload_context</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mindspore.html#seed">Seed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mindspore.html#serialization">Serialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mindspore.html#automatic-differentiation">Automatic Differentiation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mindspore.html#parallel-optimization">Parallel Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mindspore.html#jit">JIT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mindspore.html#tool">Tool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.nn.html">mindspore.nn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.ops.html">mindspore.ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.ops.extend.html">mindspore.ops.extend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.ops.primitive.html">mindspore.ops.primitive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.amp.html">mindspore.amp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.train.html">mindspore.train</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.communication.html">mindspore.communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.common.initializer.html">mindspore.common.initializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.hal.html">mindspore.hal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.dataset.html">mindspore.dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.dataset.transforms.html">mindspore.dataset.transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.mindrecord.html">mindspore.mindrecord</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.nn.probability.html">mindspore.nn.probability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.rewrite.html">mindspore.rewrite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.multiprocessing.html">mindspore.multiprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.boost.html">mindspore.boost</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.numpy.html">mindspore.numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.scipy.html">mindspore.scipy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindspore.experimental.html">mindspore.experimental</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Mapping</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../note/api_mapping/pytorch_api_mapping.html">PyTorch and MindSpore API Mapping Table</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Migration Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../migration_guide/overview.html">Overview of Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration_guide/enveriment_preparation.html">Environment Preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration_guide/analysis_and_preparation.html">Model Analysis and Preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration_guide/model_development/model_development.html">Network Constructing Comparison</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration_guide/debug_and_tune.html">Debugging and Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration_guide/sample_code.html">Network Migration Debugging Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration_guide/faq.html">FAQs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Syntax Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../note/static_graph_syntax_support.html">Static Graph Syntax Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../note/static_graph_syntax/operators.html">Static Graph Syntax - Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../note/static_graph_syntax/statements.html">Static Graph Syntax - Python Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../note/static_graph_syntax/python_builtin_functions.html">Static Graph Syntax - Python Built-in Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../note/index_support.html">Tensor Index Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Environment Variables</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../note/env_var_list.html">Environment Variables</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../faq/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/data_processing.html">Data Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/implement_problem.html">Implement Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/network_compilation.html">Network Compilation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/operators_compile.html">Operators Compile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/performance_tuning.html">Performance Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/precision_tuning.html">Precision Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/distributed_parallel.html">Distributed Parallel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/inference.html">Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/feature_advice.html">Feature Advice</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../RELEASE.html">Release Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../mindspore.html">mindspore</a> &raquo;</li>
      <li>mindspore.set_context</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/api_python/mindspore/mindspore.set_context.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="mindspore-set-context">
<h1>mindspore.set_context<a class="headerlink" href="#mindspore-set-context" title="Permalink to this headline"></a></h1>
<a class="reference external image-reference" href="https://gitee.com/mindspore/mindspore/blob/r2.3/mindspore/python/mindspore/_checkparam.py"><img alt="View Source On Gitee" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.3/resource/_static/logo_source_en.svg" /></a>
<dl class="py function">
<dt class="sig sig-object py" id="mindspore.set_context">
<span class="sig-prename descclassname"><span class="pre">mindspore.</span></span><span class="sig-name descname"><span class="pre">set_context</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/mindspore/context.html#set_context"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindspore.set_context" title="Permalink to this definition"></a></dt>
<dd><p>Set context for running environment.</p>
<p>Context should be configured before running your program. If there is no configuration,
it will be automatically set according to the device target by default.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Attribute name is required for setting attributes.
The mode is not recommended to be changed after net was initialized because the implementations of some
operations are different in graph mode and pynative mode. Default: <code class="docutils literal notranslate"><span class="pre">PYNATIVE_MODE</span></code> .</p>
</div>
<p>Some configurations are device specific, see the below table for details:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 36%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function Classification</p></th>
<th class="head"><p>Configuration Parameters</p></th>
<th class="head"><p>Hardware Platform Support</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="6"><p>System Configuration</p></td>
<td><p>device_id</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>device_target</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-even"><td><p>max_device_memory</p></td>
<td><p>GPU/Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>variable_memory_max_size</p></td>
<td><p>Ascend</p></td>
</tr>
<tr class="row-even"><td><p>mempool_block_size</p></td>
<td><p>GPU/Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>op_timeout</p></td>
<td><p>Ascend</p></td>
</tr>
<tr class="row-even"><td rowspan="10"><p>Debug Configuration</p></td>
<td><p>save_graphs</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>save_graphs_path</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-even"><td><p>enable_dump</p></td>
<td><p>Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>save_dump_path</p></td>
<td><p>Ascend</p></td>
</tr>
<tr class="row-even"><td><p>deterministic</p></td>
<td><p>Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>print_file_path</p></td>
<td><p>Ascend</p></td>
</tr>
<tr class="row-even"><td><p>env_config_path</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>precompile_only</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-even"><td><p>reserve_class_name_in_scope</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>pynative_synchronize</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-even"><td rowspan="20"><p>Executive Control</p></td>
<td><p>mode</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>enable_graph_kernel</p></td>
<td><p>Ascend/GPU</p></td>
</tr>
<tr class="row-even"><td><p>graph_kernel_flags</p></td>
<td><p>Ascend/GPU</p></td>
</tr>
<tr class="row-odd"><td><p>enable_reduce_precision</p></td>
<td><p>Ascend</p></td>
</tr>
<tr class="row-even"><td><p>aoe_tune_mode</p></td>
<td><p>Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>aoe_config</p></td>
<td><p>Ascend</p></td>
</tr>
<tr class="row-even"><td><p>check_bprop</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>max_call_depth</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-even"><td><p>grad_for_scalar</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>enable_compile_cache</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-even"><td><p>inter_op_parallel_num</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>runtime_num_threads</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-even"><td><p>compile_cache_path</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>disable_format_transform</p></td>
<td><p>GPU</p></td>
</tr>
<tr class="row-even"><td><p>support_binary</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>memory_optimize_level</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-even"><td><p>memory_offload</p></td>
<td><p>GPU/Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>ascend_config</p></td>
<td><p>Ascend</p></td>
</tr>
<tr class="row-even"><td><p>jit_syntax_level</p></td>
<td><p>CPU/GPU/Ascend</p></td>
</tr>
<tr class="row-odd"><td><p>gpu_config</p></td>
<td><p>GPU</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device_id</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – ID of the target device, the value must be in [0, device_num_per_host-1],
while device_num_per_host should be no more than 4096. Default: <code class="docutils literal notranslate"><span class="pre">0</span></code> .</p></li>
<li><p><strong>device_target</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The target device to run, support “Ascend”, “GPU”, and “CPU”.
If device target is not set, the version of MindSpore package is used.</p></li>
<li><p><strong>max_device_memory</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Set the maximum memory available for devices. The format is “xxGB”.
Default: <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">1024GB&quot;</span></code> . The actual used memory size is the minimum of the available memory of the device
and max_device_memory. ‘max_device_memory’ should be set before the program runs.</p></li>
<li><p><strong>variable_memory_max_size</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – This parameter is deprecated, and will be removed in a future version.
Please use parameter ‘max_device_memory’ instead.</p></li>
<li><p><strong>mempool_block_size</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Set the size of the memory pool block in PyNative mode or GRAPH_OP_RUN=1 for devices.
The format is “xxGB”. Default: <code class="docutils literal notranslate"><span class="pre">&quot;1GB&quot;</span></code> . Minimum size is “1G”. The actual used memory block size is the
minimum of the available memory of the device and mempool_block_size.</p></li>
<li><p><strong>op_timeout</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Set the maximum duration of executing an operator in seconds.
If the execution time exceeds this value, system will terminate the task.
0 means endless wait. The defaults for AI Core and AICPU operators vary on different hardware.
For more information,
please refer to <a class="reference external" href="https://www.hiascend.com/">Ascend Community</a>.
Default: <code class="docutils literal notranslate"><span class="pre">900</span></code> .</p></li>
<li><p><strong>save_graphs</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em> or </em><a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – <p>Whether to save intermediate compilation graphs. Default: <code class="docutils literal notranslate"><span class="pre">0</span></code> .
Available values are:</p>
<ul>
<li><p>False or 0: disable saving of intermediate compilation graphs.</p></li>
<li><p>1: some intermediate files will be generated during graph compilation.</p></li>
<li><p>True or 2: Generate more ir files related to backend process.</p></li>
<li><p>3: Generate visualization computing graphs and detailed frontend ir graphs.</p></li>
</ul>
<p>When the <cite>save_graphs</cite> attribute is set as <code class="docutils literal notranslate"><span class="pre">True</span></code> , <code class="docutils literal notranslate"><span class="pre">1</span></code> , <code class="docutils literal notranslate"><span class="pre">2</span></code> or <code class="docutils literal notranslate"><span class="pre">3</span></code> , attribute of
<cite>save_graphs_path</cite> is used to set the intermediate compilation graph storage path. By default, the graphs
are saved in the current directory.</p>
</p></li>
<li><p><strong>save_graphs_path</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Path to save graphs. Default: <code class="docutils literal notranslate"><span class="pre">&quot;.&quot;</span></code>.
If the specified directory does not exist, the system will automatically create the directory.
During distributed training, graphs will be saved to the directory of
<cite>save_graphs_path/rank_${rank_id}/</cite>. <cite>rank_id</cite> is the ID of the current device in the cluster.</p></li>
<li><p><strong>deterministic</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – <p>Whether to enable op run in deterministic mode. The value must be in the
range of [‘ON’, ‘OFF’], and the default value is <code class="docutils literal notranslate"><span class="pre">'OFF'</span></code> .</p>
<ul>
<li><p>”ON”: Enable operator deterministic running mode.</p></li>
<li><p>”OFF”: Disable operator deterministic running mode.</p></li>
</ul>
<p>When deterministic mode is on, model ops will be deterministic in Ascend. This means that if op run
multiple times with the same inputs on the same hardware, it will have the exact same outputs each time.
This is useful for debugging models.</p>
</p></li>
<li><p><strong>enable_dump</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – This parameters is deprecated, and will be deleted in the next version.</p></li>
<li><p><strong>save_dump_path</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – This parameters is deprecated, and will be deleted in the next version.</p></li>
<li><p><strong>print_file_path</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The path of saving print data. If this parameter is set, print data is saved to
a file by default, and print_file_path is not set, the screen will be displayed.
If the saved file already exists, the timestamp suffix will be added to the file. Saving data to a file
solves the problem of data loss in screen printing when a large amount of data is generated.
If it is not set, an error will be reported: prompt to set the upper absolute path.</p></li>
<li><p><strong>env_config_path</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – <p>Config path for DFX.
Through mindspore.set_context(env_config_path=”./mindspore_config.json”)</p>
<p>configure RDR:</p>
<ul>
<li><p>enable: controls whether the RDR is enabled to collect the key data during training and
save key data in the fault scenario. When set to <code class="docutils literal notranslate"><span class="pre">true</span></code> , the RDR will be turned on.
When set to <code class="docutils literal notranslate"><span class="pre">false</span></code> , the RDR will be turned off.</p></li>
<li><p>mode: sets the mode of RDR on exporting data. When set to <code class="docutils literal notranslate"><span class="pre">1</span></code> , the RDR only exports data
in the fault scenario. When set to <code class="docutils literal notranslate"><span class="pre">2</span></code> , the RDR exports data in the fault scenario and the
normal end scenario. Default: <code class="docutils literal notranslate"><span class="pre">1</span></code> .</p></li>
<li><p>path: sets the path where RDR saves data. The current path must be absolute.</p></li>
</ul>
<p>Memory reuse:</p>
<ul>
<li><p>mem_Reuse: controls whether the memory reuse function is turned on. When set to <code class="docutils literal notranslate"><span class="pre">True</span></code> ,
the memory reuse function is turned on. When set to <code class="docutils literal notranslate"><span class="pre">False</span></code> , the memory reuse function is turned off.</p></li>
</ul>
</p></li>
<li><p><strong>precompile_only</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to only precompile the network. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> .
If set to <code class="docutils literal notranslate"><span class="pre">True</span></code> , the network will only be compiled, not executed.</p></li>
<li><p><strong>reserve_class_name_in_scope</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – <p>Whether to save the network class name in the scope. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code> .
Each node has a scope. A scope of a subnode is the name of its parent node. If reserve_class_name_in_scope
is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> , the class name will be saved after keyword ‘net-’ in the scope.
For example:</p>
<p>Default/net-Net1/net-Net2 (reserve_class_name_in_scope=True)</p>
<p>Default/net/net (reserve_class_name_in_scope=False)</p>
</p></li>
<li><p><strong>pynative_synchronize</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to enable synchronous execution of the device in PyNative mode.
Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> . When the value is set to <code class="docutils literal notranslate"><span class="pre">False</span></code> , the operator is executed asynchronously on the
device. When an error occurs in the execution of the operator, the specific error script code location
cannot be located, when the value is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> , the operator is executed synchronously on the
device. It will reduce the execution performance of the program. At this time, when an error occurs in the
execution of the operator, the location of the error script code can be located according to the call stack
of the error.</p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Running in GRAPH_MODE(0) or PYNATIVE_MODE(1).
Both modes support all backends. Default: <code class="docutils literal notranslate"><span class="pre">PYNATIVE_MODE</span></code> .</p></li>
<li><p><strong>enable_graph_kernel</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to enable graph kernel fusion to optimize network execution performance.
Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> .
Indicates whether to enable image-computing convergence to optimize network execution performance.
If enable_graph_kernel is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> , acceleration can be enabled.
For details of graph kernel fusion, please check
<a class="reference external" href="https://www.mindspore.cn/tutorials/experts/en/master/optimize/graph_fusion_engine.html">Enabling Graph Kernel Fusion</a>.</p></li>
<li><p><strong>graph_kernel_flags</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – <p>Optimization options of graph kernel fusion, and the priority is higher when it conflicts
with enable_graph_kernel. Only for experienced users.
For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mindspore</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">graph_kernel_flags</span><span class="o">=</span><span class="s2">&quot;--opt_level=2 --dump_as_text&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Some general options:</p>
<ul>
<li><p>opt_level: Set the optimization level.
Default: <code class="docutils literal notranslate"><span class="pre">2</span></code> . Graph kernel fusion can be enabled equivalently by setting opt_level greater than 0.
Available values are:</p>
<ul>
<li><p>0: disables graph kernel fusion;</p></li>
<li><p>1: enables the basic fusion of operators;</p></li>
<li><p>2: includes all optimizations of level 1,
and turns on more optimizations such as CSE, arithmetic simplification and so on;</p></li>
<li><p>3: includes all optimizations of level 2, and turns on more optimizations such as SitchingFusion,
ParallelFusion and so on. Optimizations of this level are radical and unstable in some scenarios.
Be caution when using this level.</p></li>
</ul>
</li>
<li><p>dump_as_text: dumps detail info as text files. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> .</p></li>
</ul>
</p></li>
<li><p><strong>enable_reduce_precision</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to enable precision reduction.
If the operator does not support the user-specified precision, the precision will
be changed automatically. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code> .</p></li>
<li><p><strong>aoe_tune_mode</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – AOE tuning mode setting, which is not set by default.
When set to <code class="docutils literal notranslate"><span class="pre">&quot;online&quot;</span></code> , the tuning in online function is turned on.
When set to <code class="docutils literal notranslate"><span class="pre">&quot;offline&quot;</span></code> , ge graph will be save for offline tuning.</p></li>
<li><p><strong>aoe_config</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – <p>Set the parameters specific to Ascend Optimization Engine. It is not set by default.</p>
<ul>
<li><p>job_type (str): Mode type setting, default value is <code class="docutils literal notranslate"><span class="pre">&quot;2&quot;</span></code>.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;1&quot;</span></code>: subgraph tuning;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;2&quot;</span></code>: operator tuning.</p></li>
</ul>
</li>
</ul>
</p></li>
<li><p><strong>check_bprop</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to check back propagation nodes. The checking ensures that the shape and dtype
of back propagation node outputs is the same as input parameters. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> .</p></li>
<li><p><strong>max_call_depth</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Specify the maximum depth of function call. Must be positive integer. Default: <code class="docutils literal notranslate"><span class="pre">1000</span></code> .
The max_call_depth parameter needs to be set when the nested call is too deep or the number
of subgraphs is too large. If max_call_depth is set larger than before, the system max stack depth should be
set larger too, otherwise a <cite>core dumped</cite> exception may be raised because of system stack overflow.</p></li>
<li><p><strong>grad_for_scalar</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to get gradient for scalar. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> .
When grad_for_scalar is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> , the function’s scalar input can be derived.
The default value is <code class="docutils literal notranslate"><span class="pre">False</span></code> . Because the back-end does not support scaling operations currently,
this interface only supports simple operations that can be deduced by the front-end.</p></li>
<li><p><strong>enable_compile_cache</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to save or load the cache of the graph compiled by front-end.
After enable_compile_cache is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> , during the first execution, a hardware-independent
compilation cache is generated and exported to a MINDIR file. When the network is executed again,
if enable_compile_cache is still set to <code class="docutils literal notranslate"><span class="pre">True</span></code> and the network scripts are not changed,
the compile cache is loaded. Note that only limited automatic detection for the changes of
python scripts is supported by now, which means that there is a correctness risk. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> .
This is an experimental prototype that is subject to change and/or deletion.</p></li>
<li><p><strong>compile_cache_path</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Path to save the compile cache. Default: <code class="docutils literal notranslate"><span class="pre">&quot;.&quot;</span></code>.
If the specified directory does not exist, the system will automatically create the directory.
The cache will be saved to the directory of <cite>compile_cache_path/rank_${rank_id}/</cite>. The <cite>rank_id</cite> is
the ID of the current device in the cluster.</p></li>
<li><p><strong>inter_op_parallel_num</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The thread number of op parallel at the same time. Default value is <code class="docutils literal notranslate"><span class="pre">0</span></code> ,
which means use the default num.</p></li>
<li><p><strong>runtime_num_threads</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The thread pool number of cpu kernel used in runtime,
which must bigger than or equal to 0. Default value is <code class="docutils literal notranslate"><span class="pre">30</span></code> , if you run many processes at
the same time, you should set the value smaller to avoid thread contention.</p></li>
<li><p><strong>disable_format_transform</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to disable the automatic format transform function from NCHW to NHWC.
When the network training performance of fp16 is worse than fp32, <cite>disable_format_transform</cite> can be set to
<code class="docutils literal notranslate"><span class="pre">True</span></code> to try to improve training performance. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code> .</p></li>
<li><p><strong>support_binary</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to support run .pyc or .so in graph mode. If want to support run .so or .pyc
in graph mode, coulde set ‘support_binary’ to be <code class="docutils literal notranslate"><span class="pre">True</span></code> , and run once .py file. It would save the source
of the interfaces would be compiled by MindSpore to the interfaces definition .py file that should be
guaranteed to be writable. Then compile the .py file to the .pyc or .so file, and could run in Graph mode.</p></li>
<li><p><strong>memory_optimize_level</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – <p>The memory optimize level.
On Ascend hardware platform, default: <code class="docutils literal notranslate"><span class="pre">O1</span></code>, on other hardware platforms, default: <code class="docutils literal notranslate"><span class="pre">O0</span></code>.
The value must be in [‘O0’, ‘O1’].</p>
<ul>
<li><p>O0: priority performance option, disable SOMAS (Safe Optimized Memory Allocation Solver)
and some other memory optimizations.</p></li>
<li><p>O1: priority memory option, enable SOMAS and some other memory optimizations.</p></li>
</ul>
</p></li>
<li><p><strong>memory_offload</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – <p>Whether to enable the memory offload function. When it is enabled, the idle data will be
temporarily copied to the host side in the case of insufficient device memory. The value must be in the
range of [‘ON’, ‘OFF’], and the default value is <code class="docutils literal notranslate"><span class="pre">'OFF'</span></code> .</p>
<ul>
<li><p>ON: Enable the memory Offload function. On Ascend hardware platform, this parameter does not take effect
when the environment variable “GRAPH_OP_RUN=1” is not set; This parameter does not take effect when
memory_optimize_level is set ‘O1’.</p></li>
<li><p>OFF: Turn off the memory Offload function.</p></li>
</ul>
</p></li>
<li><p><strong>ascend_config</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – <p>Set the parameters specific to Ascend hardware platform. It is not set by default.
The default value of <cite>precision_mode</cite>, <cite>jit_compile</cite> and
<cite>atomic_clean_policy</cite> are experimental parameters, may change in the future.</p>
<ul>
<li><p>precision_mode (str): Mixed precision mode setting, and the default value of inference network
is <code class="docutils literal notranslate"><span class="pre">force_fp16</span></code> . The value range is as follows:</p>
<ul>
<li><p>force_fp16: When the operator supports both float16 and float32, select float16 directly.</p></li>
<li><p>allow_fp32_to_fp16: When the operator does not support the float32 data type, directly reduce
the precision of float16.</p></li>
<li><p>allow_mix_precision: Automatic mixing precision, facing the whole network operator, according
to the built-in optimization strategy, automatically reduces the precision of some operators
to float16 or bfloat16.</p></li>
<li><p>must_keep_origin_dtype: Keep the accuracy of the original drawing.</p></li>
<li><p>force_fp32: When the input of the matrix calculation operator is float16 and the output supports
float16 and float32, output is forced to float32.</p></li>
<li><p>allow_fp32_to_bf16: When the operator does not support the float32 data type, directly reduce
the precision of bfloat16.</p></li>
<li><p>allow_mix_precision_fp16: Automatic mixing precision, facing the whole network operator, automatically
reduces the precision of some operators to float16 according to the built-in optimization strategy.</p></li>
<li><p>allow_mix_precision_bf16: Automatic mixing precision, facing the whole network operator, according to
the built-in optimization strategy, automatically reduces the precision of some operators to bfloat16.</p></li>
</ul>
</li>
<li><p>jit_compile (bool): Whether to select online compilation. the default value is based on CANN.</p></li>
<li><p>atomic_clean_policy (int): The policy for cleaning memory occupied by atomic operators in the network.
Default: <code class="docutils literal notranslate"><span class="pre">1</span></code> .</p>
<ul>
<li><p>0: The memory occupied by all atomic operators in the network is cleaned centrally.</p></li>
<li><p>1: Memory is not cleaned centrally and each atomic operator in the network is cleaned separately.
When the memory of the network exceeds the limit, you may try this cleaning policy, but it may cause
performance loss.</p></li>
</ul>
</li>
<li><p>matmul_allow_hf32 (bool): Whether to convert FP32 to HF32 for Matmul operators. Default value: <code class="docutils literal notranslate"><span class="pre">False</span></code>.
This is an experimental prototype that is subject to change and/or deletion.
For detailed information, please refer to <a class="reference external" href="https://www.hiascend.com/">Ascend community</a> .</p></li>
<li><p>conv_allow_hf32 (bool): Whether to convert FP32 to HF32 for Conv operators. Default value: <code class="docutils literal notranslate"><span class="pre">True</span></code>.
This is an experimental prototype that is subject to change and/or deletion.
For detailed information, please refer to <a class="reference external" href="https://www.hiascend.com/">Ascend community</a> .</p></li>
<li><p>exception_dump (str): Enable exception dump for Ascend operators, providing the input and output data for
failing Ascend operators. The value can be <code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code> , <code class="docutils literal notranslate"><span class="pre">&quot;1&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;2&quot;</span></code>. For <code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code> , exception dump is
turned off; for <code class="docutils literal notranslate"><span class="pre">&quot;1&quot;</span></code>, all inputs and outputs will be dumped for AICore and AICPU exception operators;
for <code class="docutils literal notranslate"><span class="pre">&quot;2&quot;</span></code>, inputs will be dumped for AICore exception operators. Default: <code class="docutils literal notranslate"><span class="pre">&quot;2&quot;</span></code> .</p></li>
<li><p>op_precision_mode (str): Path to config file of op precision mode. For detailed information, please refer
to <a class="reference external" href="https://www.hiascend.com/">Ascend community</a> .</p></li>
<li><p>ge_options (dict): Set options for CANN. The options are divided into two categories: global and session.
This is an experimental prototype that is subject to change and/or deletion.
For detailed information, please refer to <a class="reference external" href="https://www.hiascend.com/document/detail/zh/canncommercial/70RC1/inferapplicationdev/graphdevg/atlasgeapi_07_0119.html">Ascend community</a> .
The configuration options in <cite>ge_options</cite> may be duplicated with the options in <cite>ascend_config</cite>. If the
same configuration options are set in both <cite>ascend_config</cite> and <cite>ge_options</cite>, the one set in <cite>ge_options</cite>
shall prevail.</p>
<ul>
<li><p>global (dict): Set global options.</p></li>
<li><p>session (dict): Set session options.</p></li>
</ul>
</li>
<li><p>parallel_speed_up_json_path(Union[str, None]): The path to the parallel speed up json file, configuration
can refer to <a class="reference external" href="https://gitee.com/mindspore/mindspore/blob/master/config/parallel_speed_up.json">parallel_speed_up.json</a> .
If its value is None or ‘’, it does not take effect. Default None.</p>
<ul>
<li><p>recompute_comm_overlap (bool): Enable overlap between recompute ops and communication ops if True.
Default: False.</p></li>
<li><p>matmul_grad_comm_overlap (bool): Enable overlap between dw matmul and
tensor parallel communication ops if True. Default: False.</p></li>
<li><p>enable_task_opt (bool): Enable the optimization of the number of tasks for each communication if True.
Default: False.</p></li>
<li><p>enable_grad_comm_opt (bool): Enable overlap between dx ops and data parallel communication ops if True.
Default: False.</p></li>
<li><p>enable_opt_shard_comm_opt (bool): Enable overlap between forward ops
and optimizer parallel allgather communication if True. Default: False.</p></li>
<li><p>compute_communicate_fusion_level (int): Enable the fusion between compute and communicate.
Default: <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<ul>
<li><p>0: Disable fusion.</p></li>
<li><p>1: Apply fusion to forward nodes.</p></li>
<li><p>2: Apply fusion to backward nodes.</p></li>
<li><p>3: Apply fusion to all nodes.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>host_scheduling_max_threshold(int): The max threshold to control whether the dynamic shape process is
used when run the static graph, the default value is 0. When the number of operations in the static graph
is less than the max threshold, this graph will be executed in dynamic shape process. In large model
scenarios, this approach can save stream resources. If the number of operations in the static graph is
greater than the maximum threshold, this graph will be executed in original static process.</p></li>
</ul>
</p></li>
<li><p><strong>jit_syntax_level</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – <p>Set JIT syntax level for graph compiling, triggered by GRAPH_MODE and &#64;jit decorator.
The value must be <code class="docutils literal notranslate"><span class="pre">STRICT</span></code> or <code class="docutils literal notranslate"><span class="pre">LAX</span></code> . Default: <code class="docutils literal notranslate"><span class="pre">LAX</span></code> . All levels support all backends.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">STRICT</span></code> : Only basic syntax is supported, and execution performance is optimal. Can be used for MindIR
load and export.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LAX</span></code> : Compatible with all Python syntax as much as possible. However, execution performance may be
affected and not optimal. Cannot be used for MindIR load and export due to some syntax that may not be
able to be exported.</p></li>
</ul>
</p></li>
<li><p><strong>gpu_config</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – <p>Set the parameters specific to gpu hardware platform. It is not set by default.
Currently, only setting <cite>conv_fprop_algo</cite> and <cite>conv_dgrad_algo</cite> and <cite>conv_wgrad_algo</cite> and <cite>conv_allow_tf32</cite>
and <cite>matmul_allow_tf32</cite> are supported on GPU hardware platform.</p>
<ul>
<li><p>conv_fprop_algo (str): Specifies convolution forward algorithm and the default value is ‘normal’,
The value range is as follows:</p>
<ul>
<li><p>normal: Use the heuristic search algorithm.</p></li>
<li><p>performance: Use the trial search algorithm.</p></li>
<li><p>implicit_gemm: This algorithm expresses the convolution as a matrix product without actually explicitly
forming the matrix that holds the input tensor data.</p></li>
<li><p>implicit_precomp_gemm: This algorithm expresses convolution as a matrix product without actually
explicitly forming the matrix that holds the input tensor data, but still needs some memory workspace to
precompute some indices in order to facilitate the implicit construction of the matrix that holds the
input tensor data.</p></li>
<li><p>gemm: This algorithm expresses the convolution as an explicit matrix product. A significant memory
workspace is needed to store the matrix that holds the input tensor data.</p></li>
<li><p>direct: This algorithm expresses the convolution as a direct convolution (for example, without
implicitly or explicitly doing a matrix multiplication).</p></li>
<li><p>fft: This algorithm uses the Fast-Fourier Transform approach to compute the convolution. A significant
memory workspace is needed to store intermediate results.</p></li>
<li><p>fft_tiling: This algorithm uses the Fast-Fourier Transform approach but splits the inputs into tiles.
A significant memory workspace is needed to store intermediate results but less than fft algorithm for
large size images.</p></li>
<li><p>winograd: This algorithm uses the Winograd Transform approach to compute the convolution. A reasonably
sized workspace is needed to store intermediate results.</p></li>
<li><p>winograd_nonfused: This algorithm uses the Winograd Transform approach to compute the convolution. A
significant workspace may be needed to store intermediate results.</p></li>
</ul>
</li>
<li><p>conv_dgrad_algo (str): Specifies convolution data grad algorithm and the default value is ‘normal’,
The value range is as follows:</p>
<ul>
<li><p>normal: Use the heuristic search algorithm.</p></li>
<li><p>performance: Use the trial search algorithm.</p></li>
<li><p>algo_0: This algorithm expresses the convolution as a sum of matrix products without actually explicitly
forming the matrix that holds the input tensor data. The sum is done using the atomic add operation,
thus the results are non-deterministic.</p></li>
<li><p>algo_1: This algorithm expresses the convolution as a matrix product without actually explicitly forming
the matrix that holds the input tensor data. The results are deterministic.</p></li>
<li><p>fft: This algorithm uses a Fast-Fourier Transform approach to compute the convolution. A significant
memory workspace is needed to store intermediate results. The results are deterministic.</p></li>
<li><p>fft_tiling: This algorithm uses the Fast-Fourier Transform approach but splits the inputs into tiles.
A significant memory workspace is needed to store intermediate results but less than fft for large size
images. The results are deterministic.</p></li>
<li><p>winograd: This algorithm uses the Winograd Transform approach to compute the convolution. A reasonably
sized workspace is needed to store intermediate results. The results are deterministic.</p></li>
<li><p>winograd_nonfused: This algorithm uses the Winograd Transform approach to compute the convolution.
A significant workspace may be needed to store intermediate results. The results are deterministic.</p></li>
</ul>
</li>
<li><p>conv_wgrad_algo (str): Specifies convolution filter grad algorithm and the default value is ‘normal’,
The value range is as follows:</p>
<ul>
<li><p>normal: Use the heuristic search algorithm.</p></li>
<li><p>performance: Use the trial search algorithm.</p></li>
<li><p>algo_0: This algorithm expresses the convolution as a sum of matrix products without actually explicitly
forming the matrix that holds the input tensor data. The sum is done using the atomic add operation,
thus the results are non-deterministic.</p></li>
<li><p>algo_1: This algorithm expresses the convolution as a matrix product without actually explicitly forming
the matrix that holds the input tensor data. The results are deterministic.</p></li>
<li><p>fft: This algorithm uses a Fast-Fourier Transform approach to compute the convolution. A significant
memory workspace is needed to store intermediate results. The results are deterministic.</p></li>
<li><p>algo_3: This algorithm is similar to algo_0 but uses some small workspace to precompute some indices.
The results are also non-deterministic.</p></li>
<li><p>winograd_nonfused: This algorithm uses the Winograd Transform approach to compute the convolution.
A significant workspace may be needed to store intermediate results. The results are deterministic.</p></li>
<li><p>fft_tiling: This algorithm uses the Fast-Fourier Transform approach but splits the inputs into tiles.
A significant memory workspace is needed to store intermediate results but less than fft for large size
images. The results are deterministic.</p></li>
</ul>
</li>
<li><p>conv_allow_tf32 (bool): The flag below controls to allow Tensor core TF32 computation on CUDNN and the
default value is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p>matmul_allow_tf32 (bool): The flag below controls to allow Tensor core TF32 computation on CUBLAS and the
default value is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If input key is not an attribute in context.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">PYNATIVE_MODE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">precompile_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">device_target</span><span class="o">=</span><span class="s2">&quot;Ascend&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">device_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">save_graphs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">save_graphs_path</span><span class="o">=</span><span class="s2">&quot;./model.ms&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">enable_reduce_precision</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">enable_graph_kernel</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">graph_kernel_flags</span><span class="o">=</span><span class="s2">&quot;--opt_level=2 --dump_as_text&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">reserve_class_name_in_scope</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">variable_memory_max_size</span><span class="o">=</span><span class="s2">&quot;6GB&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">aoe_tune_mode</span><span class="o">=</span><span class="s2">&quot;online&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">aoe_config</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;job_type&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">check_bprop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">max_device_memory</span><span class="o">=</span><span class="s2">&quot;3.5GB&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">mempool_block_size</span><span class="o">=</span><span class="s2">&quot;1GB&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">print_file_path</span><span class="o">=</span><span class="s2">&quot;print.pb&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">max_call_depth</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">env_config_path</span><span class="o">=</span><span class="s2">&quot;./env_config.json&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">grad_for_scalar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">enable_compile_cache</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">compile_cache_path</span><span class="o">=</span><span class="s2">&quot;./cache.ms&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">pynative_synchronize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">runtime_num_threads</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">inter_op_parallel_num</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">disable_format_transform</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">memory_optimize_level</span><span class="o">=</span><span class="s1">&#39;O0&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">memory_offload</span><span class="o">=</span><span class="s1">&#39;ON&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">deterministic</span><span class="o">=</span><span class="s1">&#39;ON&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">ascend_config</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;precision_mode&quot;</span><span class="p">:</span> <span class="s2">&quot;force_fp16&quot;</span><span class="p">,</span> <span class="s2">&quot;jit_compile&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>               <span class="s2">&quot;atomic_clean_policy&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;op_precision_mode&quot;</span><span class="p">:</span> <span class="s2">&quot;./op_precision_config_file&quot;</span><span class="p">,</span>
<span class="gp">... </span>               <span class="s2">&quot;ge_options&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;global&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;ge.opSelectImplmode&quot;</span><span class="p">:</span> <span class="s2">&quot;high_precision&quot;</span><span class="p">},</span>
<span class="gp">... </span>                              <span class="s2">&quot;session&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;ge.exec.atomicCleanPolicy&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">}}})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">jit_syntax_level</span><span class="o">=</span><span class="n">ms</span><span class="o">.</span><span class="n">STRICT</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">gpu_config</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;conv_fprop_algo&quot;</span><span class="p">:</span> <span class="s2">&quot;performance&quot;</span><span class="p">,</span> <span class="s2">&quot;conv_allow_tf32&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>               <span class="s2">&quot;matmul_allow_tf32&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mindspore.QuantDtype.html" class="btn btn-neutral float-left" title="mindspore.QuantDtype" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mindspore.get_context.html" class="btn btn-neutral float-right" title="mindspore.get_context" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>