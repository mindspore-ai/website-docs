<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Static Graph Syntax Support &mdash; MindSpore master documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tensor Index Support" href="index_support.html" />
    <link rel="prev" title="Syntax Support" href="syntax_list.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="design/technical_white_paper.html">Technical White Paper</a></li>
<li class="toctree-l1"><a class="reference internal" href="design/mindir.html">MindSpore IR (MindIR)</a></li>
<li class="toctree-l1"><a class="reference internal" href="design/distributed_training_design.html">Distributed Training Design</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Specification Note</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="benchmark.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="network_list.html">Network List</a></li>
<li class="toctree-l1"><a class="reference internal" href="operator_list.html">Operator List</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="syntax_list.html">Syntax Support</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Static Graph Syntax Support</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-types">Data Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#built-in-python-data-types">Built-in Python Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mindspore-user-defined-data-types">MindSpore User-defined Data Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#operators">Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#arithmetic-operators">Arithmetic Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="#assignment-operators">Assignment Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="#logical-operators">Logical Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="#member-operators">Member Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="#identity-operators">Identity Operators</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#expressions">Expressions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#conditional-control-statements">Conditional Control Statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#loop-statements">Loop Statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conditional-control-statements-in-loop-statements">Conditional Control Statements in Loop Statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#function-definition-statements">Function Definition Statements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#functions">Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#python-built-in-functions">Python Built-in Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#function-parameters">Function Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#network-definition">Network Definition</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#instance-types-on-the-entire-network">Instance Types on the Entire Network</a></li>
<li class="toctree-l4"><a class="reference internal" href="#network-construction-components">Network Construction Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="#network-constraints">Network Constraints</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index_support.html">Tensor Index Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="env_var_list.html">Environment Variables</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Others</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">RoadMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="help_seeking_path.html">Seeking Help and Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="community.html">Participating in MindSpore Community</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="syntax_list.html">Syntax Support</a> &raquo;</li>
      <li>Static Graph Syntax Support</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/static_graph_syntax_support.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="static-graph-syntax-support">
<h1>Static Graph Syntax Support<a class="headerlink" href="#static-graph-syntax-support" title="Permalink to this headline"></a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Linux</span></code> <code class="docutils literal notranslate"><span class="pre">Ascend</span></code> <code class="docutils literal notranslate"><span class="pre">GPU</span></code> <code class="docutils literal notranslate"><span class="pre">CPU</span></code> <code class="docutils literal notranslate"><span class="pre">Model</span> <span class="pre">Development</span></code> <code class="docutils literal notranslate"><span class="pre">Beginner</span></code> <code class="docutils literal notranslate"><span class="pre">Intermediate</span></code> <code class="docutils literal notranslate"><span class="pre">Expert</span></code></p>
<p><a href="https://gitee.com/mindspore/docs/blob/r1.3/docs/mindspore/note/source_en/static_graph_syntax_support.md" target="_blank"><img src="https://gitee.com/mindspore/docs/raw/r1.3/resource/_static/logo_source.png"></a></p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p>In graph mode, Python code is not executed by the Python interpreter. Instead, the code is compiled into a static computation graph, and then the static computation graph is executed.</p>
<p>Currently, only the function, Cell, and subclass instances modified by the <code class="docutils literal notranslate"><span class="pre">&#64;ms_function</span></code> decorator can be built.
For a function, build the function definition. For the network, build the <code class="docutils literal notranslate"><span class="pre">construct</span></code> method and other methods or functions called by the <code class="docutils literal notranslate"><span class="pre">construct</span></code> method.</p>
<p>For details about how to use <code class="docutils literal notranslate"><span class="pre">ms_function</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/api/en/r1.3/api_python/mindspore.html#mindspore.ms_function">https://www.mindspore.cn/docs/api/en/r1.3/api_python/mindspore.html#mindspore.ms_function</a>.</p>
<p>For details about the definition of <code class="docutils literal notranslate"><span class="pre">Cell</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/programming_guide/en/r1.3/cell.html">https://www.mindspore.cn/docs/programming_guide/en/r1.3/cell.html</a>.</p>
<p>Due to syntax parsing restrictions, the supported data types, syntax, and related operations during graph building are not completely consistent with the Python syntax. As a result, some usage is restricted.</p>
<p>The following describes the data types, syntax, and related operations supported during static graph building. These rules apply only to graph mode.</p>
<blockquote>
<div><p>All the following examples run on the network in graph mode. For brevity, the network definition is not described.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> cannot be directly constructed in static graphs. It can be transferred to the network through parameters or constructed in the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method as a network attribute and then used in the <code class="docutils literal notranslate"><span class="pre">construct</span></code> method of the network.</p>
</div></blockquote>
</section>
<section id="data-types">
<h2>Data Types<a class="headerlink" href="#data-types" title="Permalink to this headline"></a></h2>
<section id="built-in-python-data-types">
<h3>Built-in Python Data Types<a class="headerlink" href="#built-in-python-data-types" title="Permalink to this headline"></a></h3>
<p>Currently, the following built-in <code class="docutils literal notranslate"><span class="pre">Python</span></code> data types are supported: <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">String</span></code>, <code class="docutils literal notranslate"><span class="pre">List</span></code>, <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, and <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code>.</p>
<section id="number">
<h4>Number<a class="headerlink" href="#number" title="Permalink to this headline"></a></h4>
<p>Supports <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, and <code class="docutils literal notranslate"><span class="pre">bool</span></code>, but does not support complex numbers.</p>
<p><code class="docutils literal notranslate"><span class="pre">Number</span></code> can be defined on the network. That is, the syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">1.2</span></code>, and <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">True</span></code> are supported.</p>
<p>Forcible conversion to <code class="docutils literal notranslate"><span class="pre">Number</span></code> is not supported on the network. That is, the syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">int(x)</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">float(x)</span></code>, and <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">bool(x)</span></code> are not supported.</p>
</section>
<section id="string">
<h4>String<a class="headerlink" href="#string" title="Permalink to this headline"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">String</span></code> can be constructed on the network. That is, the syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">&quot;abcd&quot;</span></code> is supported.</p>
<p>Forcible conversion to <code class="docutils literal notranslate"><span class="pre">String</span></code> is not supported on the network. That is, the syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">str(x)</span></code> is not supported.</p>
</section>
<section id="list">
<h4>List<a class="headerlink" href="#list" title="Permalink to this headline"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">List</span></code> can be constructed on the network, that is, the syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code> is supported.</p>
<p>Forcible conversion to <code class="docutils literal notranslate"><span class="pre">List</span></code> is not supported on the network. That is, the syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">list(x)</span></code> is not supported.</p>
<p><code class="docutils literal notranslate"><span class="pre">List</span></code> to be output in the computation graph will be converted into <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>.</p>
<ul>
<li><p>Supported APIs</p>
<p><code class="docutils literal notranslate"><span class="pre">append</span></code>: adds an element to <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>x: (1, 2, 3, 4)
</pre></div>
</div>
</li>
<li><p>Supported index values and value assignment</p>
<p>Single-level and multi-level index values and value assignment are supported.</p>
<p>The index value supports only <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
<p>The assigned value can be <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">String</span></code>, <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">List</span></code>, or <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ok&quot;</span>
<span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">88</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>m: 2
x: ([1, 88], Tensor(shape=[3], dtype=Int64, value=[1, 2, 3]), &#39;ok&#39;, (1, 2, 3))
n: Tensor(shape=[3], dtype=Int64, value=[1, 2, 3])
</pre></div>
</div>
</li>
</ul>
</section>
<section id="tuple">
<h4>Tuple<a class="headerlink" href="#tuple" title="Permalink to this headline"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Tuple</span></code> can be constructed on the network, that is, the syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">(1,</span> <span class="pre">2,</span> <span class="pre">3)</span></code> is supported.</p>
<p>Forcible conversion to <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> is not supported on the network. That is, the syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">tuple(x)</span></code> is not supported.</p>
<ul>
<li><p>Supported index values</p>
<p>The index value can be <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">slice</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and multi-level index value. That is, the syntax <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">=</span> <span class="pre">tuple_x[index0][index1]...</span></code> is supported.</p>
<p>Restrictions on the index value <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Tuple</span></code> stores <code class="docutils literal notranslate"><span class="pre">Cell</span></code>. Each <code class="docutils literal notranslate"><span class="pre">Cell</span></code> must be defined before a tuple is defined. The number of input parameters, input parameter type, and input parameter <code class="docutils literal notranslate"><span class="pre">shape</span></code> of each <code class="docutils literal notranslate"><span class="pre">Cell</span></code> must be the same. The number of outputs of each <code class="docutils literal notranslate"><span class="pre">Cell</span></code> must be the same. The output type must be the same as the output shape.</p></li>
<li><p>The index <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> is a scalar <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> whose <code class="docutils literal notranslate"><span class="pre">dtype</span></code> is <code class="docutils literal notranslate"><span class="pre">int32</span></code>. The value range is <code class="docutils literal notranslate"><span class="pre">[-tuple_len,</span> <span class="pre">tuple_len)</span></code>, negative index is not supported in <code class="docutils literal notranslate"><span class="pre">Ascend</span></code> backend.</p></li>
<li><p>This syntax does not support the running branches whose control flow conditions <code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">while</span></code>, and <code class="docutils literal notranslate"><span class="pre">for</span></code> are variables. The control flow conditions can be constants only.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GPU</span></code> and <code class="docutils literal notranslate"><span class="pre">Ascend</span></code> backend is supported.</p></li>
</ul>
<p>An example of the <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">slice</span></code> indexes is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])))</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>y: 3
z: Tensor(shape=[3], dtype=Int64, value=[1, 2, 3])
m: ((2, 3, 4), 3, 4)
n: (2, 3, 4)
</pre></div>
</div>
<p>An example of the <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> index is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relu</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">softmax</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Softmax</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layers</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relu</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">softmax</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="n">index</span><span class="p">](</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="dictionary">
<h4>Dictionary<a class="headerlink" href="#dictionary" title="Permalink to this headline"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Dictionary</span></code> can be constructed on the network. That is, the syntax <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">{&quot;a&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;b&quot;:</span> <span class="pre">2}</span></code> is supported. Currently, only <code class="docutils literal notranslate"><span class="pre">String</span></code> can be used as the <code class="docutils literal notranslate"><span class="pre">key</span></code> value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Dictionary</span></code> to be output in the computational graph will extract all <code class="docutils literal notranslate"><span class="pre">value</span></code> values to form the <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> output.</p>
<ul>
<li><p>Supported APIs</p>
<p><code class="docutils literal notranslate"><span class="pre">keys</span></code>: extracts all <code class="docutils literal notranslate"><span class="pre">key</span></code> values from <code class="docutils literal notranslate"><span class="pre">dict</span></code> to form <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> and return it.</p>
<p><code class="docutils literal notranslate"><span class="pre">values</span></code>: extracts all <code class="docutils literal notranslate"><span class="pre">value</span></code> values from <code class="docutils literal notranslate"><span class="pre">dict</span></code> to form <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> and return it.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])),</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])),</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]))}</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>y: (&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)
z: (Tensor(shape=[3], dtype=Int64, value=[1, 2, 3]), Tensor(shape=[3], dtype=Int64, value=[4, 5, 6]), Tensor(shape=[3], dtype=Int64, value=[7, 8, 9]))
</pre></div>
</div>
</li>
<li><p>Supported index values and value assignment</p>
<p>The index value supports only <code class="docutils literal notranslate"><span class="pre">String</span></code>. The assigned value can be <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, or <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])),</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])),</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]))}</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span>
<span class="n">x</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>y: Tensor(shape=[3], dtype=Int64, value=[4, 5, 6])
x: {&quot;a&quot;: (2, 3, 4), Tensor(shape=[3], dtype=Int64, value=[4, 5, 6]), Tensor(shape=[3], dtype=Int64, value=[7, 8, 9])}
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="mindspore-user-defined-data-types">
<h3>MindSpore User-defined Data Types<a class="headerlink" href="#mindspore-user-defined-data-types" title="Permalink to this headline"></a></h3>
<p>Currently, MindSpore supports the following user-defined data types: <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="docutils literal notranslate"><span class="pre">Primitive</span></code>, and <code class="docutils literal notranslate"><span class="pre">Cell</span></code>.</p>
<section id="tensor">
<h4>Tensor<a class="headerlink" href="#tensor" title="Permalink to this headline"></a></h4>
<p>Currently, tensors cannot be constructed on the network. That is, the syntax <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">Tensor(args...)</span></code> is not supported.</p>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">&#64;constexpr</span></code> decorator to modify the function and generate the <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> in the function.</p>
<p>For details about how to use <code class="docutils literal notranslate"><span class="pre">&#64;constexpr</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/api/en/r1.3/api_python/ops/mindspore.ops.constexpr.html">https://www.mindspore.cn/docs/api/en/r1.3/api_python/ops/mindspore.ops.constexpr.html</a>.</p>
<p>The constant <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> used on the network can be used as a network attribute and defined in <code class="docutils literal notranslate"><span class="pre">init</span></code>, that is, <code class="docutils literal notranslate"><span class="pre">self.x</span> <span class="pre">=</span> <span class="pre">Tensor(args...)</span></code>. Then the constant can be used in <code class="docutils literal notranslate"><span class="pre">construct</span></code>.</p>
<p>In the following example, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> of <code class="docutils literal notranslate"><span class="pre">shape</span> <span class="pre">=</span> <span class="pre">(3,</span> <span class="pre">4),</span> <span class="pre">dtype</span> <span class="pre">=</span> <span class="pre">int64</span></code> is generated by <code class="docutils literal notranslate"><span class="pre">&#64;constexpr</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@constexpr</span>
<span class="k">def</span> <span class="nf">generate_tensor</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)))</span>
</pre></div>
</div>
<p>The following describes the attributes, APIs supported by the <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>.</p>
<ul>
<li><p>Supported attributes</p>
<p><code class="docutils literal notranslate"><span class="pre">shape</span></code>: obtains the shape of <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> and returns a <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">dtype</span></code>: obtains the data type of <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> and returns a data type defined by <code class="docutils literal notranslate"><span class="pre">MindSpore</span></code>.</p>
</li>
<li><p>Supported APIs</p>
<p><code class="docutils literal notranslate"><span class="pre">all</span></code>: reduces <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> through the <code class="docutils literal notranslate"><span class="pre">all</span></code> operation. Only <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> of the <code class="docutils literal notranslate"><span class="pre">Bool</span></code> type is supported.</p>
<p><code class="docutils literal notranslate"><span class="pre">any</span></code>: reduces <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> through the <code class="docutils literal notranslate"><span class="pre">any</span></code> operation. Only <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> of the <code class="docutils literal notranslate"><span class="pre">Bool</span></code> type is supported.</p>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">view</span></code>: reshapes <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> into input <code class="docutils literal notranslate"><span class="pre">shape</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">expand_as</span></code>: expands <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> to the same <code class="docutils literal notranslate"><span class="pre">shape</span></code> as another <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> based on the broadcast rule.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span> <span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]]))</span>
<span class="n">x_shape</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span>
<span class="n">x_dtype</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">dtype</span>
<span class="n">x_all</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="n">x_any</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="n">x_view</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">view</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="n">y</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
<span class="n">y_as_z</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">expand_as</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>x_shape: (2, 3)
x_dtype: Bool
x_all: Tensor(shape=[], dtype=Bool, value=False)
x_any: Tensor(shape=[], dtype=Bool, value=True)
x_view: Tensor(shape=[1, 6], dtype=Bool, value=[[True, False, True, False, True, False]])

y_as_z: Tensor(shape=[2, 2, 3], dtype=Float32, value=[[[1.0, 1.0, 1.0], [1.0, 1.0, 1.0]], [[1.0, 1.0, 1.0], [1.0, 1.0, 1.0]]])
</pre></div>
</div>
</section>
<section id="primitive">
<h4>Primitive<a class="headerlink" href="#primitive" title="Permalink to this headline"></a></h4>
<p>Currently, <code class="docutils literal notranslate"><span class="pre">Primitive</span></code> and its subclass instances can be constructed on the network. That is, the <code class="docutils literal notranslate"><span class="pre">reduce_sum</span> <span class="pre">=</span> <span class="pre">ReduceSum(True)</span></code> syntax is supported.</p>
<p>However, during construction, the parameter can be specified only in position parameter mode, and cannot be specified in the key-value pair mode. That is, the syntax <code class="docutils literal notranslate"><span class="pre">reduce_sum</span> <span class="pre">=</span> <span class="pre">ReduceSum(keep_dims=True)</span></code> is not supported.</p>
<p>Currently, the attributes and APIs related to <code class="docutils literal notranslate"><span class="pre">Primitive</span></code> and its subclasses cannot be called on the network.</p>
<p>For details about the definition of <code class="docutils literal notranslate"><span class="pre">Primitive</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/programming_guide/en/r1.3/operators.html">https://www.mindspore.cn/docs/programming_guide/en/r1.3/operators.html</a>.</p>
<p>For details about the defined <code class="docutils literal notranslate"><span class="pre">Primitive</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/api/en/r1.3/api_python/mindspore.ops.html">https://www.mindspore.cn/docs/api/en/r1.3/api_python/mindspore.ops.html</a>.</p>
</section>
<section id="cell">
<h4>Cell<a class="headerlink" href="#cell" title="Permalink to this headline"></a></h4>
<p>Currently, <code class="docutils literal notranslate"><span class="pre">Cell</span></code> and its subclass instances can be constructed on the network. That is, the syntax <code class="docutils literal notranslate"><span class="pre">cell</span> <span class="pre">=</span> <span class="pre">Cell(args...)</span></code> is supported.</p>
<p>However, during construction, the parameter can be specified only in position parameter mode, and cannot be specified in the key-value pair mode. That is, the syntax <code class="docutils literal notranslate"><span class="pre">cell</span> <span class="pre">=</span> <span class="pre">Cell(arg_name=value)</span></code> is not supported.</p>
<p>Currently, the attributes and APIs related to <code class="docutils literal notranslate"><span class="pre">Cell</span></code> and its subclasses cannot be called on the network unless they are called through <code class="docutils literal notranslate"><span class="pre">self</span></code> in <code class="docutils literal notranslate"><span class="pre">contrcut</span></code> of <code class="docutils literal notranslate"><span class="pre">Cell</span></code>.</p>
<p>For details about the definition of <code class="docutils literal notranslate"><span class="pre">Cell</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/programming_guide/en/r1.3/cell.html">https://www.mindspore.cn/docs/programming_guide/en/r1.3/cell.html</a>.</p>
<p>For details about the defined <code class="docutils literal notranslate"><span class="pre">Cell</span></code>, click <a class="reference external" href="https://www.mindspore.cn/docs/api/en/r1.3/api_python/mindspore.nn.html">https://www.mindspore.cn/docs/api/en/r1.3/api_python/mindspore.nn.html</a>.</p>
</section>
</section>
</section>
<section id="operators">
<h2>Operators<a class="headerlink" href="#operators" title="Permalink to this headline"></a></h2>
<p>Arithmetic operators and assignment operators support the <code class="docutils literal notranslate"><span class="pre">Number</span></code> and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> operations, as well as the <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> operations of different <code class="docutils literal notranslate"><span class="pre">dtype</span></code>.</p>
<p>This is because these operators are converted to operators with the same name for computation, and they support implicit type conversion.</p>
<p>For details about the rules, click <a class="reference external" href="https://www.mindspore.cn/docs/note/en/r1.3/operator_list_implicit.html">https://www.mindspore.cn/docs/note/en/r1.3/operator_list_implicit.html</a>.</p>
<section id="arithmetic-operators">
<h3>Arithmetic Operators<a class="headerlink" href="#arithmetic-operators" title="Permalink to this headline"></a></h3>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-left head"><p>Arithmetic Operator</p></th>
<th class="text-left head"><p>Supported Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> + <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> + <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> + <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> + <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">String</span></code> + <code class="docutils literal notranslate"><span class="pre">String</span></code>, and <code class="docutils literal notranslate"><span class="pre">List</span></code> + <code class="docutils literal notranslate"><span class="pre">List</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> - <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> - <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> - <code class="docutils literal notranslate"><span class="pre">Number</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> * <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> * <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> * <code class="docutils literal notranslate"><span class="pre">Number</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">/</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> / <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> / <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> / <code class="docutils literal notranslate"><span class="pre">Number</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">%</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> % <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> % <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>% <code class="docutils literal notranslate"><span class="pre">Number</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">**</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> ** <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> ** <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> ** <code class="docutils literal notranslate"><span class="pre">Number</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">//</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> // <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> // <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> // <code class="docutils literal notranslate"><span class="pre">Number</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">~</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">~Tensor[Bool]</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="assignment-operators">
<h3>Assignment Operators<a class="headerlink" href="#assignment-operators" title="Permalink to this headline"></a></h3>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-left head"><p>Assignment Operator</p></th>
<th class="text-left head"><p>Supported Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">=</span></code></p></td>
<td class="text-left"><p>Scalar and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">+=</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> += <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> += <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> += <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> += <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, and <code class="docutils literal notranslate"><span class="pre">String</span></code> += <code class="docutils literal notranslate"><span class="pre">String</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">-=</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> -= <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> -= <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> -= <code class="docutils literal notranslate"><span class="pre">Number</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">*=</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> *= <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> *= <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> *= <code class="docutils literal notranslate"><span class="pre">Number</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">/=</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> /= <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> /= <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> /= <code class="docutils literal notranslate"><span class="pre">Number</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">%=</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> %= <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> %= <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> %= <code class="docutils literal notranslate"><span class="pre">Number</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">**=</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> **= <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> **= <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> **= <code class="docutils literal notranslate"><span class="pre">Number</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">//=</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> //= <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> //= <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> //= <code class="docutils literal notranslate"><span class="pre">Number</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="logical-operators">
<h3>Logical Operators<a class="headerlink" href="#logical-operators" title="Permalink to this headline"></a></h3>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-left head"><p>Logical Operator</p></th>
<th class="text-left head"><p>Supported Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">and</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> and <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">or</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> or <code class="docutils literal notranslate"><span class="pre">Number</span></code>, and <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> or <code class="docutils literal notranslate"><span class="pre">Tensor</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">not</span></code></p></td>
<td class="text-left"><p>not <code class="docutils literal notranslate"><span class="pre">Number</span></code>, not <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, and not <code class="docutils literal notranslate"><span class="pre">tuple</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="member-operators">
<h3>Member Operators<a class="headerlink" href="#member-operators" title="Permalink to this headline"></a></h3>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-left head"><p>Member Operator</p></th>
<th class="text-left head"><p>Supported Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">in</span></code></p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Number</span></code> in <code class="docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">String</span></code> in <code class="docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> in <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">Number</span></code> in <code class="docutils literal notranslate"><span class="pre">List</span></code>, <code class="docutils literal notranslate"><span class="pre">String</span></code> in <code class="docutils literal notranslate"><span class="pre">List</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> in <code class="docutils literal notranslate"><span class="pre">List</span></code>, and <code class="docutils literal notranslate"><span class="pre">String</span></code> in <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code></p></td>
<td class="text-left"><p>Same as <code class="docutils literal notranslate"><span class="pre">in</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="identity-operators">
<h3>Identity Operators<a class="headerlink" href="#identity-operators" title="Permalink to this headline"></a></h3>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-left head"><p>Identity Operator</p></th>
<th class="text-left head"><p>Supported Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">is</span></code></p></td>
<td class="text-left"><p>The value can only be <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">True</span></code>, or <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">is</span> <span class="pre">not</span></code></p></td>
<td class="text-left"><p>The value can only be <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">True</span></code>, or <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="expressions">
<h2>Expressions<a class="headerlink" href="#expressions" title="Permalink to this headline"></a></h2>
<section id="conditional-control-statements">
<h3>Conditional Control Statements<a class="headerlink" href="#conditional-control-statements" title="Permalink to this headline"></a></h3>
<section id="single-if">
<h4>single if<a class="headerlink" href="#single-if" title="Permalink to this headline"></a></h4>
<p>Usage:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(cond):</span> <span class="pre">statements...</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">y</span> <span class="pre">if</span> <span class="pre">(cond)</span> <span class="pre">else</span> <span class="pre">z</span></code></p></li>
</ul>
<p>Parameter: <code class="docutils literal notranslate"><span class="pre">cond</span></code> – The supported types are <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">List</span></code>, <code class="docutils literal notranslate"><span class="pre">String</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> and <code class="docutils literal notranslate"><span class="pre">Function</span></code>. It can also be an expression whose computation result type is one of them.</p>
<p>Restrictions:</p>
<ul class="simple">
<li><p>During graph building, if <code class="docutils literal notranslate"><span class="pre">if</span></code> is not eliminated, the data type and shape of <code class="docutils literal notranslate"><span class="pre">return</span></code> inside the <code class="docutils literal notranslate"><span class="pre">if</span></code> branch must be the same as those outside the <code class="docutils literal notranslate"><span class="pre">if</span></code> branch.</p></li>
<li><p>When only <code class="docutils literal notranslate"><span class="pre">if</span></code> is available, the data type and shape of the <code class="docutils literal notranslate"><span class="pre">if</span></code> branch variable after the update must be the same as those before the update.</p></li>
<li><p>When both <code class="docutils literal notranslate"><span class="pre">if</span></code> and <code class="docutils literal notranslate"><span class="pre">else</span></code> are available, the updated data type and shape of the <code class="docutils literal notranslate"><span class="pre">if</span></code> branch variable must be the same as those of the <code class="docutils literal notranslate"><span class="pre">else</span></code> branch.</p></li>
<li><p>Does not support higher-order differential.</p></li>
<li><p>Does not support <code class="docutils literal notranslate"><span class="pre">elif</span></code> statements.</p></li>
</ul>
<p>Example 1:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">:</span>
  <span class="k">return</span> <span class="n">m</span>
<span class="k">else</span><span class="p">:</span>
  <span class="k">return</span> <span class="n">n</span>
</pre></div>
</div>
<p>The data types of <code class="docutils literal notranslate"><span class="pre">m</span></code> returned by the <code class="docutils literal notranslate"><span class="pre">if</span></code> branch and <code class="docutils literal notranslate"><span class="pre">n</span></code> returned by the <code class="docutils literal notranslate"><span class="pre">else</span></code> branch must be the same as those of shape.</p>
<p>Example 2:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">:</span>
  <span class="n">out</span> <span class="o">=</span> <span class="n">m</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">out</span> <span class="o">=</span> <span class="n">n</span>
<span class="k">return</span> <span class="n">out</span>
</pre></div>
</div>
<p>The data types of <code class="docutils literal notranslate"><span class="pre">out</span></code> after the <code class="docutils literal notranslate"><span class="pre">if</span></code> branch is updated and <code class="docutils literal notranslate"><span class="pre">else</span></code> after the <code class="docutils literal notranslate"><span class="pre">out</span></code> branch is updated must be the same as those of shape.</p>
</section>
<section id="side-by-side-if">
<h4>side-by-side if<a class="headerlink" href="#side-by-side-if" title="Permalink to this headline"></a></h4>
<p>Usage:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(cond1):statements</span> <span class="pre">else:statements...if</span> <span class="pre">(cond2):statements...</span></code></p></li>
</ul>
<p>Parameters: <code class="docutils literal notranslate"><span class="pre">cond1</span></code> and <code class="docutils literal notranslate"><span class="pre">cond2</span></code> – Consistent with <code class="docutils literal notranslate"><span class="pre">single</span> <span class="pre">if</span></code>.</p>
<p>Restrictions:</p>
<ul class="simple">
<li><p>Inherit all restrictions of <code class="docutils literal notranslate"><span class="pre">single</span> <span class="pre">if</span></code>.</p></li>
<li><p>The total number of <code class="docutils literal notranslate"><span class="pre">if</span></code> in calculating graph can not exceed 50.</p></li>
<li><p>Too many <code class="docutils literal notranslate"><span class="pre">if</span></code> will cause the compilation time to be too long. Reducing the number of <code class="docutils literal notranslate"><span class="pre">if</span></code> will help improve compilation efficiency.</p></li>
</ul>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">:</span>
  <span class="n">out</span> <span class="o">=</span> <span class="n">x</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">out</span> <span class="o">=</span> <span class="n">y</span>
<span class="k">if</span> <span class="n">z</span> <span class="o">&gt;</span> <span class="n">x</span><span class="p">:</span>
  <span class="n">out</span> <span class="o">=</span> <span class="n">out</span> <span class="o">+</span> <span class="mi">1</span>
<span class="k">return</span> <span class="n">out</span>
</pre></div>
</div>
</section>
<section id="if-in-if">
<h4>if in if<a class="headerlink" href="#if-in-if" title="Permalink to this headline"></a></h4>
<p>Usage:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(cond1):if</span> <span class="pre">(cond2):statements...</span></code></p></li>
</ul>
<p>Parameters: <code class="docutils literal notranslate"><span class="pre">cond1</span></code> and <code class="docutils literal notranslate"><span class="pre">cond2</span></code> – Consistent with <code class="docutils literal notranslate"><span class="pre">single</span> <span class="pre">if</span></code>.</p>
<p>Restrictions:</p>
<ul class="simple">
<li><p>Inherit all restrictions of <code class="docutils literal notranslate"><span class="pre">single</span> <span class="pre">if</span></code>.</p></li>
<li><p>The total number of <code class="docutils literal notranslate"><span class="pre">if</span></code> in calculating graph can not exceed 50.</p></li>
<li><p>Too many <code class="docutils literal notranslate"><span class="pre">if</span></code> will cause the compilation time to be too long. Reducing the number of <code class="docutils literal notranslate"><span class="pre">if</span></code> will help improve compilation efficiency.</p></li>
</ul>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">:</span>
  <span class="n">z</span> <span class="o">=</span> <span class="n">z</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="k">if</span> <span class="n">z</span> <span class="o">&gt;</span> <span class="n">x</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">m</span>
<span class="k">else</span><span class="p">:</span>
  <span class="k">return</span> <span class="n">n</span>
</pre></div>
</div>
</section>
</section>
<section id="loop-statements">
<h3>Loop Statements<a class="headerlink" href="#loop-statements" title="Permalink to this headline"></a></h3>
<section id="for">
<h4>for<a class="headerlink" href="#for" title="Permalink to this headline"></a></h4>
<p>Usage:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">i</span> <span class="pre">in</span> <span class="pre">sequence</span></code></p></li>
</ul>
<p>Parameter: <code class="docutils literal notranslate"><span class="pre">sequence</span></code> –Iterative sequences (<code class="docutils literal notranslate"><span class="pre">Tuple</span></code> and <code class="docutils literal notranslate"><span class="pre">List</span></code>).</p>
<p>Restrictions:</p>
<ul class="simple">
<li><p>The total number of graph operations is a multiple of number of iterations of the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop. Excessive number of iterations of the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop may cause the graph to occupy more memory than usage limit.</p></li>
</ul>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
  <span class="n">z</span> <span class="o">+=</span> <span class="n">i</span>
<span class="k">return</span> <span class="n">z</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>z: Tensor(shape=[2, 3], dtype=Int64, value=[[7, 7], [7, 7], [7, 7]])
</pre></div>
</div>
</section>
<section id="single-while">
<h4>single while<a class="headerlink" href="#single-while" title="Permalink to this headline"></a></h4>
<p>Usage:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">while</span> <span class="pre">(cond)</span></code></p></li>
</ul>
<p>Parameter: <code class="docutils literal notranslate"><span class="pre">cond</span></code> – Consistent with <code class="docutils literal notranslate"><span class="pre">single</span> <span class="pre">if</span></code>.</p>
<p>Restrictions:</p>
<ul class="simple">
<li><p>During graph building, if <code class="docutils literal notranslate"><span class="pre">while</span></code> is not eliminated, the data type and <code class="docutils literal notranslate"><span class="pre">shape</span></code> of <code class="docutils literal notranslate"><span class="pre">return</span></code> inside <code class="docutils literal notranslate"><span class="pre">while</span></code> must be the same as those outside <code class="docutils literal notranslate"><span class="pre">while</span></code>.</p></li>
<li><p>The data type and shape of the updated variables in <code class="docutils literal notranslate"><span class="pre">while</span></code> must be the same as those before the update.</p></li>
<li><p>Does not support training scenarios.</p></li>
</ul>
<p>Example 1:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">:</span>
  <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="k">return</span> <span class="n">m</span>
<span class="k">return</span> <span class="n">n</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">m</span></code> data type returned inside <code class="docutils literal notranslate"><span class="pre">while</span></code> inside and <code class="docutils literal notranslate"><span class="pre">n</span></code> data type returned outside <code class="docutils literal notranslate"><span class="pre">while</span></code> must be the same as those of shape.</p>
<p>Example 2:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">out</span> <span class="o">=</span> <span class="n">m</span>
<span class="k">while</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">:</span>
  <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="n">out</span> <span class="o">=</span> <span class="n">out</span> <span class="o">+</span> <span class="mi">1</span>
<span class="k">return</span> <span class="n">out</span>
</pre></div>
</div>
<p>In <code class="docutils literal notranslate"><span class="pre">while</span></code>, the data types of <code class="docutils literal notranslate"><span class="pre">out</span></code> before and after update must be the same as those of shape.</p>
</section>
<section id="side-by-side-while">
<h4>side-by-side while<a class="headerlink" href="#side-by-side-while" title="Permalink to this headline"></a></h4>
<p>Usage:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">while</span> <span class="pre">(cond1):statements</span> <span class="pre">while</span> <span class="pre">(cond2):statemetns...</span></code></p></li>
</ul>
<p>Parameters: <code class="docutils literal notranslate"><span class="pre">cond1</span></code> and <code class="docutils literal notranslate"><span class="pre">cond2</span></code> – Consistent with <code class="docutils literal notranslate"><span class="pre">single</span> <span class="pre">if</span></code>.</p>
<p>Restrictions:</p>
<ul class="simple">
<li><p>Inherit all restrictions of <code class="docutils literal notranslate"><span class="pre">single</span> <span class="pre">while</span></code>.</p></li>
<li><p>The total number of <code class="docutils literal notranslate"><span class="pre">while</span></code> in calculating graph can not exceed 50.</p></li>
<li><p>Too many <code class="docutils literal notranslate"><span class="pre">while</span></code> will cause the compilation time to be too long. Reducing the number of <code class="docutils literal notranslate"><span class="pre">while</span></code> will help improve compilation efficiency.</p></li>
</ul>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">out</span> <span class="o">=</span> <span class="n">m</span>
<span class="k">while</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">:</span>
  <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="n">out</span> <span class="o">=</span> <span class="n">out</span> <span class="o">+</span> <span class="mi">1</span>
<span class="k">while</span> <span class="n">out</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">out</span> <span class="o">-=</span> <span class="mi">10</span>
<span class="k">return</span> <span class="n">out</span>
</pre></div>
</div>
</section>
<section id="while-in-while">
<h4>while in while<a class="headerlink" href="#while-in-while" title="Permalink to this headline"></a></h4>
<p>Usage:</p>
<p>-<code class="docutils literal notranslate"><span class="pre">while</span> <span class="pre">(cond1):while</span> <span class="pre">(cond2):statements...</span></code></p>
<p>Parameters: <code class="docutils literal notranslate"><span class="pre">cond1</span></code> and <code class="docutils literal notranslate"><span class="pre">cond2</span></code> – Consistent with <code class="docutils literal notranslate"><span class="pre">single</span> <span class="pre">if</span></code>.</p>
<p>Restrictions:</p>
<ul class="simple">
<li><p>Inherit all restrictions of <code class="docutils literal notranslate"><span class="pre">single</span> <span class="pre">while</span></code>.</p></li>
<li><p>The total number of <code class="docutils literal notranslate"><span class="pre">while</span></code> in calculating graph can not exceed 50.</p></li>
<li><p>Too many <code class="docutils literal notranslate"><span class="pre">while</span></code> will cause the compilation time to be too long. Reducing the number of <code class="docutils literal notranslate"><span class="pre">while</span></code> will help improve compilation efficiency.</p></li>
</ul>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">out</span> <span class="o">=</span> <span class="n">m</span>
<span class="k">while</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">:</span>
  <span class="k">while</span> <span class="n">z</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">:</span>
    <span class="n">z</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">out</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">return</span> <span class="n">out</span>
</pre></div>
</div>
</section>
</section>
<section id="conditional-control-statements-in-loop-statements">
<h3>Conditional Control Statements in Loop Statements<a class="headerlink" href="#conditional-control-statements-in-loop-statements" title="Permalink to this headline"></a></h3>
<section id="if-in-for">
<h4>if in for<a class="headerlink" href="#if-in-for" title="Permalink to this headline"></a></h4>
<p>Usage:</p>
<ul class="simple">
<li><p>for i in sequence:if (cond)`</p></li>
</ul>
<p>Parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cond</span></code> – Consistent with <code class="docutils literal notranslate"><span class="pre">single</span> <span class="pre">if</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sequence</span></code> – Iterative sequence(<code class="docutils literal notranslate"><span class="pre">Tuple</span></code>、<code class="docutils literal notranslate"><span class="pre">List</span></code>)</p></li>
</ul>
<p>Restrictions:</p>
<ul class="simple">
<li><p>Inherit all restrictions of <code class="docutils literal notranslate"><span class="pre">single</span> <span class="pre">if</span></code>.</p></li>
<li><p>Inherit all restrictions of <code class="docutils literal notranslate"><span class="pre">for</span></code>.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">cond</span></code> is variable, it is forbidden to use <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(cond):return</span></code>,<code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(cond):continue</span></code>,<code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(cond):break</span></code> statements.</p></li>
<li><p>The total number of <code class="docutils literal notranslate"><span class="pre">if</span></code> is a multiple of number of iterations of the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop. Excessive number of iterations of the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop may cause the compilation time to be too long.</p></li>
</ul>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
  <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
    <span class="n">z</span> <span class="o">+=</span> <span class="n">i</span>
<span class="k">return</span> <span class="n">z</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>z: Tensor(shape=[2, 3], dtype=Int64, value=[[4, 4], [4, 4], [4, 4]])
</pre></div>
</div>
</section>
<section id="if-in-while">
<h4>if in while<a class="headerlink" href="#if-in-while" title="Permalink to this headline"></a></h4>
<p>Usage:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">while</span> <span class="pre">(cond1):if</span> <span class="pre">(cond2)</span></code></p></li>
</ul>
<p>Parameters: <code class="docutils literal notranslate"><span class="pre">cond1</span></code> and <code class="docutils literal notranslate"><span class="pre">cond2</span></code> – Consistent with <code class="docutils literal notranslate"><span class="pre">single</span> <span class="pre">if</span></code>.</p>
<p>Restrictions:</p>
<ul class="simple">
<li><p>Inherit all restrictions of <code class="docutils literal notranslate"><span class="pre">single</span> <span class="pre">if</span></code> and <code class="docutils literal notranslate"><span class="pre">single</span> <span class="pre">while</span></code>.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">cond2</span></code> is variable, it is forbidden to use <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(cond2):return</span></code>,<code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(cond2):continue</span></code>,<code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(cond2):break</span></code> statements.</p></li>
</ul>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">out</span> <span class="o">=</span> <span class="n">m</span>
<span class="k">while</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">:</span>
  <span class="k">if</span> <span class="n">z</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">:</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">out</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">return</span> <span class="n">out</span>
</pre></div>
</div>
</section>
</section>
<section id="function-definition-statements">
<h3>Function Definition Statements<a class="headerlink" href="#function-definition-statements" title="Permalink to this headline"></a></h3>
<section id="def-keyword">
<h4>def Keyword<a class="headerlink" href="#def-keyword" title="Permalink to this headline"></a></h4>
<p>Defines functions.</p>
<p>Usage:</p>
<p><code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">function_name(args):</span> <span class="pre">statements...</span></code></p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">number_add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">number_add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ret: 3
</pre></div>
</div>
</section>
<section id="lambda-expression">
<h4>lambda Expression<a class="headerlink" href="#lambda-expression" title="Permalink to this headline"></a></h4>
<p>Generates functions.</p>
<p>Usage: <code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">x,</span> <span class="pre">y:</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span></code></p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">number_add</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">number_add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ret: 5
</pre></div>
</div>
</section>
</section>
</section>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline"></a></h2>
<section id="python-built-in-functions">
<h3>Python Built-in Functions<a class="headerlink" href="#python-built-in-functions" title="Permalink to this headline"></a></h3>
<p>Currently, the following built-in Python functions are supported: <code class="docutils literal notranslate"><span class="pre">len</span></code>, <code class="docutils literal notranslate"><span class="pre">isinstance</span></code>, <code class="docutils literal notranslate"><span class="pre">partial</span></code>, <code class="docutils literal notranslate"><span class="pre">map</span></code>, <code class="docutils literal notranslate"><span class="pre">range</span></code>, <code class="docutils literal notranslate"><span class="pre">enumerate</span></code>, <code class="docutils literal notranslate"><span class="pre">super</span></code>, and <code class="docutils literal notranslate"><span class="pre">pow</span></code>.</p>
<section id="len">
<h4>len<a class="headerlink" href="#len" title="Permalink to this headline"></a></h4>
<p>Returns the length of a sequence.</p>
<p>Calling: <code class="docutils literal notranslate"><span class="pre">len(sequence)</span></code></p>
<p>Input parameter: <code class="docutils literal notranslate"><span class="pre">sequence</span></code> – <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">List</span></code>, <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code>, or <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>.</p>
<p>Return value: length of the sequence, which is of the <code class="docutils literal notranslate"><span class="pre">int</span></code> type. If the input parameter is <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, the length of dimension 0 is returned.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)))</span>
<span class="n">x_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">y_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">d_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="n">z_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>x_len: 3
y_len: 3
d_len: 2
z_len: 6
</pre></div>
</div>
</section>
<section id="isinstance">
<h4>isinstance<a class="headerlink" href="#isinstance" title="Permalink to this headline"></a></h4>
<p>Determines whether an object is an instance of a class. Different from operator <code class="docutils literal notranslate"><span class="pre">Isinstance</span></code>, the second input parameter of <code class="docutils literal notranslate"><span class="pre">Isinstance</span></code> is the type defined in the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> module of MindSpore.</p>
<p>Calling: <code class="docutils literal notranslate"><span class="pre">isinstance(obj,</span> <span class="pre">type)</span></code></p>
<p>Input parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">obj</span></code> – Any instance of any supported type.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> – A type in the <code class="docutils literal notranslate"><span class="pre">MindSpore</span> <span class="pre">dtype</span></code> module.</p></li>
</ul>
<p>Return value: If <code class="docutils literal notranslate"><span class="pre">obj</span></code> is an instance of <code class="docutils literal notranslate"><span class="pre">type</span></code>, return <code class="docutils literal notranslate"><span class="pre">True</span></code>. Otherwise, return <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)))</span>
<span class="n">x_is_tuple</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">mstype</span><span class="o">.</span><span class="n">tuple_</span><span class="p">)</span>
<span class="n">y_is_list</span><span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">mstype</span><span class="o">.</span><span class="n">list_</span><span class="p">)</span>
<span class="n">z_is_tensor</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">mstype</span><span class="o">.</span><span class="n">tensor</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>x_is_tuple: True
y_is_list: True
z_is_tensor: True
</pre></div>
</div>
</section>
<section id="partial">
<h4>partial<a class="headerlink" href="#partial" title="Permalink to this headline"></a></h4>
<p>A partial function used to fix the input parameter of the function.</p>
<p>Calling: <code class="docutils literal notranslate"><span class="pre">partial(func,</span> <span class="pre">arg,</span> <span class="pre">...)</span></code></p>
<p>Input parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">func</span></code> –Function.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arg</span></code> – One or more parameters to be fixed. Position parameters and key-value pairs can be specified.</p></li>
</ul>
<p>Return value: functions with certain input parameter values fixed</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>

<span class="n">add_</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">add_</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">add_</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>m: 5
n: 7
</pre></div>
</div>
</section>
<section id="map">
<h4>map<a class="headerlink" href="#map" title="Permalink to this headline"></a></h4>
<p>Maps one or more sequences based on the provided functions and generates a new sequence based on the mapping result.
If the number of elements in multiple sequences is inconsistent, the length of the new sequence is the same as that of the shortest sequence.</p>
<p>Calling: <code class="docutils literal notranslate"><span class="pre">map(func,</span> <span class="pre">sequence,</span> <span class="pre">...)</span></code></p>
<p>Input parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">func</span></code> –Function.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sequence</span></code> – One or more sequences (<code class="docutils literal notranslate"><span class="pre">Tuple</span></code> or <code class="docutils literal notranslate"><span class="pre">List</span></code>).</p></li>
</ul>
<p>Return value: A <code class="docutils literal notranslate"><span class="pre">Tuple</span></code></p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>

<span class="n">elements_a</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">elements_b</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">ret</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">elements_a</span><span class="p">,</span> <span class="n">elements_b</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ret: (5, 7, 9)
</pre></div>
</div>
</section>
<section id="zip">
<h4>zip<a class="headerlink" href="#zip" title="Permalink to this headline"></a></h4>
<p>Packs elements in the corresponding positions in multiple sequences into tuples, and then uses these tuples to form a new sequence.
If the number of elements in each sequence is inconsistent, the length of the new sequence is the same as that of the shortest sequence.</p>
<p>Calling: <code class="docutils literal notranslate"><span class="pre">zip(sequence,</span> <span class="pre">...)</span></code></p>
<p>Input parameter: <code class="docutils literal notranslate"><span class="pre">sequence</span></code> – One or more sequences (<code class="docutils literal notranslate"><span class="pre">Tuple</span></code> or <code class="docutils literal notranslate"><span class="pre">List</span></code>)`.</p>
<p>Return value: A <code class="docutils literal notranslate"><span class="pre">Tuple</span></code></p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">elements_a</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">elements_b</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">ret</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">elements_a</span><span class="p">,</span> <span class="n">elements_b</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ret: ((1, 4), (2, 5), (3, 6))
</pre></div>
</div>
</section>
<section id="range">
<h4>range<a class="headerlink" href="#range" title="Permalink to this headline"></a></h4>
<p>Creates a <code class="docutils literal notranslate"><span class="pre">Tuple</span></code> based on the start value, end value, and step.</p>
<p>Calling:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">range(start,</span> <span class="pre">stop,</span> <span class="pre">step)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">range(start,</span> <span class="pre">stop)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">range(stop)</span></code></p></li>
</ul>
<p>Input parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">start</span></code> – start value of the count. The type is <code class="docutils literal notranslate"><span class="pre">int</span></code>. The default value is 0.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stop</span></code> – end value of the count (exclusive). The type is <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">step</span></code> – Step. The type is <code class="docutils literal notranslate"><span class="pre">int</span></code>. The default value is 1.</p></li>
</ul>
<p>Return value: A <code class="docutils literal notranslate"><span class="pre">Tuple</span></code></p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>x: (0, 2, 4)
y: (0, 1, 2, 3, 4)
z: (0, 1, 2)
</pre></div>
</div>
</section>
<section id="enumerate">
<h4>enumerate<a class="headerlink" href="#enumerate" title="Permalink to this headline"></a></h4>
<p>Generates an index sequence of a sequence. The index sequence contains data and the corresponding subscript.</p>
<p>Calling:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">enumerate(sequence,</span> <span class="pre">start)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enumerate(sequence)</span></code></p></li>
</ul>
<p>Input parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sequence</span></code> – A sequence (<code class="docutils literal notranslate"><span class="pre">Tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">List</span></code>, or <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start</span></code> – Start position of the subscript. The type is <code class="docutils literal notranslate"><span class="pre">int</span></code>. The default value is 0.</p></li>
</ul>
<p>Return value: A <code class="docutils literal notranslate"><span class="pre">Tuple</span></code></p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span> <span class="p">,</span><span class="mi">6</span><span class="p">]]))</span>
<span class="n">m</span> <span class="o">=</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>m: ((3, 100), (4, 200), (5, 300), (5, 400))
n: ((0, Tensor(shape=[2], dtype=Int64, value=[1, 2])), (1, Tensor(shape=[2], dtype=Int64, value=[3, 4])), (2, Tensor(shape=[2], dtype=Int64, value=[5, 6])))
</pre></div>
</div>
</section>
<section id="super">
<h4>super<a class="headerlink" href="#super" title="Permalink to this headline"></a></h4>
<p>Calls a method of the parent class (super class). Generally, the method of the parent class is called after <code class="docutils literal notranslate"><span class="pre">super</span></code>.</p>
<p>Calling:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">super().xxx()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">super(type,</span> <span class="pre">self).xxx()</span></code></p></li>
</ul>
<p>Input parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> –Class.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code> –Object.</p></li>
</ul>
<p>Return value: method of the parent class.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FatherNet</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
      <span class="nb">super</span><span class="p">(</span><span class="n">FatherNet</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>

  <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span>

  <span class="k">def</span> <span class="nf">test_father</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">x</span>

<span class="k">class</span> <span class="nc">SingleSubNet</span><span class="p">(</span><span class="n">FatherNet</span><span class="p">):</span>
<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">SingleSubNet</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">z</span>

<span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">ret_father_construct</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">ret_father_test</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">SingleSubNet</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">test_father</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ret_father_construct</span><span class="p">,</span> <span class="n">ret_father_test</span>
</pre></div>
</div>
</section>
<section id="pow">
<h4>pow<a class="headerlink" href="#pow" title="Permalink to this headline"></a></h4>
<p>Returns the power.</p>
<p>Calling: <code class="docutils literal notranslate"><span class="pre">pow(x,</span> <span class="pre">y)</span></code></p>
<p>Input parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x</span></code> – Base number, <code class="docutils literal notranslate"><span class="pre">Number</span></code>, or <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">y</span></code> – Power exponent, <code class="docutils literal notranslate"><span class="pre">Number</span></code>, or <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>.</p></li>
</ul>
<p>Return value: <code class="docutils literal notranslate"><span class="pre">y</span></code> power of <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">Number</span></code>, or <code class="docutils literal notranslate"><span class="pre">Tensor</span></code></p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="n">ret</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ret: Tensor(shape=[3], dtype=Int64, value=[1, 4, 27]))
</pre></div>
</div>
</section>
<section id="print">
<h4>print<a class="headerlink" href="#print" title="Permalink to this headline"></a></h4>
<p>Prints logs.</p>
<p>Calling: <code class="docutils literal notranslate"><span class="pre">print(arg,</span> <span class="pre">...)</span></code></p>
<p>Input parameter: <code class="docutils literal notranslate"><span class="pre">arg</span></code> – Information to be printed (<code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">bool</span></code>, <code class="docutils literal notranslate"><span class="pre">String</span></code> or <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>).
When the <code class="docutils literal notranslate"><span class="pre">arg</span></code> is <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, or <code class="docutils literal notranslate"><span class="pre">bool</span></code>, it will be printed out as a <code class="docutils literal notranslate"><span class="pre">0-D</span></code> tensor.</p>
<p>Return value: none</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">3</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;x: &quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;y: &quot;</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>x: Tensor(shape=[3], dtype=Int64, value=[1, 2, 3]))
y: Tensor(shape=[], dtype=Int64, value=3))
</pre></div>
</div>
</section>
</section>
<section id="function-parameters">
<h3>Function Parameters<a class="headerlink" href="#function-parameters" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Default parameter value: The data types <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">bool</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">list</span></code>, and <code class="docutils literal notranslate"><span class="pre">dict</span></code> are supported, whereas <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> is not supported.</p></li>
<li><p>Variable parameters: Inference and training of networks with variable parameters are supported.</p></li>
<li><p>Key-value pair parameter: Functions with key-value pair parameters cannot be used for backward propagation on computational graphs.</p></li>
<li><p>Variable key-value pair parameter: Functions with variable key-value pairs cannot be used for backward propagation on computational graphs.</p></li>
</ul>
</section>
</section>
<section id="network-definition">
<h2>Network Definition<a class="headerlink" href="#network-definition" title="Permalink to this headline"></a></h2>
<section id="instance-types-on-the-entire-network">
<h3>Instance Types on the Entire Network<a class="headerlink" href="#instance-types-on-the-entire-network" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Common Python function with the <a class="reference external" href="https://www.mindspore.cn/docs/api/en/r1.3/api_python/mindspore.html#mindspore.ms_function">&#64;ms_function</a> decorator.</p></li>
<li><p>Cell subclass inherited from <a class="reference external" href="https://www.mindspore.cn/docs/api/en/r1.3/api_python/nn/mindspore.nn.Cell.html">nn.Cell</a>.</p></li>
</ul>
</section>
<section id="network-construction-components">
<h3>Network Construction Components<a class="headerlink" href="#network-construction-components" title="Permalink to this headline"></a></h3>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-left head"><p>Category</p></th>
<th class="text-left head"><p>Content</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Cell</span></code> instance</p></td>
<td class="text-left"><p><a class="reference external" href="https://www.mindspore.cn/docs/api/en/r1.3/api_python/mindspore.nn.html">mindspore/nn/*</a> and user-defined <a class="reference external" href="https://www.mindspore.cn/docs/api/en/r1.3/api_python/nn/mindspore.nn.Cell.html">Cell</a>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Member function of a <code class="docutils literal notranslate"><span class="pre">Cell</span></code> instance</p></td>
<td class="text-left"><p>Member functions of other classes in the construct function of Cell can be called.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">dataclass</span></code> instance</p></td>
<td class="text-left"><p>Class decorated with &#64;dataclass.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Primitive</span></code> operator</p></td>
<td class="text-left"><p><a class="reference external" href="https://www.mindspore.cn/docs/api/en/r1.3/api_python/mindspore.ops.html">mindspore/ops/operations/*</a></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">Composite</span></code> operator</p></td>
<td class="text-left"><p><a class="reference external" href="https://www.mindspore.cn/docs/api/en/r1.3/api_python/mindspore.ops.html">mindspore/ops/composite/*</a></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">constexpr</span></code> generation operator</p></td>
<td class="text-left"><p>Value computation operator generated by <a class="reference external" href="https://www.mindspore.cn/docs/api/en/r1.3/api_python/ops/mindspore.ops.constexpr.html">&#64;constexpr</a>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>Function</p></td>
<td class="text-left"><p>User-defined Python functions and system functions listed in the preceding content.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="network-constraints">
<h3>Network Constraints<a class="headerlink" href="#network-constraints" title="Permalink to this headline"></a></h3>
<ol class="arabic">
<li><p>By default, the input parameters of the entire network (that is, the outermost network input parameters) support only <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>. To support non-<code class="docutils literal notranslate"><span class="pre">Tensor</span></code>, you can set the <code class="docutils literal notranslate"><span class="pre">support_non_tensor_inputs</span></code> attribute of the network to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>During network initialization, <code class="docutils literal notranslate"><span class="pre">self.support_non_tensor_inputs</span> <span class="pre">=</span> <span class="pre">True</span></code> is set. Currently, this configuration supports only the forward network and does not support the backward network. That is, the backward operation cannot be performed on the network whose input parameters are not <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>.</p>
<p>The following is an example of supporting the outermost layer to transfer scalars:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ExpandDimsNet</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ExpandDimsNet</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">support_non_tensor_inputs</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expandDims</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">ExpandDims</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_x</span><span class="p">,</span> <span class="n">input_axis</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">expandDims</span><span class="p">(</span><span class="n">input_x</span><span class="p">,</span> <span class="n">input_axis</span><span class="p">)</span>
<span class="n">expand_dim_net</span> <span class="o">=</span> <span class="n">ExpandDimsNet</span><span class="p">()</span>
<span class="n">input_x</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>
<span class="n">expand_dim_net</span><span class="p">(</span><span class="n">input_x</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>You are not allowed to modify non-<code class="docutils literal notranslate"><span class="pre">Parameter</span></code> data members of the network.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">par</span> <span class="o">=</span> <span class="n">Parameter</span><span class="p">(</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;par&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div>
</div>
<p>In the preceding defined network, <code class="docutils literal notranslate"><span class="pre">self.num</span></code> is not a <code class="docutils literal notranslate"><span class="pre">Parameter</span></code> and cannot be modified. <code class="docutils literal notranslate"><span class="pre">self.par</span></code> is a <code class="docutils literal notranslate"><span class="pre">Parameter</span></code> and can be modified.</p>
</li>
<li><p>When an undefined class member is used in the <code class="docutils literal notranslate"><span class="pre">construct</span></code> function, <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> is not thrown like the Python interpreter. Instead, it is processed as <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">Cell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
</pre></div>
</div>
<p>In the preceding defined network, <code class="docutils literal notranslate"><span class="pre">construct</span></code> uses the undefined class member <code class="docutils literal notranslate"><span class="pre">self.y</span></code>. In this case, <code class="docutils literal notranslate"><span class="pre">self.y</span></code> is processed as <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</li>
</ol>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="syntax_list.html" class="btn btn-neutral float-left" title="Syntax Support" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="index_support.html" class="btn btn-neutral float-right" title="Tensor Index Support" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>