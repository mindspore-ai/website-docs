<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>安装 &mdash; MindSpore master 文档</title><script>;(()=>{const e=localStorage.getItem("ms-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;(e?"dark"===e:t)&&document.documentElement.setAttribute("data-o-theme","dark")})();</script>
      <link rel="stylesheet" href="../_static/css/bootstrap.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/training.css" type="text/css" /><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script><script src="../_static/jquery.js"></script>
        <script src="../_static/js/theme.js"></script><script src="../_static/underscore.js"></script><script src="../_static/doctools.js"></script><script src="../_static/js/training.js"></script><script src="../_static/translations.js"></script><script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="数据处理" href="data_processing.html" />
    <link rel="prev" title="环境变量" href="../note/env_var_list.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">设计</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../design/overview.html">MindSpore设计概览</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/programming_paradigm.html">函数式和对象式融合编程范式</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/all_scenarios.html">全场景统一架构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/dynamic_graph_and_static_graph.html">动静态图结合</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/pluggable_device.html">三方硬件对接</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/distributed_training_design.html">原生分布式并行架构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/graph_fusion_engine.html">图算融合加速引擎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/data_engine.html">高性能数据处理引擎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/glossary.html">术语</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">模型库</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../note/official_models.html">官方模型库</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.html">mindspore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.nn.html">mindspore.nn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.ops.html">mindspore.ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.ops.primitive.html">mindspore.ops.primitive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.amp.html">mindspore.amp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.train.html">mindspore.train</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.communication.html">mindspore.communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.common.initializer.html">mindspore.common.initializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.dataset.html">mindspore.dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.dataset.transforms.html">mindspore.dataset.transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.mindrecord.html">mindspore.mindrecord</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.nn.probability.html">mindspore.nn.probability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.rewrite.html">mindspore.rewrite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.boost.html">mindspore.boost</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.numpy.html">mindspore.numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.scipy.html">mindspore.scipy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API映射</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../note/api_mapping/pytorch_api_mapping.html">PyTorch与MindSpore API映射表</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/api_mapping/tensorflow_api_mapping.html">TensorFlow与MindSpore API映射表</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">迁移指南</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/overview.html">迁移指南概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/enveriment_preparation.html">环境准备与资料获取</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/analysis_and_preparation.html">模型分析与准备</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/typical_api_comparision.html">与PyTorch典型区别</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/model_development/model_development.html">MindSpore网络搭建</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/debug_and_tune.html">调试调优</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/sample_code.html">网络迁移调试实例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/migrator_with_tools.html">网络迁移工具应用实践指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/faq.html">常见问题</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">语法支持</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../note/static_graph_syntax_support.html">静态图语法支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/static_graph_syntax/operators.html">静态图语法——运算符</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/static_graph_syntax/statements.html">静态图语法——Python语句</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/static_graph_syntax/python_builtin_functions.html">静态图语法——Python内置函数</a></li>
<li class="toctree-l1"><a class="reference internal" href="../note/index_support.html">Tensor索引支持</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">环境变量</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../note/env_var_list.html">环境变量</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">安装</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pip安装">Pip安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="#conda安装">Conda安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="#source安装">Source安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="#docker安装">Docker安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="#卸载">卸载</a></li>
<li class="toctree-l2"><a class="reference internal" href="#环境变量">环境变量</a></li>
<li class="toctree-l2"><a class="reference internal" href="#安装验证">安装验证</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data_processing.html">数据处理</a></li>
<li class="toctree-l1"><a class="reference internal" href="implement_problem.html">执行问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="network_compilation.html">网络编译</a></li>
<li class="toctree-l1"><a class="reference internal" href="operators_compile.html">算子编译</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage_migrate_3rd.html">第三方框架迁移使用</a></li>
<li class="toctree-l1"><a class="reference internal" href="performance_tuning.html">性能调优</a></li>
<li class="toctree-l1"><a class="reference internal" href="precision_tuning.html">精度调优</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributed_parallel.html">分布式并行</a></li>
<li class="toctree-l1"><a class="reference internal" href="inference.html">推理</a></li>
<li class="toctree-l1"><a class="reference internal" href="feature_advice.html">特性咨询</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../RELEASE.html">Release Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>安装</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/faq/installation.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="安装">
<h1>安装<a class="headerlink" href="#安装" title="永久链接至标题"></a></h1>
<p><a class="reference external" href="https://gitee.com/mindspore/docs/blob/r2.1/docs/mindspore/source_zh_cn/faq/installation.md"><img alt="查看源文件" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.1/resource/_static/logo_source.svg" /></a></p>
<section id="pip安装">
<h2>Pip安装<a class="headerlink" href="#pip安装" title="永久链接至标题"></a></h2>
<p><font size=3><strong>Q: 安装MindSpore版本: GPU、CUDA 10.1、0.5.0-beta，出现问题: <code class="docutils literal notranslate"><span class="pre">cannot</span> <span class="pre">open</span> <span class="pre">shared</span> <span class="pre">object</span> <span class="pre">file:No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span></code>。</strong></font></p>
<p>A: 从报错情况来看，是cuBLAS库没有找到。一般的情况下是cuBLAS库没有安装，或者是因为没有加入到环境变量中去。通常cuBLAS是随着CUDA以及驱动一起安装的，确认安装后把cuBLAS所在的目录加入<code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>环境变量中即可。</p>
<br/>
<p><font size=3><strong>Q: 使用pip安装时报错: <code class="docutils literal notranslate"><span class="pre">ERROR:</span> <span class="pre">mindspore_{VERSION}.whl</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">a</span> <span class="pre">supported</span> <span class="pre">wheel</span> <span class="pre">on</span> <span class="pre">this</span> <span class="pre">platform</span></code>应该怎么办？</strong></font></p>
<p>A: pip会通过wheel安装包的文件名来判断该安装包是否与当前Python环境兼容，例如安装mindspore_ascend-1.2.0-cp37-cp37m-linux_aarch64.whl时，pip会检查:</p>
<ol class="arabic simple">
<li><p>当前python环境为3.7.x版本</p></li>
<li><p>当前操作系统为Linux</p></li>
<li><p>操作系统架构为arm64</p></li>
</ol>
<p>因此，如果出现 <code class="docutils literal notranslate"><span class="pre">is</span> <span class="pre">not</span> <span class="pre">a</span> <span class="pre">supported</span> <span class="pre">wheel</span> <span class="pre">on</span> <span class="pre">this</span> <span class="pre">platform</span></code> 问题，请检查当前环境是否满足MindSpore安装要求，以及该MindSpore安装包版本是否正确。</p>
<br/>
<p><font size=3><strong>Q: macOS系统源码编译后使用pip安装报错: <code class="docutils literal notranslate"><span class="pre">ERROR:</span> <span class="pre">mindspore-{VERSION}.whl</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">a</span> <span class="pre">supported</span> <span class="pre">wheel</span> <span class="pre">on</span> <span class="pre">this</span> <span class="pre">platform</span></code>应该怎么办？</strong></font></p>
<p>A: 首先检查output目录下编译得到的安装包名，类似mindspore-1.6.0-cp37-cp37m-macosx_11_1_x84_64.whl。包名中“11_1”的意思是编译时使用的SDK版本是11.1。如果使用的SDK版本为11.x，则可能是因为编译时使用的SDK版本过高导致无法安装。</p>
<p>解决方法一：可以重命名安装包后再尝试安装，例如将上述安装包重命名为mindspore-1.6.0-cp37-cp37m-macosx_10_15_x84_64.whl。</p>
<p>解决方法二：在源码编译前，设置环境变量<code class="docutils literal notranslate"><span class="pre">MACOSX_DEPOLYMENT_TARGET</span></code>为<code class="docutils literal notranslate"><span class="pre">10.15</span></code>并重新编译。</p>
<br/>
<p><font size=3><strong>Q: 使用pip安装时报错: <code class="docutils literal notranslate"><span class="pre">SSL:CERTIFICATE_VERIFY_FATLED</span></code>应该怎么办？</strong></font></p>
<p>A: 在pip安装命令后添加参数 <code class="docutils literal notranslate"><span class="pre">--trusted-host=ms-release.obs.cn-north-4.myhuaweicloud.com</span></code>重试即可。</p>
<br/>
<p><font size=3><strong>Q: MindSpore对Protobuf版本是否有特别要求？</strong></font></p>
<p>A: MindSpore默认安装Protobuf的3.13.0版本，如果不是该版本，在使用pytest测试代码时日志中会产生很多告警，建议您使用命令<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">protobuf==3.13.0</span></code>重新安装3.13.0版本。</p>
<br/>
<p><font size=3><strong>Q: 使用pip安装时报错<code class="docutils literal notranslate"><span class="pre">ProxyError(Cannot</span> <span class="pre">connect</span> <span class="pre">to</span> <span class="pre">proxy)</span></code>，应该怎么办？</strong></font></p>
<p>A: 此问题一般是代理配置问题，Ubuntu环境下可通过<code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">http_proxy={your_proxy}</span></code>设置代理；Windows环境可以在cmd中通过<code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">http_proxy={your_proxy}</span></code>进行代理设置。</p>
<br/>
<p><font size=3><strong>Q: 使用pip安装时提示错误，应该怎么办？</strong></font></p>
<p>A: 请执行<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">-V</span></code>查看是否绑定了Python3.7+。如果绑定的版本不对，建议使用<code class="docutils literal notranslate"><span class="pre">python3.7</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span></code>代替<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code>命令。</p>
<br/>
<p><font size=3><strong>Q: 使用pip安装依赖库时提示<code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">matching</span> <span class="pre">distribution</span> <span class="pre">found</span> <span class="pre">for</span> <span class="pre">XXX</span></code>错误，应该怎么办？</strong></font></p>
<p>A: 请执行<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">config</span> <span class="pre">list</span></code>，查看当前软件库索引路径<code class="docutils literal notranslate"><span class="pre">index-url</span></code>。某些情况下，软件库索引会出现更新滞后，可尝试设置其它软件库索引路径。</p>
<br/>
<p><font size=3><strong>Q: MindSpore网站安装页面找不到MindSpore Insight和MindSpore Armour的whl包，无法安装怎么办？</strong></font></p>
<p>A: 您可以从<a class="reference external" href="https://www.mindspore.cn/versions">MindSpore网站下载地址</a>下载whl包，通过<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code>命令进行安装。</p>
<br/>
<p><font size=3><strong>Q: pip同时安装MindSpore CPU和GPU版本，import时报错 <code class="docutils literal notranslate"><span class="pre">cannot</span> <span class="pre">import</span> <span class="pre">name 'context'</span> <span class="pre">from</span> <span class="pre">'mindspore'</span></code>，应该怎么办？</strong></font></p>
<p>A: MindSpore不同版本的安装目录名同为<code class="docutils literal notranslate"><span class="pre">mindspore</span></code>，安装在同一个Python环境可能产生目录相互覆盖问题，导致无法使用，如果需要使用多平台版本的MindSpore时（例如同时使用CPU和GPU版本），请先卸载其他版本再安装新版本。</p>
<br/>
<p><font size=3><strong>Q: 在ARM架构的环境上使用pip安装MindSpore时报错: <code class="docutils literal notranslate"><span class="pre">Could</span> <span class="pre">not</span> <span class="pre">find</span> <span class="pre">a</span> <span class="pre">version</span> <span class="pre">that</span> <span class="pre">satisfies</span> <span class="pre">the</span> <span class="pre">requirement</span></code>应该怎么办？</strong></font></p>
<p>A: 大概率是因为pip版本低于19.3，无法识别<code class="docutils literal notranslate"><span class="pre">manylinux2014</span></code>标签，导致pip install阶段下载了错误版本的<code class="docutils literal notranslate"><span class="pre">numpy</span></code>或<code class="docutils literal notranslate"><span class="pre">scipy</span></code>等python软件包，进而引发了无法找到构建依赖的问题，请执行<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--upgrade</span> <span class="pre">pip</span></code>将环境中的pip升级到19.3以上，重新安装MindSpore。</p>
<br/>
<p><font size=3><strong>Q: pip安装MindSpore时，报错 <code class="docutils literal notranslate"><span class="pre">Running</span> <span class="pre">setup.py</span> <span class="pre">install</span> <span class="pre">for</span> <span class="pre">pillow:</span> <span class="pre">finished</span> <span class="pre">with</span> <span class="pre">status</span> <span class="pre">'error'</span> <span class="pre">...</span> <span class="pre">The</span> <span class="pre">headers</span> <span class="pre">or</span> <span class="pre">library</span> <span class="pre">files</span> <span class="pre">could</span> <span class="pre">not</span> <span class="pre">be</span> <span class="pre">found</span> <span class="pre">for</span> <span class="pre">jpeg,</span> <span class="pre">...</span></code>，应该怎么办？</strong></font></p>
<p>A: MindSpore依赖三方库<code class="docutils literal notranslate"><span class="pre">pillow</span></code>进行部分的数据处理操作，而<code class="docutils literal notranslate"><span class="pre">pillow</span></code>需要依赖环境上已经安装<code class="docutils literal notranslate"><span class="pre">libjpeg</span></code>库，以Ubuntu环境为例，可以使用<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">libjpeg8-dev</span></code>来安装<code class="docutils literal notranslate"><span class="pre">libjpeg</span></code>库，然后再安装MindSpore。</p>
<br/>
<p><font size=3><strong>Q: ARM版macOS在Python3.8环境中编译的mindspore包安装后执行报错 <code class="docutils literal notranslate"><span class="pre">ImportError:</span> <span class="pre">dlopen</span> <span class="pre">...</span> <span class="pre">no</span> <span class="pre">suitable</span> <span class="pre">image</span> <span class="pre">found.</span>&#160; <span class="pre">Did</span> <span class="pre">find:</span> <span class="pre">..._psutil_osx.cpython-38-darwin.so:</span> <span class="pre">mach-o,</span> <span class="pre">but</span> <span class="pre">wrong</span> <span class="pre">architecture</span></code>怎么办？</strong></font></p>
<p>A: ARM版macOS上的Python3.8包含的psutil无法正确识别当前系统的架构，会自编译为适配x86架构的二进制，因此出现冲突问题。如果在Conda环境则执行<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">uninstall</span> <span class="pre">psutil;</span> <span class="pre">conda</span> <span class="pre">install</span> <span class="pre">psutil</span></code>，如果在非Conda环境中则执行<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">uninstall</span> <span class="pre">psutil;</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--no-binary</span> <span class="pre">:all:</span> <span class="pre">psutil</span></code>以正确安装psutil。
具体原因可以参照该<a class="reference external" href="https://stackoverflow.com/questions/72619143/unable-to-import-psutil-on-m1-mac-with-miniforge-mach-o-file-but-is-an-incomp">stackoverflow帖子</a>。</p>
<br/>
<p><font size=3><strong>Q: ARM版macOS在安装MindSpore时，安装依赖库scipy报错 <code class="docutils literal notranslate"><span class="pre">error:</span> <span class="pre">metadata-generation-failed</span></code> 怎么办？</strong></font></p>
<p>A: 对应ARM版macOS的scipy在pypi源的版本仅适配MacOS 12以上版本的操作系统，低版本操作系统会自动下载scipy源码包进行编译，大概率会遇到编译失败问题。如果使用Conda环境，建议执行<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">uninstall</span> <span class="pre">scipy;</span> <span class="pre">conda</span> <span class="pre">install</span> <span class="pre">scipy</span></code>，MacOS 11系统强烈建议使用Conda以规避类似的兼容性问题。</p>
<br/>
</section>
<section id="conda安装">
<h2>Conda安装<a class="headerlink" href="#conda安装" title="永久链接至标题"></a></h2>
<p><font size=3><strong>Q: Ascend硬件平台，在个人的Conda环境中，有时候出现报错RuntimeError: json.exception.parse_error.101 parse error at line 1, column 1: syntax error while parsing value - invalid literal; last read: ‘T’，该怎么处理？</strong></font></p>
<p>A: 出现这种类型的报错，大概率是run包更新后个人的Conda环境中没有更新te或topi或hccl工具包，可以将当前Conda环境中的上述几个工具包卸载，然后使用如下命令再重新安装: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">/usr/local/Ascend/ascend-toolkit/latest/lib64/{te/topi/hccl}-{version}-py3-none-any.whl</span></code>。</p>
<br/>
</section>
<section id="source安装">
<h2>Source安装<a class="headerlink" href="#source安装" title="永久链接至标题"></a></h2>
<p><font size=3><strong>Q: 编译时<code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">-p</span></code>方式和 <code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">-e</span></code>方式的区别？</strong></font></p>
<p>A: MindSpore Serving的编译和运行依赖MindSpore，Serving提供两种编译方式: 一种指定已安装的MindSpore路径，即<code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">-p</span> <span class="pre">{python</span> <span class="pre">site-packages}/mindspore/lib</span></code>，避免编译Serving时再编译MindSpore；另一种，编译Serving时，编译配套的MindSpore，Serving会将<code class="docutils literal notranslate"><span class="pre">-e</span></code>、<code class="docutils literal notranslate"><span class="pre">-V</span></code>和<code class="docutils literal notranslate"><span class="pre">-j</span></code>选项透传给MindSpore。
比如，在Serving目录下，<code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">-e</span> <span class="pre">ascend</span> <span class="pre">-V</span> <span class="pre">910</span> <span class="pre">-j32</span></code>:</p>
<ul class="simple">
<li><p>首先将会以<code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">-e</span> <span class="pre">ascend</span> <span class="pre">-V</span> <span class="pre">910</span> <span class="pre">-j32</span></code>方式编译<code class="docutils literal notranslate"><span class="pre">third_party/mindspore</span></code>目录下的MindSpore；</p></li>
<li><p>其次，编译脚本将MindSpore编译结果作为Serving的编译依赖。</p></li>
</ul>
<br/>
<p><font size=3><strong>Q: MindSpore安装: 版本0.6.0-beta + Ascend 910 + Ubuntu_aarch64 + Python3.7.5，手动下载对应版本的whl包，编译并安装gmp6.1.2。其他Python库依赖已经安装完成，执行样例失败，报错显示找不到so文件。</strong></font></p>
<p>A: <code class="docutils literal notranslate"><span class="pre">libdatatransfer.so</span></code>动态库是<code class="docutils literal notranslate"><span class="pre">fwkacllib/lib64</span></code>目录下的，请先在<code class="docutils literal notranslate"><span class="pre">/usr/local</span></code>目录查找到这个库所在的路径，然后把这个路径加到<code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>环境变量中，确认设置生效后，再执行。</p>
<br/>
<p><font size=3><strong>Q: 在Linux中已经安装了交叉编译工具，但是编译命令要怎么写呢？</strong></font></p>
<p>A: arm64版本编译: <code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">build.sh</span> <span class="pre">-I</span> <span class="pre">arm64</span></code>；arm32版本编译: <code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">build.sh</span> <span class="pre">-I</span> <span class="pre">arm32</span></code>；注意要先设置环境变量，指定Android NDK路径: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">ANDROID_NDK=/path/to/android-ndk</span></code>，编译成功后，在output目录可以找到编译出的包。</p>
<br/>
<p><font size=3><strong>Q: 源码编译MindSpore过程时间过长，或时常中断该怎么办？</strong></font></p>
<p>A: MindSpore通过submodule机制引入第三方依赖包，其中<code class="docutils literal notranslate"><span class="pre">Protobuf</span></code>依赖包（v3.13.0）下载速度不稳定，建议您提前进行包缓存。</p>
<br/>
<p><font size=3><strong>Q: 源码编译时，报错<code class="docutils literal notranslate"><span class="pre">MD5</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">match</span></code>，应该怎么办？</strong></font></p>
<p>A: 这种报错可能是在编译的时候由于网络问题导致一些第三方库下载中断，之后重新编译的时候，该文件已经存在但是不完整，在校验MD5的时候失败。解决方法是: 删除.mslib缓存路径中的相关第三方库，然后重新编译。</p>
<br/>
<p><font size=3><strong>Q: 环境上安装了Python3.7.5，环境变量设置正确，编译MindSpore时仍然报错<code class="docutils literal notranslate"><span class="pre">Python3</span> <span class="pre">not</span> <span class="pre">found</span></code>，应该怎么办？</strong></font></p>
<p>A: 可能是因为当前环境上的Python未包含动态库。编译MindSpore需要动态链接Python库，因此需要使用开启动态库编译选项的Python3.7.5，即在源码编译Python时使用<code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">--enable-shared</span></code>命令。</p>
<br/>
<p><font size=3><strong>Q: 如何改变第三方依赖库安装路径？</strong></font></p>
<p>A: 第三方依赖库的包默认安装在build/mindspore/.mslib目录下，可以设置环境变量MSLIBS_CACHE_PATH来改变安装目录，比如 <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">MSLIBS_CACHE_PATH</span> <span class="pre">=</span> <span class="pre">~/.mslib</span></code>。</p>
<br/>
<p><font size=3><strong>Q: 编译失败后，应该清理哪些路径以确保上次失败的编译结果不会影响到下一次编译？</strong></font></p>
<p>A: 在编译MindSpore时，如果:</p>
<ol class="arabic simple">
<li><p>第三方组件下载或编译失败，例如icu4c的patch动作失败返回错误信息<code class="docutils literal notranslate"><span class="pre">Cmake</span> <span class="pre">Error</span> <span class="pre">at</span> <span class="pre">cmake/utils.cmake:301</span> <span class="pre">(message):</span> <span class="pre">Failed</span> <span class="pre">patch:</span></code>，则进入编译目录下的<code class="docutils literal notranslate"><span class="pre">build/mindspore/.mslib</span></code>目录，或由<code class="docutils literal notranslate"><span class="pre">MSLIBS_CACHE_PATH</span></code>环境变量指定的第三方软件安装目录，并删除其中的对应软件。</p></li>
<li><p>其他阶段编译失败，或打算删除上一次编译结果，完全重新编译时，直接删除<code class="docutils literal notranslate"><span class="pre">build</span></code>目录即可。</p></li>
</ol>
<br/>
<p><font size=3><strong>Q: 编译时报错，打开CMakeError.txt提示pthread找不到怎么办？</strong></font></p>
<p>A: 真正的失败原因会体现在打屏的日志里，CMakeError.txt无参考价值，请寻找打屏日志中的第一个报错。</p>
<br/>
<p><font size=3><strong>Q: 编译成功后，运行时报错<code class="docutils literal notranslate"><span class="pre">undefined</span> <span class="pre">reference</span> <span class="pre">to</span> <span class="pre">XXXX</span></code>或<code class="docutils literal notranslate"><span class="pre">undefined</span> <span class="pre">symbol</span> <span class="pre">XXXX</span></code>怎么办？</strong></font></p>
<p>A: 可能的原因有:</p>
<ol class="arabic simple">
<li><p>如果问题是<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code>更新代码后出现，请删除掉<code class="docutils literal notranslate"><span class="pre">build</span></code>文件夹，排除前次构建的影响。</p></li>
<li><p>如果问题是修改代码后出现，可以使用<code class="docutils literal notranslate"><span class="pre">c++filt</span> <span class="pre">XXXX</span></code>查看该符号的意义，有可能是函数未实现、虚函数未实现、依赖未链接等原因引起。</p></li>
<li><p>如果问题发生在Ascend平台，排除上述原因后，很可能是由于MindSpore版本与CANN版本不匹配引起的，版本匹配关系参考<a class="reference external" href="https://www.mindspore.cn/install">安装说明</a>。</p></li>
</ol>
<br/>
<p><font size=3><strong>Q: 编译完成时告警，<code class="docutils literal notranslate"><span class="pre">SetuptoolsDeprecationWarning:</span> <span class="pre">setup.py</span> <span class="pre">install</span> <span class="pre">is</span> <span class="pre">deprecated</span> <span class="pre">...</span></code>怎么办？</strong></font></p>
<p>A: Python的setuptools组件从58.3.0版本宣布放弃直接调用setup.py的使用方式，因此在安装了较高版本的setuptools的Python环境中源码编译时会遇到类似告警。该告警暂不影响MindSpore的使用，我们将在后续的版本中更换打包方式。
详情可以参照<a class="reference external" href="https://setuptools.pypa.io/en/latest/history.html#v58-3-0">setuptools版本记录</a></p>
<br/>
<p><font size=3><strong>Q: MindSpore要求的配套软件版本与Ubuntu默认版本不一致怎么办？</strong></font></p>
<p>A: 当前MindSpore只提供版本配套关系，需要您手动进行配套软件的安装升级。（<strong>注明</strong>: MindSpore要求Python3.7.5和gcc7.3，Ubuntu 16.04默认为Python3.5和gcc5，Ubuntu 18.04默认自带Python3.7.3和gcc7.4）。</p>
<br/>
<p><font size=3><strong>Q: 执行用例报错<code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">module</span> <span class="pre">named</span> <span class="pre">'mindpore.version'</span></code>，应该怎么办？</strong></font></p>
<p>A: 当有这种报错时，有可能是在创建了和MindSpore安装包相同名字的路径中执行用例，导致Python导入包的时候优先找到了当前目录下，而当前目录没有version.py这个文件。解决方法就是目录重命名或者向上退出一级或者多级目录。</p>
<br/>
</section>
<section id="docker安装">
<h2>Docker安装<a class="headerlink" href="#docker安装" title="永久链接至标题"></a></h2>
<p><font size=3><strong>Q: MindSpore是否支持Nvidia GPU独立显卡+Windows操作系统的个人电脑？</strong></font></p>
<p>A: 目前MindSpore支持的情况是GPU+Linux与CPU+Windows的组合配置，Windows+GPU的支持还在开发中。
如果希望在GPU+Windows的环境上运行，可以尝试使用WSL+docker的方式，操作思路:</p>
<ol class="arabic">
<li><p>以WSL方式安装起Ubuntu18.04，参考<a class="reference external" href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">Install Linux on Windows with WSL</a>。</p></li>
<li><p>安装支持WSL的Nvidia驱动以及在WSL运行容器的环境部署，参考<a class="reference external" href="https://docs.nvidia.com/cuda/wsl-user-guide/index.html">CUDA on WSL User Guide</a>。</p>
<blockquote>
<div><p>由于CUDA on WSL还是预览特性，注意参考链接里对Windows版本要求的说明，版本不够的需要做升级。</p>
</div></blockquote>
</li>
<li><p>参考<a class="reference external" href="https://gitee.com/mindspore/mindspore#docker%E9%95%9C%E5%83%8F">Docker镜像</a>，取MindSpore-GPU镜像。如取MindSpore1.0.0版本容器，在WSL Ubuntu18.04中执行<code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">pull</span> <span class="pre">mindspore/mindspore-gpu:1.0.0</span></code>运行容器:</p>
<div class="highlight-docker notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--runtime<span class="o">=</span>nvidia<span class="w"> </span>mindspore/mindspore-gpu:1.0.0<span class="w"> </span>/bin/bash
</pre></div>
</div>
</li>
</ol>
<p>详细步骤可以参考社区提供的实践<a class="reference external" href="https://www.hiascend.com/forum/thread-0235122004927955034-1-1.html">张小白教你安装Windows10的GPU驱动（CUDA和cuDNN）</a>。
在此感谢社区成员<a class="reference external" href="https://www.hiascend.com/forum/otheruser?uid=110545f972cf4903b3deba9cfaac7fc8">张辉</a>的分享。</p>
<br/>
</section>
<section id="卸载">
<h2>卸载<a class="headerlink" href="#卸载" title="永久链接至标题"></a></h2>
<p><font size=3><strong>Q: 如何卸载MindSpore？</strong></font></p>
<p>A: 首先请确定MindSpore的全称，例如gpu版本的MindSpore，可以执行命令<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">uninstall</span> <span class="pre">mindspore-gpu</span></code>进行卸载。</p>
<br/>
</section>
<section id="环境变量">
<h2>环境变量<a class="headerlink" href="#环境变量" title="永久链接至标题"></a></h2>
<p><font size=3><strong>Q: 一些常用的环境变量设置，在新启动的终端窗口中需要重新设置，容易忘记应该怎么办？</strong></font></p>
<p>A: 常用的环境变量设置写入到<code class="docutils literal notranslate"><span class="pre">~/.bash_profile</span></code> 或 <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code>中，可让环境变量设置在新启动的终端窗口中立即生效。</p>
<br/>
<p><font size=3><strong>Q: 使用GPU版本MindSpore时，如何设置<code class="docutils literal notranslate"><span class="pre">DEVICE_ID</span></code>环境变量</strong></font></p>
<p>A: MindSpore GPU模式一般无需设置<code class="docutils literal notranslate"><span class="pre">DEVICE_ID</span></code>环境变量，MindSpore会根据cuda环境变量<code class="docutils literal notranslate"><span class="pre">CUDA_VISIBLE_DEVICES</span></code>，自动选择可见的GPU设备。设置<code class="docutils literal notranslate"><span class="pre">CUDA_VISIBLE_DEVICES</span></code>环境变量后，则<code class="docutils literal notranslate"><span class="pre">DEVICE_ID</span></code>环境变量代表可见GPU设备的下标:</p>
<ul class="simple">
<li><p>执行<code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">CUDA_VISIBLE_DEVICES=1,3,5</span></code>后，<code class="docutils literal notranslate"><span class="pre">DEVICE_ID</span></code>应当被设置为<code class="docutils literal notranslate"><span class="pre">0</span></code>，<code class="docutils literal notranslate"><span class="pre">1</span></code>或<code class="docutils literal notranslate"><span class="pre">2</span></code>，若设置为<code class="docutils literal notranslate"><span class="pre">3</span></code>及以上，MindSpore会由于设备ID不合法而运行失败。</p></li>
</ul>
<br/>
<p><font size=3><strong>Q: 编译应用时报错<code class="docutils literal notranslate"><span class="pre">/usr/bin/ld:</span> <span class="pre">warning:</span> <span class="pre">libxxx.so,</span> <span class="pre">needed</span> <span class="pre">by</span> <span class="pre">libmindspore.so,</span> <span class="pre">not</span> <span class="pre">found</span></code>怎么办？</strong></font></p>
<p>A: 寻找缺少的动态库文件所在目录，添加该路径到环境变量<code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>中。</p>
<br/>
<p><font size=3><strong>Q: 运行应用时出现<code class="docutils literal notranslate"><span class="pre">ModuleNotFoundError:</span> <span class="pre">No</span> <span class="pre">module</span> <span class="pre">named</span> <span class="pre">'te'</span></code>怎么办？</strong></font></p>
<p>A: 首先确认环境安装是否正确，<code class="docutils literal notranslate"><span class="pre">te</span></code>、<code class="docutils literal notranslate"><span class="pre">topi</span></code>等whl包是否正确安装。如果用户环境中有多个Python版本，如Conda虚拟环境中，需<code class="docutils literal notranslate"><span class="pre">ldd</span> <span class="pre">name_of_your_executable_app</span></code>确认应用所链接的<code class="docutils literal notranslate"><span class="pre">libpython3.so</span></code>是否与当前Python路径一致，如果不一致需要调整环境变量<code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>顺序，例如</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="sb">`</span>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import distutils.sysconfig as sysconfig; print(sysconfig.get_config_var(&#39;LIBDIR&#39;))&quot;</span><span class="sb">`</span>:<span class="nv">$LD_LIBRARY_PATH</span>
</pre></div>
</div>
<p>将当前的<code class="docutils literal notranslate"><span class="pre">python</span></code>命令对应程序的运行库路径加入到<code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>的最前面。</p>
<br/>
<p><font size=3><strong>Q: 运行应用时出现<code class="docutils literal notranslate"><span class="pre">error</span> <span class="pre">while</span> <span class="pre">loading</span> <span class="pre">shared</span> <span class="pre">libraries:</span> <span class="pre">libpython3.so:</span> <span class="pre">cannot</span> <span class="pre">open</span> <span class="pre">shared</span> <span class="pre">object</span> <span class="pre">file:</span> <span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span></code>怎么办？</strong></font></p>
<p>A: 该报错通常出现在装有多个Python版本的环境中，首先确认Python的<code class="docutils literal notranslate"><span class="pre">lib</span></code>目录是否在环境变量<code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>中，可执行以下命令进行设置：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="sb">`</span>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import distutils.sysconfig as sysconfig; print(sysconfig.get_config_var(&#39;LIBDIR&#39;))&quot;</span><span class="sb">`</span>:<span class="nv">$LD_LIBRARY_PATH</span>
</pre></div>
</div>
<p>另外如果在Conda虚拟环境中，Python 3.7.6以下版本不含该动态库，可以执行命令升级Conda中Python的版本，如：<code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">python=3.7.11</span></code>。</p>
<br/>
<p><font size=3><strong>Q: Ascend AI处理器配套软件包与其他依赖软件已安装，但是执行MindSpore时提示<code class="docutils literal notranslate"><span class="pre">Cannot</span> <span class="pre">open</span> <span class="pre">shared</span> <span class="pre">objectfile:</span> <span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span></code>该怎么办？</strong></font></p>
<p>A: 常见原因有两种: Ascend AI处理器配套软件包或固件/驱动包版本不正确，或没有安装在默认位置且未配置相应的环境变量。</p>
<ol class="arabic simple">
<li><p>打开Ascend AI处理器配套软件包安装目录，默认<code class="docutils literal notranslate"><span class="pre">/usr/local/Ascend</span></code>下，各个子目录中的<code class="docutils literal notranslate"><span class="pre">version.info</span></code>文件，观察其版本号是否与当前使用的MindSpore版本一直，参照<a class="reference external" href="https://www.mindspore.cn/install/">安装页面</a>中关于Ascend AI处理器配套软件包版本的描述。如果版本不配套，请更换软件包或MindSpore版本。</p></li>
<li><p>检查Ascend AI处理器配套软件包与其他依赖软件是否安装在默认位置，MindSpore会尝试从默认安装位置<code class="docutils literal notranslate"><span class="pre">/usr/local/Ascend</span></code>自动加载，如果将Ascend软件包安装在自定义位置，请参照<a class="reference external" href="https://www.mindspore.cn/install/">安装页面</a>页面的安装指南一栏设置环境变量。如果将其他依赖软件安装在自定义位置，请根据其位置关系设置<code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>环境变量。</p></li>
</ol>
<br/>
</section>
<section id="安装验证">
<h2>安装验证<a class="headerlink" href="#安装验证" title="永久链接至标题"></a></h2>
<p><font size=3><strong>Q: MindSpore的GPU版本对设备的计算能力有限制吗？</strong></font></p>
<p>A: 目前MindSpore仅支持计算能力大于5.3的设备。</p>
<br/>
<p><font size=3><strong>Q: 个人电脑CPU环境安装MindSpore后验证代码时报错: <code class="docutils literal notranslate"><span class="pre">the</span> <span class="pre">pointer[session]</span> <span class="pre">is</span> <span class="pre">null</span></code>，具体代码如下，该如何验证是否安装成功呢？</strong></font></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore</span> <span class="k">as</span> <span class="nn">ms</span>
<span class="kn">import</span> <span class="nn">mindspore.ops</span> <span class="k">as</span> <span class="nn">ops</span>

<span class="n">ms</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">device_target</span><span class="o">=</span><span class="s2">&quot;Ascend&quot;</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ops</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>
</pre></div>
</div>
<p>A: 验证安装是否成功，可以参照对应版本的安装指南页面中 <code class="docutils literal notranslate"><span class="pre">验证是否成功安装</span></code> 段落的描述：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import mindspore;mindspore.run_check()&quot;</span>
</pre></div>
</div>
<p>如果输出：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>MindSpore version: 版本号
The result of multiplication calculation is correct, MindSpore has been installed successfully!
</pre></div>
</div>
<p>说明MindSpore安装成功了。</p>
<br/>
<p><font size=3><strong>Q: <code class="docutils literal notranslate"><span class="pre">Linux</span></code>平台下执行用例的时候会报错<code class="docutils literal notranslate"><span class="pre">sh:1:python:not</span> <span class="pre">found</span></code>或者由于链接到了Python2.7的版本中而报错<code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">module</span> <span class="pre">named</span> <span class="pre">mindspore._extends.remote</span></code>，该怎么处理？</strong></font></p>
<p>A: 遇到类似的问题，大多是由于Python的环境问题，可以通过如下方式检查Python环境是否是MindSpore运行时所需要的环境。</p>
<ul class="simple">
<li><p>在终端窗口中输入<code class="docutils literal notranslate"><span class="pre">python</span></code>，检查以下进入Python交互环境中的版本信息，如果直接报错则是没有Python的软连接；如果进入的是非Python3.7版本的环境，则当前Python环境不是MindSpore运行所需要的。</p></li>
<li><p>执行<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">ln</span> <span class="pre">-sf</span> <span class="pre">/usr/bin/python3.7.x</span> <span class="pre">/usr/bin/python</span></code>创建Python的软连接，然后再检查执行。</p></li>
</ul>
<br/>
<p><font size=3><strong>Q: 在脚本中<code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">mindspore</span></code>之前import了其他三方库，提示如下错误(<code class="docutils literal notranslate"><span class="pre">/{your_path}/libgomp.so.1:</span> <span class="pre">cannot</span> <span class="pre">allocate</span> <span class="pre">memory</span> <span class="pre">in</span> <span class="pre">static</span> <span class="pre">TLS</span> <span class="pre">block</span></code>)该怎么解决?</strong></font></p>
<p>A: 上述问题较为常见，当前有两种可行的解决方法，可任选其一:</p>
<ul class="simple">
<li><p>交换import的顺序，先<code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">mindspore</span></code>再import其他三方库。</p></li>
<li><p>执行程序之前先添加环境变量（<code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">LD_PRELOAD=/{your_path}/libgomp.so.1</span></code>），其中<code class="docutils literal notranslate"><span class="pre">{your_path}</span></code>是上述报错提示的路径。</p></li>
</ul>
<br/>
<p><font size=3><strong>Q: mindspore和gmp都已经通过源码编译安装后，在脚本中执行<code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">mindspore</span></code>，
提示如下错误(<code class="docutils literal notranslate"><span class="pre">ImportError:</span> <span class="pre">libgmpxx.so:</span> <span class="pre">cannot</span> <span class="pre">open</span> <span class="pre">shared</span> <span class="pre">object</span> <span class="pre">file:</span> <span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span></code>)该怎么解决?</strong></font></p>
<p>A: 上述问题的原因是在编译安装gmp库的时候没有设置<code class="docutils literal notranslate"><span class="pre">--enable-cxx</span></code>，正确的gmp编译安装方式如下（假设已经下载了gmp6.1.2安装包）：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">$cd</span><span class="w"> </span>gmp-6.1.2
$./configure<span class="w"> </span>--enable-cxx
<span class="nv">$make</span>
<span class="nv">$make</span><span class="w"> </span>check
<span class="nv">$sudo</span><span class="w"> </span>make<span class="w"> </span>install
</pre></div>
</div>
<br/>
<p><font size=3><strong>Q: 运行MindSpore时出现告警 <code class="docutils literal notranslate"><span class="pre">UserWarning:</span> <span class="pre">The</span> <span class="pre">value</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">smallest</span> <span class="pre">subnormal</span> <span class="pre">for</span> <span class="pre">&lt;class</span> <span class="pre">'numpy.float64'&gt;</span> <span class="pre">type</span> <span class="pre">is</span> <span class="pre">zero.</span></code> 应该怎么解决？</strong></font></p>
<p>A: 上述问题出现在安装了较新版本的numpy(&gt;=1.22.0)版本的ARM python3.9环境上。告警来自numpy而非MindSpore。如果告警影响到了代码的正常调测，可以考虑手动安装较低版本的numpy(&lt;=1.21.2)来规避。</p>
<br/>
<p><font size=3><strong>Q: 运行MindSpore时出现报错 <code class="docutils literal notranslate"><span class="pre">AttributeError:</span> <span class="pre">module</span> <span class="pre">'six'</span> <span class="pre">has</span> <span class="pre">no</span> <span class="pre">attribute</span> <span class="pre">'ensure_text'</span></code> 应该怎么解决？</strong></font></p>
<p>A: 上述问题的原因是环境安装了较新版本的<code class="docutils literal notranslate"><span class="pre">asttokens</span></code>(&gt;=2.0.6)，其依赖的<code class="docutils literal notranslate"><span class="pre">six</span></code>版本不匹配。更新<code class="docutils literal notranslate"><span class="pre">six</span></code>版本(&gt;=1.12.0)即可解决。</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../note/env_var_list.html" class="btn btn-neutral float-left" title="环境变量" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="data_processing.html" class="btn btn-neutral float-right" title="数据处理" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2022, MindSpore.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>