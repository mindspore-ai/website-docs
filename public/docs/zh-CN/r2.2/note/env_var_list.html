<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>环境变量 &mdash; MindSpore master 文档</title><script>;(()=>{const e=localStorage.getItem("ms-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;(e?"dark"===e:t)&&document.documentElement.setAttribute("data-o-theme","dark")})();</script><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script><script src="../_static/jquery.js"></script>
        <script src="../_static/js/theme.js"></script><script src="../_static/underscore.js"></script><script src="../_static/doctools.js"></script><script src="../_static/translations.js"></script><script crossorigin="anonymous" integrity="sha256-1fEPhSsRKlFKGfK3eO710tEweHh1fwokU5wFGDHO+vg=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="安装" href="../faq/installation.html" />
    <link rel="prev" title="Tensor索引支持" href="index_support.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">设计</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../design/overview.html">MindSpore设计概览</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/programming_paradigm.html">函数式和对象式融合编程范式</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/dynamic_graph_and_static_graph.html">动静态图结合</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/distributed_training_design.html">分布式并行原生</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/data_engine.html">高性能数据处理引擎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/all_scenarios.html">全场景统一架构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/graph_fusion_engine.html">图算融合加速引擎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/pluggable_device.html">三方硬件对接</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/glossary.html">术语</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">模型库</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="official_models.html">官方模型库</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.html">mindspore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.nn.html">mindspore.nn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.ops.html">mindspore.ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.ops.primitive.html">mindspore.ops.primitive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.amp.html">mindspore.amp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.train.html">mindspore.train</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.communication.html">mindspore.communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.common.initializer.html">mindspore.common.initializer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.dataset.html">mindspore.dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.dataset.transforms.html">mindspore.dataset.transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.mindrecord.html">mindspore.mindrecord</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.nn.probability.html">mindspore.nn.probability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.rewrite.html">mindspore.rewrite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.boost.html">mindspore.boost</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.numpy.html">mindspore.numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.scipy.html">mindspore.scipy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_python/mindspore.experimental.html">mindspore.experimental</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API映射</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_mapping/pytorch_api_mapping.html">PyTorch与MindSpore API映射表</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">迁移指南</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/overview.html">迁移指南概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/enveriment_preparation.html">环境准备与资料获取</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/analysis_and_preparation.html">模型分析与准备</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/typical_api_comparision.html">PyTorch对比</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/model_development/model_development.html">MindSpore网络搭建</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/debug_and_tune.html">调试调优</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/sample_code.html">网络迁移调试实例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/migrator_with_tools.html">网络迁移工具应用实践指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide/faq.html">常见问题</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">语法支持</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="static_graph_syntax_support.html">静态图语法支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="static_graph_syntax/operators.html">静态图语法-运算符</a></li>
<li class="toctree-l1"><a class="reference internal" href="static_graph_syntax/statements.html">静态图语法-Python语句</a></li>
<li class="toctree-l1"><a class="reference internal" href="static_graph_syntax/python_builtin_functions.html">静态图语法-Python内置函数</a></li>
<li class="toctree-l1"><a class="reference internal" href="index_support.html">Tensor索引支持</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">环境变量</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">环境变量</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#算子编译">算子编译</a></li>
<li class="toctree-l2"><a class="reference internal" href="#并行训练">并行训练</a></li>
<li class="toctree-l2"><a class="reference internal" href="#动态组网">动态组网</a></li>
<li class="toctree-l2"><a class="reference internal" href="#精度敏感检测">精度敏感检测</a></li>
<li class="toctree-l2"><a class="reference internal" href="#运行数据保存">运行数据保存</a></li>
<li class="toctree-l2"><a class="reference internal" href="#日志">日志</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dump功能">Dump功能</a></li>
<li class="toctree-l2"><a class="reference internal" href="#数据处理性能">数据处理性能</a></li>
<li class="toctree-l2"><a class="reference internal" href="#调试器">调试器</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cann">CANN</a></li>
<li class="toctree-l2"><a class="reference internal" href="#其他">其他</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq/installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/data_processing.html">数据处理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/implement_problem.html">执行问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/network_compilation.html">网络编译</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/operators_compile.html">算子编译</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/usage_migrate_3rd.html">第三方框架迁移使用</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/performance_tuning.html">性能调优</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/precision_tuning.html">精度调优</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/distributed_parallel.html">分布式并行</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/inference.html">推理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/feature_advice.html">特性咨询</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../RELEASE.html">Release Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>环境变量</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/note/env_var_list.rst.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="环境变量">
<h1>环境变量<a class="headerlink" href="#环境变量" title="永久链接至标题"></a></h1>
<a class="reference external image-reference" href="https://gitee.com/mindspore/docs/blob/r2.2/docs/mindspore/source_zh_cn/note/env_var_list.rst"><img alt="查看源文件" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.2/resource/_static/logo_source.svg" /></a>
<p>本文介绍MindSpore的环境变量。</p>
<section id="算子编译">
<h2>算子编译<a class="headerlink" href="#算子编译" title="永久链接至标题"></a></h2>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 30%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>环境变量</p></th>
<th class="head"><p>功能</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>取值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>MS_BUILD_PROCESS_NUM</p></td>
<td><p>Ascend后端编译时，指定并行编译进程数。</p></td>
<td><p>Integer</p></td>
<td><p>1~24：允许设置并行进程数取值范围</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>MS_COMPILER_CACHE_ENABLE</p></td>
<td><p>指定是否保存和加载前端的图编译缓存。该功能与 mindspore context 中的 <a class="reference external" href="https://www.mindspore.cn/docs/zh-CN/r2.2/api_python/mindspore/mindspore.set_context.html#mindspore.set_context">enable_compile_cache</a> 相同。</p>
<p>注意：该环境变量优先级低于 <cite>enable_compile_cache</cite> context。</p>
</td>
<td><p>Integer</p></td>
<td><p>0：关闭前端图编译缓存功能</p>
<p>1：开启前端图编译缓存功能</p>
</td>
<td><p>如果与 <cite>MS_COMPILER_CACHE_PATH</cite> 一起使用，编译缓存文件将保存在 <cite>${MS_COMPILER_CACHE_PATH}</cite> <cite>/rank_${RANK_ID}/graph_cache/</cite> 目录下。</p>
<p>其中 <cite>RANK_ID</cite> 为多卡训练场景中的卡号，单卡场景默认 <cite>RANK_ID=0</cite> 。</p>
</td>
</tr>
<tr class="row-even"><td><p>MS_COMPILER_CACHE_PATH</p></td>
<td><p>MindSpore编译缓存目录，存储图和算子编译过程生成的缓存文件，如 <cite>graph_cache</cite> , <cite>kernel_meta</cite> , <cite>somas_meta</cite> 等</p></td>
<td><p>String</p></td>
<td><p>缓存文件路径，支持相对路径与绝对路径</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>MS_COMPILER_OP_LEVEL</p></td>
<td><p>Ascend后端编译时，开启debug功能，生成TBE指令映射文件。</p>
<p>注意：仅Ascend AI处理器环境使用。</p>
</td>
<td><p>Integer</p></td>
<td><p>0~4，允许设置级别取值范围。</p>
<p>0：不开启算子debug功能，删除算子编译缓存文件</p>
<p>1：生成TBE指令映射文件 <cite>*.cce</cite> 和python-cce映射文件 <cite>*_loc.json</cite> ，开启debug功能</p>
<p>2：生成TBE指令映射文件 <cite>*.cce</cite> 和python-cce映射文件 <cite>*_loc.json</cite> ，开启debug功能，关闭编译优化开关，开启ccec调试功能（ccec编译器选项设置为-O0-g）</p>
<p>3：不开启算子debug功能，默认值</p>
<p>4：生成TBE指令映射文件 <cite>*.cce</cite> 和UB融合计算描述文件 <cite>{$kernel_name}_compute.json</cite></p>
</td>
<td><p>发生AICore Error时，如果需要保存算子cce文件，可以设置 <cite>MS_COMPILER_OP_LEVEL</cite> 为1或2。</p></td>
</tr>
<tr class="row-even"><td><p>MS_DEV_DISABLE_PREBUILD</p></td>
<td><p>Ascend后端编译时，关闭算子预编译，默认不设置此环境变量。算子预编译可能会修正算子注册的fusion_type属性进而影响到算子融合，如遇到融合算子性能较差时，可尝试开启此环境变量验证是否是融合算子本身问题。</p></td>
<td><p>Boolean</p></td>
<td><p>true：关闭预编译</p>
<p>false：使能预编译</p>
</td>
<td></td>
</tr>
</tbody>
</table>
<p>具体用法详见 <a class="reference external" href="https://mindspore.cn/tutorials/experts/zh-CN/r2.2/optimize/op_compilation.html">算子增量编译</a> ，常见问题详见 <a class="reference external" href="https://mindspore.cn/docs/zh-CN/r2.2/faq/operators_compile.html">FAQ</a> 。</p>
</section>
<section id="并行训练">
<h2>并行训练<a class="headerlink" href="#并行训练" title="永久链接至标题"></a></h2>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 30%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>环境变量</p></th>
<th class="head"><p>功能</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>取值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>RANK_ID</p></td>
<td><p>指定深度学习时调用Ascend AI处理器的逻辑ID。</p></td>
<td><p>Integer</p></td>
<td><p>0~7，多机并行时不同server中DEVICE_ID会有重复，使用RANK_ID可以避免这个问题（多机并行时 RANK_ID = SERVER_ID * DEVICE_NUM + DEVICE_ID，DEVICE_ID指当前机器的第几个Ascend AI处理器。）</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>RANK_SIZE</p></td>
<td><p>指定深度学习时调用Ascend AI处理器的数量。</p>
<p>注意：Ascend AI处理器，使用多卡执行分布式用例时，由用户指定。</p>
</td>
<td><p>Integer</p></td>
<td><p>1~8，调用Ascend AI处理器的数量</p></td>
<td><p>与RANK_TABLE_FILE配合使用</p></td>
</tr>
<tr class="row-even"><td><p>RANK_TABLE_FILE</p></td>
<td><p>路径指向文件，包含指定多Ascend AI处理器环境中Ascend AI处理器的 <cite>device_id</cite> 对应的 <cite>device_ip</cite> 。</p>
<p>注意：Ascend AI处理器，使用多卡执行分布式用例时，由用户指定。</p>
</td>
<td><p>String</p></td>
<td><p>文件路径，支持相对路径与绝对路径</p></td>
<td><p>与RANK_SIZE配合使用</p></td>
</tr>
<tr class="row-odd"><td><p>MS_COMM_COMPILER_OPT</p></td>
<td><p>Ascend后端图模式下编译时，指定可以复用的通信算子的上限。</p>
<p>注意：Ascend AI处理器，使用多卡执行分布式用例时，由用户指定。</p>
</td>
<td><p>Integer</p></td>
<td><p>-1或正整数：使能通信子图复用，-1表示使用框架默认值，其他正整数表示用户指定值</p>
<p>不设置或其他值：关闭通信子图复用</p>
</td>
<td></td>
</tr>
<tr class="row-even"><td><p>DEVICE_ID</p></td>
<td><p>昇腾AI处理器的ID，即Device在AI server上的序列号。</p></td>
<td><p>Integer</p></td>
<td><p>昇腾AI处理器的ID，取值范围：[0, 实际Device数量-1]。</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="动态组网">
<h2>动态组网<a class="headerlink" href="#动态组网" title="永久链接至标题"></a></h2>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 30%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>环境变量</p></th>
<th class="head"><p>功能</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>取值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>MS_ROLE</p></td>
<td><p>指定本进程角色。</p></td>
<td><p>String</p></td>
<td><p>MS_SCHED: 代表Scheduler进程，一个训练任务只启动一个Scheduler，负责组网，容灾恢复等，不会执行训练代码。</p>
<p>MS_WORKER: 代表Worker进程，一般设置分布式训练进程为此角色。</p>
<p>MS_PSERVER: 代表Parameter Server进程，只有在Parameter Server模式下此角色生效，具体请参考 <a class="reference external" href="https://www.mindspore.cn/tutorials/experts/zh-CN/r2.2/parallel/parameter_server_training.html">Parameter Server模式</a> 。</p>
</td>
<td><p>Worker和Parameter Server进程会向Scheduler进程注册从而完成组网。</p></td>
</tr>
<tr class="row-odd"><td><p>MS_SCHED_HOST</p></td>
<td><p>指定Scheduler的IP地址。</p></td>
<td><p>String</p></td>
<td><p>合法的IP地址。</p></td>
<td><p>当前版本暂不支持IPv6地址。</p></td>
</tr>
<tr class="row-even"><td><p>MS_SCHED_PORT</p></td>
<td><p>指定Scheduler绑定端口号。</p></td>
<td><p>Integer</p></td>
<td><p>1024～65535范围内的端口号。</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>MS_NODE_ID</p></td>
<td><p>指定本进程的ID，集群内唯一。</p></td>
<td><p>String</p></td>
<td><p>代表本进程的唯一ID，默认由MindSpore自动生成。</p></td>
<td><p>MS_NODE_ID在在以下情况需要设置，一般情况下无需设置，由MindSpore自动生成：</p>
<p>开启容灾场景：容灾恢复时需要获取当前进程ID，从而向Scheduler重新注册。</p>
<p>开启GLOG日志重定向场景：为了保证各训练进程日志独立保存，需设置进程ID，作为日志保存路径后缀。</p>
<p>指定进程rank id场景：用户可通过设置MS_NODE_ID为某个整数，来指定本进程的rank id。</p>
</td>
</tr>
<tr class="row-even"><td><p>MS_WORKER_NUM</p></td>
<td><p>指定角色为MS_WORKER的进程数量。</p></td>
<td><p>Integer</p></td>
<td><p>大于0的整数。</p></td>
<td><p>用户启动的Worker进程数量应当与此环境变量值相等。若小于此数值，组网失败；若大于此数值，Scheduler进程会根据Worker注册先后顺序完成组网，多余的Worker进程会启动失败。</p></td>
</tr>
<tr class="row-odd"><td><p>MS_SERVER_NUM</p></td>
<td><p>指定角色为MS_PSERVER的进程数量。</p></td>
<td><p>Integer</p></td>
<td><p>大于0的整数。</p></td>
<td><p>只在Parameter Server训练模式下需要设置。</p></td>
</tr>
<tr class="row-even"><td><p>MS_ENABLE_RECOVERY</p></td>
<td><p>开启容灾。</p></td>
<td><p>Integer</p></td>
<td><p>1代表开启，0代表关闭。默认为0。</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>MS_RECOVERY_PATH</p></td>
<td><p>持久化路径文件夹。</p></td>
<td><p>String</p></td>
<td><p>合法的用户目录。</p></td>
<td><p>Worker和Scheduler进程在执行过程中会进行必要的持久化，如用于恢复组网的节点信息以及训练业务中间状态等，并通过文件保存。</p></td>
</tr>
<tr class="row-even"><td><p>MS_HCCL_CM_INIT</p></td>
<td><p>是否使用CM方式初始化HCCL。</p></td>
<td><p>Integer</p></td>
<td><p>1代表是，0代表否。默认为0。</p></td>
<td><p>此环境变量只在Ascend硬件平台并且通信域数量较多的情况下建议开启。开启此环境变量后，能够降低HCCL集合通信库的内存占用，并且训练任务执行方式与rank table启动方式相同。</p></td>
</tr>
</tbody>
</table>
<p>具体用法详见 <a class="reference external" href="https://www.mindspore.cn/tutorials/experts/zh-CN/r2.2/parallel/dynamic_cluster.html">动态组网</a> 。</p>
</section>
<section id="精度敏感检测">
<h2>精度敏感检测<a class="headerlink" href="#精度敏感检测" title="永久链接至标题"></a></h2>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 30%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>环境变量</p></th>
<th class="head"><p>功能</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>取值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>NPU_ASD_ENABLE</p></td>
<td><p>是否开启精度敏感检测功能</p></td>
<td><p>Integer</p></td>
<td><p>0：关闭精度敏感检测功能</p>
<p>1：开启精度敏感检测功能</p>
</td>
<td><p>目前本特性仅支持Atlas A2 训练系列产品，仅支持检测Transformer类模型，bfloat16数据类型，训练过程中出现的精度异常</p></td>
</tr>
<tr class="row-odd"><td><p>NPU_ASD_UPPER_THRESH</p></td>
<td><p>控制检测的绝对数值阈值</p></td>
<td><p>String</p></td>
<td><p>格式为整型数据对，其中第一个元素控制绝对数值一级阈值，第二个元素控制绝对数值二级阈值</p>
<p>减小阈值可以检出波动更小的异常数据，增加检出率，增大阈值与之相反</p>
<p>在不配置该环境变量的默认情况下，<cite>NPU_ASD_UPPER_THRESH=1000000,10000</cite></p>
</td>
<td></td>
</tr>
<tr class="row-even"><td><p>NPU_ASD_SIGMA_THRESH</p></td>
<td><p>控制检测的相对数值阈值</p></td>
<td><p>String</p></td>
<td><p>格式为整型数据对，其中第一个元素控制相对数值一级阈值，第二个元素控制相对数值二级阈值</p>
<p>减小阈值可以检出波动更小的异常数据，增加检出率，增大阈值与之相反</p>
<p>在不配置该环境变量的默认情况下，<cite>NPU_ASD_SIGMA_THRESH=100000,5000</cite></p>
</td>
<td></td>
</tr>
</tbody>
</table>
<p>精度敏感检测的更多内容详见 <a class="reference external" href="https://www.mindspore.cn/tutorials/experts/zh-CN/r2.2/debug/sdc.html">精度敏感检测</a> 。</p>
</section>
<section id="运行数据保存">
<h2>运行数据保存<a class="headerlink" href="#运行数据保存" title="永久链接至标题"></a></h2>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 30%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>环境变量</p></th>
<th class="head"><p>功能</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>取值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>MS_RDR_ENABLE</p></td>
<td><p>是否开启程序运行数据记录器（RDR），如果MindSpore出现了运行异常，会自动导出MindSpore中预先记录的数据以辅助定位运行异常的原因</p></td>
<td><p>Integer</p></td>
<td><p>1：开启RDR功能</p>
<p>0：关闭RDR功能</p>
</td>
<td><p>配合 <cite>MS_RDR_MODE</cite> 与 <cite>MS_RDR_PATH</cite> 使用</p></td>
</tr>
<tr class="row-odd"><td><p>MS_RDR_MODE</p></td>
<td><p>指定运行数据记录器（RDR）导出数据的模式</p></td>
<td><p>Integer</p></td>
<td><p>1：仅在训练进程异常终止时导出数据</p>
<p>2：训练进程异常终止或正常结束时导出数据</p>
<p>默认值：1</p>
</td>
<td><p>配合 <cite>MS_RDR_ENABLE=1</cite> 使用</p></td>
</tr>
<tr class="row-even"><td><p>MS_RDR_PATH</p></td>
<td><p>配置程序运行数据记录器（RDR）的文件导出的根目录路径</p></td>
<td><p>String</p></td>
<td><p>目录路径，仅支持绝对路径</p></td>
<td><p>配合 <cite>MS_RDR_ENABLE=1</cite> 使用，最终RDR文件将 <cite>${MS_RDR_PATH}</cite> <cite>/rank_${RANK_ID}/rdr/</cite> 目录下。
其中 <cite>RANK_ID</cite> 为多卡训练场景中的卡号，单卡场景默认 <cite>RANK_ID=0</cite> 。</p></td>
</tr>
</tbody>
</table>
<p>具体用法详见 <a class="reference external" href="https://www.mindspore.cn/tutorials/experts/zh-CN/r2.2/debug/rdr.html#running-data-recorder">Running Data Recorder</a> 。</p>
</section>
<section id="日志">
<h2>日志<a class="headerlink" href="#日志" title="永久链接至标题"></a></h2>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 30%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>环境变量</p></th>
<th class="head"><p>功能</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>取值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>GLOG_log_dir</p></td>
<td><p>指定日志输出的路径</p></td>
<td><p>String</p></td>
<td><p>文件路径，支持相对路径与绝对路径</p></td>
<td><p>与 <cite>GLOG_logtostderr</cite> 一起使用</p>
<p>若 <cite>GLOG_logtostderr</cite> 的值为0，则必须设置此变量</p>
<p>若指定了 <cite>GLOG_log_dir</cite> 且 <cite>GLOG_logtostderr</cite> 的值为1时，则日志输出到屏幕，不输出到文件</p>
<p>日志保存路径为： <cite>指定的路径/rank_${rank_id}/logs/</cite> ，非分布式训练场景下， <cite>rank_id</cite> 为0；分布式训练场景下， <cite>rank_id</cite> 为当前设备在集群中的ID</p>
<p>C++和Python的日志会被输出到不同的文件中，C++日志的文件名遵从 <cite>GLOG</cite> 日志文件的命名规则，这里是 <cite>mindspore.机器名.用户名.log.日志级别.时间戳.进程ID</cite> ，Python日志的文件名为 <cite>mindspore.log.进程ID</cite></p>
<p><cite>GLOG_log_dir</cite> 只能包含大小写字母、数字、”-”、”_”、”/”等字符</p>
</td>
</tr>
<tr class="row-odd"><td><p>GLOG_log_max</p></td>
<td><p>控制MindSpore C++模块日志单文件大小，可以通过该环境变量更改日志文件默认的最大值</p></td>
<td><p>Integer</p></td>
<td><p>正整数，默认值：50MB</p></td>
<td><p>如果当前写入的日志文件超过最大值，则新输出的日志内容会写入到新的日志文件中</p></td>
</tr>
<tr class="row-even"><td><p>GLOG_logtostderr</p></td>
<td><p>控制日志的输出方式</p></td>
<td><p>Integer</p></td>
<td><p>1:日志输出到屏幕</p>
<p>0:日志输出到文件</p>
<p>默认值：1</p>
</td>
<td><p>与GLOG_log_dir一起使用</p></td>
</tr>
<tr class="row-odd"><td><p>GLOG_stderrthreshold</p></td>
<td><p>日志模块在将日志输出到文件的同时也会将日志打印到屏幕，GLOG_stderrthreshold用于控制此情况下打印到屏幕的日志级别</p></td>
<td><p>Integer</p></td>
<td><p>0-DEBUG</p>
<p>1-INFO</p>
<p>2-WARNING</p>
<p>3-ERROR</p>
<p>4-CRITICAL</p>
<p>默认值：2</p>
</td>
<td></td>
</tr>
<tr class="row-even"><td><p>GLOG_v</p></td>
<td><p>控制日志的级别</p></td>
<td><p>Integer</p></td>
<td><p>0-DEBUG</p>
<p>1-INFO</p>
<p>2-WARNING</p>
<p>3-ERROR，表示程序执行出现报错，输出错误日志，程序可能不会终止</p>
<p>4-CRITICAL，表示程序执行出现异常，将会终止执行程序</p>
<p>默认值：2</p>
</td>
<td><p>指定日志级别后，将会输出大于或等于该级别的日志信息</p></td>
</tr>
<tr class="row-odd"><td><p>logger_backupCount</p></td>
<td><p>用于控制MindSpore Python模块日志文件数量</p></td>
<td><p>Integer</p></td>
<td><p>默认值：30</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>logger_maxBytes</p></td>
<td><p>用于控制MindSpore Python模块日志单文件大小</p></td>
<td><p>Integer</p></td>
<td><p>默认值：52428800 bytes</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>MS_SUBMODULE_LOG_v</p></td>
<td><p>指定MindSpore C++各子模块的日志级别</p></td>
<td><p>Dict {String:Integer…}</p></td>
<td><p>0-DEBUG</p>
<p>1-INFO</p>
<p>2-WARNING</p>
<p>3-ERROR</p>
</td>
<td><p>赋值方式为：<cite>MS_SUBMODULE_LOG_v=”{SubModule1:LogLevel1,SubModule2:LogLevel2,…}”</cite></p>
<p>其中被指定子模块的日志级别将覆盖 <cite>GLOG_v</cite> 在此模块内的设置，
此处子模块的日志级别 <cite>LogLevel</cite> 与 <cite>GLOG_v</cite> 的日志级别含义相同，
MindSpore子模块列表详见 <a class="reference external" href="https://gitee.com/mindspore/mindspore/blob/r2.2/mindspore/core/utils/log_adapter.cc">sub-module_names</a>。</p>
<p>例如可以通过 <cite>GLOG_v=1 MS_SUBMODULE_LOG_v=”{PARSER:2,ANALYZER:2}”</cite>
把 <cite>PARSER</cite> 和 <cite>ANALYZER</cite> 模块的日志级别设为WARNING，其他模块的日志级别设为INFO</p>
</td>
</tr>
</tbody>
</table>
<p>注意：glog不支持日志文件的绕接，如果需要控制日志文件对磁盘空间的占用，可选用操作系统提供的日志文件管理工具，例如：Linux的logrotate。请在 <cite>import mindspore</cite> 之前设置日志相关环境变量。</p>
</section>
<section id="dump功能">
<h2>Dump功能<a class="headerlink" href="#dump功能" title="永久链接至标题"></a></h2>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 30%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>环境变量</p></th>
<th class="head"><p>功能</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>取值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>MINDSPORE_DUMP_CONFIG</p></td>
<td><p>指定 <a class="reference external" href="https://www.mindspore.cn/tutorials/experts/zh-CN/r2.2/debug/dump.html#同步dump">云侧Dump功能</a>
或 <a class="reference external" href="https://www.mindspore.cn/lite/docs/zh-CN/r2.2/use/benchmark_tool.html#dump功能">端侧Dump功能</a> 所依赖的配置文件的路径</p></td>
<td><p>String</p></td>
<td><p>文件路径，支持相对路径与绝对路径</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>MS_DIAGNOSTIC_DATA_PATH</p></td>
<td><p>使用 <a class="reference external" href="https://www.mindspore.cn/tutorials/experts/zh-CN/r2.2/debug/dump.html#同步dump">云侧Dump功能</a> 时，
如果Dump配置文件没有设置 <cite>path</cite> 字段或者设置为空字符串，则 <cite>$MS_DIAGNOSTIC_DATA_PATH</cite> <cite>/debug_dump</cite> 就会被当做path的值。
若Dump配置文件中设置了 <cite>path</cite> 字段，则仍以该字段的实际取值为准。</p></td>
<td><p>String</p></td>
<td><p>文件路径，只支持绝对路径</p></td>
<td><p>与MINDSPORE_DUMP_CONFIG配合使用</p></td>
</tr>
<tr class="row-even"><td><p>MS_DEV_DUMP_BPROP</p></td>
<td><p>在当前路径dump算子反向图的ir文件</p></td>
<td><p>String</p></td>
<td><p>“on”，表示在当前路径dump算子反向图的ir文件</p></td>
<td><p>实验性质的环境变量</p></td>
</tr>
<tr class="row-odd"><td><p>MS_DEV_DUMP_PACK</p></td>
<td><p>在当前路径生成trace构图的ir文件</p></td>
<td><p>String</p></td>
<td><p>“on”，表示在当前路径生成trace构图的ir文件</p></td>
<td><p>实验性质的环境变量</p></td>
</tr>
</tbody>
</table>
<p>具体用法详见 <a class="reference external" href="https://www.mindspore.cn/tutorials/experts/zh-CN/r2.2/debug/dump.html">Dump功能调试</a> 。</p>
</section>
<section id="数据处理性能">
<h2>数据处理性能<a class="headerlink" href="#数据处理性能" title="永久链接至标题"></a></h2>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 30%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>环境变量</p></th>
<th class="head"><p>功能</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>取值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DATASET_ENABLE_NUMA</p></td>
<td><p>是否开启Dataset模块的numa绑核功能，在大多数分布式场景下numa绑核都能提升数据处理效率和端到端性能</p></td>
<td><p>String</p></td>
<td><p>True: 开启Dataset模块的numa绑核功能</p></td>
<td><p>与libnuma.so配合使用</p></td>
</tr>
<tr class="row-odd"><td><p>MS_CACHE_HOST</p></td>
<td><p>开启cache时，cache服务所在的IP</p></td>
<td><p>String</p></td>
<td><p>Cache Server所在机器的IP</p></td>
<td><p>与MS_CACHE_PORT一起使用</p></td>
</tr>
<tr class="row-even"><td><p>MS_CACHE_PORT</p></td>
<td><p>开启cache时，cache服务所在的端口</p></td>
<td><p>String</p></td>
<td><p>Cache Server所在机器的端口</p></td>
<td><p>与MS_CACHE_HOST一起使用</p></td>
</tr>
<tr class="row-odd"><td><p>MS_DATASET_SINK_QUEUE</p></td>
<td><p>指定数据下沉队列的容量大小</p></td>
<td><p>Integer</p></td>
<td><p>1~128：有效的队列容量大小设置范围</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>MS_ENABLE_NUMA</p></td>
<td><p>是否开启全局numa绑核功能，提升端到端性能</p></td>
<td><p>String</p></td>
<td><p>True: 开启全局numa绑核功能</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>OPTIMIZE</p></td>
<td><p>是否执行dataset数据处理 pipeline 树优化，在适合数据处理算子融合的场景下，可以提升数据处理效率</p></td>
<td><p>String</p></td>
<td><p>true: 开启pipeline树优化</p>
<p>false: 关闭pipeline树优化</p>
</td>
<td></td>
</tr>
</tbody>
</table>
<p>具体用法详见 <a class="reference external" href="https://mindspore.cn/tutorials/experts/zh-CN/r2.2/dataset/cache.html">单节点数据缓存</a>
和 <a class="reference external" href="https://mindspore.cn/tutorials/experts/zh-CN/r2.2/dataset/optimize.html">数据处理性能优化</a> 。</p>
</section>
<section id="调试器">
<h2>调试器<a class="headerlink" href="#调试器" title="永久链接至标题"></a></h2>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 30%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>环境变量</p></th>
<th class="head"><p>功能</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>取值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ENABLE_MS_DEBUGGER</p></td>
<td><p>是否在训练中启动Debugger</p></td>
<td><p>Boolean</p></td>
<td><p>1：开启Debugger</p>
<p>0：关闭Debugger</p>
</td>
<td><p>与MS_DEBUGGER_HOST、MS_DEBUGGER_PORT一起使用</p></td>
</tr>
<tr class="row-odd"><td><p>MS_DEBUGGER_HOST</p></td>
<td><p>MindSpore Insight Debugger服务的IP</p></td>
<td><p>String</p></td>
<td><p>启动MindSpore Insight调试器的机器的IP</p></td>
<td><p>与ENABLE_MS_DEBUGGER=1、MS_DEBUGGER_PORT一起使用</p></td>
</tr>
<tr class="row-even"><td><p>MS_DEBUGGER_PARTIAL_MEM</p></td>
<td><p>是否开启部分内存复用（只有在Debugger选中的节点才会关闭这些节点的内存复用）</p></td>
<td><p>Boolean</p></td>
<td><p>1：开启Debugger选中节点的内存复用</p>
<p>0：关闭Debugger选中节点的内存复用</p>
</td>
<td></td>
</tr>
<tr class="row-odd"><td><p>MS_DEBUGGER_PORT</p></td>
<td><p>连接MindSpore Insight Debugger Server的端口</p></td>
<td><p>Integer</p></td>
<td><p>1~65536，连接MindSpore Insight Debugger Server的端口</p></td>
<td><p>与ENABLE_MS_DEBUGGER=1、MS_DEBUGGER_HOST一起使用</p></td>
</tr>
</tbody>
</table>
<p>具体用法详见 <a class="reference external" href="https://www.mindspore.cn/mindinsight/docs/zh-CN/r2.2/debugger.html">调试器</a> 。</p>
</section>
<section id="cann">
<h2>CANN<a class="headerlink" href="#cann" title="永久链接至标题"></a></h2>
<p>CANN的环境变量详见 <a class="reference external" href="https://www.hiascend.com/document/detail/zh/canncommercial/70RC1/reference/envvar/envref_07_0001.html">昇腾社区</a> 。请在 <cite>import mindspore</cite> 之前设置CANN的环境变量。</p>
</section>
<section id="其他">
<h2>其他<a class="headerlink" href="#其他" title="永久链接至标题"></a></h2>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 30%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>环境变量</p></th>
<th class="head"><p>功能</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>取值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>GROUP_INFO_FILE</p></td>
<td><p>指定通信域信息存储路径</p></td>
<td><p>String</p></td>
<td><p>通信域信息文件路径，支持相对路径与绝对路径</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>GRAPH_OP_RUN</p></td>
<td><p>图模式下以任务下沉方式运行pipeline大网络模型时，可能会由于流资源限制而无法正常启动，此环境变量可以指定图模式的执行方式，配置为0表示任务下沉，是默认执行方式；1则表示非任务下沉方式，该方式没有流的限制，但性能有所下降。</p></td>
<td><p>Integer</p></td>
<td><p>0：执行任务下沉</p>
<p>1：执行非任务下沉</p>
</td>
<td></td>
</tr>
<tr class="row-even"><td><p>MS_DEV_JIT_SYNTAX_LEVEL</p></td>
<td><p>设置2时使能Fallback功能</p></td>
<td><p>Integer</p></td>
<td><p>2: 开启Fallback功能</p>
<p>0: 关闭Fallback功能</p>
<p>默认值：2</p>
</td>
<td></td>
</tr>
<tr class="row-odd"><td><p>MS_JIT_MODULES</p></td>
<td><p>指定静态图模式下哪些模块需要JIT静态编译，其函数方法会被编译成静态计算图。</p></td>
<td><p>String</p></td>
<td><p>模块名，对应import导入的顶层模块的名称。如果有多个，使用英文逗号分隔。例如：<cite>export MS_JIT_MODULES=mindflow,mindyolo</cite>。</p></td>
<td><p>默认情况下，第三方库之外的模块都会进行JIT静态编译。MindSpore套件如 <cite>mindflow</cite>、<cite>mindyolo</cite> 等并不会被视作第三方库，如果有类似MindSpore套件的模块，内部存在 <cite>nn.Cell</cite>、<cite>&#64;ms.jit</cite> 修饰函数或需要编译成静态计算图的函数方法，可以通过配置该环境变量，使该模块进行JIT静态编译而不会被当成第三方库。</p></td>
</tr>
<tr class="row-even"><td><p>MS_JIT_IGNORE_MODULES</p></td>
<td><p>指定静态图模式下哪些模块是第三方库，不进行JIT静态编译，其函数方法会被解释执行。</p></td>
<td><p>String</p></td>
<td><p>模块名，对应import导入的顶层模块的名称。如果有多个，使用英文逗号分隔。例如：<cite>export MS_JIT_IGNORE_MODULES=numpy,scipy</cite>。</p></td>
<td><p>静态图模式能够自动识别第三方库，一般情况下不需要为NumPy、SciPy这些可识别的第三方库设置该环境变量。如果 <cite>MS_JIT_IGNORE_MODULES</cite> 和 <cite>MS_JIT_MODULES</cite> 同时指定同一个模块名，前者生效，后者不生效。</p></td>
</tr>
<tr class="row-odd"><td><p>MS_JIT_DISPLAY_PROGRESS</p></td>
<td><p>指定是否打印编译进度的信息。</p></td>
<td><p>Integer</p></td>
<td><p>1：打印关键的编译进度的信息。</p>
<p>不设置或其它值：不打印编译进度的信息。</p>
</td>
<td></td>
</tr>
<tr class="row-even"><td><p>MS_EXCEPTION_DISPLAY_LEVEL</p></td>
<td><p>控制异常信息显示级别</p></td>
<td><p>Integer</p></td>
<td><p>0: 显示与模型开发者和框架开发者相关的异常信息</p>
<p>1: 显示与模型开发者相关的异常信息</p>
<p>默认值：0</p>
</td>
<td></td>
</tr>
<tr class="row-odd"><td><p>MS_OM_PATH</p></td>
<td><p>配置task异常时dump数据路径以及图编译出错时dump的analyze_fail.ir文件的保存目录，保存路径为：指定的路径/rank_${rand_id}/om</p></td>
<td><p>String</p></td>
<td><p>文件路径，支持相对路径与绝对路径</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>OPTION_PROTO_LIB_PATH</p></td>
<td><p>RPOTO依赖库库路径</p></td>
<td><p>String</p></td>
<td><p>目录路径，支持相对路径与绝对路径</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>MS_KERNEL_LAUNCH_SKIP</p></td>
<td><p>指定执行过程中需要跳过的算子或者子图</p></td>
<td><p>String</p></td>
<td><p>ALL或者all：跳过所有算子和子图的执行</p>
<p>算子名字（如ReLU）：跳过所有ReLU算子的执行</p>
<p>子图名字（如kernel_graph_1）：跳过子图kernel_graph_1的执行，用于子图下沉模式</p>
</td>
<td></td>
</tr>
<tr class="row-even"><td><p>MS_DEV_SAVE_GRAPHS_SORT_MODE</p></td>
<td><p>选择生成ir文件的图打印排序方式</p></td>
<td><p>Integer</p></td>
<td><p>0: 打印默认ir文件</p>
<p>1: 打印异序ir文件</p>
</td>
<td></td>
</tr>
<tr class="row-odd"><td><p>MS_DEV_DUMP_IR_FORMAT</p></td>
<td><p>配置IR图中展示哪些信息</p></td>
<td><p>Integer</p></td>
<td><p>0：除return节点外，只打印节点的operator和节点的输入，并且简化子图的打印信息。</p>
<p>1：打印除debug info和scope以外的所有信息。</p>
<p>2或不设置：打印所有信息。</p>
</td>
<td></td>
</tr>
<tr class="row-even"><td><p>MS_DEV_DUMP_IR_INTERVAL</p></td>
<td><p>设置间隔多少个IR文件打印保存一个IR文件，减少IR图的打印数量。</p></td>
<td><p>Integer</p></td>
<td><p>1或不设置：打印保存所有IR文件。</p>
<p>其它数值：按照指定的间隔个数保存IR文件。</p>
</td>
<td><p>该环境变量与MS_DEV_DUMP_IR_PASSES同时打开时，优先遵从MS_DEV_DUMP_IR_PASSES的规则，该环境变量不会生效。</p></td>
</tr>
<tr class="row-odd"><td><p>MS_DEV_DUMP_IR_PASSES</p></td>
<td><p>根据文件名指定保存哪些IR文件。</p></td>
<td><p>String</p></td>
<td><p>文件名或文件名的一部分。如果有多个，使用逗号隔开。例如`export MS_DEV_DUMP_IR_PASSES=recompute,renormalize`。</p></td>
<td><p>设置该环境变量时，无论MS_DEV_SAVE_GRAPHS设置为什么等级，详细的前端IR文件都会参与筛选和打印。</p></td>
</tr>
<tr class="row-even"><td><p>MS_DEV_SIDE_EFFECT_LOAD_ELIM</p></td>
<td><p>优化冗余显存拷贝操作</p></td>
<td><p>Integer</p></td>
<td><p>0: 不做显存优化，占用显存最多。</p>
<p>1: 保守地做部分显存优化。</p>
<p>2: 在损耗一定编译性能的前提下，尽量多地优化显存。</p>
<p>3: 不保证网络的精度，显存消耗最少。</p>
<p>默认值：1</p>
</td>
<td></td>
</tr>
<tr class="row-odd"><td><p>MS_PYNATIVE_GE</p></td>
<td><p>设置动态图模式下是否执行GE</p></td>
<td><p>Integer</p></td>
<td><p>0: 不执行GE。</p>
<p>1: 执行GE。</p>
<p>默认值: 0</p>
</td>
<td><p>实验性质的环境变量</p></td>
</tr>
<tr class="row-even"><td><p>GC_COLLECT_IN_CELL</p></td>
<td><p>是否对未使用的Cell对象进行垃圾回收</p></td>
<td><p>Integer</p></td>
<td><p>1：对未使用的Cell对象进行垃圾回收</p>
<p>不设置或其他值：不会显示调用垃圾回收机制</p>
</td>
<td></td>
</tr>
<tr class="row-odd"><td><p>PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION</p></td>
<td><p>选择Protocol Buffers后端使用什么语言实现</p></td>
<td><p>String</p></td>
<td><p>“cpp”：使用c++后端实现</p>
<p>“python”：使用python后端实现</p>
<p>不设置或其他值：使用python后端实现</p>
</td>
<td></td>
</tr>
<tr class="row-even"><td><p>MS_DEV_DISABLE_BPROP_CACHE</p></td>
<td><p>关闭bprop缓存图功能</p></td>
<td><p>String</p></td>
<td><p>“on”，表示关闭bprop缓存图功能</p></td>
<td><p>实验性质的环境变量，关闭缓存功能会导致构图时间延长</p></td>
</tr>
<tr class="row-odd"><td><p>MS_DEV_USE_PY_BPROP</p></td>
<td><p>指定算子的bprop使用python版本，不使用cpp expander</p></td>
<td><p>String</p></td>
<td><p>算子名称，可以指定多个算子，以”,”分隔</p></td>
<td><p>实验性质的环境变量，如果不存在python版本的bprop函数，会执行出错</p></td>
</tr>
<tr class="row-even"><td><p>MS_DEV_DISABLE_TRACE</p></td>
<td><p>关闭trace构图功能</p></td>
<td><p>String</p></td>
<td><p>“on”，表示关闭trace构图功能</p></td>
<td><p>实验性质的环境变量</p></td>
</tr>
<tr class="row-odd"><td><p>MS_ENABLE_GE</p></td>
<td><p>使能GE流程</p></td>
<td><p>Integer</p></td>
<td><p>0: 不使能GE流程。</p>
<p>1：使能GE流程。</p>
<p>默认值：0。</p>
</td>
<td><p>仅限Ascend 910 AI处理器环境使用。实验性质的环境变量。</p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index_support.html" class="btn btn-neutral float-left" title="Tensor索引支持" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="../faq/installation.html" class="btn btn-neutral float-right" title="安装" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 MindSpore.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>