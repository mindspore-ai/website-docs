

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Examples &mdash; MindSpore Federated master documentation</title>
  

  
   
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  
  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="SyncFLJob" href="java_api_syncfljob.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> MindSpore Federated
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="federated_server.html">Federated-Server</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="federated_client.html">Federated-Client</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="java_api_flparameter.html">FLParameter</a></li>
<li class="toctree-l2"><a class="reference internal" href="java_api_syncfljob.html">SyncFLJob</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fljobrun-for-starting-federated-learning">flJobRun() for Starting Federated Learning</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modelinference-for-inferring-multiple-input-data-records">modelInference() for Inferring Multiple Input Data Records</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MindSpore Federated</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="federated_client.html">Federated-Client</a> &raquo;</li>
        
      <li>Examples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/interface_description_federated_client.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<!-- TOC -->
<ul class="simple">
<li><p><a class="reference external" href="#examples">Examples</a></p>
<ul>
<li><p><a class="reference external" href="#fljobrun-for-starting-federated-learning">flJobRun() for Starting Federated Learning</a></p></li>
<li><p><a class="reference external" href="#modelinference-for-inferring-multiple-input-data-records">ModelInference() for Inferring Multiple Input Data Records</a></p></li>
<li><p><a class="reference external" href="#getmodel-for-obtaining-the-latest-model-on-the-cloud">getModel() for Obtaining the Latest Model on the Cloud</a></p></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<p><a href="https://gitee.com/mindspore/docs/blob/r1.3/docs/federated/api/source_en/interface_description_federated_client.md" target="_blank"><img src="https://gitee.com/mindspore/docs/raw/r1.3/resource/_static/logo_source.png"></a></p>
<div class="section" id="fljobrun-for-starting-federated-learning">
<h2>flJobRun() for Starting Federated Learning<a class="headerlink" href="#fljobrun-for-starting-federated-learning" title="Permalink to this headline">¶</a></h2>
<p>Before calling the flJobRun() API, instantiate the parameter class FLParameter and set related parameters as follows:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
<th>Remarks</th>
</tr>
</thead>
<tbody>
<tr>
<td>trainDataset</td>
<td>String</td>
<td>Y</td>
<td>Path of the training dataset</td>
<td>The training data of a sentiment classification task is in .txt format. The training files data.bin and label.bin in the image classification task are combined by commas (,).</td>
</tr>
<tr>
<td>vocabFile</td>
<td>String</td>
<td>Y</td>
<td>Path of the dictionary file for data preprocessing</td>
<td>This parameter is mandatory for sentiment classification tasks. This parameter does not need to be set for image classification tasks, and the default value is null.</td>
</tr>
<tr>
<td>idsFile</td>
<td>String</td>
<td>Y</td>
<td>Path of the mapping ID file of a dictionary</td>
<td>This parameter is mandatory for sentiment classification tasks. This parameter does not need to be set for image classification tasks, and the default value is null.</td>
</tr>
<tr>
<td>testDataset</td>
<td>String</td>
<td>N</td>
<td>Path of the test dataset</td>
<td>1. For image classification tasks, this parameter does not need to be set and the default value is null. For sentiment classification tasks, if this parameter is not set, verification is not performed during training.<br />2. The test data of a sentiment classification task is in .txt format. The test files data.bin and label.bin in the image classification task are combined by commas (,).</td>
</tr>
<tr>
<td>flName</td>
<td>String</td>
<td>Y</td>
<td>Name of the model used for federated learning</td>
<td>Set this parameter to <code>albert</code> for sentiment classification tasks or <code>lenet</code> for the LeNet scenario.</td>
</tr>
<tr>
<td>trainModelPath</td>
<td>String</td>
<td>Y</td>
<td>Path of a training model used for federated learning, which is an absolute path of the .ms file</td>
<td></td>
</tr>
<tr>
<td>inferModelPath</td>
<td>String</td>
<td>Y</td>
<td>Path of an inference model used for federated learning, which is an absolute path of the .ms file</td>
<td>The value of this parameter need to be the same as that of trainModelPath for supervised sentiment classification tasks and image classification tasks.</td>
</tr>
<tr>
<td>clientID</td>
<td>String</td>
<td>Y</td>
<td>Unique ID of a client</td>
<td></td>
</tr>
<tr>
<td>ip</td>
<td>String</td>
<td>Y</td>
<td>IP address of a service started on the server, for example, <code>10.113.216.106</code></td>
<td>The IP address and port number will be changed to the hostname later.</td>
</tr>
<tr>
<td>port</td>
<td>Integer</td>
<td>Y</td>
<td>Port number of a service started on the server</td>
<td>The IP address and port number will be changed to the hostname later.</td>
</tr>
<tr>
<td>useHttps</td>
<td>Boolean</td>
<td>N</td>
<td>Whether to perform SSL certificate authentication for device-cloud communication</td>
<td>The value false indicates HTTP communication, and the value true indicates HTTPS communication. The default value is false.</td>
</tr>
<tr>
<td>useSSL</td>
<td>Boolean</td>
<td>N</td>
<td>Whether to perform SSL certificate authentication (which applies only to the HTTPS communication scenario) for device-cloud communication</td>
<td>The value false indicates that SSL certificate authentication is not performed. The value true indicates that SSL certificate authentication is performed. The default value is false.</td>
</tr>
</tbody>
</table>
<p>When <code class="docutils literal notranslate"><span class="pre">useSSL</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, only HTTPS communication is supported. In the preceding parameters, <code class="docutils literal notranslate"><span class="pre">useHttps</span></code> must be set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. In addition, the following parameters need to be set:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">FLParameter</span> <span class="n">flParameter</span> <span class="o">=</span> <span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">String</span> <span class="n">hostName</span>  <span class="o">=</span>  <span class="s">&quot;10.113.216.106&quot;</span><span class="p">;</span>
<span class="n">String</span> <span class="n">certPath</span>  <span class="o">=</span>  <span class="s">&quot;client.crt&quot;</span><span class="p">;</span>             <span class="c1">// Provide the absolute path of the certificate.</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setHostName</span><span class="p">(</span><span class="n">hostName</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setCertPath</span><span class="p">(</span><span class="n">certPath</span><span class="p">);</span>
</pre></div>
</div>
<p>Create a SyncFLJob object and use the flJobRun() method of the SyncFLJob class to start a federated learning task.</p>
<p>The sample code is as follows:</p>
<ol>
<li><p>Sample code of a sentiment classification task</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// set parameters</span>
<span class="n">String</span> <span class="n">trainDataset</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/data/albert/client/0.txt&quot;</span><span class="p">;</span>                        <span class="c1">// Absolute path</span>
<span class="n">String</span> <span class="n">vocal_file</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/data/albert/vocab.txt&quot;</span><span class="p">;</span>                           <span class="c1">// Absolute path</span>
<span class="n">String</span> <span class="n">idsFile</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/data/albert/vocab_map_ids.txt&quot;</span><span class="p">;</span>                      <span class="c1">// Absolute path</span>
<span class="n">String</span> <span class="n">testDataset</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/data/albert/eval/eval.txt&quot;</span><span class="p">;</span>    <span class="c1">// Absolute path. If no independent test set is included, use the training data as the test set or do not perform the test (do not set this parameter).</span>
<span class="n">String</span> <span class="n">flName</span> <span class="o">=</span> <span class="s">&quot;albert&quot;</span><span class="p">;</span>  
<span class="n">String</span> <span class="n">trainModelPath</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/ms/albert/albert_train.mindir.ms&quot;</span><span class="p">;</span>                      <span class="c1">// Absolute path</span>
<span class="n">String</span> <span class="n">inferModelPath</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/ms/albert/albert_train.mindir.ms&quot;</span><span class="p">;</span>                      <span class="c1">// Absolute path</span>
<span class="n">String</span> <span class="n">clientID</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">();</span>
<span class="n">String</span> <span class="n">ip</span> <span class="o">=</span> <span class="s">&quot;10.113.216.106&quot;</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">port</span> <span class="o">=</span> <span class="mi">6668</span><span class="p">;</span>
<span class="kt">boolean</span> <span class="n">useHttps</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kt">boolean</span> <span class="n">useSSL</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="n">FLParameter</span> <span class="n">flParameter</span> <span class="o">=</span> <span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setTrainDataset</span><span class="p">(</span><span class="n">trainDataset</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setVocabFile</span><span class="p">(</span><span class="n">vocabFile</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setIdsFile</span><span class="p">(</span><span class="n">idsFile</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setTestDataset</span><span class="p">(</span><span class="n">testDataset</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setFlName</span><span class="p">(</span><span class="n">flName</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setTrainModelPath</span><span class="p">(</span><span class="n">trainModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setInferModelPath</span><span class="p">(</span><span class="n">inferModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setClientID</span><span class="p">(</span><span class="n">clientID</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setIp</span><span class="p">(</span><span class="n">ip</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setPort</span><span class="p">(</span><span class="n">port</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setUseHttps</span><span class="p">(</span><span class="n">useHttps</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setUseSSL</span><span class="p">(</span><span class="n">useSSL</span><span class="p">);</span>

<span class="c1">// start FLJob</span>
<span class="n">SyncFLJob</span> <span class="n">syncFLJob</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SyncFLJob</span><span class="p">();</span>
<span class="n">syncFLJob</span><span class="p">.</span><span class="na">flJobRun</span><span class="p">();</span>
</pre></div>
</div>
</li>
<li><p>Sample code of a LeNet image classification task</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// set parameters</span>
<span class="n">String</span> <span class="n">trainDataset</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/data/3500_clients_bin/f0178_39/f0178_39_bn_9_train_data.bin,SyncFLClient/data/3500_clients_bin/f0178_39/f0178_39_bn_9_train_label.bin&quot;</span><span class="p">;</span>                        <span class="c1">// Absolute path</span>
<span class="n">String</span> <span class="n">testDataset</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/data/3500_clients_bin/f0178_39/f0178_39_bn_1_test_data.bin,SyncFLClient/data/3500_clients_bin/f0178_39/f0178_39_bn_1_test_label.bin&quot;</span><span class="p">;</span>    <span class="c1">// Absolute path. If no independent test set is included, use the training data as the test set or do not perform the test (do not set this parameter).</span>
<span class="n">String</span> <span class="n">flName</span> <span class="o">=</span> <span class="s">&quot;lenet&quot;</span><span class="p">;</span>
<span class="n">String</span> <span class="n">trainModelPath</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/lenet_train.mindir0.ms&quot;</span><span class="p">;</span>                      <span class="c1">// Absolute path</span>
<span class="n">String</span> <span class="n">inferModelPath</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/lenet_train.mindir0.ms&quot;</span><span class="p">;</span>                      <span class="c1">// Absolute path</span>
<span class="n">String</span> <span class="n">clientID</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">();</span>
<span class="n">String</span> <span class="n">ip</span> <span class="o">=</span> <span class="s">&quot;10.113.216.106&quot;</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">port</span> <span class="o">=</span> <span class="mi">6668</span><span class="p">;</span>
<span class="kt">boolean</span> <span class="n">useHttps</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kt">boolean</span> <span class="n">useSSL</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="n">FLParameter</span> <span class="n">flParameter</span> <span class="o">=</span> <span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setTrainDataset</span><span class="p">(</span><span class="n">trainDataset</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setTestDataset</span><span class="p">(</span><span class="n">testDataset</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setFlName</span><span class="p">(</span><span class="n">flName</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setTrainModelPath</span><span class="p">(</span><span class="n">trainModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setInferModelPath</span><span class="p">(</span><span class="n">inferModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setClientID</span><span class="p">(</span><span class="n">clientID</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setIp</span><span class="p">(</span><span class="n">ip</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setPort</span><span class="p">(</span><span class="n">port</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setUseHttps</span><span class="p">(</span><span class="n">useHttps</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setUseSSL</span><span class="p">(</span><span class="n">useSSL</span><span class="p">);</span>

<span class="c1">// start FLJob</span>
<span class="n">SyncFLJob</span> <span class="n">syncFLJob</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SyncFLJob</span><span class="p">();</span>
<span class="n">syncFLJob</span><span class="p">.</span><span class="na">flJobRun</span><span class="p">();</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="modelinference-for-inferring-multiple-input-data-records">
<h2>modelInference() for Inferring Multiple Input Data Records<a class="headerlink" href="#modelinference-for-inferring-multiple-input-data-records" title="Permalink to this headline">¶</a></h2>
<p>Before calling the modelInference() API, instantiate the parameter class FLParameter and set related parameters as follows:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
<th>Applicable API Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>flName</td>
<td>String</td>
<td>Y</td>
<td>Name of the model used for federated learning</td>
<td>Set this parameter to <code>albert</code> for sentiment classification tasks or <code>lenet</code> for image classification tasks.</td>
</tr>
<tr>
<td>dataPath</td>
<td>String</td>
<td>Y</td>
<td>Dataset path</td>
<td>The sentiment classification task is in .txt format without labels. The image classification task is in .bin format.</td>
</tr>
<tr>
<td>vocabFile</td>
<td>String</td>
<td>Y</td>
<td>Path of the dictionary file for data preprocessing</td>
<td>This parameter is mandatory for sentiment classification tasks.  This parameter is not needed for image classification task.</td>
</tr>
<tr>
<td>idsFile</td>
<td>String</td>
<td>Y</td>
<td>Path of the mapping ID file of a dictionary</td>
<td>This parameter is mandatory for sentiment classification tasks. This parameter is not needed for image classification task.</td>
</tr>
<tr>
<td>modelPath</td>
<td>String</td>
<td>Y</td>
<td>Path of an inference model used for federated learning, which is an absolute path of the .ms file</td>
<td>Both the supervised sentiment classification task and the image classification task need to be set as the same as trainModelPath that used in the federated learning training task</td>
</tr>
</tbody>
</table>
<p>Create a SyncFLJob object and use the modelInference() method of the SyncFLJob class to start an inference task on the device. The inferred label array is returned.</p>
<p>The sample code is as follows:</p>
<ol>
<li><p>Sample code of a sentiment classification task</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// set parameters</span>
<span class="n">String</span> <span class="n">flName</span> <span class="o">=</span> <span class="s">&quot;albert&quot;</span><span class="p">;</span>
<span class="n">String</span> <span class="n">dataPath</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/data/albert/eval/eval.txt&quot;</span><span class="p">;</span>                             <span class="c1">// Absolute path</span>
<span class="n">String</span> <span class="n">vocal_file</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/data/albert/vocab.txt&quot;</span><span class="p">;</span>                                  <span class="c1">// Absolute path</span>
<span class="n">String</span> <span class="n">idsFile</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/data/albert/vocab_map_ids.txt&quot;</span><span class="p">;</span>                    <span class="c1">// Absolute path</span>
<span class="n">String</span> <span class="n">modelPath</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/ms/albert/albert_train.mindir.ms&quot;</span><span class="p">;</span>                                <span class="c1">// Absolute path</span>
<span class="n">FLParameter</span> <span class="n">flParameter</span> <span class="o">=</span> <span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setFlName</span><span class="p">(</span><span class="n">flName</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setTestDataset</span><span class="p">(</span><span class="n">dataPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setVocabFile</span><span class="p">(</span><span class="n">vocabFile</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setIdsFile</span><span class="p">(</span><span class="n">idsFile</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setInferModelPath</span><span class="p">(</span><span class="n">modelPath</span><span class="p">);</span>

<span class="c1">// inference</span>
<span class="n">SyncFLJob</span> <span class="n">syncFLJob</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SyncFLJob</span><span class="p">();</span>
<span class="kt">int</span><span class="o">[]</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">syncFLJob</span><span class="p">.</span><span class="na">modelInference</span><span class="p">();</span>
</pre></div>
</div>
</li>
<li><p>Sample code of a LeNet image classification</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// set parameters</span>
<span class="n">String</span> <span class="n">flName</span> <span class="o">=</span> <span class="s">&quot;lenet&quot;</span><span class="p">;</span>
<span class="n">String</span> <span class="n">dataPath</span> <span class="o">=</span> <span class="s">&quot;/SyncFLClient/data/3500_clients_bin/f0178_39/f0178_39_bn_1_test_data.bin,/SyncFLClient/data/3500_clients_bin/f0178_39/f0178_39_bn_1_test_label.bin&quot;</span><span class="p">;</span>     <span class="c1">//绝对路径</span>
<span class="n">String</span> <span class="n">modelPath</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/lenet_train.mindir0.ms&quot;</span><span class="p">;</span>            <span class="c1">// Absolute path</span>
<span class="n">FLParameter</span> <span class="n">flParameter</span> <span class="o">=</span> <span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setFlName</span><span class="p">(</span><span class="n">flName</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ol>
<p>flParameter.setTestDataset(dataPath);
flParameter.setInferModelPath(modelPath);</p>
<p>// inference
SyncFLJob syncFLJob = new SyncFLJob();
int[] labels = syncFLJob.modelInference();</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
## getModel() for Obtaining the Latest Model on the Cloud

Before calling the getModel() API, instantiate the parameter class FLParameter and set related parameters as follows:

&lt;table border=&quot;1&quot; class=&quot;docutils&quot;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Parameter&lt;/th&gt;
&lt;th&gt;Type&lt;/th&gt;
&lt;th&gt;Mandatory&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;th&gt;Remarks&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;flName&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;Name of the model used for federated learning&lt;/td&gt;
&lt;td&gt;Set this parameter to &lt;code&gt;albert&lt;/code&gt; for sentiment classification tasks or &lt;code&gt;lenet&lt;/code&gt; for the LeNet scenario.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;trainModelPath&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;Path of a training model used for federated learning, which is an absolute path of the .ms file&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;inferModelPath&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;Path of an inference model used for federated learning, which is an absolute path of the .ms file&lt;/td&gt;
&lt;td&gt;The value of this parameter need to be the same as that of trainModelPath for supervised sentiment classification tasks and image classification tasks.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ip&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;IP address of a service started on the server, for example, &lt;code&gt;10.113.216.106&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;The IP address and port number will be changed to the hostname later.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;port&lt;/td&gt;
&lt;td&gt;Integer&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;Port number of a service started on the server&lt;/td&gt;
&lt;td&gt;The IP address and port number will be changed to the hostname later.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;useHttps&lt;/td&gt;
&lt;td&gt;Boolean&lt;/td&gt;
&lt;td&gt;N&lt;/td&gt;
&lt;td&gt;Whether to perform SSL certificate authentication for device-cloud communication&lt;/td&gt;
&lt;td&gt;The value false indicates HTTP communication, and the value true indicates HTTPS communication. The default value is false.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;useSSL&lt;/td&gt;
&lt;td&gt;Boolean&lt;/td&gt;
&lt;td&gt;N&lt;/td&gt;
&lt;td&gt;Whether to perform SSL certificate authentication (which applies only to the HTTPS communication scenario) for device-cloud communication&lt;/td&gt;
&lt;td&gt;The value false indicates that SSL certificate authentication is not performed. The value true indicates that SSL certificate authentication is performed. The default value is false.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;useElb&lt;/td&gt;
&lt;td&gt;Boolean&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;Whether to simulate the elastic load balancing. The value true indicates that the client sends requests to a random server address within a specified range. The value false indicates that the client sends a request to a fixed server address.&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;serverNum&lt;/td&gt;
&lt;td&gt;Integer&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;Number of servers that can send requests during elastic load balancing simulation, which must be the same as the number of servers started on the cloud&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

When `useSSL` is set to `true`, only HTTPS communication is supported. In the preceding parameters, `useHttps` must be set to `true`. In addition, the following parameters need to be set:

```java
FLParameter flParameter = FLParameter.getInstance();
String hostName  =  &quot;10.113.216.106&quot;;
String certPath  =  &quot;client.crt&quot;;             // Provide the absolute path of the certificate.

flParameter.setHostName(hostName);
flParameter.setCertPath(certPath);
</pre></div>
</div>
<p>Create a SyncFLJob object and use the getModel() method of the SyncFLJob class to start an asynchronous inference task. The status code of the getModel request is returned.</p>
<p>The sample code is as follows:</p>
<ol>
<li><p>Sentiment classification task</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// set parameters</span>
<span class="n">String</span> <span class="n">flName</span> <span class="o">=</span> <span class="s">&quot;albert&quot;</span><span class="p">;</span>     <span class="c1">// Set this parameter to `albert` for sentiment classification tasks or `lenet` for image classification tasks.</span>
<span class="n">String</span> <span class="n">trainModelPath</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/ms/albert/albert_train.mindir.ms&quot;</span><span class="p">;</span>                      <span class="c1">// Absolute path</span>
<span class="n">String</span> <span class="n">inferModelPath</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/ms/albert/albert_train.mindir.ms&quot;</span><span class="p">;</span>                      <span class="c1">// Absolute path</span>
<span class="n">String</span> <span class="n">ip</span> <span class="o">=</span> <span class="s">&quot;10.113.216.106&quot;</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">port</span> <span class="o">=</span> <span class="mi">6668</span><span class="p">;</span>
<span class="kt">boolean</span> <span class="n">useHttps</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kt">boolean</span> <span class="n">useSSL</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kt">boolean</span> <span class="n">useElb</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">serverNum</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="n">FLParameter</span> <span class="n">flParameter</span> <span class="o">=</span> <span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setFlName</span><span class="p">(</span><span class="n">flName</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setTrainModelPath</span><span class="p">(</span><span class="n">trainModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setInferModelPath</span><span class="p">(</span><span class="n">inferModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setIp</span><span class="p">(</span><span class="n">ip</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setPort</span><span class="p">(</span><span class="n">port</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setUseHttps</span><span class="p">(</span><span class="n">useHttps</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setUseSSL</span><span class="p">(</span><span class="n">useSSL</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setUseElb</span><span class="p">(</span><span class="n">useElb</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setServerNum</span><span class="p">(</span><span class="n">serverNum</span><span class="p">);</span>

<span class="c1">// getModel</span>
<span class="n">SyncFLJob</span> <span class="n">syncFLJob</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SyncFLJob</span><span class="p">();</span>
<span class="n">syncFLJob</span><span class="p">.</span><span class="na">getModel</span><span class="p">();</span>
</pre></div>
</div>
</li>
<li><p>LeNet image classification task</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// set parameters</span>
<span class="n">String</span> <span class="n">flName</span> <span class="o">=</span> <span class="s">&quot;lenet&quot;</span><span class="p">;</span>     <span class="c1">// Set this parameter to `albert` for sentiment classification tasks or `lenet` for the LeNet scenario.</span>
<span class="n">String</span> <span class="n">trainModelPath</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/lenet_train.mindir0.ms&quot;</span><span class="p">;</span>                      <span class="c1">// Absolute path</span>
<span class="n">String</span> <span class="n">inferModelPath</span> <span class="o">=</span> <span class="s">&quot;SyncFLClient/lenet_train.mindir0.ms&quot;</span><span class="p">;</span>                      <span class="c1">// Absolute path</span>
<span class="n">String</span> <span class="n">ip</span> <span class="o">=</span> <span class="s">&quot;10.113.216.106&quot;</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">port</span> <span class="o">=</span> <span class="mi">6668</span>
<span class="kt">boolean</span> <span class="n">useHttps</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kt">boolean</span> <span class="n">useSSL</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kt">boolean</span> <span class="n">useElb</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">serverNum</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="n">FLParameter</span> <span class="n">flParameter</span> <span class="o">=</span> <span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setFlName</span><span class="p">(</span><span class="n">flName</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setTrainModelPath</span><span class="p">(</span><span class="n">trainModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setInferModelPath</span><span class="p">(</span><span class="n">inferModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setIp</span><span class="p">(</span><span class="n">ip</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setPort</span><span class="p">(</span><span class="n">port</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setUseHttps</span><span class="p">(</span><span class="n">useHttps</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setUseSSL</span><span class="p">(</span><span class="n">useSSL</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setUseElb</span><span class="p">(</span><span class="n">useElb</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setServerNum</span><span class="p">(</span><span class="n">serverNum</span><span class="p">);</span>

<span class="c1">// getModel</span>
<span class="n">SyncFLJob</span> <span class="n">syncFLJob</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SyncFLJob</span><span class="p">();</span>
<span class="n">syncFLJob</span><span class="p">.</span><span class="na">getModel</span><span class="p">();</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="java_api_syncfljob.html" class="btn btn-neutral float-left" title="SyncFLJob" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, MindSpore Federated.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   
</body>
</html>