

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Vertical Federated Deployment &mdash; MindSpore master documentation</title>
  

  
   
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  
  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        
        
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Federated Learning Image Classification Dataset Process" href="image_classfication_dataset_process.html" />
    <link rel="prev" title="Horizontal Federated Device-side Deployment" href="deploy_federated_client.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> MindSpore
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Deployment</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="federated_install.html">Obtaining MindSpore Federated</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploy_federated_server.html">Horizontal Federated Cloud-based Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploy_federated_client.html">Horizontal Federated Device-side Deployment</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Vertical Federated Deployment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#preparation">Preparation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installing-mindspore">Installing MindSpore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-mindspore-federated">Installing MindSpore Federated</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#verifying-installation">Verifying installation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#running-the-example">Running the Example</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Horizontal Application</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="image_classfication_dataset_process.html">Federated Learning Image Classification Dataset Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="image_classification_application.html">Implementing an Image Classification Application of Cross-device Federated Learning (x86)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sentiment_classification_application.html">Implementing a Sentiment Classification Application (Android)</a></li>
<li class="toctree-l1"><a class="reference internal" href="image_classification_application_in_cross_silo.html">Implementing a Cloud-Slio Federated Image Classification Application (x86)</a></li>
<li class="toctree-l1"><a class="reference internal" href="object_detection_application_in_cross_silo.html">Implementing a Cross-Silo Federated Target Detection Application (x86)</a></li>
</ul>
<p class="caption"><span class="caption-text">Vertical Application</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="data_join.html">Vertical Federated Learning Data Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="split_wnd_application.html">Vertical Federated Learning Model Training - Wide&amp;Deep Recommendation Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="split_pangu_alpha_application.html">Vertical Federated Learning Model Training - Pangu Alpha Large Model Cross-Domain Training</a></li>
</ul>
<p class="caption"><span class="caption-text">Security and Privacy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="local_differential_privacy_training_noise.html">Horizontal FL-Local Differential Privacy Perturbation Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="local_differential_privacy_training_signds.html">Horizontal FL-Local Differential Privacy SignDS training</a></li>
<li class="toctree-l1"><a class="reference internal" href="pairwise_encryption_training.html">Horizontal FL-Pairwise encryption training</a></li>
<li class="toctree-l1"><a class="reference internal" href="private_set_intersection.html">Vertical Federated-Privacy Set Intersection</a></li>
<li class="toctree-l1"><a class="reference internal" href="secure_vertical_federated_learning_with_EmbeddingDP.html">Vertical Federated-Feature Protection Based on Information Obfuscation</a></li>
<li class="toctree-l1"><a class="reference internal" href="secure_vertical_federated_learning_with_TEE.html">Vertical Federated - Feature Protection Based on Trusted Execution Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="secure_vertical_federated_learning_with_DP.html">Vertical Federated - Label Protection Based on Differential Privacy</a></li>
</ul>
<p class="caption"><span class="caption-text">Communication Compression</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="communication_compression.html">Device-Cloud Federated Learning Communication Compression</a></li>
<li class="toctree-l1"><a class="reference internal" href="vfl_communication_compress.html">Vertical Federated Learning Communication Compression</a></li>
</ul>
<p class="caption"><span class="caption-text">Horizontal Federated API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="horizontal_server.html">Federated Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="cross_device.html">Device-side Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="horizontal/cross_silo.html">Cross-Silo</a></li>
</ul>
<p class="caption"><span class="caption-text">Vertical Federated API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Data_Join.html">Data Join</a></li>
<li class="toctree-l1"><a class="reference internal" href="vertical/vertical_communicator.html">Vertical Federated Learning Communicator</a></li>
<li class="toctree-l1"><a class="reference internal" href="vertical_federated_trainer.html">Vertical Federated Trainer</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>
<p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="RELEASE.html">Release Notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MindSpore</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Vertical Federated Deployment</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/deploy_vfl.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="vertical-federated-deployment">
<h1>Vertical Federated Deployment<a class="headerlink" href="#vertical-federated-deployment" title="Permalink to this headline">¶</a></h1>
<p><a href="https://gitee.com/mindspore/docs/blob/r2.0/docs/federated/docs/source_en/deploy_vfl.md" target="_blank"><img src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.0/resource/_static/logo_source_en.png"></a></p>
<p>This document explains how to use and deploy the vertical federated learning framework.</p>
<p>The MindSpore Vertical Federated Learning (VFL) physical architecture is shown in the figure:</p>
<p><img alt="" src="_images/deploy_VFL_en.png" /></p>
<p>As shown above, there are two participants in the vertical federated interaction: the Leader node and the Follower node, each of which has processes in two roles: <code class="docutils literal notranslate"><span class="pre">FLDataWorker</span></code> and <code class="docutils literal notranslate"><span class="pre">VFLTrainer</span></code>:</p>
<ul>
<li><p>FLDataWorker</p>
<p>The functions of <code class="docutils literal notranslate"><span class="pre">FLDataWorker</span></code> mainly includes:</p>
<ol class="simple">
<li><p>Dataset intersection: obtains a common user intersection for both vertical federated participants, and supports a privacy dataset intersection protocol that prevents federated learning participants from obtaining ID information outside the intersection.</p></li>
<li><p>Training data generation: After obtaining the intersection ID, the data features are expanded to generate the mindrecord file for training.</p></li>
<li><p>Open management surface: <code class="docutils literal notranslate"><span class="pre">RESTful</span></code> interface is provided to users for cluster management.</p></li>
</ol>
<p>In a federated learning task, there is only one <code class="docutils literal notranslate"><span class="pre">Scheduler</span></code>, which communicates with the <code class="docutils literal notranslate"><span class="pre">Server</span></code> through TCP protocol.</p>
</li>
<li><p>VFLTrainer</p>
<p><code class="docutils literal notranslate"><span class="pre">VFLTrainer</span></code> is the main body that performs the vertical federated training tasks, and performs the forward and reverse computation after model slicing, Embedding tensor transfer, gradient tensor transfer, and reverse optimizer update. The current version supports single-computer single-card and single-computer multi-card training modes.</p>
<p>In the MindSpore federated learning framework, <code class="docutils literal notranslate"><span class="pre">Server</span></code> also supports elastic scaling and disaster recovery, enabling dynamic provisioning of hardware resources without interruption of training tasks.</p>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">FLDataWorker</span></code> and <code class="docutils literal notranslate"><span class="pre">VFLTrainer</span></code> are generally deployed in the same server or container.</p>
<div class="section" id="preparation">
<h2>Preparation<a class="headerlink" href="#preparation" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>It is recommended to use <a class="reference external" href="https://www.anaconda.com/">Anaconda</a> to create a virtual environment for the following operations.</p>
</div></blockquote>
<div class="section" id="installing-mindspore">
<h3>Installing MindSpore<a class="headerlink" href="#installing-mindspore" title="Permalink to this headline">¶</a></h3>
<p>MindSpore vertical federated supports deployment on x86 CPU, GPU CUDA and Ascend hardware platforms. The latest version of MindSpore can be installed by referring to <a class="reference external" href="https://www.mindspore.cn/install">MindSpore Installation Guide</a>.</p>
</div>
<div class="section" id="installing-mindspore-federated">
<h3>Installing MindSpore Federated<a class="headerlink" href="#installing-mindspore-federated" title="Permalink to this headline">¶</a></h3>
<p>Compile and install via <a class="reference external" href="https://gitee.com/mindspore/federated">source code</a>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://gitee.com/mindspore/federated.git<span class="w"> </span>-b<span class="w"> </span>r0.1
<span class="nb">cd</span><span class="w"> </span>federated
bash<span class="w"> </span>build.sh
</pre></div>
</div>
<p>For <code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">build.sh</span></code>, accelerate compilation through the <code class="docutils literal notranslate"><span class="pre">-jn</span></code> option, e.g. <code class="docutils literal notranslate"><span class="pre">-j16</span></code>, and download third-party dependencies from gitee instead of github by the <code class="docutils literal notranslate"><span class="pre">-S</span> <span class="pre">on</span></code> option.</p>
<p>Once compiled, find the Federated whl installation package in the <code class="docutils literal notranslate"><span class="pre">build/package/</span></code> directory to install.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>mindspore_federated-<span class="o">{</span>version<span class="o">}</span>-<span class="o">{</span>python_version<span class="o">}</span>-linux_<span class="o">{</span>arch<span class="o">}</span>.whl
</pre></div>
</div>
<div class="section" id="verifying-installation">
<h4>Verifying installation<a class="headerlink" href="#verifying-installation" title="Permalink to this headline">¶</a></h4>
<p>Execute the following command to verify the installation. The installation is successful if no error is reported when importing Python modules.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindspore_federated</span> <span class="kn">import</span> <span class="n">FLServerJob</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="running-the-example">
<h2>Running the Example<a class="headerlink" href="#running-the-example" title="Permalink to this headline">¶</a></h2>
<p>A running sample of FLDataWorker can be found in <a class="reference external" href="https://www.mindspore.cn/federated/docs/en/r0.1/data_join.html">Vertical federated learning data access</a>.</p>
<p>A running sample of VFLTrainer can be found in <a class="reference external" href="https://www.mindspore.cn/federated/docs/en/r0.1/split_wnd_application.html">Vertical federated learning model training - Wide&amp;Deep Recommended Application</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="image_classfication_dataset_process.html" class="btn btn-neutral float-right" title="Federated Learning Image Classification Dataset Process" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="deploy_federated_client.html" class="btn btn-neutral float-left" title="Horizontal Federated Device-side Deployment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, MindSpore.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   
	<script async="async" src="https://cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>