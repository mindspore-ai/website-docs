<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>On-Device Deployment &mdash; MindSpore master documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Implementing an Image Classification Application (x86)" href="image_classification_application.html" />
    <link rel="prev" title="Cloud-based Deployment" href="deploy_federated_server.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Deployment</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="federated_install.html">Obtaining MindSpore Federated</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploy_federated_server.html">Cloud-based Deployment</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">On-Device Deployment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#android">Android</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#building-a-package">Building a Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-dependencies">Running Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-a-dependency-environment">Building a Dependency Environment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#x86">x86</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Building a Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Running Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Building a Dependency Environment</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Application</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="image_classification_application.html">Implementing an Image Classification Application (x86)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sentiment_classification_application.html">Implementing a Sentiment Classification Application (Android)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Security and Privacy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="security_and_privacy_protection.html">Model Security and Privacy</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>On-Device Deployment</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/deploy_federated_client.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="on-device-deployment">
<h1>On-Device Deployment<a class="headerlink" href="#on-device-deployment" title="Permalink to this headline"></a></h1>
<p><a href="https://gitee.com/mindspore/docs/blob/r1.3/docs/federated/docs/source_en/deploy_federated_client.md" target="_blank"><img src="https://gitee.com/mindspore/docs/raw/r1.3/resource/_static/logo_source.png"></a></p>
<p>The following describes how to deploy the Federated-Client in the Android and x86 environments:</p>
<section id="android">
<h2>Android<a class="headerlink" href="#android" title="Permalink to this headline"></a></h2>
<section id="building-a-package">
<h3>Building a Package<a class="headerlink" href="#building-a-package" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Configure the build environment.</p>
<p>Currently, only the Linux build environment is supported. For details about how to configure the Linux build environment, click <a class="reference external" href="https://www.mindspore.cn/lite/docs/en/r1.3/use/build.html#linux">here</a>.</p>
</li>
<li><p>Build the AAR package that contains aarch64 and aarch32 in the mindspore home directory.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-A<span class="w"> </span>on<span class="w"> </span>-j32
</pre></div>
</div>
</li>
<li><p>Store the generated AAR package in the following path:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>mindspore-lite-maven-<span class="o">{</span>version<span class="o">}</span>.zip
</pre></div>
</div>
</li>
</ul>
</section>
<section id="running-dependencies">
<h3>Running Dependencies<a class="headerlink" href="#running-dependencies" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://developer.android.google.cn/studio">Android Studio</a> &gt;= 3.2 (Android 4.0 or later is recommended.)</p></li>
<li><p><a class="reference external" href="https://developer.android.com/studio?hl=zh-cn#cmdline-tools">Android SDK</a> &gt;= 26 (installed in Android Studio by default)</p></li>
<li><p><a class="reference external" href="https://openjdk.java.net/install/">OpenJDK</a> &gt;= 1.8 (installed in Android Studio by default)</p></li>
</ul>
</section>
<section id="building-a-dependency-environment">
<h3>Building a Dependency Environment<a class="headerlink" href="#building-a-dependency-environment" title="Permalink to this headline"></a></h3>
<p>After the <code class="docutils literal notranslate"><span class="pre">mindspore-lite-maven-{version}.zip</span></code> file is decompressed, the following directory structure is obtained:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>mindspore-lite-maven-<span class="o">{</span>version<span class="o">}</span>
└──<span class="w"> </span>mindspore
<span class="w">    </span>└──<span class="w"> </span>mindspore-lite
<span class="w">        </span>└──<span class="w"> </span><span class="o">{</span>version<span class="o">}</span>
<span class="w">            </span>└──<span class="w"> </span>mindspore-lite-<span class="o">{</span>version<span class="o">}</span>.aar<span class="w">  </span><span class="c1"># MindSpore Lite training framework AAR package</span>
</pre></div>
</div>
<p>Therefore, the AAR package path related to federated learning is as follows:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>mindspore/output/mindspore/mindspore-lite/<span class="o">{</span>version<span class="o">}</span>/mindspore-lite-<span class="o">{</span>version<span class="o">}</span>.aar
</pre></div>
</div>
<p>The directory structure related to federated learning in the AAR package is as follows:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>mindspore-lite-<span class="o">{</span>version<span class="o">}</span>
├──<span class="w"> </span>jni
│<span class="w">   </span>├──<span class="w"> </span>arm64-v8a
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>libjpeg.so<span class="w">   </span><span class="c1"># Dynamic library file for image processing</span>
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>libminddata-lite.so<span class="w">  </span><span class="c1"># Dynamic library file for image processing</span>
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>libmindspore-lite.so<span class="w">  </span><span class="c1"># Dynamic library on which the MindSpore Lite inference framework depends</span>
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>libmindspore-lite-jni.so<span class="w">  </span><span class="c1"># JNI dynamic library on which the MindSpore Lite inference framework depends</span>
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>libmindspore-lite-train.so<span class="w">  </span><span class="c1"># Dynamic library on which the MindSpore Lite training framework depends</span>
│<span class="w">   </span>│<span class="w">   </span>└──<span class="w"> </span>libturbojpeg.so<span class="w">  </span><span class="c1"># Dynamic library file for image processing</span>
│<span class="w">   </span>└──<span class="w"> </span>armeabi-v7a
<span class="w"> </span>│<span class="w">       </span>├──<span class="w"> </span>libjpeg.so<span class="w">   </span><span class="c1"># Dynamic library file for image processing</span>
│<span class="w">       </span>├──<span class="w"> </span>libminddata-lite.so<span class="w">  </span><span class="c1"># Dynamic library file for image processing</span>
│<span class="w">       </span>├──<span class="w"> </span>libmindspore-lite.so<span class="w">  </span><span class="c1"># Dynamic library on which the MindSpore Lite inference framework depends</span>
│<span class="w">       </span>├──<span class="w"> </span>libmindspore-lite-jni.so<span class="w">  </span><span class="c1"># JNI dynamic library on which the MindSpore Lite inference framework depends</span>
│<span class="w">       </span>├──<span class="w"> </span>libmindspore-lite-train.so<span class="w">  </span><span class="c1"># Dynamic library on which the MindSpore Lite training framework depends</span>
│<span class="w">       </span>└──<span class="w"> </span>libturbojpeg.so<span class="w">  </span><span class="c1"># Dynamic library file for image processing</span>
├──<span class="w"> </span>libs
│<span class="w">   </span>├──<span class="w"> </span>mindspore-lite-java-common.jar<span class="w">  </span><span class="c1"># MindSpore Lite training framework JAR package</span>
│<span class="w">   </span>└──<span class="w"> </span>mindspore-lite-java-flclient.jar<span class="w">  </span><span class="c1"># Federated learning framework JAR package</span>
└──<span class="w"> </span>classes.jar<span class="w">  </span><span class="c1"># MindSpore Lite training framework JAR package</span>
</pre></div>
</div>
<p>The Android project only depends on the AAR package to call APIs provided by federated learning. For details about how to call and run the APIs, see the API description of federated learning.</p>
</section>
</section>
<section id="x86">
<h2>x86<a class="headerlink" href="#x86" title="Permalink to this headline"></a></h2>
<section id="id1">
<h3>Building a Package<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Configure the build environment.</p>
<p>Currently, only the Linux build environment is supported. For details about how to configure the Linux build environment, click <a class="reference external" href="https://www.mindspore.cn/lite/docs/en/r1.3/use/build.html#linux">here</a>.</p>
</li>
<li><p>Build the x86-related architecture package in the mindspore home directory.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>x86_64<span class="w"> </span>-j32
</pre></div>
</div>
</li>
<li><p>Store the generated x86 architecture package in the following path:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>mindspore/output/mindspore-lite-<span class="o">{</span>version<span class="o">}</span>-linux-x64.tar.gz
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id2">
<h3>Running Dependencies<a class="headerlink" href="#id2" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://www.python.org/downloads/">Python</a> &gt;= 3.7.5</p></li>
<li><p><a class="reference external" href="https://openjdk.java.net/install/">OpenJDK</a> &gt;= 1.8</p></li>
</ul>
</section>
<section id="id3">
<h3>Building a Dependency Environment<a class="headerlink" href="#id3" title="Permalink to this headline"></a></h3>
<p>After the <code class="docutils literal notranslate"><span class="pre">mindspore/output/mindspore-lite-{version}-linux-x64.tar.gz</span></code> file is decompressed, the following directory structure is obtained:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>mindspore-lite-<span class="o">{</span>version<span class="o">}</span>-linux-x64
├──<span class="w"> </span>tools
│<span class="w">   </span>├──<span class="w"> </span>benchmark_train<span class="w"> </span><span class="c1"># Tool for commissioning the performance and accuracy of the training model</span>
│<span class="w">   </span>├──<span class="w"> </span>converter<span class="w">       </span><span class="c1"># Model conversion tool</span>
│<span class="w">   </span>└──<span class="w"> </span>cropper<span class="w">         </span><span class="c1"># Library cropping tool</span>
│<span class="w">       </span>├──<span class="w"> </span>cropper<span class="w">                 </span><span class="c1"># Executable file of the library cropping tool</span>
│<span class="w">       </span>└──<span class="w"> </span>cropper_mapping_cpu.cfg<span class="w"> </span><span class="c1"># Configuration file required for cropping the CPU library</span>
└──<span class="w"> </span>runtime
<span class="w">    </span>├──<span class="w"> </span>include<span class="w">  </span><span class="c1"># Header file of the training framework</span>
<span class="w">    </span>│<span class="w">   </span>└──<span class="w"> </span>registry<span class="w"> </span><span class="c1"># Header file for custom operator registration</span>
<span class="w">    </span>├──<span class="w"> </span>lib<span class="w">      </span><span class="c1"># Training framework library</span>
<span class="w">    </span>│<span class="w">   </span>├──<span class="w"> </span>libminddata-lite.a<span class="w">          </span><span class="c1"># Static library file for image processing</span>
<span class="w">    </span>│<span class="w">   </span>├──<span class="w"> </span>libminddata-lite.so<span class="w">        </span><span class="c1"># Dynamic library file for image processing</span>
<span class="w">    </span>│<span class="w">   </span>├──<span class="w"> </span>libmindspore-lite-jni.so<span class="w">   </span><span class="c1"># JNI dynamic library  on which the MindSpore Lite inference framework depends</span>
<span class="w">    </span>│<span class="w">   </span>├──<span class="w"> </span>libmindspore-lite-train.a<span class="w">  </span><span class="c1"># Static library on which the MindSpore Lite training framework depends</span>
<span class="w">    </span>│<span class="w">   </span>├──<span class="w"> </span>libmindspore-lite-train.so<span class="w"> </span><span class="c1"># Dynamic library on which the MindSpore Lite training framework depends</span>
<span class="w">    </span>│<span class="w">   </span>├──<span class="w"> </span>libmindspore-lite.a<span class="w">  </span><span class="c1"># Static library on which the MindSpore Lite inference framework depends</span>
<span class="w">    </span>│<span class="w">   </span>├──<span class="w"> </span>libmindspore-lite.so<span class="w">  </span><span class="c1"># Dynamic library on which the MindSpore Lite inference framework depends</span>
<span class="w">    </span>│<span class="w">   </span>├──<span class="w"> </span>mindspore-lite-java.jar<span class="w">    </span><span class="c1"># MindSpore Lite training framework JAR package</span>
<span class="w">    </span>│<span class="w">   </span>└──<span class="w"> </span>mindspore-lite-java-flclient.jar<span class="w">  </span><span class="c1"># Federated learning framework JAR package</span>
<span class="w">    </span>└──<span class="w"> </span>third_party
<span class="w">        </span>└──<span class="w"> </span>libjpeg-turbo
<span class="w">            </span>└──<span class="w"> </span>lib
<span class="w">                </span>├──<span class="w"> </span>libjpeg.so.62<span class="w">   </span><span class="c1"># Dynamic library file for image processing</span>
<span class="w">                </span>└──<span class="w"> </span>libturbojpeg.so.0<span class="w">  </span><span class="c1"># Dynamic library file for image processing</span>
</pre></div>
</div>
<p>The x86 packages required for federated learning are as follows:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>libjpeg.so.62<span class="w">   </span><span class="c1"># Dynamic library file for image processing</span>
libminddata-lite.so<span class="w">  </span><span class="c1"># Dynamic library file for image processing</span>
libmindspore-lite.so<span class="w">  </span><span class="c1"># Dynamic library on which the MindSpore Lite inference framework depends</span>
libmindspore-lite-jni.so<span class="w">  </span><span class="c1"># JNI dynamic library on which the MindSpore Lite inference framework depends</span>
libmindspore-lite-train.so<span class="w">  </span><span class="c1"># Dynamic library on which the MindSpore Lite training framework depends</span>
libturbojpeg.so.0<span class="w">  </span><span class="c1"># Dynamic library file for image processing</span>
mindspore-lite-java-flclient.jar<span class="w">  </span><span class="c1"># Federated learning framework JAR package</span>
</pre></div>
</div>
<p>Find the six .so files on which federated learning depends in the directories <code class="docutils literal notranslate"><span class="pre">mindspore/output/mindspore-lite-{version}-linux-x64/runtime/lib/</span></code> and <code class="docutils literal notranslate"><span class="pre">mindspore/output/mindspore-lite-{version}-linux-x64/runtime/third_party/libjpeg-turbo/lib</span></code>. Then, place these .so files in a folder, for example, <code class="docutils literal notranslate"><span class="pre">/resource/x86libs/</span></code>.</p>
<p>Set environment variables in the x86 system (an absolute path must be provided):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/resource/x86libs/:<span class="nv">$LD_LIBRARY_PATH</span>
</pre></div>
</div>
<p>After the dependency environment is set, you can simulate the startup of multiple clients in the x86 environment for federated learning. For details, click <a class="reference external" href="https://gitee.com/mindspore/docs/blob/r1.3/docs/federated/docs/source_en/image_classification_application.md">here</a>.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="deploy_federated_server.html" class="btn btn-neutral float-left" title="Cloud-based Deployment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="image_classification_application.html" class="btn btn-neutral float-right" title="Implementing an Image Classification Application (x86)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>