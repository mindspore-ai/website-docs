

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Examples &mdash; MindSpore master documentation</title>
  

  
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
   
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  
  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Cross-Silo" href="cross_silo.html" />
    <link rel="prev" title="SyncFLJob" href="java_api_syncfljob.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> MindSpore
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Deployment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="federated_install.html">Obtaining MindSpore Federated</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploy_federated_server.html">Cloud-based Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploy_federated_client.html">On-Device Deployment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Application</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="image_classification_application.html">Implementing an Image Classification Application of Cross-device Federated Learning (x86)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sentiment_classification_application.html">Implementing a Sentiment Classification Application (Android)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Security and Privacy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="local_differential_privacy_training_noise.html">Local differential privacy perturbation training</a></li>
<li class="toctree-l1"><a class="reference internal" href="pairwise_encryption_training.html">Pairwise encryption training</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API References</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="federated_server.html">Federated-Server</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="federated_client.html">Federated-Client</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="cross_device.html">Cross-Device</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="java_api_callback.html">Callback</a></li>
<li class="toctree-l3"><a class="reference internal" href="java_api_client.html">Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="java_api_clientmanager.html">ClientManager</a></li>
<li class="toctree-l3"><a class="reference internal" href="java_api_dataset.html">DataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="java_api_flparameter.html">FLParameter</a></li>
<li class="toctree-l3"><a class="reference internal" href="java_api_syncfljob.html">SyncFLJob</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fljobrun-for-starting-federated-learning">flJobRun() for Starting Federated Learning</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modelinference-for-inferring-multiple-input-data-records">modelInference() for Inferring Multiple Input Data Records</a></li>
<li class="toctree-l4"><a class="reference internal" href="#getmodel-for-obtaining-the-latest-model-on-the-cloud">getModel() for Obtaining the Latest Model on the Cloud</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cross_silo.html">Cross-Silo</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MindSpore</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="federated_client.html">Federated-Client</a> &raquo;</li>
          <li><a href="cross_device.html">Cross-Device</a> &raquo;</li>
      <li>Examples</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/interface_description_federated_client.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section class="tex2jax_ignore mathjax_ignore" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline"></a></h1>
<p><a href="https://gitee.com/mindspore/docs/blob/r1.7/docs/federated/docs/source_en/interface_description_federated_client.md" target="_blank"><img src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r1.7/resource/_static/logo_source_en.png"></a></p>
<p>Note that before using the following interfaces, you can first refer to the document <a class="reference external" href="https://www.mindspore.cn/federated/docs/en/master/deploy_federated_client.html">on-device deployment</a> to deploy related environments.</p>
<section id="fljobrun-for-starting-federated-learning">
<h2>flJobRun() for Starting Federated Learning<a class="headerlink" href="#fljobrun-for-starting-federated-learning" title="Permalink to this headline"></a></h2>
<p>Before calling the flJobRun() API, instantiate the parameter class FLParameter and set related parameters as follows:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Mandatory</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Remarks</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>dataMap</p></td>
<td><p>Map&lt;RunType, List<String/>/&gt;</p></td>
<td><p>Y</p></td>
<td><p>The path of Federated learning dataset.</p></td>
<td><p>The dataset of Map&lt;RunType, List<String/>/&gt; type, the key in the map is the RunType enumeration type, the value is the corresponding dataset list, when the key is RunType.TRAINMODE, the corresponding value is the training-related dataset list, when the key  is RunType.EVALMODE, it means that the corresponding value is a list of verification-related datasets, and when the key is RunType.INFERMODE, it means that the corresponding value is a list of inference-related datasets.</p></td>
</tr>
<tr class="row-odd"><td><p>flName</p></td>
<td><p>String</p></td>
<td><p>Y</p></td>
<td><p>The package path of model script used by federated learning.</p></td>
<td><p>We provide two types of model scripts for your reference (<a class="reference external" href="https://gitee.com/mindspore/mindspore/tree/master/mindspore/lite/examples/quick_start_flclient/src/main/java/com/mindspore/flclient/demo/albert">Supervised sentiment classification task</a>, <a class="reference external" href="https://gitee.com/mindspore/mindspore/tree/master/mindspore/lite/examples/quick_start_flclient/src/main/java/com/mindspore/flclient/demo/lenet">LeNet image classification task</a>). For supervised sentiment classification tasks, this parameter can be set to the package path of the provided script file <a class="reference external" href="https://gitee.com/mindspore/mindspore/blob/master/mindspore/lite/examples/quick_start_flclient/src/main/java/com/mindspore/flclient/demo/albert/AlbertClient.java">AlBertClient.java</a>, like as <code class="docutils literal notranslate"><span class="pre">com.mindspore.flclient.demo.albert.AlbertClient</span></code>; for LeNet image classification tasks, this parameter can be set to the package path of the provided script file <a class="reference external" href="https://gitee.com/mindspore/mindspore/blob/master/mindspore/lite/examples/quick_start_flclient/src/main/java/com/mindspore/flclient/demo/lenet/LenetClient.java">LenetClient.java</a>, like as <code class="docutils literal notranslate"><span class="pre">com.mindspore.flclient.demo.lenet.LenetClient</span></code>. At the same time, users can refer to these two types of model scripts, define the model script by themselves, and then set the parameter to the package path of the customized model file ModelClient.java (which needs to inherit from the class <a class="reference external" href="https://gitee.com/mindspore/mindspore/blob/master/mindspore/lite/java/java/fl_client/src/main/java/com/mindspore/flclient/model/Client.java">Client.java</a>).</p></td>
</tr>
<tr class="row-even"><td><p>trainModelPath</p></td>
<td><p>String</p></td>
<td><p>Y</p></td>
<td><p>Path of a training model used for federated learning, which is an absolute path of the .ms file.</p></td>
<td><p>It is recommended to set the path to the training App’s own directory to protect the data access security of the model itself.</p></td>
</tr>
<tr class="row-odd"><td><p>inferModelPath</p></td>
<td><p>String</p></td>
<td><p>Y</p></td>
<td><p>Path of an inference model used for federated learning, which is an absolute path of the .ms file.</p></td>
<td><p>For the normal federated learning mode (training and inference use the same model), the value of this parameter needs to be the same as that of <code class="docutils literal notranslate"><span class="pre">trainModelPath</span></code>; for the hybrid learning mode (training and inference use different models, and the server side also includes training process), this parameter is set to the path of actual inference model. It is recommended to set the path to the training App’s own directory to protect the data access security of the model itself.</p></td>
</tr>
<tr class="row-even"><td><p>sslProtocol</p></td>
<td><p>String</p></td>
<td><p>N</p></td>
<td><p>The TLS protocol version used by the device-cloud HTTPS communication.</p></td>
<td><p>A whitelist is set, and currently only “TLSv1.3” or “TLSv1.2” is supported. Only need to set it up in the HTTPS communication scenario.</p></td>
</tr>
<tr class="row-odd"><td><p>deployEnv</p></td>
<td><p>String</p></td>
<td><p>Y</p></td>
<td><p>The deployment environment for federated learning.</p></td>
<td><p>A whitelist is set, currently only “x86”, “android” are supported.</p></td>
</tr>
<tr class="row-even"><td><p>certPath</p></td>
<td><p>String</p></td>
<td><p>N</p></td>
<td><p>The self-signed root certificate path used for device-cloud HTTPS communication.</p></td>
<td><p>When the deployment environment is “x86” and the device-cloud uses a self-signed certificate for HTTPS communication authentication, this parameter needs to be set. The certificate must be consistent with the CA root certificate used to generate the cloud-side self-signed certificate to pass the verification. This parameter is used for non-Android scenarios.</p></td>
</tr>
<tr class="row-odd"><td><p>domainName</p></td>
<td><p>String</p></td>
<td><p>Y</p></td>
<td><p>The url for device-cloud communication.</p></td>
<td><p>Currently, https and http communication are supported, the corresponding formats are like: https://……, http://……, and when <code class="docutils literal notranslate"><span class="pre">useElb</span></code> is set to true, the format must be: https://127.0.0.0 : 6666 or http://127.0.0.0 : 6666 , where <code class="docutils literal notranslate"><span class="pre">127.0.0.0</span></code> corresponds to the ip of the machine providing cloud-side services (corresponding to the cloud-side parameter <code class="docutils literal notranslate"><span class="pre">--scheduler_ip</span></code>), and <code class="docutils literal notranslate"><span class="pre">6666</span></code> corresponds to the cloud-side parameter <code class="docutils literal notranslate"><span class="pre">--fl_server_port</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>ifUseElb</p></td>
<td><p>boolean</p></td>
<td><p>N</p></td>
<td><p>Used for multi-server scenarios to set whether to randomly send client requests to different servers within a certain range.</p></td>
<td><p>Setting to true means that the client will randomly send requests to a certain range of server addresses, and false means that the client’s requests will be sent to a fixed server address. This parameter is used in non-Android scenarios, and the default value is false.</p></td>
</tr>
<tr class="row-odd"><td><p>serverNum</p></td>
<td><p>int</p></td>
<td><p>N</p></td>
<td><p>The number of servers that the client can choose to connect to.</p></td>
<td><p>When <code class="docutils literal notranslate"><span class="pre">ifUseElb</span></code> is set to true, it can be set to be consistent with the <code class="docutils literal notranslate"><span class="pre">server_num</span></code> parameter when the server is started on the cloud side. It is used to randomly select different servers to send information. This parameter is used in non-Android scenarios. The default value is 1.</p></td>
</tr>
<tr class="row-even"><td><p>ifPkiVerify</p></td>
<td><p>boolean</p></td>
<td><p>N</p></td>
<td><p>The switch of device-cloud identity authentication.</p></td>
<td><p>Set to true to enable device-cloud security authentication, set to false to disable, and the default value is false. Identity authentication requires HUKS to provide a certificate. This parameter is only used in the Android environment (currently only supports HUAWEI phones).</p></td>
</tr>
<tr class="row-odd"><td><p>threadNum</p></td>
<td><p>int</p></td>
<td><p>N</p></td>
<td><p>The number of threads used in federated learning training and inference.</p></td>
<td><p>The default value is 1.</p></td>
</tr>
<tr class="row-even"><td><p>cpuBindMode</p></td>
<td><p>BindMode</p></td>
<td><p>N</p></td>
<td><p>The cpu core that threads need to bind during federated learning training and inference.</p></td>
<td><p>It is the enumeration type <code class="docutils literal notranslate"><span class="pre">BindMode</span></code>, where BindMode.NOT_BINDING_CORE represents the unbound core, which is automatically assigned by the system, BindMode.BIND_LARGE_CORE represents the bound large core, and BindMode.BIND_MIDDLE_CORE represents the bound middle core. The default value is BindMode.NOT_BINDING_CORE.</p></td>
</tr>
<tr class="row-odd"><td><p>batchSize</p></td>
<td><p>int</p></td>
<td><p>Y</p></td>
<td><p>The number of single-step training samples used in federated learning training and inference, that is, batch size.</p></td>
<td><p>It needs to be consistent with the batch size of the input data of the model.</p></td>
</tr>
<tr class="row-even"><td><p>iflJobResultCallback</p></td>
<td><p>IFLJobResultCallback</p></td>
<td><p>N</p></td>
<td><p>The federated learning callback function object <code class="docutils literal notranslate"><span class="pre">iflJobResultCallback</span></code>.</p></td>
<td><p>The user can implement the specific method of the interface class <a class="reference external" href="https://gitee.com/mindspore/mindspore/blob/master/mindspore/lite/java/java/fl_client/src/main/java/com/mindspore/flclient/IFLJobResultCallback.java">IFLJobResultCallback.java</a> in the project according to the needs of the actual scene, and set it as a callback function object in the federated learning task. We provide a simple implementation use case <a class="reference external" href="https://gitee.com/mindspore/mindspore/blob/master/mindspore/lite/java/java/fl_client/src/main/java/com/mindspore/flclient/FLJobResultCallback.java">FLJobResultCallback.java</a> as the default value of this parameter.</p></td>
</tr>
</tbody>
</table>
<p>Note 1: When using HTTP communication, there may exist communication security risks, please be aware.</p>
<p>Note 2: In the Android environment, the following parameters need to be set when using HTTPS communication. The setting examples are as follows:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">FLParameter</span><span class="w"> </span><span class="n">flParameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">SecureSSLSocketFactory</span><span class="w"> </span><span class="n">sslSocketFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SecureSSLSocketFactory</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">)</span>
<span class="n">SecureX509TrustManager</span><span class="w"> </span><span class="n">x509TrustManager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SecureX509TrustManager</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setSslSocketFactory</span><span class="p">(</span><span class="n">sslSocketFactory</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setX509TrustManager</span><span class="p">(</span><span class="n">x509TrustManager</span><span class="p">);</span>
</pre></div>
</div>
<p>Among them, the two objects <code class="docutils literal notranslate"><span class="pre">SecureSSLSocketFactory</span></code> and <code class="docutils literal notranslate"><span class="pre">SecureX509TrustManager</span></code> need to be implemented in the Android project, and users need to design by themselves according to the type of certificate in the mobile phone.</p>
<p>Note 3: In the x86 environment, currently only self-signed certificate authentication is supported when using HTTPS communication, and the following parameters need to be set. The setting examples are as follows:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">FLParameter</span><span class="w"> </span><span class="n">flParameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">String</span><span class="w"> </span><span class="n">certPath</span><span class="w">  </span><span class="o">=</span><span class="w">  </span><span class="s">&quot;CARoot.pem&quot;</span><span class="p">;</span><span class="w">             </span><span class="c1">//  the self-signed root certificate path used for device-cloud HTTPS communication.</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setCertPath</span><span class="p">(</span><span class="n">certPath</span><span class="p">);</span>
</pre></div>
</div>
<p>Note 4: In the Android environment, when <code class="docutils literal notranslate"><span class="pre">pkiVerify</span></code> is set to true and encrypt_type is set to PW_ENCRYPT on the cloud side, the following parameters need to be set. The setting examples are as follows:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">FLParameter</span><span class="w"> </span><span class="n">flParameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">String</span><span class="w"> </span><span class="n">equipCrlPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">certPath</span><span class="p">;</span>
<span class="kt">long</span><span class="w"> </span><span class="n">validIterInterval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3600000</span><span class="p">;</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setEquipCrlPath</span><span class="p">(</span><span class="n">equipCrlPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setValidInterval</span><span class="p">(</span><span class="n">validIterInterval</span><span class="p">);</span>
</pre></div>
</div>
<p>Among them, <code class="docutils literal notranslate"><span class="pre">equipCrlPath</span></code> is the CRL certificate required for certificate verification among devices, that is, the certificate revocation list. Generally, the device certificate CRL in “Huawei CBG Certificate Revocation Lists” can be preset; <code class="docutils literal notranslate"><span class="pre">validIterInterval</span></code> which is used to help prevent replay attacks in PW_ENCRYPT mode can generally be set to the time required for each round of device-cloud aggregation (unit: milliseconds, the default value is 3600000).</p>
<p>Note 5: Before each federated learning task is started, the FLParameter class will be instantiated for related parameter settings. When FLParameter is instantiated, a clientID is automatically generated randomly, which is used to uniquely identify the client during the interaction with the cloud side. If the user needs to set the clientID by himself, after instantiating the FLParameter class, call its setClientID method to set it, and then after starting the federated learning task, the clientID set by the user will be used.</p>
<p>Create a SyncFLJob object and use the flJobRun() method of the SyncFLJob class to start a federated learning task.</p>
<p>The sample code (basic http communication) is as follows:</p>
<ol class="arabic">
<li><p>Sample code of a supervised sentiment classification task</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// create dataMap</span>
<span class="n">String</span><span class="w"> </span><span class="n">trainTxtPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;data/albert/supervise/client/1.txt&quot;</span><span class="p">;</span>
<span class="n">String</span><span class="w"> </span><span class="n">evalTxtPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;data/albert/supervise/eval/eval.txt&quot;</span><span class="p">;</span><span class="w">      </span><span class="c1">// Not necessary, if you don&#39;t need verify model accuracy after getModel, you don&#39;t need to set this parameter</span>
<span class="n">String</span><span class="w"> </span><span class="n">vocabFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;data/albert/supervise/vocab.txt&quot;</span><span class="p">;</span><span class="w">                </span><span class="c1">// Path of the dictionary file for data preprocessing.</span>
<span class="n">String</span><span class="w"> </span><span class="n">idsFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;data/albert/supervise/vocab_map_ids.txt&quot;</span><span class="w">   </span><span class="c1">// Path of the mapping ID file of a dictionary.</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">RunType</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">dataMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">trainPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="n">trainPath</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">trainTxtPath</span><span class="p">);</span>
<span class="n">trainPath</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">vocabFile</span><span class="p">);</span>
<span class="n">trainPath</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">idsFile</span><span class="p">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">evalPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">    </span><span class="c1">// Not necessary, if you don&#39;t need verify model accuracy after getModel, you don&#39;t need to set this parameter</span>
<span class="n">evalPath</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">evalTxtPath</span><span class="p">);</span><span class="w">                  </span><span class="c1">// Not necessary, if you don&#39;t need verify model accuracy after getModel, you don&#39;t need to set this parameter</span>
<span class="n">evalPath</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">vocabFile</span><span class="p">);</span><span class="w">                  </span><span class="c1">// Not necessary, if you don&#39;t need verify model accuracy after getModel, you don&#39;t need to set this parameter</span>
<span class="n">evalPath</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">idsFile</span><span class="p">);</span><span class="w">                  </span><span class="c1">// Not necessary, if you don&#39;t need verify model accuracy after getModel, you don&#39;t need to set this parameter</span>
<span class="n">dataMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">RunType</span><span class="p">.</span><span class="na">TRAINMODE</span><span class="p">,</span><span class="w"> </span><span class="n">trainPath</span><span class="p">);</span>
<span class="n">dataMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">RunType</span><span class="p">.</span><span class="na">EVALMODE</span><span class="p">,</span><span class="w"> </span><span class="n">evalPath</span><span class="p">);</span><span class="w">      </span><span class="c1">// Not necessary, if you don&#39;t need verify model accuracy after getModel, you don&#39;t need to set this parameter</span>

<span class="n">String</span><span class="w"> </span><span class="n">flName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.mindspore.flclient.demo.albert.AlbertClient&quot;</span><span class="p">;</span><span class="w">                             </span><span class="c1">// The package path of AlBertClient.java</span>
<span class="n">String</span><span class="w"> </span><span class="n">trainModelPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ms/albert/train/albert_ad_train.mindir0.ms&quot;</span><span class="p">;</span><span class="w">                      </span><span class="c1">// Absolute path</span>
<span class="n">String</span><span class="w"> </span><span class="n">inferModelPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ms/albert/train/albert_ad_train.mindir0.ms&quot;</span><span class="p">;</span><span class="w">                      </span><span class="c1">// Absolute path, consistent with trainModelPath</span>
<span class="n">String</span><span class="w"> </span><span class="n">sslProtocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;TLSv1.2&quot;</span><span class="p">;</span>
<span class="n">String</span><span class="w"> </span><span class="n">deployEnv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;android&quot;</span><span class="p">;</span>
<span class="n">String</span><span class="w"> </span><span class="n">domainName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;http://10.113.216.106:6668&quot;</span><span class="p">;</span>
<span class="kt">boolean</span><span class="w"> </span><span class="n">ifUseElb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">serverNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">threadNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="n">BindMode</span><span class="w"> </span><span class="n">cpuBindMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BindMode</span><span class="p">.</span><span class="na">NOT_BINDING_CORE</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">batchSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">;</span>

<span class="n">FLParameter</span><span class="w"> </span><span class="n">flParameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setFlName</span><span class="p">(</span><span class="n">flName</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setDataMap</span><span class="p">(</span><span class="n">dataMap</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setTrainModelPath</span><span class="p">(</span><span class="n">trainModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setInferModelPath</span><span class="p">(</span><span class="n">inferModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setSslProtocol</span><span class="p">(</span><span class="n">sslProtocol</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setDeployEnv</span><span class="p">(</span><span class="n">deployEnv</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setDomainName</span><span class="p">(</span><span class="n">domainName</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setUseElb</span><span class="p">(</span><span class="n">useElb</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setServerNum</span><span class="p">(</span><span class="n">serverNum</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setThreadNum</span><span class="p">(</span><span class="n">threadNum</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setCpuBindMode</span><span class="p">(</span><span class="n">BindMode</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">cpuBindMode</span><span class="p">));</span>

<span class="c1">// start FLJob</span>
<span class="n">SyncFLJob</span><span class="w"> </span><span class="n">syncFLJob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SyncFLJob</span><span class="p">();</span>
<span class="n">syncFLJob</span><span class="p">.</span><span class="na">flJobRun</span><span class="p">();</span>
</pre></div>
</div>
</li>
<li><p>Sample code of a LeNet image classification task</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// create dataMap</span>
<span class="n">String</span><span class="w"> </span><span class="n">trainImagePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SyncFLClient/data/3500_clients_bin/f0178_39/f0178_39_bn_9_train_data.bin&quot;</span><span class="p">;</span>
<span class="n">String</span><span class="w"> </span><span class="n">trainLabelPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SyncFLClient/data/3500_clients_bin/f0178_39/f0178_39_bn_9_train_label.bin&quot;</span><span class="p">;</span>
<span class="n">String</span><span class="w"> </span><span class="n">evalImagePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SyncFLClient/data/3500_clients_bin/f0178_39/f0178_39_bn_1_test_data.bin&quot;</span><span class="p">;</span><span class="w">   </span><span class="c1">// Not necessary, if you don&#39;t need verify model accuracy after getModel, you don&#39;t need to set this parameter</span>
<span class="n">String</span><span class="w"> </span><span class="n">evalLabelPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SyncFLClient/data/3500_clients_bin/f0178_39/f0178_39_bn_1_test_label.bin&quot;</span><span class="p">;</span><span class="w">   </span><span class="c1">// Not necessary, if you don&#39;t need verify model accuracy after getModel, you don&#39;t need to set this parameter</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">RunType</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">dataMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">trainPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="n">trainPath</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">trainImagePath</span><span class="p">);</span>
<span class="n">trainPath</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">trainLabelPath</span><span class="p">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">evalPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">    </span><span class="c1">// Not necessary, if you don&#39;t need verify model accuracy after getModel, you don&#39;t need to set this parameter</span>
<span class="n">evalPath</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">evalImagePath</span><span class="p">);</span><span class="w">                  </span><span class="c1">// Not necessary, if you don&#39;t need verify model accuracy after getModel, you don&#39;t need to set this parameter</span>
<span class="n">evalPath</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">evalLabelPath</span><span class="p">);</span><span class="w">                  </span><span class="c1">// Not necessary, if you don&#39;t need verify model accuracy after getModel, you don&#39;t need to set this parameter</span>
<span class="n">dataMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">RunType</span><span class="p">.</span><span class="na">TRAINMODE</span><span class="p">,</span><span class="w"> </span><span class="n">trainPath</span><span class="p">);</span>
<span class="n">dataMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">RunType</span><span class="p">.</span><span class="na">EVALMODE</span><span class="p">,</span><span class="w"> </span><span class="n">evalPath</span><span class="p">);</span><span class="w">      </span><span class="c1">// Not necessary, if you don&#39;t need verify model accuracy after getModel, you don&#39;t need to set this parameter</span>

<span class="n">String</span><span class="w"> </span><span class="n">flName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.mindspore.flclient.demo.lenet.LenetClient&quot;</span><span class="p">;</span><span class="w">                         </span><span class="c1">// The package path of LenetClient.java</span>
<span class="n">String</span><span class="w"> </span><span class="n">trainModelPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SyncFLClient/lenet_train.mindir0.ms&quot;</span><span class="p">;</span><span class="w">                      </span><span class="c1">// Absolute path</span>
<span class="n">String</span><span class="w"> </span><span class="n">inferModelPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SyncFLClient/lenet_train.mindir0.ms&quot;</span><span class="p">;</span><span class="w">                      </span><span class="c1">// Absolute path, consistent with trainModelPath</span>
<span class="n">String</span><span class="w"> </span><span class="n">sslProtocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;TLSv1.2&quot;</span><span class="p">;</span>
<span class="n">String</span><span class="w"> </span><span class="n">deployEnv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;android&quot;</span><span class="p">;</span>
<span class="n">String</span><span class="w"> </span><span class="n">domainName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;http://10.113.216.106:6668&quot;</span><span class="p">;</span>
<span class="kt">boolean</span><span class="w"> </span><span class="n">ifUseElb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">serverNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">threadNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="n">BindMode</span><span class="w"> </span><span class="n">cpuBindMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BindMode</span><span class="p">.</span><span class="na">NOT_BINDING_CORE</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">batchSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">;</span>

<span class="n">FLParameter</span><span class="w"> </span><span class="n">flParameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setFlName</span><span class="p">(</span><span class="n">flName</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setDataMap</span><span class="p">(</span><span class="n">dataMap</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setTrainModelPath</span><span class="p">(</span><span class="n">trainModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setInferModelPath</span><span class="p">(</span><span class="n">inferModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setSslProtocol</span><span class="p">(</span><span class="n">sslProtocol</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setDeployEnv</span><span class="p">(</span><span class="n">deployEnv</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setDomainName</span><span class="p">(</span><span class="n">domainName</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setUseElb</span><span class="p">(</span><span class="n">useElb</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setServerNum</span><span class="p">(</span><span class="n">serverNum</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setThreadNum</span><span class="p">(</span><span class="n">threadNum</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setCpuBindMode</span><span class="p">(</span><span class="n">BindMode</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">cpuBindMode</span><span class="p">));</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setBatchSize</span><span class="p">(</span><span class="n">batchSize</span><span class="p">);</span>

<span class="c1">// start FLJob</span>
<span class="n">SyncFLJob</span><span class="w"> </span><span class="n">syncFLJob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SyncFLJob</span><span class="p">();</span>
<span class="n">syncFLJob</span><span class="p">.</span><span class="na">flJobRun</span><span class="p">();</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="modelinference-for-inferring-multiple-input-data-records">
<h2>modelInference() for Inferring Multiple Input Data Records<a class="headerlink" href="#modelinference-for-inferring-multiple-input-data-records" title="Permalink to this headline"></a></h2>
<p>Before calling the modelInference() API, instantiate the parameter class FLParameter and set related parameters as follows:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Mandatory</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Remarks</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>flName</p></td>
<td><p>String</p></td>
<td><p>Y</p></td>
<td><p>The package path of model script used by federated learning.</p></td>
<td><p>We provide two types of model scripts for your reference (<a class="reference external" href="https://gitee.com/mindspore/mindspore/tree/master/mindspore/lite/examples/quick_start_flclient/src/main/java/com/mindspore/flclient/demo/albert">Supervised sentiment classification task</a>, <a class="reference external" href="https://gitee.com/mindspore/mindspore/tree/master/mindspore/lite/examples/quick_start_flclient/src/main/java/com/mindspore/flclient/demo/lenet">LeNet image classification task</a>). For supervised sentiment classification tasks, this parameter can be set to the package path of the provided script file <a class="reference external" href="https://gitee.com/mindspore/mindspore/blob/master/mindspore/lite/examples/quick_start_flclient/src/main/java/com/mindspore/flclient/demo/albert/AlbertClient.java">AlBertClient.java</a>, like as <code class="docutils literal notranslate"><span class="pre">com.mindspore.flclient.demo.albert.AlbertClient</span></code>; for LeNet image classification tasks, this parameter can be set to the package path of the provided script file <a class="reference external" href="https://gitee.com/mindspore/mindspore/blob/master/mindspore/lite/examples/quick_start_flclient/src/main/java/com/mindspore/flclient/demo/lenet/LenetClient.java">LenetClient.java</a>, like as <code class="docutils literal notranslate"><span class="pre">com.mindspore.flclient.demo.lenet.LenetClient</span></code>. At the same time, users can refer to these two types of model scripts, define the model script by themselves, and then set the parameter to the package path of the customized model file ModelClient.java (which needs to inherit from the class <a class="reference external" href="https://gitee.com/mindspore/mindspore/blob/master/mindspore/lite/java/java/fl_client/src/main/java/com/mindspore/flclient/model/Client.java">Client.java</a>).</p></td>
</tr>
<tr class="row-odd"><td><p>dataMap</p></td>
<td><p>Map&lt;RunType, List<String/>/&gt;</p></td>
<td><p>Y</p></td>
<td><p>The path of Federated learning dataset.</p></td>
<td><p>The dataset of Map&lt;RunType, List<String/>/&gt; type, the key in the map is the RunType enumeration type, the value is the corresponding dataset list, when the key is RunType.TRAINMODE, the corresponding value is the training-related dataset list, when the key  is RunType.EVALMODE, it means that the corresponding value is a list of verification-related datasets, and when the key is RunType.INFERMODE, it means that the corresponding value is a list of inference-related datasets.</p></td>
</tr>
<tr class="row-even"><td><p>inferModelPath</p></td>
<td><p>String</p></td>
<td><p>Y</p></td>
<td><p>Path of an inference model used for federated learning, which is an absolute path of the .ms file.</p></td>
<td><p>For the normal federated learning mode (training and inference use the same model), the value of this parameter needs to be the same as that of <code class="docutils literal notranslate"><span class="pre">trainModelPath</span></code>; for the hybrid learning mode (training and inference use different models, and the server side also includes training process), this parameter is set to the path of actual inference model. It is recommended to set the path to the training App’s own directory to protect the data access security of the model itself.</p></td>
</tr>
<tr class="row-odd"><td><p>threadNum</p></td>
<td><p>int</p></td>
<td><p>N</p></td>
<td><p>The number of threads used in federated learning training and inference.</p></td>
<td><p>The default value is 1.</p></td>
</tr>
<tr class="row-even"><td><p>cpuBindMode</p></td>
<td><p>BindMode</p></td>
<td><p>N</p></td>
<td><p>The cpu core that threads need to bind during federated learning training and inference.</p></td>
<td><p>It is the enumeration type <code class="docutils literal notranslate"><span class="pre">BindMode</span></code>, where BindMode.NOT_BINDING_CORE represents the unbound core, which is automatically assigned by the system, BindMode.BIND_LARGE_CORE represents the bound large core, and BindMode.BIND_MIDDLE_CORE represents the bound middle core. The default value is BindMode.NOT_BINDING_CORE.</p></td>
</tr>
<tr class="row-odd"><td><p>batchSize</p></td>
<td><p>int</p></td>
<td><p>Y</p></td>
<td><p>The number of single-step training samples used in federated learning training and inference, that is, batch size.</p></td>
<td><p>It needs to be consistent with the batch size of the input data of the model.</p></td>
</tr>
</tbody>
</table>
<p>Create a SyncFLJob object and use the modelInference() method of the SyncFLJob class to start an inference task on the device. The inferred label array is returned.</p>
<p>The sample code is as follows:</p>
<ol class="arabic">
<li><p>Sample code of a supervised sentiment classification task</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// create dataMap</span>
<span class="n">String</span><span class="w"> </span><span class="n">inferTxtPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;data/albert/supervise/eval/eval.txt&quot;</span><span class="p">;</span>
<span class="n">String</span><span class="w"> </span><span class="n">vocabFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;data/albert/supervise/vocab.txt&quot;</span><span class="p">;</span>
<span class="n">String</span><span class="w"> </span><span class="n">idsFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;data/albert/supervise/vocab_map_ids.txt&quot;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">RunType</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">dataMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inferPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="n">inferPath</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">inferTxtPath</span><span class="p">);</span>
<span class="n">inferPath</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">vocabFile</span><span class="p">);</span>
<span class="n">inferPath</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">idsFile</span><span class="p">);</span>
<span class="n">dataMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">RunType</span><span class="p">.</span><span class="na">INFERMODE</span><span class="p">,</span><span class="w"> </span><span class="n">inferPath</span><span class="p">);</span>

<span class="n">String</span><span class="w"> </span><span class="n">flName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.mindspore.flclient.demo.albert.AlbertClient&quot;</span><span class="p">;</span><span class="w">                             </span><span class="c1">// The package path of AlBertClient.java</span>
<span class="n">String</span><span class="w"> </span><span class="n">inferModelPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ms/albert/train/albert_ad_train.mindir0.ms&quot;</span><span class="p">;</span><span class="w">                      </span><span class="c1">// Absolute path, consistent with trainModelPath</span>
<span class="kt">int</span><span class="w"> </span><span class="n">threadNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="n">BindMode</span><span class="w"> </span><span class="n">cpuBindMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BindMode</span><span class="p">.</span><span class="na">NOT_BINDING_CORE</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">batchSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">;</span>

<span class="n">FLParameter</span><span class="w"> </span><span class="n">flParameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setFlName</span><span class="p">(</span><span class="n">flName</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setDataMap</span><span class="p">(</span><span class="n">dataMap</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setInferModelPath</span><span class="p">(</span><span class="n">inferModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setThreadNum</span><span class="p">(</span><span class="n">threadNum</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setCpuBindMode</span><span class="p">(</span><span class="n">BindMode</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">cpuBindMode</span><span class="p">));</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setBatchSize</span><span class="p">(</span><span class="n">batchSize</span><span class="p">);</span>

<span class="c1">// inference</span>
<span class="n">SyncFLJob</span><span class="w"> </span><span class="n">syncFLJob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SyncFLJob</span><span class="p">();</span>
<span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">syncFLJob</span><span class="p">.</span><span class="na">modelInference</span><span class="p">();</span>
</pre></div>
</div>
</li>
<li><p>Sample code of a LeNet image classification</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// create dataMap</span>
<span class="n">String</span><span class="w"> </span><span class="n">inferImagePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SyncFLClient/data/3500_clients_bin/f0178_39/f0178_39_bn_1_test_data.bin&quot;</span><span class="p">;</span>
<span class="n">String</span><span class="w"> </span><span class="n">inferLabelPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SyncFLClient/data/3500_clients_bin/f0178_39/f0178_39_bn_1_test_label.bin&quot;</span><span class="p">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">RunType</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">dataMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">inferPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="n">inferPath</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">inferImagePath</span><span class="p">);</span>
<span class="n">inferPath</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">inferLabelPath</span><span class="p">);</span>
<span class="n">dataMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">RunType</span><span class="p">.</span><span class="na">INFERMODE</span><span class="p">,</span><span class="w"> </span><span class="n">inferPath</span><span class="p">);</span>

<span class="n">String</span><span class="w"> </span><span class="n">flName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.mindspore.flclient.demo.lenet.LenetClient&quot;</span><span class="p">;</span><span class="w">                         </span><span class="c1">// The package path of LenetClient.java package</span>
<span class="n">String</span><span class="w"> </span><span class="n">inferModelPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SyncFLClient/lenet_train.mindir0.ms&quot;</span><span class="p">;</span><span class="w">                              </span><span class="c1">// Absolute path, consistent with trainModelPath</span>
<span class="kt">int</span><span class="w"> </span><span class="n">threadNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="n">BindMode</span><span class="w"> </span><span class="n">cpuBindMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BindMode</span><span class="p">.</span><span class="na">NOT_BINDING_CORE</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">batchSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">;</span>

<span class="n">FLParameter</span><span class="w"> </span><span class="n">flParameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setFlName</span><span class="p">(</span><span class="n">flName</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setDataMap</span><span class="p">(</span><span class="n">dataMap</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setInferModelPath</span><span class="p">(</span><span class="n">inferModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setThreadNum</span><span class="p">(</span><span class="n">threadNum</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setCpuBindMode</span><span class="p">(</span><span class="n">BindMode</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">cpuBindMode</span><span class="p">));</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setBatchSize</span><span class="p">(</span><span class="n">batchSize</span><span class="p">);</span>

<span class="c1">// inference</span>
<span class="n">SyncFLJob</span><span class="w"> </span><span class="n">syncFLJob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SyncFLJob</span><span class="p">();</span>
<span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">syncFLJob</span><span class="p">.</span><span class="na">modelInference</span><span class="p">();</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="getmodel-for-obtaining-the-latest-model-on-the-cloud">
<h2>getModel() for Obtaining the Latest Model on the Cloud<a class="headerlink" href="#getmodel-for-obtaining-the-latest-model-on-the-cloud" title="Permalink to this headline"></a></h2>
<p>Before calling the getModel() API, instantiate the parameter class FLParameter and set related parameters as follows:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Mandatory</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Remarks</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>flName</p></td>
<td><p>String</p></td>
<td><p>Y</p></td>
<td><p>The package path of model script used by federated learning.</p></td>
<td><p>We provide two types of model scripts for your reference (<a class="reference external" href="https://gitee.com/mindspore/mindspore/tree/master/mindspore/lite/examples/quick_start_flclient/src/main/java/com/mindspore/flclient/demo/albert">Supervised sentiment classification task</a>, <a class="reference external" href="https://gitee.com/mindspore/mindspore/tree/master/mindspore/lite/examples/quick_start_flclient/src/main/java/com/mindspore/flclient/demo/lenet">LeNet image classification task</a>). For supervised sentiment classification tasks, this parameter can be set to the package path of the provided script file <a class="reference external" href="https://gitee.com/mindspore/mindspore/blob/master/mindspore/lite/examples/quick_start_flclient/src/main/java/com/mindspore/flclient/demo/albert/AlbertClient.java">AlBertClient.java</a>, like as <code class="docutils literal notranslate"><span class="pre">com.mindspore.flclient.demo.albert.AlbertClient</span></code>; for LeNet image classification tasks, this parameter can be set to the package path of the provided script file <a class="reference external" href="https://gitee.com/mindspore/mindspore/blob/master/mindspore/lite/examples/quick_start_flclient/src/main/java/com/mindspore/flclient/demo/lenet/LenetClient.java">LenetClient.java</a>, like as <code class="docutils literal notranslate"><span class="pre">com.mindspore.flclient.demo.lenet.LenetClient</span></code>. At the same time, users can refer to these two types of model scripts, define the model script by themselves, and then set the parameter to the package path of the customized model file ModelClient.java (which needs to inherit from the class <a class="reference external" href="https://gitee.com/mindspore/mindspore/blob/master/mindspore/lite/java/java/fl_client/src/main/java/com/mindspore/flclient/model/Client.java">Client.java</a>).</p></td>
</tr>
<tr class="row-odd"><td><p>trainModelPath</p></td>
<td><p>String</p></td>
<td><p>Y</p></td>
<td><p>Path of a training model used for federated learning, which is an absolute path of the .ms file.</p></td>
<td><p>It is recommended to set the path to the training App’s own directory to protect the data access security of the model itself.</p></td>
</tr>
<tr class="row-even"><td><p>inferModelPath</p></td>
<td><p>String</p></td>
<td><p>Y</p></td>
<td><p>Path of an inference model used for federated learning, which is an absolute path of the .ms file.</p></td>
<td><p>For the normal federated learning mode (training and inference use the same model), the value of this parameter needs to be the same as that of <code class="docutils literal notranslate"><span class="pre">trainModelPath</span></code>; for the hybrid learning mode (training and inference use different models, and the server side also includes training process), this parameter is set to the path of actual inference model. It is recommended to set the path to the training App’s own directory to protect the data access security of the model itself.</p></td>
</tr>
<tr class="row-odd"><td><p>sslProtocol</p></td>
<td><p>String</p></td>
<td><p>N</p></td>
<td><p>The TLS protocol version used by the device-cloud HTTPS communication.</p></td>
<td><p>A whitelist is set, and currently only “TLSv1.3” or “TLSv1.2” is supported. Only need to set it up in the HTTPS communication scenario.</p></td>
</tr>
<tr class="row-even"><td><p>deployEnv</p></td>
<td><p>String</p></td>
<td><p>Y</p></td>
<td><p>The deployment environment for federated learning.</p></td>
<td><p>A whitelist is set, currently only “x86”, “android” are supported.</p></td>
</tr>
<tr class="row-odd"><td><p>certPath</p></td>
<td><p>String</p></td>
<td><p>N</p></td>
<td><p>The self-signed root certificate path used for device-cloud HTTPS communication.</p></td>
<td><p>When the deployment environment is “x86” and the device-cloud uses a self-signed certificate for HTTPS communication authentication, this parameter needs to be set. The certificate must be consistent with the CA root certificate used to generate the cloud-side self-signed certificate to pass the verification. This parameter is used for non-Android scenarios.</p></td>
</tr>
<tr class="row-even"><td><p>domainName</p></td>
<td><p>String</p></td>
<td><p>Y</p></td>
<td><p>The url for device-cloud communication.</p></td>
<td><p>Currently, https and http communication are supported, the corresponding formats are like: https://……, http://……, and when <code class="docutils literal notranslate"><span class="pre">useElb</span></code> is set to true, the format must be: https://127.0.0.0 : 6666 or http://127.0.0.0 : 6666 , where <code class="docutils literal notranslate"><span class="pre">127.0.0.0</span></code> corresponds to the ip of the machine providing cloud-side services (corresponding to the cloud-side parameter <code class="docutils literal notranslate"><span class="pre">--scheduler_ip</span></code>), and <code class="docutils literal notranslate"><span class="pre">6666</span></code> corresponds to the cloud-side parameter <code class="docutils literal notranslate"><span class="pre">--fl_server_port</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>ifUseElb</p></td>
<td><p>boolean</p></td>
<td><p>N</p></td>
<td><p>Used for multi-server scenarios to set whether to randomly send client requests to different servers within a certain range.</p></td>
<td><p>Setting to true means that the client will randomly send requests to a certain range of server addresses, and false means that the client’s requests will be sent to a fixed server address. This parameter is used in non-Android scenarios, and the default value is false.</p></td>
</tr>
<tr class="row-even"><td><p>serverNum</p></td>
<td><p>int</p></td>
<td><p>N</p></td>
<td><p>The number of servers that the client can choose to connect to.</p></td>
<td><p>When <code class="docutils literal notranslate"><span class="pre">ifUseElb</span></code> is set to true, it can be set to be consistent with the <code class="docutils literal notranslate"><span class="pre">server_num</span></code> parameter when the server is started on the cloud side. It is used to randomly select different servers to send information. This parameter is used in non-Android scenarios. The default value is 1.</p></td>
</tr>
<tr class="row-odd"><td><p>serverMod</p></td>
<td><p>ServerMod</p></td>
<td><p>Y</p></td>
<td><p>The federated learning training mode.</p></td>
<td><p>The federated learning training mode of ServerMod enumeration type, where ServerMod.FEDERATED_LEARNING represents the normal federated learning mode (training and inference use the same model) ServerMod.HYBRID_TRAINING represents the hybrid learning mode (training and inference use different models, and the server side also includes training process).</p></td>
</tr>
</tbody>
</table>
<p>Note 1: When using HTTP communication, there may exist communication security risks, please be aware.</p>
<p>Note 2: In the Android environment, the following parameters need to be set when using HTTPS communication. The setting examples are as follows:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">FLParameter</span><span class="w"> </span><span class="n">flParameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">SecureSSLSocketFactory</span><span class="w"> </span><span class="n">sslSocketFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SecureSSLSocketFactory</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">)</span>
<span class="n">SecureX509TrustManager</span><span class="w"> </span><span class="n">x509TrustManager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SecureX509TrustManager</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setSslSocketFactory</span><span class="p">(</span><span class="n">sslSocketFactory</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setX509TrustManager</span><span class="p">(</span><span class="n">x509TrustManager</span><span class="p">);</span>
</pre></div>
</div>
<p>Among them, the two objects <code class="docutils literal notranslate"><span class="pre">SecureSSLSocketFactory</span></code> and <code class="docutils literal notranslate"><span class="pre">SecureX509TrustManager</span></code> need to be implemented in the Android project, and users need to design themselves according to the type of certificate in the mobile phone.</p>
<p>Note 3: In the x86 environment, currently only self-signed certificate authentication is  supported when using HTTPS communication, and the following parameters need to be set. The setting examples are as follows:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">FLParameter</span><span class="w"> </span><span class="n">flParameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">String</span><span class="w"> </span><span class="n">certPath</span><span class="w">  </span><span class="o">=</span><span class="w">  </span><span class="s">&quot;CARoot.pem&quot;</span><span class="p">;</span><span class="w">             </span><span class="c1">//  the self-signed root certificate path used for device-cloud HTTPS communication.</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setCertPath</span><span class="p">(</span><span class="n">certPath</span><span class="p">);</span>
</pre></div>
</div>
<p>Note 4: Before calling the getModel method, the FLParameter class will be instantiated for related parameter settings. When FLParameter is instantiated, a clientID is automatically generated randomly, which is used to uniquely identify the client during the interaction with the cloud side. If the user needs to set the clientID by himself, after instantiating the FLParameter class, call its setCertPath method to set it, and then after starting the getModel task, the clientID set by the user will be used.</p>
<p>Create a SyncFLJob object and use the getModel() method of the SyncFLJob class to start an asynchronous inference task. The status code of the getModel request is returned.</p>
<p>The sample code is as follows:</p>
<ol class="arabic">
<li><p>Supervised sentiment classification task</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">String</span><span class="w"> </span><span class="n">flName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.mindspore.flclient.demo.albert.AlbertClient&quot;</span><span class="p">;</span><span class="w">                             </span><span class="c1">// The package path of AlBertClient.java package</span>
<span class="n">String</span><span class="w"> </span><span class="n">trainModelPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ms/albert/train/albert_ad_train.mindir0.ms&quot;</span><span class="p">;</span><span class="w">                      </span><span class="c1">// Absolute path</span>
<span class="n">String</span><span class="w"> </span><span class="n">inferModelPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ms/albert/train/albert_ad_train.mindir0.ms&quot;</span><span class="p">;</span><span class="w">                      </span><span class="c1">// Absolute path, consistent with trainModelPath</span>
<span class="n">String</span><span class="w"> </span><span class="n">sslProtocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;TLSv1.2&quot;</span><span class="p">;</span>
<span class="n">String</span><span class="w"> </span><span class="n">deployEnv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;android&quot;</span><span class="p">;</span>
<span class="n">String</span><span class="w"> </span><span class="n">domainName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;http://10.113.216.106:6668&quot;</span><span class="p">;</span>
<span class="kt">boolean</span><span class="w"> </span><span class="n">ifUseElb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">serverNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="n">ServerMod</span><span class="w"> </span><span class="n">serverMod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ServerMod</span><span class="p">.</span><span class="na">FEDERATED_LEARNING</span><span class="p">;</span>

<span class="n">FLParameter</span><span class="w"> </span><span class="n">flParameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setFlName</span><span class="p">(</span><span class="n">flName</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setTrainModelPath</span><span class="p">(</span><span class="n">trainModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setInferModelPath</span><span class="p">(</span><span class="n">inferModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setSslProtocol</span><span class="p">(</span><span class="n">sslProtocol</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setDeployEnv</span><span class="p">(</span><span class="n">deployEnv</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setDomainName</span><span class="p">(</span><span class="n">domainName</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setUseElb</span><span class="p">(</span><span class="n">useElb</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setServerNum</span><span class="p">(</span><span class="n">serverNum</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setServerMod</span><span class="p">(</span><span class="n">ServerMod</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">serverMod</span><span class="p">));</span>

<span class="c1">// getModel</span>
<span class="n">SyncFLJob</span><span class="w"> </span><span class="n">syncFLJob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SyncFLJob</span><span class="p">();</span>
<span class="n">syncFLJob</span><span class="p">.</span><span class="na">getModel</span><span class="p">();</span>
</pre></div>
</div>
</li>
<li><p>LeNet image classification task</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">String</span><span class="w"> </span><span class="n">flName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.mindspore.flclient.demo.lenet.LenetClient&quot;</span><span class="p">;</span><span class="w">                         </span><span class="c1">// The package path of LenetClient.java package</span>
<span class="n">String</span><span class="w"> </span><span class="n">trainModelPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SyncFLClient/lenet_train.mindir0.ms&quot;</span><span class="p">;</span><span class="w">                             </span><span class="c1">// Absolute path</span>
<span class="n">String</span><span class="w"> </span><span class="n">inferModelPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SyncFLClient/lenet_train.mindir0.ms&quot;</span><span class="p">;</span><span class="w">                             </span><span class="c1">// Absolute path, consistent with trainModelPath</span>
<span class="n">String</span><span class="w"> </span><span class="n">sslProtocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;TLSv1.2&quot;</span><span class="p">;</span>
<span class="n">String</span><span class="w"> </span><span class="n">deployEnv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;android&quot;</span><span class="p">;</span>
<span class="n">String</span><span class="w"> </span><span class="n">domainName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;http://10.113.216.106:6668&quot;</span><span class="p">;</span>
<span class="kt">boolean</span><span class="w"> </span><span class="n">ifUseElb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">serverNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span>
<span class="n">ServerMod</span><span class="w"> </span><span class="n">serverMod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ServerMod</span><span class="p">.</span><span class="na">FEDERATED_LEARNING</span><span class="p">;</span>

<span class="n">FLParameter</span><span class="w"> </span><span class="n">flParameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLParameter</span><span class="p">.</span><span class="na">getInstance</span><span class="p">();</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setFlName</span><span class="p">(</span><span class="n">flName</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setTrainModelPath</span><span class="p">(</span><span class="n">trainModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setInferModelPath</span><span class="p">(</span><span class="n">inferModelPath</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setSslProtocol</span><span class="p">(</span><span class="n">sslProtocol</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setDeployEnv</span><span class="p">(</span><span class="n">deployEnv</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setDomainName</span><span class="p">(</span><span class="n">domainName</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setUseElb</span><span class="p">(</span><span class="n">useElb</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setServerNum</span><span class="p">(</span><span class="n">serverNum</span><span class="p">);</span>
<span class="n">flParameter</span><span class="p">.</span><span class="na">setServerMod</span><span class="p">(</span><span class="n">ServerMod</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">serverMod</span><span class="p">));</span>

<span class="c1">// getModel</span>
<span class="n">SyncFLJob</span><span class="w"> </span><span class="n">syncFLJob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SyncFLJob</span><span class="p">();</span>
<span class="n">syncFLJob</span><span class="p">.</span><span class="na">getModel</span><span class="p">();</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>


           </div>
           
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="java_api_syncfljob.html" class="btn btn-neutral float-left" title="SyncFLJob" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cross_silo.html" class="btn btn-neutral float-right" title="Cross-Silo" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   
</body>
</html>