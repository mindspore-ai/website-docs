<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>mindspore_lite.Converter &mdash; MindSpore Lite master 文档</title>
      <link rel="stylesheet" href="../_static/collapsible-lists/css/tree_view.css" type="text/css" /><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
        <script src="../_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
        <script src="../_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="mindspore_lite.ModelType" href="mindspore_lite.ModelType.html" />
    <link rel="prev" title="mindspore_lite.FmkType" href="mindspore_lite.FmkType.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MindSpore Lite
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">C++ API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_cpp/mindspore.html">mindspore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_cpp/mindspore_NN.html">mindspore::NN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_cpp/mindspore_api.html">mindspore::api</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_cpp/mindspore_api_utils.html">mindspore::api::utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_cpp/mindspore_converter.html">mindspore::converter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_cpp/mindspore_dataset.html">mindspore::dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_cpp/mindspore_dataset_transforms.html">mindspore::dataset::transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_cpp/mindspore_kernel.html">mindspore::kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_cpp/mindspore_ops.html">mindspore::ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_cpp/mindspore_registry.html">mindspore::registry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_cpp/mindspore_registry_opencl.html">mindspore::registry::opencl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_cpp/lite_cpp_example.html">样例</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">JAVA API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_java/class_list.html">类列表</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_java/model.html">Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_java/model_parallel_runner.html">ModelParallelRunner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_java/mscontext.html">MSContext</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_java/mstensor.html">MSTensor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_java/runner_config.html">RunnerConfig</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_java/graph.html">Graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_java/lite_java_example.html">样例</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../mindspore_lite.html">mindspore_lite</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../mindspore_lite.html#运行环境">运行环境</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../mindspore_lite.html#转换">转换</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="mindspore_lite.FmkType.html">mindspore_lite.FmkType</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">mindspore_lite.Converter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mindspore_lite.html#模型">模型</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mindspore_lite.html#张量">张量</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">C API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_c/context_c.html">context_c</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_c/data_type_c.html">data_type_c</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_c/format_c.html">format_c</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_c/model_c.html">model_c</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_c/tensor_c.html">tensor_c</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_c/types_c.html">types_c</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_c/lite_c_example.html">样例</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MindSpore Lite</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../mindspore_lite.html">mindspore_lite</a> &raquo;</li>
      <li>mindspore_lite.Converter</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/mindspore_lite/mindspore_lite.Converter.rst.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="mindspore-lite-converter">
<h1>mindspore_lite.Converter<a class="headerlink" href="#mindspore-lite-converter" title="永久链接至标题"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="mindspore_lite.Converter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindspore_lite.</span></span><span class="sig-name descname"><span class="pre">Converter</span></span><a class="reference internal" href="../_modules/mindspore_lite/converter.html#Converter"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindspore_lite.Converter" title="打开链接"></a></dt>
<dd><p>Constructs a <cite>Converter</cite> class.</p>
<p>Used in the following scenarios:</p>
<ol class="arabic simple">
<li><p>Convert the third-party model into MindSpore model or MindSpore Lite model.</p></li>
<li><p>Convert MindSpore model into MindSpore model or MindSpore Lite model.</p></li>
</ol>
<p>Convert to MindSpore model is recommended. Currently, Convert to MindSpore Lite model is supported,
but it will be deprecated in the future. If you want to convert to MindSpore Lite model, please use
<a class="reference external" href="https://www.mindspore.cn/lite/docs/en/master/use/cloud_infer/converter_tool.html">converter_tool</a>  instead of
The Python interface. The Model api and ModelParallelRunner api only support MindSpore model.</p>
<div class="admonition note">
<p class="admonition-title">说明</p>
<p>Please construct the <cite>Converter</cite> class first, and then generate the model by executing the Converter.convert()
method.</p>
<p>The encryption and decryption function is only valid when it is set to <cite>MSLITE_ENABLE_MODEL_ENCRYPTION=on</cite> at
compile time, and only supports Linux x86 platforms. <cite>decrypt_key</cite> and <cite>encrypt_key</cite> are string expressed in
hexadecimal. For example, if encrypt_key is set as “30313233343637383939414243444546”, the corresponding
hexadecimal expression is ‘(b)0123456789ABCDEF’ . Linux platform users can use the’ xxd ‘tool to convert the
key expressed in bytes into hexadecimal expressions. It should be noted that the encryption and decryption
algorithm has been updated in version 1.7, resulting in the new Python interface does not support the conversion
of MindSpore Lite’s encryption exported models in version 1.6 and earlier.</p>
</div>
<p class="rubric">样例</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># testcase based on cloud inference package.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mindspore_lite</span> <span class="k">as</span> <span class="nn">mslite</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span> <span class="o">=</span> <span class="n">mslite</span><span class="o">.</span><span class="n">Converter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The ms model may be generated only after converter.convert() is executed after the class is constructed.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span><span class="o">.</span><span class="n">weight_fp16</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span><span class="o">.</span><span class="n">input_shape</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;inTensor1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span><span class="o">.</span><span class="n">input_format</span> <span class="o">=</span> <span class="n">mslite</span><span class="o">.</span><span class="n">Format</span><span class="o">.</span><span class="n">NHWC</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span><span class="o">.</span><span class="n">input_data_type</span> <span class="o">=</span> <span class="n">mslite</span><span class="o">.</span><span class="n">DataType</span><span class="o">.</span><span class="n">FLOAT32</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span><span class="o">.</span><span class="n">output_data_type</span> <span class="o">=</span> <span class="n">mslite</span><span class="o">.</span><span class="n">DataType</span><span class="o">.</span><span class="n">FLOAT32</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span><span class="o">.</span><span class="n">save_type</span> <span class="o">=</span> <span class="n">mslite</span><span class="o">.</span><span class="n">ModelType</span><span class="o">.</span><span class="n">MINDIR</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span><span class="o">.</span><span class="n">decrypt_key</span> <span class="o">=</span> <span class="s2">&quot;30313233343637383939414243444546&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span><span class="o">.</span><span class="n">decrypt_mode</span> <span class="o">=</span> <span class="s2">&quot;AES-GCM&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span><span class="o">.</span><span class="n">enable_encryption</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span><span class="o">.</span><span class="n">encrypt_key</span> <span class="o">=</span> <span class="s2">&quot;30313233343637383939414243444546&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span><span class="o">.</span><span class="n">infer</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span><span class="o">.</span><span class="n">optimize</span> <span class="o">=</span> <span class="s2">&quot;general&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="s2">&quot;Ascend&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">section</span> <span class="o">=</span> <span class="s2">&quot;common_quant_param&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_info_in</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;quant_type&quot;</span><span class="p">:</span> <span class="s2">&quot;WEIGHT_QUANT&quot;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span><span class="o">.</span><span class="n">set_config_info</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">config_info_in</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">converter</span><span class="o">.</span><span class="n">get_config_info</span><span class="p">())</span>
<span class="go">{&#39;common_quant_param&#39;: {&#39;quant_type&#39;: &#39;WEIGHT_QUANT&#39;}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">converter</span><span class="p">)</span>
<span class="go">config_info: {&#39;common_quant_param&#39;: {&#39;quant_type&#39;: &#39;WEIGHT_QUANT&#39;}},</span>
<span class="go">weight_fp16: True,</span>
<span class="go">input_shape: {&#39;inTensor1&#39;: [1, 3, 32, 32]},</span>
<span class="go">input_format: Format.NHWC,</span>
<span class="go">input_data_type: DataType.FLOAT32,</span>
<span class="go">output_data_type: DataType.FLOAT32,</span>
<span class="go">save_type: ModelType.MINDIR,</span>
<span class="go">decrypt_key: 30313233343637383939414243444546,</span>
<span class="go">decrypt_mode: AES-GCM,</span>
<span class="go">enable_encryption: True,</span>
<span class="go">encrypt_key: 30313233343637383939414243444546,</span>
<span class="go">infer: True,</span>
<span class="go">optimize: general,</span>
<span class="go">device: Ascend.</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mindspore_lite.Converter.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mindspore_lite/converter.html#Converter.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindspore_lite.Converter.__init__" title="打开链接"></a></dt>
<dd></dd></dl>

<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#mindspore_lite.Converter.__init__" title="mindspore_lite.Converter.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">convert</span></code>(fmk_type, model_file, output_file[, ...])</p></td>
<td><p>Perform conversion, and convert the third-party model to the MindSpore model or MindSpore Lite model.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_config_info</span></code>()</p></td>
<td><p>Get config info of converter.It is used together with <cite>set_config_info</cite> method for online converter.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_config_info</span></code>([section, config_info])</p></td>
<td><p>Set config info for Converter.It is used together with <cite>get_config_info</cite> method for online converter.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">decrypt_key</span></code></p></td>
<td><p>Get the key used to decrypt the encrypted MindIR file.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">decrypt_mode</span></code></p></td>
<td><p>Get decryption mode for the encrypted MindIR file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">device</span></code></p></td>
<td><p>Get target device when converter model.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">enable_encryption</span></code></p></td>
<td><p>Get the status whether to encrypt the model when exporting.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">encrypt_key</span></code></p></td>
<td><p>Get the key used to encrypt the model when exporting.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">infer</span></code></p></td>
<td><p>Get the status whether to perform pre-inference at the completion of the conversion.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">input_data_type</span></code></p></td>
<td><p>Get the data type of the quantization model input Tensor.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">input_format</span></code></p></td>
<td><p>Get the input format of model.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">input_shape</span></code></p></td>
<td><p>Get the dimension of the model input.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">optimize</span></code></p></td>
<td><p>Get the status whether avoid fusion optimization.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">output_data_type</span></code></p></td>
<td><p>Get the data type of the quantization model output Tensor.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_type</span></code></p></td>
<td><p>Get the model type needs to be export.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">weight_fp16</span></code></p></td>
<td><p>Get the status whether the model will be saved as the Float16 data type.</p></td>
</tr>
</tbody>
</table>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mindspore_lite.FmkType.html" class="btn btn-neutral float-left" title="mindspore_lite.FmkType" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="mindspore_lite.ModelType.html" class="btn btn-neutral float-right" title="mindspore_lite.ModelType" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2021, MindSpore Lite.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>