

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Building Device-side MindSpore Lite &mdash; MindSpore Lite master documentation</title>
  

  
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/bootstrap.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/lite.css" type="text/css" />
   
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  
  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/lite.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Building Cloud-side MindSpore Lite" href="cloud_infer/build.html" />
    <link rel="prev" title="Downloading MindSpore Lite" href="downloads.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> MindSpore Lite
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Obtain MindSpore Lite</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="downloads.html">Downloading MindSpore Lite</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Building Device-side MindSpore Lite</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#linux-environment-compilation">Linux Environment Compilation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#environment-requirements">Environment Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compilation-options">Compilation Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#instructions-for-parameters-of-build-sh">Instructions for parameters of <code class="docutils literal notranslate"><span class="pre">build.sh</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-build-compilation-options">Module build compilation options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compilation-example">Compilation Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#directory-structure">Directory Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#windows-environment-compilation">Windows Environment Compilation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#environment-requirements-1">Environment Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compilation-options-1">Compilation Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-compilation-parameter-of-build-bat">The compilation parameter of <code class="docutils literal notranslate"><span class="pre">build.bat</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-options-of-mindspore/lite/cmakelists-txt">The options of <code class="docutils literal notranslate"><span class="pre">mindspore/lite/CMakeLists.txt</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compilation-example-1">Compilation Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#directory-structure-1">Directory Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#macos-environment-compilation">macOS Environment Compilation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#environment-requirements-2">Environment Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compilation-options-2">Compilation Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-compilation-parameter-of-build-sh">The compilation parameter of <code class="docutils literal notranslate"><span class="pre">build.sh</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-options-of-mindsporelitecmakeliststxt-1">The options of <code class="docutils literal notranslate"><span class="pre">mindspore/lite/CMakeLists.txt</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compilation-example-2">Compilation Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#directory-structure-2">Directory Structure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cloud_infer/build.html">Building Cloud-side MindSpore Lite</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Quick Start</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/one_hour_introduction.html">Quick Start to Device-side Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/one_hour_introduction_cloud.html">Quick Start to Cloud-side Inference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Device-side Inference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../device_infer_example.html">Device-side Inference Sample</a></li>
<li class="toctree-l1"><a class="reference internal" href="post_training_quantization.html">Post Training Quantization</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_preprocessing.html">Data Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime.html">Executing Model Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="micro.html">Performing Inference or Training on MCU or Small Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="asic.html">Application Specific Integrated Circuit Integration Instructions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Device-side Training</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../device_train_example.html">Device-side Training Sample</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime_train.html">Executing Model Training</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Third-party hardware docking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="register.html">Custom Kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="delegate.html">Using Delegate to Support Third-party AI Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Device-side Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="converter.html">Converting Models for Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmark.html">Benchmark Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="cropper_tool.html">Static Library Cropper Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="visual_tool.html">Visualization Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="obfuscator_tool.html">Model Obfuscation Tool</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Cloud-side Inference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cloud_infer/runtime.html">Performing Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud_infer/runtime_parallel.html">Performing Concurrent Inference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Cloud-side Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cloud_infer/converter.html">Model Converter</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud_infer/benchmark.html">Benchmark Tool</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../architecture_lite.html">Overall Architecture (Lite)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operator_list_lite.html">Lite Operator List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operator_list_codegen.html">Codegen Operator List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model_lite.html">Model List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting_guide.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../log.html">Log</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../RELEASE.html">Release Notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MindSpore Lite</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Building Device-side MindSpore Lite</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/use/build.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section class="tex2jax_ignore mathjax_ignore" id="building-device-side-mindspore-lite">
<h1>Building Device-side MindSpore Lite<a class="headerlink" href="#building-device-side-mindspore-lite" title="Permalink to this headline"></a></h1>
<p><a href="https://gitee.com/mindspore/docs/blob/master/docs/lite/docs/source_en/use/build.md" target="_blank"><img src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/master/resource/_static/logo_source_en.png"></a></p>
<p>This chapter introduces how to quickly compile MindSpore Lite, which includes the following modules:</p>
<p>Modules in MindSpore Lite:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Module</p></th>
<th class="head"><p>Support Platform</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>converter</p></td>
<td><p>Linux, Windows</p></td>
<td><p>Model Conversion Tool</p></td>
</tr>
<tr class="row-odd"><td><p>runtime(cpp, java)</p></td>
<td><p>Linux, Windows, Android, iOS, OpenHarmony(OHOS)</p></td>
<td><p>Model Inference Framework(Windows platform does not support java version runtime)</p></td>
</tr>
<tr class="row-even"><td><p>benchmark</p></td>
<td><p>Linux, Windows, Android, OpenHarmony(OHOS)</p></td>
<td><p>Benchmarking Tool</p></td>
</tr>
<tr class="row-odd"><td><p>benchmark_train</p></td>
<td><p>Linux, Android</p></td>
<td><p>Performance and Accuracy Validation</p></td>
</tr>
<tr class="row-even"><td><p>cropper</p></td>
<td><p>Linux</p></td>
<td><p>Static library crop tool for libmindspore-lite.a</p></td>
</tr>
<tr class="row-odd"><td><p>minddata</p></td>
<td><p>Linux, Android</p></td>
<td><p>Image Processing Library</p></td>
</tr>
<tr class="row-even"><td><p>codegen</p></td>
<td><p>Linux</p></td>
<td><p>Model inference code generation tool</p></td>
</tr>
<tr class="row-odd"><td><p>obfuscator</p></td>
<td><p>Linux</p></td>
<td><p>Model Obfuscation Tool</p></td>
</tr>
</tbody>
</table>
<section id="linux-environment-compilation">
<h2>Linux Environment Compilation<a class="headerlink" href="#linux-environment-compilation" title="Permalink to this headline"></a></h2>
<section id="environment-requirements">
<h3>Environment Requirements<a class="headerlink" href="#environment-requirements" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The compilation environment supports Linux x86_64 only. Ubuntu 18.04.02 LTS is recommended.</p></li>
<li><p>Compilation dependencies of cpp:</p>
<ul>
<li><p><a class="reference external" href="https://gcc.gnu.org/releases.html">GCC</a> &gt;= 7.3.0</p></li>
<li><p><a class="reference external" href="https://cmake.org/download/">CMake</a> &gt;= 3.18.3</p></li>
<li><p><a class="reference external" href="https://git-scm.com/downloads">Git</a> &gt;= 2.28.0</p></li>
<li><p><a class="reference external" href="https://dl.google.com/android/repository/android-ndk-r20b-linux-x86_64.zip">Android_NDK</a> &gt;= r20</p>
<ul>
<li><p>Configure environment variables: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">ANDROID_NDK=NDK</span> <span class="pre">path</span></code>.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="http://ci.openharmony.cn/dailys/dailybuilds">OpenHarmony_NDK</a></p>
<ul>
<li><p>Download OpenHarmony NDK：Go to OpenHarmony daily build web site，select “modality” as “ohos-sdk”，then select any successfully built package to download. After downloading, the files in the unzipped package that begin with ‘native’ are OpenHarmony NDK.</p></li>
<li><p>Configure environment variables: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">OHOS_NDK=OHOS</span> <span class="pre">NDK</span> <span class="pre">path</span></code>, <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">TOOLCHAIN_NAME=ohos</span></code>.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Compilation dependency of the Java API module (optional). If the JAVA_HOME environment variable is not set, this module will not be compiled:</p>
<ul>
<li><p><a class="reference external" href="https://gradle.org/releases/">Gradle</a> &gt;= 6.6.1</p>
<ul>
<li><p>Configure environment variables: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">GRADLE_HOME=GRADLE</span> <span class="pre">path</span></code> and <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">GRADLE_USER_HOME=GRADLE</span> <span class="pre">path</span></code>.</p></li>
<li><p>Add the bin directory to the PATH: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">PATH=${GRADLE_HOME}/bin:$PATH</span></code>.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://archive.apache.org/dist/maven/maven-3/">Maven</a> &gt;= 3.3.1</p>
<ul>
<li><p>Configure environment variables: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">MAVEN_HOME=MAVEN</span> <span class="pre">path</span></code>.</p></li>
<li><p>Add the bin directory to the PATH: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">PATH=${MAVEN_HOME}/bin:$PATH</span></code>.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://openjdk.java.net/install/">OpenJDK</a>  1.8 to 1.15</p>
<ul>
<li><p>Configure environment variables: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">JAVA_HOME=JDK</span> <span class="pre">path</span></code>.</p></li>
<li><p>Add the bin directory to the PATH: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">PATH=${JAVA_HOME}/bin:$PATH</span></code>.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://developer.android.com/studio?hl=zh-cn#cmdline-tools">Android SDK</a></p>
<ul>
<li><p>Create a new directory, configure environment variables<code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">ANDROID_SDK_ROOT=new</span> <span class="pre">directory</span></code>.</p></li>
<li><p>Download <code class="docutils literal notranslate"><span class="pre">SDK</span> <span class="pre">Tools</span></code>, uncompress and go to directory <code class="docutils literal notranslate"><span class="pre">cmdline-tools/bin</span></code>, create SDK through <code class="docutils literal notranslate"><span class="pre">sdkmanager</span></code>: <code class="docutils literal notranslate"><span class="pre">./sdkmanager</span> <span class="pre">--sdk_root=${ANDROID_SDK_ROOT}</span> <span class="pre">&quot;cmdline-tools;latest&quot;</span></code>.</p></li>
<li><p>Accept the license through <code class="docutils literal notranslate"><span class="pre">sdkmanager</span></code> under the <code class="docutils literal notranslate"><span class="pre">${ANDROID_SDK_ROOT}</span></code> directory: <code class="docutils literal notranslate"><span class="pre">yes</span> <span class="pre">|</span> <span class="pre">./sdkmanager</span> <span class="pre">--licenses</span></code>.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Compilation dependency of the Python API module (optional). If Python3 or NumPy is not installed, this module will not be compiled:</p>
<ul>
<li><p><a class="reference external" href="https://www.python.org/">Python</a> &gt;= 3.7.0</p></li>
<li><p><a class="reference external" href="https://numpy.org/">NumPy</a> &gt;= 1.17.0 (If the installation with pip fails, please upgrade the pip version first: <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-U</span> <span class="pre">pip</span></code>)</p></li>
<li><p><a class="reference external" href="https://pypi.org/project/wheel/">wheel</a> &gt;= 0.32.0 (If the installation with pip fails, please upgrade the pip version first: <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-U</span> <span class="pre">pip</span></code>)</p></li>
</ul>
</li>
</ul>
<blockquote>
<div><p>Gradle is recommended to use the <a class="reference external" href="https://gradle.org/next-steps/?version=6.6.1&amp;format=all">gradle-6.6.1-complete</a> version. If you configure other versions, gradle will automatically download  <code class="docutils literal notranslate"><span class="pre">gradle-6.6.1-complete</span></code> by gradle wrapper mechanism.</p>
<p>You can also directly use the Docker compilation image that has been configured with the above dependencies.</p>
<ul class="simple">
<li><p>Download the docker image: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">pull</span> <span class="pre">swr.cn-south-1.myhuaweicloud.com/mindspore-build/mindspore-lite:ubuntu18.04.2-20210530</span></code></p></li>
<li><p>Create a container: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">-tid</span> <span class="pre">--net=host</span> <span class="pre">--name=docker01</span> <span class="pre">swr.cn-south-1.myhuaweicloud.com/mindspore-build/mindspore-lite:ubuntu18.04.2-20210530</span></code></p></li>
<li><p>Enter the container: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">exec</span> <span class="pre">-ti</span> <span class="pre">-u</span> <span class="pre">0</span> <span class="pre">docker01</span> <span class="pre">bash</span></code></p></li>
</ul>
</div></blockquote>
</section>
<section id="compilation-options">
<h3>Compilation Options<a class="headerlink" href="#compilation-options" title="Permalink to this headline"></a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">build.sh</span></code> in the root directory of MindSpore can be used to compile MindSpore Lite.</p>
<section id="instructions-for-parameters-of-build-sh">
<h4>Instructions for parameters of <code class="docutils literal notranslate"><span class="pre">build.sh</span></code><a class="headerlink" href="#instructions-for-parameters-of-build-sh" title="Permalink to this headline"></a></h4>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Parameter Description</p></th>
<th class="head"><p>Value Range</p></th>
<th class="head"><p>Defaults</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-I</p></td>
<td><p>Selects an applicable architecture.</p></td>
<td><p>arm64, arm32, or x86_64</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-odd"><td><p>-A</p></td>
<td><p>Compile AAR package (including arm32 and arm64).</p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
</tr>
<tr class="row-even"><td><p>-d</p></td>
<td><p>If this parameter is set, the debug version is compiled. Otherwise, the release version is compiled.</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-odd"><td><p>-i</p></td>
<td><p>If this parameter is set, incremental compilation is performed. Otherwise, full compilation is performed.</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-even"><td><p>-j[n]</p></td>
<td><p>Sets the number of threads used during compilation. Otherwise, the number of threads is set to 8 by default.</p></td>
<td><p>Integer</p></td>
<td><p>8</p></td>
</tr>
<tr class="row-odd"><td><p>-a</p></td>
<td><p>Whether to enable AddressSanitizer</p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><ul class="simple">
<li><p>When compiling the x86_64 version, if the JAVA_HOME environment variable is configured and Gradle is installed, the JAR package will be compiled at the same time.</p></li>
<li><p>When the <code class="docutils literal notranslate"><span class="pre">-I</span></code> parameter changes, such as <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code> is converted to <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm64</span></code>, adding <code class="docutils literal notranslate"><span class="pre">-i</span></code> for parameter compilation does not take effect.</p></li>
<li><p>When compiling the AAR package, the <code class="docutils literal notranslate"><span class="pre">-A</span> <span class="pre">on</span></code> parameter must be added, and there is no need to add the <code class="docutils literal notranslate"><span class="pre">-I</span></code> parameter.</p></li>
</ul>
</div></blockquote>
</section>
<section id="module-build-compilation-options">
<h4>Module build compilation options<a class="headerlink" href="#module-build-compilation-options" title="Permalink to this headline"></a></h4>
<p>The construction of modules is controlled by environment variables. Users can control the modules built by compiling by declaring relevant environment variables. After the compilation option is modified, in order to make the option effective, the <code class="docutils literal notranslate"><span class="pre">-i</span></code> parameter cannot be added for incremental compilation when compiling with the <code class="docutils literal notranslate"><span class="pre">build.sh</span></code> script.</p>
<ul class="simple">
<li><p>General module compilation options</p></li>
</ul>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Parameter Description</p></th>
<th class="head"><p>Value Range</p></th>
<th class="head"><p>Defaults</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>MSLITE_GPU_BACKEND</p></td>
<td><p>Set the GPU backend, only opencl is valid when the target OS is not OpenHarmony and <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm64</span></code>, and only tensorrt is valid when <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code></p></td>
<td><p>opencl, tensorrt, off</p></td>
<td><p>opencl when <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm64</span></code>, off when <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>MSLITE_ENABLE_NPU</p></td>
<td><p>Whether to compile NPU operator, only valid when the target OS is not OpenHarmony  <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm64</span></code> or <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm32</span></code></p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
</tr>
<tr class="row-even"><td><p>MSLITE_ENABLE_TRAIN</p></td>
<td><p>Whether to compile the training version</p></td>
<td><p>on, off</p></td>
<td><p>on</p></td>
</tr>
<tr class="row-odd"><td><p>MSLITE_ENABLE_SSE</p></td>
<td><p>Whether to enable SSE instruction set, only valid when <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code></p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
</tr>
<tr class="row-even"><td><p>MSLITE_ENABLE_AVX</p></td>
<td><p>Whether to enable AVX instruction set, only valid when <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code></p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
</tr>
<tr class="row-odd"><td><p>MSLITE_ENABLE_AVX512</p></td>
<td><p>Whether to enable AVX512 instruction set, only valid when <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code></p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
</tr>
<tr class="row-even"><td><p>MSLITE_ENABLE_CONVERTER</p></td>
<td><p>Whether to compile the model conversion tool, only valid when <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code></p></td>
<td><p>on, off</p></td>
<td><p>on</p></td>
</tr>
<tr class="row-odd"><td><p>MSLITE_ENABLE_TOOLS</p></td>
<td><p>Whether to compile supporting tools</p></td>
<td><p>on, off</p></td>
<td><p>on</p></td>
</tr>
<tr class="row-even"><td><p>MSLITE_ENABLE_TESTCASES</p></td>
<td><p>Whether to compile test cases</p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
</tr>
<tr class="row-odd"><td><p>MSLITE_ENABLE_MODEL_ENCRYPTION</p></td>
<td><p>Whether to support model encryption and decryption</p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
</tr>
<tr class="row-even"><td><p>MSLITE_ENABLE_MODEL_PRE_INFERENCE</p></td>
<td><p>Whether to enable pre-inference during model compilation</p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
</tr>
<tr class="row-odd"><td><p>MSLITE_ENABLE_GITEE_MIRROR</p></td>
<td><p>Whether to enable download third_party from gitee mirror</p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><ul class="simple">
<li><p>For TensorRT and NPU compilation environment configuration, refer to <a class="reference external" href="https://www.mindspore.cn/lite/docs/en/master/use/asic.html">Application Specific Integrated Circuit Integration Instructions</a>.</p></li>
<li><p>When the AVX instruction set is enabled, the CPU of the running environment needs to support both AVX and FMA features.</p></li>
<li><p>The compilation time of the model conversion tool is long. If it is not necessary, it is recommended to use <code class="docutils literal notranslate"><span class="pre">MSLITE_ENABLE_CONVERTER</span></code> to turn off the compilation of the conversion tool to speed up the compilation.</p></li>
<li><p>The version supported by the OpenSSL encryption library is 1.1.1k, which needs to be downloaded and compiled by the user. For the compilation, please refer to: <a class="reference external" href="https://github.com/openssl/openssl#build-and-install">https://github.com/openssl/openssl#build-and-install</a>. In addition, the path of libcrypto.so.1.1 should be added to LD_LIBRARY_PATH.</p></li>
<li><p>When pre-inference during model compilation is enabled, for the non-encrypted model, the inference framework will create a child process for pre-inference when Build interface is called. After the child process returns successfully, the main precess will formally execute the process of graph compilation.</p></li>
<li><p>At present, OpenHarmony only supports CPU reasoning, not GPU reasoning.</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>Runtime feature compilation options</p></li>
</ul>
<p>If the user is sensitive to the package size of the framework, the following options can be configured to reduce the package size by reducing the function of the runtime model reasoning framework. Then, the user can further reduce the package size by operator reduction through the <a class="reference external" href="https://www.mindspore.cn/lite/docs/en/master/use/build.html">reduction tool</a> or <a class="reference external" href="https://www.mindspore.cn/lite/docs/en/master/use/cropper_tool.html">download</a>.</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Parameter Description</p></th>
<th class="head"><p>Value Range</p></th>
<th class="head"><p>Defaults</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>MSLITE_STRING_KERNEL</p></td>
<td><p>Whether to support string data reasoning model, such as smart_reply.tflite</p></td>
<td><p>on,off</p></td>
<td><p>on</p></td>
</tr>
<tr class="row-odd"><td><p>MSLITE_ENABLE_CONTROLFLOW</p></td>
<td><p>Whether to support control flow model</p></td>
<td><p>on,off</p></td>
<td><p>on</p></td>
</tr>
<tr class="row-even"><td><p>MSLITE_ENABLE_WEIGHT_DECODE</p></td>
<td><p>Whether to support weight quantitative model</p></td>
<td><p>on,off</p></td>
<td><p>on</p></td>
</tr>
<tr class="row-odd"><td><p>MSLITE_ENABLE_CUSTOM_KERNEL</p></td>
<td><p>Whether to support southbound operator registration</p></td>
<td><p>on,off</p></td>
<td><p>on</p></td>
</tr>
<tr class="row-even"><td><p>MSLITE_ENABLE_DELEGATE</p></td>
<td><p>Whether to  support Delegate mechanism</p></td>
<td><p>on,off</p></td>
<td><p>on</p></td>
</tr>
<tr class="row-odd"><td><p>MSLITE_ENABLE_FP16</p></td>
<td><p>Whether to support FP16 operator</p></td>
<td><p>on,off</p></td>
<td><p>off when <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code>, on when <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm64</span></code>, when <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm32</span></code>, if the Android_NDK version is greater than r21e, it is on, otherwise it is off</p></td>
</tr>
<tr class="row-even"><td><p>MSLITE_ENABLE_INT8</p></td>
<td><p>Whether to support INT8 operator</p></td>
<td><p>on,off</p></td>
<td><p>on</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><ul class="simple">
<li><p>Since the implementation of NPU and TensorRT depends on the Delegate mechanism, the Delegate mechanism cannot be turned off when using NPU or TensorRT. If the Delegate mechanism is turned off, the related functions must also be turned off.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="compilation-example">
<h3>Compilation Example<a class="headerlink" href="#compilation-example" title="Permalink to this headline"></a></h3>
<p>First, download source code from the MindSpore code repository.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://gitee.com/mindspore/mindspore.git
</pre></div>
</div>
<p>Then, run the following commands in the root directory of the source code to compile MindSpore Lite of different versions:</p>
<ul>
<li><p>Compile the x86_64 architecture version and set the number of threads at the same time.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>x86_64<span class="w"> </span>-j32
</pre></div>
</div>
</li>
<li><p>Compile the ARM64 architecture version without compiling training-related code.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">MSLITE_ENABLE_TRAIN</span><span class="o">=</span>off
bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>arm64<span class="w"> </span>-j32
</pre></div>
</div>
<p>Or modify <code class="docutils literal notranslate"><span class="pre">mindspore/lite/CMakeLists.txt</span></code> to set MSLITE_ENABLE_TRAIN to off and execute the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>arm64<span class="w"> </span>-j32
</pre></div>
</div>
</li>
<li><p>Compile the AAR package containing aarch64 and aarch32.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-A<span class="w"> </span>on<span class="w"> </span>-j32
</pre></div>
</div>
</li>
<li><p>Compile the aarch32 or aarch64 package of the OpenHarmony OS:</p>
<p>Compile aarch32 package</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">OHOS_NDK</span><span class="o">=</span>OHOS<span class="w"> </span>NDK<span class="w"> </span>path
<span class="nb">export</span><span class="w"> </span><span class="nv">TOOLCHAIN_NAME</span><span class="o">=</span>ohos
bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>arm32<span class="w"> </span>-j32
</pre></div>
</div>
<p>Compile aarch64 package</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">OHOS_NDK</span><span class="o">=</span>OHOS<span class="w"> </span>NDK<span class="w"> </span>path
<span class="nb">export</span><span class="w"> </span><span class="nv">TOOLCHAIN_NAME</span><span class="o">=</span>ohos
bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>arm64<span class="w"> </span>-j32
</pre></div>
</div>
</li>
</ul>
<p>Finally, the following files will be generated in the <code class="docutils literal notranslate"><span class="pre">output/</span></code> directory:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mindspore-lite-{version}-{os}-{arch}.tar.gz</span></code>: Contains runtime, and related tools.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mindspore-lite-maven-{version}.zip</span></code>: The AAR package which contains runtime (java).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mindspore-lite-{version}-{python}-{os}-{arch}.whl</span></code>: The Whl package which contains runtime (Python).</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>version: Version of the output, consistent with that of the MindSpore.</p></li>
<li><p>python: Python version of the output, for example, Python 3.7 is <code class="docutils literal notranslate"><span class="pre">cp37-cp37m</span></code>.</p></li>
<li><p>os: Operating system on which the output will be deployed.</p></li>
<li><p>arch: System architecture on which the output will be deployed.</p></li>
</ul>
</div></blockquote>
<p>To experience the Python API, you need to move to the ‘output/’ directory and use the following command to install the Whl installation package.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span><span class="sb">`</span>mindspore-lite-<span class="o">{</span>version<span class="o">}</span>-<span class="o">{</span>python<span class="o">}</span>-<span class="o">{</span>os<span class="o">}</span>-<span class="o">{</span>arch<span class="o">}</span>.whl<span class="sb">`</span>
</pre></div>
</div>
<p>After installation, you can use the following command to check whether the installation is successful: If no error is reported, the installation is successful.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import mindspore_lite&quot;</span>
</pre></div>
</div>
<p>After successful installation, you can use the command of <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">show</span> <span class="pre">mindspore_lite</span></code> to check the installation location of the Python module of MindSpot Lite.</p>
</section>
<section id="directory-structure">
<h3>Directory Structure<a class="headerlink" href="#directory-structure" title="Permalink to this headline"></a></h3>
<ul>
<li><p>When the compilation option is <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mindspore-lite-{version}-linux-x64
├── runtime
│   ├── include
│   ├── lib
│   │   ├── libminddata-lite.a         # Static library of image processing
│   │   ├── libminddata-lite.so        # Dynamic library of image processing
│   │   ├── libmindspore-lite.a        # Static library of inference framework in MindSpore Lite
│   │   ├── libmindspore-lite-jni.so   # Dynamic library of inference framework jni in MindSpore Lite
│   │   ├── libmindspore-lite.so       # Dynamic library of inference framework in MindSpore Lite
│   │   ├── libmindspore-lite-train.a  # Static library of training framework in MindSpore Lite
│   │   ├── libmindspore-lite-train.so # Dynamic library of training framework in MindSpore Lite
│   │   ├── libmsdeobfuscator-lite.so  # The files of obfuscated model loading dynamic library, need to open the `MSLITE_ENABLE_MODEL_OBF` option.
│   │   └── mindspore-lite-java.jar    # Jar of inference framework in MindSpore Lite
│   └── third_party
│       └── libjpeg-turbo
└── tools
    ├── benchmark       # Benchmarking tool
    ├── benchmark_train # Training model benchmark tool
    ├── codegen         # Code generation tool
    ├── converter       # Model conversion tool
    ├── obfuscator      # Model obfuscation tool
    └── cropper         # Static library crop tool
</pre></div>
</div>
</li>
<li><p>When the compilation option is <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm64</span></code> or <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm32</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mindspore-lite-{version}-android-{arch}
├── runtime
│   ├── include
│   ├── lib
│   │   ├── libminddata-lite.a         # Static library of image processing
│   │   ├── libminddata-lite.so        # Dynamic library of image processing
│   │   ├── libmindspore-lite.a        # Static library of inference framework in MindSpore Lite
│   │   ├── libmindspore-lite.so       # Dynamic library of inference framework in MindSpore Lite
│   │   ├── libmindspore-lite-train.a  # Static library of training framework in MindSpore Lite
│   │   ├── libmindspore-lite-train.so # Dynamic library of training framework in MindSpore Lite
│   │   └── libmsdeobfuscator-lite.so  # The files of obfuscated model loading dynamic library, need to open the `MSLITE_ENABLE_MODEL_OBF` option.
│   └── third_party
│       ├── hiai_ddk
│       └── libjpeg-turbo
└── tools
    ├── benchmark       # Benchmarking tool
    ├── benchmark_train # Training model benchmark tool
    └── codegen         # Code generation tool
</pre></div>
</div>
</li>
<li><p>When the compilation option is <code class="docutils literal notranslate"><span class="pre">-A</span> <span class="pre">on</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mindspore-lite-maven-{version}
└── mindspore
    └── mindspore-lite
        └── {version}
            └── mindspore-lite-{version}.aar # MindSpore Lite runtime aar
</pre></div>
</div>
</li>
<li><p>When the compilation option is <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm64</span></code> or <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm32</span></code>，and specifies<code class="docutils literal notranslate"><span class="pre">TOOLCHAIN_NAME=ohos</span></code>：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mindspore-lite-{version}-ohos-{arch}
├── runtime
│   ├── include
│   └── lib
│       ├── libmindspore-lite.a  # Static library of inference framework in MindSpore Lite
│       └── libmindspore-lite.so # Dynamic library of training framework in MindSpore Lite
└── tools
    └── benchmark                # Benchmarking tool
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="windows-environment-compilation">
<h2>Windows Environment Compilation<a class="headerlink" href="#windows-environment-compilation" title="Permalink to this headline"></a></h2>
<section id="environment-requirements-1">
<h3>Environment Requirements<a class="headerlink" href="#environment-requirements-1" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>System environment: Windows 7, Windows 10; 64-bit.</p></li>
<li><p>MinGW compilation dependencies:</p>
<ul>
<li><p><a class="reference external" href="https://cmake.org/download/">CMake</a> &gt;= 3.18.3</p></li>
<li><p>Compile 64-bit: <a class="reference external" href="https://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/mingw-builds/7.3.0/threads-posix/seh/x86_64-7.3.0-release-posix-seh-rt_v5-rev0.7z">MinGW-W64 x86_64</a> = GCC-7.3.0</p></li>
<li><p>Compile 32-bit: <a class="reference external" href="https://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win32/Personal%20Builds/mingw-builds/7.3.0/threads-posix/dwarf/i686-7.3.0-release-posix-dwarf-rt_v5-rev0.7z">MinGW-W64 i686</a> = GCC-7.3.0</p></li>
</ul>
</li>
<li><p>Visual Studio compilation dependencies:</p>
<ul>
<li><p><a class="reference external" href="https://visualstudio.microsoft.com/vs/older-downloads/">Visual Studio</a> = 2017, cmake is included.</p></li>
<li><p>Compile 64-bit: Enter the start menu, click “x64 Native Tools Command Prompt for VS 2017”, or open the cmd window and execute <code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">&quot;C:\Program</span> <span class="pre">Files</span> <span class="pre">(x86)\Microsoft</span> <span class="pre">Visual</span> <span class="pre">Studio\2017\Profession\VC\Auxiliary\Build\vcvars64.bat&quot;</span></code>.</p></li>
<li><p>Compile 32-bit: Enter the start menu, click “x64_x86 Cross Tools Command Prompt for VS 2017”, or open the cmd window and execute <code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">&quot;C:\Program</span> <span class="pre">Files</span> <span class="pre">(x86)\Microsoft</span> <span class="pre">Visual</span> <span class="pre">Studio\2017\Profession\VC\Auxiliary\Build\vcvarsamd64_x86.bat&quot;</span></code>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="compilation-options-1">
<h3>Compilation Options<a class="headerlink" href="#compilation-options-1" title="Permalink to this headline"></a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">build.bat</span></code> in the root directory of MindSpore can be used to compile MindSpore Lite.</p>
<section id="the-compilation-parameter-of-build-bat">
<h4>The compilation parameter of <code class="docutils literal notranslate"><span class="pre">build.bat</span></code><a class="headerlink" href="#the-compilation-parameter-of-build-bat" title="Permalink to this headline"></a></h4>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Parameter Description</p></th>
<th class="head"><p>Mandatory or Not</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>lite</p></td>
<td><p>Set this parameter to compile the MindSpore Lite project.</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>[n]</p></td>
<td><p>Set the number of threads used during compilation, otherwise the default is set to 6 threads.</p></td>
<td><p>No</p></td>
</tr>
</tbody>
</table>
</section>
<section id="the-options-of-mindspore/lite/cmakelists-txt">
<h4>The options of <code class="docutils literal notranslate"><span class="pre">mindspore/lite/CMakeLists.txt</span></code><a class="headerlink" href="#the-options-of-mindspore/lite/cmakelists-txt" title="Permalink to this headline"></a></h4>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Parameter Description</p></th>
<th class="head"><p>Value Range</p></th>
<th class="head"><p>Defaults</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>MSLITE_ENABLE_SSE</p></td>
<td><p>Whether to enable SSE instruction set</p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
</tr>
<tr class="row-odd"><td><p>MSLITE_ENABLE_AVX</p></td>
<td><p>Whether to enable AVX instruction set (This option does not currently support the Visual Studio compiler)</p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
</tr>
<tr class="row-even"><td><p>MSLITE_ENABLE_AVX512</p></td>
<td><p>Whether to enable AVX512 instruction set (This option does not currently support the Visual Studio compiler)</p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
</tr>
<tr class="row-odd"><td><p>MSLITE_ENABLE_CONVERTER</p></td>
<td><p>Whether to compile the model conversion tool (This option does not currently support the Visual Studio compiler)</p></td>
<td><p>on, off</p></td>
<td><p>on</p></td>
</tr>
<tr class="row-even"><td><p>MSLITE_ENABLE_TOOLS</p></td>
<td><p>Whether to compile supporting tools</p></td>
<td><p>on, off</p></td>
<td><p>on</p></td>
</tr>
<tr class="row-odd"><td><p>MSLITE_ENABLE_TESTCASES</p></td>
<td><p>Whether to compile test cases</p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
</tr>
<tr class="row-even"><td><p>MSLITE_ENABLE_GITEE_MIRROR</p></td>
<td><p>Whether to enable download third_party from gitee mirror</p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><ul class="simple">
<li><p>The above options can be modified by setting the environment variable with the same name or the file <code class="docutils literal notranslate"><span class="pre">mindspore/lite/CMakeLists.txt</span></code>.</p></li>
<li><p>The compilation time of the model conversion tool is long. If it is not necessary, it is recommended to use <code class="docutils literal notranslate"><span class="pre">MSLITE_ENABLE_CONVERTER</span></code> to turn off the compilation of the conversion tool to speed up the compilation.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="compilation-example-1">
<h3>Compilation Example<a class="headerlink" href="#compilation-example-1" title="Permalink to this headline"></a></h3>
<p>First, use the git tool to download the source code from the MindSpore code repository.</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span>git clone https://gitee.com/mindspore/mindspore.git
</pre></div>
</div>
<p>Then, use the cmd tool to compile MindSpore Lite in the root directory of the source code and execute the following commands.</p>
<ul class="simple">
<li><p>Turn on SSE instruction set optimization and compile with 8 threads.</p></li>
</ul>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">set</span> <span class="nv">MSLITE_ENABLE_SSE</span><span class="p">=</span>on
<span class="k">call</span> build.bat lite 8
</pre></div>
</div>
<p>Finally, the following files will be generated in the <code class="docutils literal notranslate"><span class="pre">output/</span></code> directory:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mindspore-lite-{version}-win-x64.zip</span></code>: Contains model inference framework and related tool.</p></li>
</ul>
<blockquote>
<div><p>version: Version of the output, consistent with that of the MindSpore.</p>
</div></blockquote>
</section>
<section id="directory-structure-1">
<h3>Directory Structure<a class="headerlink" href="#directory-structure-1" title="Permalink to this headline"></a></h3>
<ul>
<li><p>When the compiler is MinGW:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mindspore-lite-{version}-win-x64
├── runtime
│   ├── include
│   └── lib
│       ├── libgcc_s_seh-1.dll      # Dynamic library of MinGW
│       ├── libmindspore-lite.a     # Static library of inference framework in MindSpore Lite
│       ├── libmindspore-lite.dll   # Dynamic library of inference framework in MindSpore Lite
│       ├── libmindspore-lite.dll.a # Link file of dynamic library of inference framework in MindSpore Lite
│       ├── libssp-0.dll            # Dynamic library of MinGW
│       ├── libstdc++-6.dll         # Dynamic library of MinGW
│       └── libwinpthread-1.dll     # Dynamic library of MinGW
└── tools
    ├── benchmark # Benchmarking tool
    └── converter # Model conversion tool
</pre></div>
</div>
</li>
<li><p>When the compiler is Visual Studio:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mindspore-lite-{version}-win-x64
├── runtime
│   ├── include
│   └── lib
│       ├── libmindspore-lite.dll     # Dynamic library of inference framework in MindSpore Lite
│       ├── libmindspore-lite.dll.lib # Import library of dynamic library of inference framework in MindSpore Lite
│       └── libmindspore-lite.lib     # Static library of inference framework in MindSpore Lite
└── tools
    └── benchmark # Benchmarking tool
</pre></div>
</div>
</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>When linking the static library compiled by MinGW, you need to add <code class="docutils literal notranslate"><span class="pre">-Wl,</span> <span class="pre">--whole-archive</span> <span class="pre">mindspore-lite</span> <span class="pre">-Wl,</span> <span class="pre">--no-whole-archive</span></code> in the link options.</p></li>
<li><p>When linking the static library compiled by Visual Studio, you need to add <code class="docutils literal notranslate"><span class="pre">/WHOLEARCHIVE:libmindspore-lite.lib</span></code> in “Property Pages -&gt; Linker -&gt; Command Line -&gt; Additional Options”.</p></li>
<li><p>When using the Visual Studio compiler, std::ios::binary must be added to read the model stream, otherwise the problem of incomplete reading of the model file will occur.</p></li>
<li><p>Currently, MindSpore Lite is not supported on Windows.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="macos-environment-compilation">
<h2>macOS Environment Compilation<a class="headerlink" href="#macos-environment-compilation" title="Permalink to this headline"></a></h2>
<section id="environment-requirements-2">
<h3>Environment Requirements<a class="headerlink" href="#environment-requirements-2" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>System environment: macOS 10.15.4 and above ; 64-bit.</p></li>
<li><p>Compilation dependencies are:</p>
<ul>
<li><p><a class="reference external" href="https://cmake.org/download/">CMake</a> &gt;= 3.18.3</p></li>
<li><p><a class="reference external" href="https://developer.apple.com/xcode/download/cn">Xcode</a> == 11.4.1</p></li>
<li><p><a class="reference external" href="https://git-scm.com/downloads">Git</a> &gt;= 2.28.0</p></li>
</ul>
</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>The compilation script will execute <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> to obtain the code of the third-party dependent libraries.</p></li>
</ul>
</div></blockquote>
</section>
<section id="compilation-options-2">
<h3>Compilation Options<a class="headerlink" href="#compilation-options-2" title="Permalink to this headline"></a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">build.sh</span></code> in the root directory of MindSpore can be used to compile MindSpore Lite.</p>
<section id="the-compilation-parameter-of-build-sh">
<h4>The compilation parameter of <code class="docutils literal notranslate"><span class="pre">build.sh</span></code><a class="headerlink" href="#the-compilation-parameter-of-build-sh" title="Permalink to this headline"></a></h4>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Parameter Description</p></th>
<th class="head"><p>Value Range</p></th>
<th class="head"><p>Defaults</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-I</p></td>
<td><p>Selects an applicable architecture.</p></td>
<td><p>arm64, arm32</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-odd"><td><p>-j[n]</p></td>
<td><p>Sets the number of threads used during compilation. Otherwise, the number of threads is set to 8 by default.</p></td>
<td><p>Integer</p></td>
<td><p>8</p></td>
</tr>
</tbody>
</table>
</section>
<section id="the-options-of-mindsporelitecmakeliststxt-1">
<h4>The options of <code class="docutils literal notranslate"><span class="pre">mindspore/lite/CMakeLists.txt</span></code><a class="headerlink" href="#the-options-of-mindsporelitecmakeliststxt-1" title="Permalink to this headline"></a></h4>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Parameter Description</p></th>
<th class="head"><p>Value Range</p></th>
<th class="head"><p>Defaults</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>MSLITE_ENABLE_COREML</p></td>
<td><p>Whether to enable CoreML backend</p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="compilation-example-2">
<h3>Compilation Example<a class="headerlink" href="#compilation-example-2" title="Permalink to this headline"></a></h3>
<p>First, use the git tool to download the source code from the MindSpore code repository.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://gitee.com/mindspore/mindspore.git
</pre></div>
</div>
<p>Then, use the cmd tool to compile MindSpore Lite in the root directory of the source code and execute the following commands.</p>
<ul>
<li><p>Compile the ARM64 architecture version</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>arm64<span class="w"> </span>-j8
</pre></div>
</div>
</li>
<li><p>Compile the ARM32 architecture version</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>arm32<span class="w"> </span>-j8
</pre></div>
</div>
</li>
</ul>
<p>Finally, the following files will be generated in the <code class="docutils literal notranslate"><span class="pre">output/</span></code> directory:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mindspore-lite-{version}-{os}-{arch}.tar.gz</span></code>: Contains model inference framework.</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>version: Version of the output, consistent with that of the MindSpore.</p></li>
<li><p>os: Operating system on which the output will be deployed.</p></li>
<li><p>arch: System architecture on which the output will be deployed.</p></li>
</ul>
</div></blockquote>
</section>
<section id="directory-structure-2">
<h3>Directory Structure<a class="headerlink" href="#directory-structure-2" title="Permalink to this headline"></a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mindspore-lite.framework
└── runtime
    ├── Headers        # The inference framework header files
    ├── Info.plist     # The configured files
    └── mindspore-lite # The static library
</pre></div>
</div>
<blockquote>
<div><p>Currently, device-side training and model conversion are not supported on macOS.</p>
</div></blockquote>
</section>
</section>
</section>


           </div>
           
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="downloads.html" class="btn btn-neutral float-left" title="Downloading MindSpore Lite" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cloud_infer/build.html" class="btn btn-neutral float-right" title="Building Cloud-side MindSpore Lite" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, MindSpore Lite.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   
</body>
</html>