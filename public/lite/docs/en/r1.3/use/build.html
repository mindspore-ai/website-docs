

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Building MindSpore Lite &mdash; MindSpore Lite master documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/bootstrap.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/lite.css" type="text/css" />
   
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  
  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/js/lite.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Experience C++ Simple Inference Demo" href="../quick_start/quick_start_cpp.html" />
    <link rel="prev" title="Downloading MindSpore Lite" href="downloads.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> MindSpore Lite
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Obtain MindSpore Lite</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="downloads.html">Downloading MindSpore Lite</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Building MindSpore Lite</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#linux-environment-compilation">Linux Environment Compilation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#environment-requirements">Environment Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compilation-options">Compilation Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-compilation-parameter-of-build-sh">The compilation parameter of <code class="docutils literal notranslate"><span class="pre">build.sh</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-options-of-mindspore-lite-cmakelists-txt">The options of <code class="docutils literal notranslate"><span class="pre">mindspore/lite/CMakeLists.txt</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compilation-example">Compilation Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#directory-structure">Directory Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#windows-environment-compilation">Windows Environment Compilation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Environment Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Compilation Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-compilation-parameter-of-build-bat">The compilation parameter of <code class="docutils literal notranslate"><span class="pre">build.bat</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">The options of <code class="docutils literal notranslate"><span class="pre">mindspore/lite/CMakeLists.txt</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Compilation Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">Directory Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#macos-environment-compilation">macOS Environment Compilation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id6">Environment Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">Compilation Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">The compilation parameter of <code class="docutils literal notranslate"><span class="pre">build.sh</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id9">Compilation Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">Directory Structure</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Quick Start</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/quick_start_cpp.html">Experience C++ Simple Inference Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/quick_start_java.html">Experience Java Simple Inference Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/quick_start.html">Android Application Development Based on JNI Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/image_segmentation.html">Android Application Development Based on Java Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/train_lenet.html">Implement Device Training Based On C++ Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/train_lenet_java.html">Implement Device Training Based On Java Interface</a></li>
</ul>
<p class="caption"><span class="caption-text">Inference on Devices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="converter_tool.html">Converting Models for Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="post_training_quantization.html">Optimizing the Model (Quantization After Training)</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_preprocessing.html">Data Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime.html">Executing Model Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="micro.html">Perform Inference on Mini and Small Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="asic.html">Application Specific Integrated Circuit Integration Instructions</a></li>
</ul>
<p class="caption"><span class="caption-text">Training on Devices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="converter_train.html">Creating MindSpore Lite Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime_train.html">Executing Model Training</a></li>
</ul>
<p class="caption"><span class="caption-text">Other Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="benchmark.html">Benchmark Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="cropper_tool.html">Static Library Cropper Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="visual_tool.html">Visual Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="obfuscator_tool.html">Obfuscator Tool</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../architecture_lite.html">Overall Architecture (Lite)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operator_list_lite.html">Lite Operator List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operator_list_codegen.html">Codegen Operator List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model_lite.html">Model List</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MindSpore Lite</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Building MindSpore Lite</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/use/build.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="building-mindspore-lite">
<h1>Building MindSpore Lite<a class="headerlink" href="#building-mindspore-lite" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Windows</span></code> <code class="docutils literal notranslate"><span class="pre">macOS</span></code> <code class="docutils literal notranslate"><span class="pre">Linux</span></code> <code class="docutils literal notranslate"><span class="pre">iOS</span></code> <code class="docutils literal notranslate"><span class="pre">Android</span></code> <code class="docutils literal notranslate"><span class="pre">Environment</span> <span class="pre">Preparation</span></code> <code class="docutils literal notranslate"><span class="pre">Intermediate</span></code> <code class="docutils literal notranslate"><span class="pre">Expert</span></code></p>
<!-- TOC -->
<ul class="simple">
<li><p><a class="reference external" href="#building-mindspore-lite">Building MindSpore Lite</a></p>
<ul>
<li><p><a class="reference external" href="#linux-environment-compilation">Linux Environment Compilation</a></p>
<ul>
<li><p><a class="reference external" href="#environment-requirements">Environment Requirements</a></p></li>
<li><p><a class="reference external" href="#compilation-options">Compilation Options</a></p></li>
<li><p><a class="reference external" href="#compilation-example">Compilation Example</a></p></li>
<li><p><a class="reference external" href="#directory-structure">Directory Structure</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#windows-environment-compilation">Windows Environment Compilation</a></p>
<ul>
<li><p><a class="reference external" href="#environment-requirements-1">Environment Requirements</a></p></li>
<li><p><a class="reference external" href="#compilation-options-1">Compilation Options</a></p></li>
<li><p><a class="reference external" href="#compilation-example-1">Compilation Example</a></p></li>
<li><p><a class="reference external" href="#directory-structure-1">Directory Structure</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#macOS-environment-compilation">macOS Environment Compilation</a></p>
<ul>
<li><p><a class="reference external" href="#environment-requirements">Environment Requirements</a></p></li>
<li><p><a class="reference external" href="#compilation-options-2">Compilation Options</a></p></li>
<li><p><a class="reference external" href="#compilation-example-2">Compilation Example</a></p></li>
<li><p><a class="reference external" href="#directory-structure-2">Directory Structure</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- /TOC -->
<p><a href="https://gitee.com/mindspore/docs/blob/r1.3/docs/lite/docs/source_en/use/build.md" target="_blank"><img src="https://gitee.com/mindspore/docs/raw/r1.3/resource/_static/logo_source.png"></a></p>
<p>This chapter introduces how to quickly compile MindSpore Lite, which includes the following modules:</p>
<p>Modules in MindSpore Lite:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Module</th>
<th>Support Platform</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>converter</td>
<td>Linux, Windows</td>
<td>Model Conversion Tool</td>
</tr>
<tr>
<td>runtime(cpp, java)</td>
<td>Linux, Windows, Android, iOS</td>
<td>Model Inference Framework(Windows platform does not support java version runtime)</td>
</tr>
<tr>
<td>benchmark</td>
<td>Linux, Windows, Android</td>
<td>Benchmarking Tool</td>
</tr>
<tr>
<td>benchmark_train</td>
<td>Linux, Android</td>
<td>Performance and Accuracy Validation</td>
</tr>
<tr>
<td>cropper</td>
<td>Linux</td>
<td>Static library crop tool for libmindspore-lite.a</td>
</tr>
<tr>
<td>minddata</td>
<td>Linux, Android</td>
<td>Image Processing Library</td>
</tr>
<tr>
<td>codegen</td>
<td>Linux</td>
<td>Model inference code generation tool</td>
</tr>
<tr>
<td>obfuscator</td>
<td>Linux</td>
<td>Model Obfuscation Tool</td>
</tr>
</tbody>
</table>
<div class="section" id="linux-environment-compilation">
<h2>Linux Environment Compilation<a class="headerlink" href="#linux-environment-compilation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="environment-requirements">
<h3>Environment Requirements<a class="headerlink" href="#environment-requirements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The compilation environment supports Linux x86_64 only. Ubuntu 18.04.02 LTS is recommended.</p></li>
<li><p>Compilation dependencies of cpp:</p>
<ul>
<li><p><a class="reference external" href="https://gcc.gnu.org/releases.html">GCC</a> &gt;= 7.3.0</p></li>
<li><p><a class="reference external" href="https://cmake.org/download/">CMake</a> &gt;= 3.18.3</p></li>
<li><p><a class="reference external" href="https://git-scm.com/downloads">Git</a> &gt;= 2.28.0</p></li>
<li><p><a class="reference external" href="https://dl.google.com/android/repository/android-ndk-r20b-linux-x86_64.zip">Android_NDK</a> &gt;= r20</p>
<ul>
<li><p>Configure environment variables: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">ANDROID_NDK=NDK</span> <span class="pre">path</span></code>.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Additional compilation dependencies of Java:</p>
<ul>
<li><p><a class="reference external" href="https://gradle.org/releases/">Gradle</a> &gt;= 6.6.1</p>
<ul>
<li><p>Configure environment variables: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">GRADLE_HOME=GRADLE</span> <span class="pre">path</span></code>.</p></li>
<li><p>Add the bin directory to the PATH: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">PATH=${GRADLE_HOME}/bin:$PATH</span></code>.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://openjdk.java.net/install/">OpenJDK</a> &gt;= 1.8</p>
<ul>
<li><p>Configure environment variables: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">JAVA_HOME=JDK</span> <span class="pre">path</span></code>.</p></li>
<li><p>Add the bin directory to the PATH: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">PATH=${JAVA_HOME}/bin:$PATH</span></code>.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://developer.android.com/studio?hl=zh-cn#cmdline-tools">Android SDK</a></p>
<ul>
<li><p>Create a new directory, configure environment variables<code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">ANDROID_SDK_ROOT=new</span> <span class="pre">directory</span></code>.</p></li>
<li><p>Download <code class="docutils literal notranslate"><span class="pre">SDK</span> <span class="pre">Tools</span></code>, create SDK through <code class="docutils literal notranslate"><span class="pre">sdkmanager</span></code>: <code class="docutils literal notranslate"><span class="pre">./sdkmanager</span> <span class="pre">--sdk_root=${ANDROID_SDK_ROOT}</span> <span class="pre">&quot;cmdline-tools;latest&quot;</span></code>.</p></li>
<li><p>Accept the license through <code class="docutils literal notranslate"><span class="pre">sdkmanager</span></code> under the <code class="docutils literal notranslate"><span class="pre">${ANDROID_SDK_ROOT}</span></code> directory: <code class="docutils literal notranslate"><span class="pre">yes</span> <span class="pre">|</span> <span class="pre">./sdkmanager</span> <span class="pre">--licenses</span></code>.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<div><p>You can also directly use the Docker compilation image that has been configured with the above dependencies.</p>
<ul class="simple">
<li><p>Download the docker image: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">pull</span> <span class="pre">swr.cn-south-1.myhuaweicloud.com/mindspore-build/mindspore-lite:ubuntu18.04.2-20210530</span></code></p></li>
<li><p>Create a container: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">-tid</span> <span class="pre">--net=host</span> <span class="pre">--name=docker01</span> <span class="pre">swr.cn-south-1.myhuaweicloud.com/mindspore-build/mindspore-lite:ubuntu18.04.2-20210530</span></code></p></li>
<li><p>Enter the container: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">exec</span> <span class="pre">-ti</span> <span class="pre">-u</span> <span class="pre">0</span> <span class="pre">docker01</span> <span class="pre">bash</span></code></p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="compilation-options">
<h3>Compilation Options<a class="headerlink" href="#compilation-options" title="Permalink to this headline">¶</a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">build.sh</span></code> in the root directory of MindSpore can be used to compile MindSpore Lite.</p>
<div class="section" id="the-compilation-parameter-of-build-sh">
<h4>The compilation parameter of <code class="docutils literal notranslate"><span class="pre">build.sh</span></code><a class="headerlink" href="#the-compilation-parameter-of-build-sh" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<thead>
<tr>
<th>Parameter</th>
<th>Parameter Description</th>
<th>Value Range</th>
<th>Defaults</th>
</tr>
</thead>
<tbody>
<tr>
<td>-I</td>
<td>Selects an applicable architecture.</td>
<td>arm64, arm32, or x86_64</td>
<td>None</td>
</tr>
<tr>
<td>-A</td>
<td>Compile AAR package (including arm32 and arm64).</td>
<td>on, off</td>
<td>off</td>
</tr>
<tr>
<td>-d</td>
<td>If this parameter is set, the debug version is compiled. Otherwise, the release version is compiled.</td>
<td>None</td>
<td>None</td>
</tr>
<tr>
<td>-i</td>
<td>If this parameter is set, incremental compilation is performed. Otherwise, full compilation is performed.</td>
<td>None</td>
<td>None</td>
</tr>
<tr>
<td>-j[n]</td>
<td>Sets the number of threads used during compilation. Otherwise, the number of threads is set to 8 by default.</td>
<td>Integer</td>
<td>8</td>
</tr>
<tr>
<td>-a</td>
<td>Whether to enable AddressSanitizer</td>
<td>on, off</td>
<td>off</td>
</tr>
</tbody>
</table>
<blockquote>
<div><ul class="simple">
<li><p>When compiling the x86_64 version, if the JAVA_HOME environment variable is configured and Gradle is installed, the JAR package will be compiled at the same time.</p></li>
<li><p>When the <code class="docutils literal notranslate"><span class="pre">-I</span></code> parameter changes, such as <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code> is converted to <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm64</span></code>, adding <code class="docutils literal notranslate"><span class="pre">-i</span></code> for parameter compilation does not take effect.</p></li>
<li><p>When compiling the AAR package, the <code class="docutils literal notranslate"><span class="pre">-A</span> <span class="pre">on</span></code> parameter must be added, and there is no need to add the <code class="docutils literal notranslate"><span class="pre">-I</span></code> parameter.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="the-options-of-mindspore-lite-cmakelists-txt">
<h4>The options of <code class="docutils literal notranslate"><span class="pre">mindspore/lite/CMakeLists.txt</span></code><a class="headerlink" href="#the-options-of-mindspore-lite-cmakelists-txt" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<thead>
<tr>
<th>Option</th>
<th>Parameter Description</th>
<th>Value Range</th>
<th>Defaults</th>
</tr>
</thead>
<tbody>
<tr>
<td>MSLITE_GPU_BACKEND</td>
<td>Set the GPU backend, only opencl is valid when <code>-I arm64</code>, and only tensorrt is valid when <code>-I x86_64</code></td>
<td>opencl, tensorrt, off</td>
<td>opencl when <code>-I arm64</code>, off when <code>-I x86_64</code></td>
</tr>
<tr>
<td>MSLITE_ENABLE_NPU</td>
<td>Whether to compile NPU operator, only valid when <code>-I arm64</code> or <code>-I arm32</code></td>
<td>on, off</td>
<td>off</td>
</tr>
<tr>
<td>MSLITE_ENABLE_TRAIN</td>
<td>Whether to compile the training version</td>
<td>on, off</td>
<td>on</td>
</tr>
<tr>
<td>MSLITE_ENABLE_SSE</td>
<td>Whether to enable SSE instruction set, only valid when <code>-I x86_64</code></td>
<td>on, off</td>
<td>off</td>
</tr>
<tr>
<td>MSLITE_ENABLE_AVX</td>
<td>Whether to enable AVX instruction set, only valid when <code>-I x86_64</code></td>
<td>on, off</td>
<td>off</td>
</tr>
<tr>
<td>MSLITE_ENABLE_CONVERTER</td>
<td>Whether to compile the model conversion tool, only valid when <code>-I x86_64</code></td>
<td>on, off</td>
<td>on</td>
</tr>
<tr>
<td>MSLITE_ENABLE_TOOLS</td>
<td>Whether to compile supporting tools</td>
<td>on, off</td>
<td>on</td>
</tr>
<tr>
<td>MSLITE_ENABLE_TESTCASES</td>
<td>Whether to compile test cases</td>
<td>on, off</td>
<td>off</td>
</tr>
</tbody>
</table>
<blockquote>
<div><ul class="simple">
<li><p>The above options can be modified by setting the environment variable with the same name or the file <code class="docutils literal notranslate"><span class="pre">mindspore/lite/CMakeLists.txt</span></code>.</p></li>
<li><p>After modifying the Option, adding the <code class="docutils literal notranslate"><span class="pre">-i</span></code> parameter for incremental compilation will not take effect.</p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="compilation-example">
<h3>Compilation Example<a class="headerlink" href="#compilation-example" title="Permalink to this headline">¶</a></h3>
<p>First, download source code from the MindSpore code repository.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://gitee.com/mindspore/mindspore.git -b r1.3
</pre></div>
</div>
<p>Then, run the following commands in the root directory of the source code to compile MindSpore Lite of different versions:</p>
<ul>
<li><p>Compile the x86_64 architecture version and set the number of threads at the same time.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash build.sh -I x86_64 -j32
</pre></div>
</div>
</li>
<li><p>Compile the ARM64 architecture version without compiling training-related code.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">MSLITE_ENABLE_TRAIN</span><span class="o">=</span>off
bash build.sh -I arm64 -j32
</pre></div>
</div>
<p>Or modify <code class="docutils literal notranslate"><span class="pre">mindspore/lite/CMakeLists.txt</span></code> to set MSLITE_ENABLE_TRAIN to off and execute the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash build.sh -I arm64 -j32
</pre></div>
</div>
</li>
<li><p>Compile the AAR package containing aarch64 and aarch32.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash build.sh -A on -j32
</pre></div>
</div>
</li>
</ul>
<p>Finally, the following files will be generated in the <code class="docutils literal notranslate"><span class="pre">output/</span></code> directory:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mindspore-lite-{version}-{os}-{arch}.tar.gz</span></code>: Contains runtime, and related tools.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mindspore-lite-maven-{version}.zip</span></code>: The AAR package which contains runtime (java).</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>version: Version of the output, consistent with that of the MindSpore.</p></li>
<li><p>os: Operating system on which the output will be deployed.</p></li>
<li><p>arch: System architecture on which the output will be deployed.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="directory-structure">
<h3>Directory Structure<a class="headerlink" href="#directory-structure" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>When the compilation option is <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mindspore-lite-{version}-linux-x64
├── runtime
│   ├── include
│   ├── lib
│   │   ├── libminddata-lite.a         # Static library of image processing
│   │   ├── libminddata-lite.so        # Dynamic library of image processing
│   │   ├── libmindspore-lite.a        # Static library of inference framework in MindSpore Lite
│   │   ├── libmindspore-lite-jni.so   # Dynamic library of inference framework jni in MindSpore Lite
│   │   ├── libmindspore-lite.so       # Dynamic library of inference framework in MindSpore Lite
│   │   ├── libmindspore-lite-train.a  # Static library of training framework in MindSpore Lite
│   │   ├── libmindspore-lite-train.so # Dynamic library of training framework in MindSpore Lite
│   │   ├── libmsdeobfuscator-lite.so  # The files of obfuscated model loading dynamic library, need to open the `ENABLE_MODEL_OBF` option.
│   │   └── mindspore-lite-java.jar    # Jar of inference framework in MindSpore Lite
│   └── third_party
│       └── libjpeg-turbo
└── tools
    ├── benchmark       # Benchmarking tool
    ├── benchmark_train # Training model benchmark tool
    ├── codegen         # Code generation tool
    ├── converter       # Model conversion tool
    ├── obfuscator      # Model obfuscation tool
    └── cropper         # Static library crop tool
</pre></div>
</div>
</li>
<li><p>When the compilation option is <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm64</span></code> or <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm32</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mindspore-lite-{version}-android-{arch}
├── runtime
│   ├── include
│   ├── lib
│   │   ├── libminddata-lite.a         # Static library of image processing
│   │   ├── libminddata-lite.so        # Dynamic library of image processing
│   │   ├── libmindspore-lite.a        # Static library of inference framework in MindSpore Lite
│   │   ├── libmindspore-lite.so       # Dynamic library of inference framework in MindSpore Lite
│   │   ├── libmindspore-lite-train.a  # Static library of training framework in MindSpore Lite
│   │   └── libmindspore-lite-train.so # Dynamic library of training framework in MindSpore Lite
│   │   └── libmsdeobfuscator-lite.so  # The files of obfuscated model loading dynamic library, need to open the `ENABLE_MODEL_OBF` option.
│   └── third_party
│       ├── hiai_ddk
│       └── libjpeg-turbo
└── tools
    ├── benchmark       # Benchmarking tool
    ├── benchmark_train # Training model benchmark tool
    └── codegen         # Code generation tool
</pre></div>
</div>
</li>
<li><p>When the compilation option is <code class="docutils literal notranslate"><span class="pre">-A</span> <span class="pre">on</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mindspore-lite-maven-{version}
└── mindspore
    └── mindspore-lite
        └── {version}
            └── mindspore-lite-{version}.aar # MindSpore Lite runtime aar
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="windows-environment-compilation">
<h2>Windows Environment Compilation<a class="headerlink" href="#windows-environment-compilation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Environment Requirements<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>System environment: Windows 7, Windows 10; 64-bit.</p></li>
<li><p>Compilation dependencies are:</p>
<ul>
<li><p><a class="reference external" href="https://cmake.org/download/">CMake</a> &gt;= 3.18.3</p></li>
<li><p><a class="reference external" href="https://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/mingw-builds/7.3.0/threads-posix/seh/x86_64-7.3.0-release-posix-seh-rt_v5-rev0.7z/download">MinGW GCC</a> = 7.3.0</p></li>
</ul>
</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>The compilation script will execute <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> to obtain the code of the third-party dependent libraries.</p></li>
<li><p>If you want to compile 32-bit Mindspore Lite, please use 32-bit <a class="reference external" href="https://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win32/Personal%20Builds/mingw-builds/7.3.0/threads-posix/dwarf/i686-7.3.0-release-posix-dwarf-rt_v5-rev0.7z">MinGW</a> to compile.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id2">
<h3>Compilation Options<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">build.bat</span></code> in the root directory of MindSpore can be used to compile MindSpore Lite.</p>
<div class="section" id="the-compilation-parameter-of-build-bat">
<h4>The compilation parameter of <code class="docutils literal notranslate"><span class="pre">build.bat</span></code><a class="headerlink" href="#the-compilation-parameter-of-build-bat" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<thead>
<tr>
<th>Parameter</th>
<th>Parameter Description</th>
<th>Mandatory or Not</th>
</tr>
</thead>
<tbody>
<tr>
<td>lite</td>
<td>Set this parameter to compile the MindSpore Lite project.</td>
<td>Yes</td>
</tr>
<tr>
<td>[n]</td>
<td>Set the number of threads used during compilation, otherwise the default is set to 6 threads.</td>
<td>No</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id3">
<h4>The options of <code class="docutils literal notranslate"><span class="pre">mindspore/lite/CMakeLists.txt</span></code><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<thead>
<tr>
<th>Option</th>
<th>Parameter Description</th>
<th>Value Range</th>
<th>Defaults</th>
</tr>
</thead>
<tbody>
<tr>
<td>MSLITE_ENABLE_SSE</td>
<td>Whether to enable SSE instruction set</td>
<td>on, off</td>
<td>off</td>
</tr>
<tr>
<td>MSLITE_ENABLE_AVX</td>
<td>Whether to enable AVX instruction set</td>
<td>on, off</td>
<td>off</td>
</tr>
<tr>
<td>MSLITE_ENABLE_CONVERTER</td>
<td>Whether to compile the model conversion tool</td>
<td>on, off</td>
<td>on</td>
</tr>
<tr>
<td>MSLITE_ENABLE_TOOLS</td>
<td>Whether to compile supporting tools</td>
<td>on, off</td>
<td>on</td>
</tr>
<tr>
<td>MSLITE_ENABLE_TESTCASES</td>
<td>Whether to compile test cases</td>
<td>on, off</td>
<td>off</td>
</tr>
</tbody>
</table>
<blockquote>
<div><ul class="simple">
<li><p>The above options can be modified by setting the environment variable with the same name or the file <code class="docutils literal notranslate"><span class="pre">mindspore/lite/CMakeLists.txt</span></code>.</p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id4">
<h3>Compilation Example<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>First, use the git tool to download the source code from the MindSpore code repository.</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span>git clone https://gitee.com/mindspore/mindspore.git -b r1.3
</pre></div>
</div>
<p>Then, use the cmd tool to compile MindSpore Lite in the root directory of the source code and execute the following commands.</p>
<ul class="simple">
<li><p>Compile the Windows version with the default number of threads (6 threads).</p></li>
</ul>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">call</span> build.bat lite
</pre></div>
</div>
<ul class="simple">
<li><p>Compile the Windows version with the specified number of 8 threads.</p></li>
</ul>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">call</span> build.bat lite 8
</pre></div>
</div>
<p>Finally, the following files will be generated in the <code class="docutils literal notranslate"><span class="pre">output/</span></code> directory:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mindspore-lite-{version}-win-x64.zip</span></code>: Contains model inference framework and related tool.</p></li>
</ul>
<blockquote>
<div><p>version: Version of the output, consistent with that of the MindSpore.</p>
</div></blockquote>
</div>
<div class="section" id="id5">
<h3>Directory Structure<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mindspore-lite-{version}-win-x64
├── runtime
│   ├── include
│   └── lib
│       ├── libgcc_s_seh-1.dll      # Dynamic library of MinGW
│       ├── libmindspore-lite.a     # Static library of inference framework in MindSpore Lite
│       ├── libmindspore-lite.dll   # Dynamic library of inference framework in MindSpore Lite
│       ├── libmindspore-lite.dll.a # Link file of dynamic library of inference framework in MindSpore Lite
│       ├── libssp-0.dll            # Dynamic library of MinGW
│       ├── libstdc++-6.dll         # Dynamic library of MinGW
│       └── libwinpthread-1.dll     # Dynamic library of MinGW
└── tools
    ├── benchmark # Benchmarking tool
    └── converter # Model conversion tool
</pre></div>
</div>
<blockquote>
<div><p>Currently, MindSpore Lite is not supported on Windows.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="macos-environment-compilation">
<h2>macOS Environment Compilation<a class="headerlink" href="#macos-environment-compilation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id6">
<h3>Environment Requirements<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>System environment: macOS 10.15.4 and above ; 64-bit.</p></li>
<li><p>Compilation dependencies are:</p>
<ul>
<li><p><a class="reference external" href="https://cmake.org/download/">CMake</a> &gt;= 3.18.3</p></li>
<li><p><a class="reference external" href="https://developer.apple.com/xcode/download/cn">Xcode</a> == 11.4.1</p></li>
<li><p><a class="reference external" href="https://git-scm.com/downloads">Git</a> &gt;= 2.28.0</p></li>
</ul>
</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>The compilation script will execute <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> to obtain the code of the third-party dependent libraries.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id7">
<h3>Compilation Options<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">build.sh</span></code> in the root directory of MindSpore can be used to compile MindSpore Lite.</p>
<div class="section" id="id8">
<h4>The compilation parameter of <code class="docutils literal notranslate"><span class="pre">build.sh</span></code><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<thead>
<tr>
<th>Parameter</th>
<th>Parameter Description</th>
<th>Value Range</th>
<th>Defaults</th>
</tr>
</thead>
<tbody>
<tr>
<td>-I</td>
<td>Selects an applicable architecture.</td>
<td>arm64, arm32</td>
<td>None</td>
</tr>
<tr>
<td>-j[n]</td>
<td>Sets the number of threads used during compilation. Otherwise, the number of threads is set to 8 by default.</td>
<td>Integer</td>
<td>8</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="id9">
<h3>Compilation Example<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>First, use the git tool to download the source code from the MindSpore code repository.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://gitee.com/mindspore/mindspore.git -b r1.3
</pre></div>
</div>
<p>Then, use the cmd tool to compile MindSpore Lite in the root directory of the source code and execute the following commands.</p>
<ul>
<li><p>Compile the ARM64 architecture version</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash build.sh -I arm64 -j8
</pre></div>
</div>
</li>
<li><p>Compile the ARM32 architecture version</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash build.sh -I arm32 -j8
</pre></div>
</div>
</li>
</ul>
<p>Finally, the following files will be generated in the <code class="docutils literal notranslate"><span class="pre">output/</span></code> directory:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mindspore-lite-{version}-{os}-{arch}.tar.gz</span></code>: Contains model inference framework.</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>version: Version of the output, consistent with that of the MindSpore.</p></li>
<li><p>os: Operating system on which the output will be deployed.</p></li>
<li><p>arch: System architecture on which the output will be deployed.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id10">
<h3>Directory Structure<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mindspore-lite.framework
└── runtime
    ├── Headers        # 推理框架头文件
    ├── Info.plist     # 配置文件
    └── mindspore-lite # 静态库
</pre></div>
</div>
<blockquote>
<div><p>Currently, MindSpore Lite Train and converter are not supported on macOS.</p>
</div></blockquote>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../quick_start/quick_start_cpp.html" class="btn btn-neutral float-right" title="Experience C++ Simple Inference Demo" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="downloads.html" class="btn btn-neutral float-left" title="Downloading MindSpore Lite" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, MindSpore Lite

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   
</body>
</html>