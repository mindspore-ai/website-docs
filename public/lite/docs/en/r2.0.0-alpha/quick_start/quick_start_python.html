<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Experiencing the Python Simplified Inference Demo &mdash; MindSpore Lite master documentation</title><script>;(()=>{const e=localStorage.getItem("ms-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;(e?"dark"===e:t)&&document.documentElement.setAttribute("data-o-theme","dark")})();</script>
      <link rel="stylesheet" href="../_static/css/bootstrap.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/lite.css" type="text/css" /><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script><script src="../_static/jquery.js"></script>
        <script src="../_static/js/theme.js"></script><script src="../_static/underscore.js"></script><script src="../_static/doctools.js"></script><script src="../_static/js/lite.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Experiencing the Python Simplified Concurrent Inference Demo" href="quick_start_server_inference_python.html" />
    <link rel="prev" title="Experience Java Minimalist Concurrent Reasoning Demo" href="quick_start_server_inference_java.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MindSpore Lite
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Obtain MindSpore Lite</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../use/downloads.html">Downloading MindSpore Lite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/build.html">Building MindSpore Lite</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Quick Start</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="one_hour_introduction.html">Getting Started in One Hour</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_start_cpp.html">Experience C++ Simple Inference Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_start_server_inference_cpp.html">Experience C++ Minimalist Concurrent Reasoning Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_start_java.html">Experience Java Simple Inference Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_start_server_inference_java.html">Experience Java Minimalist Concurrent Reasoning Demo</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Experiencing the Python Simplified Inference Demo</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#one-click-installation">One-click Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#executing-demo">Executing Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#demo-content-description">Demo Content Description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-configuration-context">Creating Configuration Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="#model-loading-and-compilation">Model Loading and Compilation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inputting-data">Inputting Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#executing-inference">Executing Inference</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-outputs">Getting Outputs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quick_start_server_inference_python.html">Experiencing the Python Simplified Concurrent Inference Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_start_c.html">Expriencing Simpcified Inference Demo with C-language</a></li>
<li class="toctree-l1"><a class="reference internal" href="image_segmentation.html">Android Application Development Based on Java Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="train_lenet.html">Implement Device Training Based On C++ Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="train_lenet_java.html">Implement Device Training Based On Java Interface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Inference on Devices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../use/post_training_quantization.html">Post Training Quantization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/data_preprocessing.html">Data Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/runtime.html">Executing Model Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/micro.html">Performing Inference or Training on MCU or Small Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/asic.html">Application Specific Integrated Circuit Integration Instructions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Training on Devices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../use/runtime_train.html">Executing Model Training</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Server Inference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../use/runtime_server_inference.html">Executing Server Inference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Third-party hardware docking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../use/register.html">Custom Kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/delegate.html">Using Delegate to Support Third-party AI Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../use/converter.html">Converting Models for Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/benchmark.html">Benchmark Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/cropper_tool.html">Static Library Cropper Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/visual_tool.html">Visualization Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use/obfuscator_tool.html">Model Obfuscation Tool</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../architecture_lite.html">Overall Architecture (Lite)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operator_list_lite.html">Lite Operator List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operator_list_codegen.html">Codegen Operator List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model_lite.html">Model List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting_guide.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../log.html">Log</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MindSpore Lite</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Experiencing the Python Simplified Inference Demo</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/quick_start/quick_start_python.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="experiencing-the-python-simplified-inference-demo">
<h1>Experiencing the Python Simplified Inference Demo<a class="headerlink" href="#experiencing-the-python-simplified-inference-demo" title="Permalink to this headline"></a></h1>
<p><a href="https://gitee.com/mindspore/docs/blob/r2.0.0-alpha/docs/lite/docs/source_en/quick_start/quick_start_python.md" target="_blank"><img src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.0.0-alpha/resource/_static/logo_source_en.png"></a></p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p>This tutorial provides a sample program for MindSpore Lite to perform inference, demonstrating the <a class="reference external" href="https://mindspore.cn/lite/api/en/r2.0.0-alpha/mindspore_lite.html">Python interface</a> to perform the basic process of device-side inference through file input, inference execution, and inference result printing, and enables users to quickly understand the use of MindSpore Lite APIs related to inference execution. The related files are put in the directory <a class="reference external" href="https://gitee.com/mindspore/mindspore/tree/r2.0.0-alpha/mindspore/lite/examples/quick_start_python">mindspore/lite/examples/quick_start_python</a>.</p>
<p>The following is an example of how to use the Python Simplified Inference Demo on a Linux X86 operating system and a CPU hardware platform, using Ubuntu 18.04 as an example:</p>
<ul class="simple">
<li><p>One-click installation of inference-related model files, MindSpore Lite and its required dependencies. See the <a class="reference internal" href="#one-click-installation"><span class="std std-doc">One-click installation</span></a> section for details.</p></li>
<li><p>Execute the Python Simplified Inference Demo. See the <a class="reference internal" href="#executing-demo"><span class="std std-doc">Execute Demo</span></a> section for details.</p></li>
<li><p>For a description of the Python Simplified Inference Demo content, see the <a class="reference internal" href="#demo-content-description"><span class="std std-doc">Demo Content Description</span></a> section for details.</p></li>
</ul>
</section>
<section id="one-click-installation">
<h2>One-click Installation<a class="headerlink" href="#one-click-installation" title="Permalink to this headline"></a></h2>
<p>This session introduces the installation of MindSpore Lite for Python version 3.7 via pip on a Linux-x86_64 system with a CPU environment, taking the new Ubuntu 18.04 as an example.</p>
<p>Go to the <a class="reference external" href="https://gitee.com/mindspore/mindspore/tree/r2.0.0-alpha/mindspore/lite/examples/quick_start_python">mindspore/lite/examples/quick_start_python</a> directory, and execute the <code class="docutils literal notranslate"><span class="pre">lite-cpu-pip.sh</span></code> script for a one-click installation, taking installation of MindSpore Lite version 1.9.0 as an example. Script installation needs to download the model required for inference and input data files, the dependencies required for MindSpore_Lite installation, and download and install MindSpore Lite.</p>
<p>Note: This command sets the installed version of MindSpore Lite. Since the Python interface is supported from MindSpore Lite version 1.8.0, the version cannot be set lower than 1.8.0. See the version provided in <a class="reference external" href="https://www.mindspore.cn/lite/docs/en/r2.0.0-alpha/use/downloads.html">Download MindSpore Lite</a> for details on the versions that can be set.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">MINDSPORE_LITE_VERSION</span><span class="o">=</span><span class="m">1</span>.9.0<span class="w"> </span>bash<span class="w"> </span>./lite-cpu-pip.sh
</pre></div>
</div>
<blockquote>
<div><p>If the MobileNetV2 model download fails, please manually download the relevant model file <a class="reference external" href="https://download.mindspore.cn/model_zoo/official/lite/quick_start/mobilenetv2.ms">mobilenetv2.ms</a> and copy it to the <code class="docutils literal notranslate"><span class="pre">mindspore/lite/examples/quick_start_python/model</span></code> directory.</p>
<p>If the input.bin input data file download fails, please manually download the relevant input data file <a class="reference external" href="https://download.mindspore.cn/model_zoo/official/lite/quick_start/input.bin">input.bin</a> and copy it to the <code class="docutils literal notranslate"> <span class="pre">mindspore/lite/examples/quick_start_python/model</span></code> directory.</p>
<p>If MindSpore Lite inference framework by using the script download fails, please manually download <a class="reference external" href="https://www.mindspore.cn/lite/docs/en/r2.0.0-alpha/use/downloads.html">MindSpore Lite model inference framework</a> corresponding to the hardware platform of CPU and operating system of Linux-x86_64 or Linux-aarch64. Users can use the <code class="docutils literal notranslate"><span class="pre">uname</span> <span class="pre">-m</span></code> command to query the operating system in the terminal, and copy it to the <code class="docutils literal notranslate"><span class="pre">mindspore/lite/examples/quick_start_python</span></code> directory.</p>
<p>If you need to use MindSpore Lite corresponding to Python 3.7 or above, please <a class="reference external" href="https://www.mindspore.cn/lite/docs/en/r2.0.0-alpha/use/build.html">compile</a> locally. Note that the Python API module compilation depends on Python &gt;= 3.7.0, NumPy &gt;= 1.17.0, wheel &gt;= 0.32.0. After successful compilation, copy the Whl installation package generated in the <code class="docutils literal notranslate"><span class="pre">output/</span></code> directory to the <code class="docutils literal notranslate"><span class="pre">mindspore/lite/examples/quick_start_python</span></code> directory.</p>
<p>If the MindSpore Lite installation package does not exist in the <code class="docutils literal notranslate"><span class="pre">mindspore/lite/examples/quick_start_python</span></code> directory, the one-click installation script will uninstall the currently installed MindSpore Lite and then download and install MindSpore Lite from the Huawei image. Otherwise, if the MindSpore Lite installation package exists in the directory, it will be installed first.</p>
<p>After manually downloading and placing the files in the specified location, you need to execute the lite-cpu-pip.sh script again to complete the one-click installation.</p>
</div></blockquote>
<p>A successful execution will show the following results. The model files and input data files can be found in the <code class="docutils literal notranslate"><span class="pre">mindspore/lite/examples/quick_start_python/model</span></code> directory.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Successfully installed mindspore-lite-1.9.0
</pre></div>
</div>
</section>
<section id="executing-demo">
<h2>Executing Demo<a class="headerlink" href="#executing-demo" title="Permalink to this headline"></a></h2>
<p>After one-click installation, go to the <a class="reference external" href="https://gitee.com/mindspore/mindspore/tree/r2.0.0-alpha/mindspore/lite/examples/quick_start_python">mindspore/lite/examples/quick_start_python</a> directory and execute the following command to experience MindSpore Lite inference MobileNetV2 models.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>quick_start_python.py
</pre></div>
</div>
<p>When the execution is completed, the following results will be obtained, printing the name of the output Tensor, the data size of the output Tensor, the number of elements of the output Tensor and the first 50 pieces of data.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>tensor name is:Softmax-65 tensor size is:4004 tensor elements num is:1001
output data is: 1.02271215e-05 9.92699e-06 1.6968432e-05 6.8573616e-05 9.731416e-05 0.0011149431 0.00020790889 0.0010379024 8.951246e-06 3.5114933e-06 4.233835e-06 2.8036434e-06 2.6037442e-06 1.8385846e-06 1.1539755e-05 8.275104e-05 9.712361e-06 1.1271673e-05 4.0994237e-06 2.0738518e-05 2.3865257e-06 6.13505e-06 2.2388376e-06 3.8502785e-06 6.7741335e-06 8.045284e-06 7.4303607e-06 3.081847e-06 1.6161586e-05 3.8332796e-06 1.6814663e-05 1.7688351e-05 6.5563186e-06 1.2908386e-06 2.292212e-05 0.00028948952 4.608292e-06 7.4074756e-06 5.352228e-06 1.2963507e-06 3.3694944e-06 6.408071e-06 3.6104643e-06 5.094248e-06 3.1630923e-06 6.4333294e-06 3.2282237e-06 2.03353e-05 2.1681694e-06 4.8566693e-05
</pre></div>
</div>
</section>
<section id="demo-content-description">
<h2>Demo Content Description<a class="headerlink" href="#demo-content-description" title="Permalink to this headline"></a></h2>
<p>Performing inference with MindSpore Lite consists of the following main steps:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#creating-configuration-context"><span class="std std-doc">Create Configuration Context</span></a>: Create a configuration <a class="reference external" href="https://www.mindspore.cn/lite/api/en/r2.0.0-alpha/mindspore_lite/mindspore_lite.Context.html">context</a> and saves some basic configuration parameters used to guide model compilation and model inference.</p></li>
<li><p><a class="reference internal" href="#model-loading-and-compilation"><span class="std std-doc">Model Loading and Compilation</span></a>: Before executing inference, you need to call <a class="reference external" href="https://www.mindspore.cn/lite/api/en/r2.0.0-alpha/mindspore_lite/mindspore_lite.Model.html#mindspore_lite.Model.build_from_file">build_from_file</a> interface of <code class="docutils literal notranslate"><span class="pre">Model</span></code> for model loading and model compilation, and to configure the Context obtained in the previous step into the Model. The model loading phase parses the file cache into a runtime model. The model compilation phase mainly carries out the process of operator selection scheduling, subgraph slicing, etc. This phase will consume more time, so it is recommended that <code class="docutils literal notranslate"><span class="pre">Model</span></code> be loaded once, compiled once, and inferenced for several times.</p></li>
<li><p><a class="reference internal" href="#inputting-data"><span class="std std-doc">Input Data</span></a>: The model needs to fill the <code class="docutils literal notranslate"><span class="pre">Input</span> <span class="pre">Tensor</span></code> with data before executing inference.</p></li>
<li><p><a class="reference internal" href="#executing-inference"><span class="std std-doc">Execute Inference</span></a>: Use the <a class="reference external" href="https://www.mindspore.cn/lite/api/en/r2.0.0-alpha/mindspore_lite/mindspore_lite.Model.html#mindspore_lite.Model.predict">predict</a> interface of <code class="docutils literal notranslate"><span class="pre">Model</span></code> for model inference.</p></li>
<li><p><a class="reference internal" href="#getting-outputs"><span class="std std-doc">Get Output</span></a>: After the model finishes performing inference, you can get the inference result by <code class="docutils literal notranslate"><span class="pre">Output</span> <span class="pre">Tensor</span></code>.</p></li>
</ol>
<p>For more advanced usage and examples of Python interfaces, please refer to the <a class="reference external" href="https://www.mindspore.cn/lite/api/en/r2.0.0-alpha/mindspore_lite.html">Python API</a>.</p>
<p><img alt="img" src="../_images/lite_runtime.png" /></p>
<section id="creating-configuration-context">
<h3>Creating Configuration Context<a class="headerlink" href="#creating-configuration-context" title="Permalink to this headline"></a></h3>
<p>Create the configuration context <code class="docutils literal notranslate"><span class="pre">Context</span></code>. Since this tutorial demonstrates a scenario where inference is performed on a CPU device, the created CPU device hardware information needs to be added to the context.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore_lite</span> <span class="k">as</span> <span class="nn">mslite</span>


<span class="c1"># init context, and add CPU device info</span>
<span class="n">cpu_device_info</span> <span class="o">=</span> <span class="n">mslite</span><span class="o">.</span><span class="n">CPUDeviceInfo</span><span class="p">(</span><span class="n">enable_fp16</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">mslite</span><span class="o">.</span><span class="n">Context</span><span class="p">(</span><span class="n">thread_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">thread_affinity_mode</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">context</span><span class="o">.</span><span class="n">append_device_info</span><span class="p">(</span><span class="n">cpu_device_info</span><span class="p">)</span>
</pre></div>
</div>
<p>If the user needs to perform inference on an Ascend device, the Ascend device hardware information needs to be added.</p>
<blockquote>
<div><p>When performing inference on Ascend devices, in scenarios where the input format of the original model does not match the input format of the model generated by the transformation, in addition to adding Ascend device hardware information, users have the option to add CPU device hardware information before calling the context. Because in this case, the model generated by the transformation on the Ascend device will contain the <code class="docutils literal notranslate"><span class="pre">Transpose</span></code> operator, which currently needs to perform inference on the CPU, and therefore needs to be switched to a context with information about the CPU device hardware.</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">mindspore_lite</span> <span class="k">as</span> <span class="nn">mslite</span>


<span class="c1"># init context, and add Ascend device info and CPU device info</span>
<span class="n">ascend_device_info</span> <span class="o">=</span> <span class="n">mslite</span><span class="o">.</span><span class="n">AscendDeviceInfo</span><span class="p">(</span><span class="n">device_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cpu_device_info</span> <span class="o">=</span> <span class="n">mslite</span><span class="o">.</span><span class="n">CPUDeviceInfo</span><span class="p">(</span><span class="n">enable_fp16</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">mslite</span><span class="o">.</span><span class="n">Context</span><span class="p">(</span><span class="n">thread_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">thread_affinity_mode</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">context</span><span class="o">.</span><span class="n">append_device_info</span><span class="p">(</span><span class="n">ascend_device_info</span><span class="p">)</span>
<span class="n">context</span><span class="o">.</span><span class="n">append_device_info</span><span class="p">(</span><span class="n">cpu_device_info</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="model-loading-and-compilation">
<h3>Model Loading and Compilation<a class="headerlink" href="#model-loading-and-compilation" title="Permalink to this headline"></a></h3>
<p>Model loading and compilation can be done by calling <a class="reference external" href="https://www.mindspore.cn/lite/api/en/r2.0.0-alpha/mindspore_lite/mindspore_lite.Model.html#mindspore_lite.Model.build_from_file">build_from_file</a> interface of <code class="docutils literal notranslate"><span class="pre">Model</span></code> to load and compile the runtime model directly from the file cache.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># build model from file</span>
<span class="n">MODEL_PATH</span> <span class="o">=</span> <span class="s2">&quot;./model/mobilenetv2.ms&quot;</span>
<span class="n">IN_DATA_PATH</span> <span class="o">=</span> <span class="s2">&quot;./model/input.bin&quot;</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">mslite</span><span class="o">.</span><span class="n">Model</span><span class="p">()</span>
<span class="n">model</span><span class="o">.</span><span class="n">build_from_file</span><span class="p">(</span><span class="n">MODEL_PATH</span><span class="p">,</span> <span class="n">mslite</span><span class="o">.</span><span class="n">ModelType</span><span class="o">.</span><span class="n">MINDIR_LITE</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="inputting-data">
<h3>Inputting Data<a class="headerlink" href="#inputting-data" title="Permalink to this headline"></a></h3>
<p>This tutorial sets the way of inputting data as importing from a file. For other ways to set the input data, please refer to <a class="reference external" href="https://www.mindspore.cn/lite/api/en/r2.0.0-alpha/mindspore_lite/mindspore_lite.Model.html#mindspore_lite.Model.predict">predict</a> interface of <code class="docutils literal notranslate"><span class="pre">Model</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># set model input</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_inputs</span><span class="p">()</span>
<span class="n">in_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fromfile</span><span class="p">(</span><span class="n">IN_DATA_PATH</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="n">inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_data_from_numpy</span><span class="p">(</span><span class="n">in_data</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="executing-inference">
<h3>Executing Inference<a class="headerlink" href="#executing-inference" title="Permalink to this headline"></a></h3>
<p>Call <a class="reference external" href="https://www.mindspore.cn/lite/api/en/r2.0.0-alpha/mindspore_lite/mindspore_lite.Model.html#mindspore_lite.Model.predict">predict</a> interface of <code class="docutils literal notranslate"><span class="pre">model</span></code> to perform inference, and the inference result is output to <code class="docutils literal notranslate"><span class="pre">output</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># execute inference</span>
<span class="n">outputs</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_outputs</span><span class="p">()</span>
<span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="getting-outputs">
<h3>Getting Outputs<a class="headerlink" href="#getting-outputs" title="Permalink to this headline"></a></h3>
<p>Print the output results after performing inference. Traverse through the <code class="docutils literal notranslate"><span class="pre">outputs</span></code> list and print the name, data size, number of elements, and the first 50 pieces of data for each output Tensor.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># get output</span>
<span class="k">for</span> <span class="n">output</span> <span class="ow">in</span> <span class="n">outputs</span><span class="p">:</span>
  <span class="n">tensor_name</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">get_tensor_name</span><span class="p">()</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
  <span class="n">data_size</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">get_data_size</span><span class="p">()</span>
  <span class="n">element_num</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">get_element_num</span><span class="p">()</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;tensor name is:</span><span class="si">%s</span><span class="s2"> tensor size is:</span><span class="si">%s</span><span class="s2"> tensor elements num is:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tensor_name</span><span class="p">,</span> <span class="n">data_size</span><span class="p">,</span> <span class="n">element_num</span><span class="p">))</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">get_data_to_numpy</span><span class="p">()</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;output data is:&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quick_start_server_inference_java.html" class="btn btn-neutral float-left" title="Experience Java Minimalist Concurrent Reasoning Demo" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="quick_start_server_inference_python.html" class="btn btn-neutral float-right" title="Experiencing the Python Simplified Concurrent Inference Demo" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>