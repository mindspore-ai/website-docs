<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Offline Conversion of Inference Models &mdash; MindSpore Lite master documentation</title><script>;(()=>{const e=localStorage.getItem("ms-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;(e?"dark"===e:t)&&document.documentElement.setAttribute("data-o-theme","dark")})();</script>
      <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/lite.css" type="text/css" /><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script><script src="../../_static/jquery.js"></script>
        <script src="../../_static/js/theme.js"></script><script src="../../_static/underscore.js"></script><script src="../../_static/doctools.js"></script><script src="../../_static/js/lite.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using Python Interface to Perform Model Conversions" href="converter_python.html" />
    <link rel="prev" title="Model Converter" href="converter.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> MindSpore Lite
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Obtain MindSpore Lite</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../downloads.html">Downloading MindSpore Lite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build.html">Building Device-side MindSpore Lite</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Building Cloud-side MindSpore Lite</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Quick Start</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../quick_start/one_hour_introduction.html">Quick Start to Device-side Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quick_start/one_hour_introduction_cloud.html">Quick Start to Cloud-side Inference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Device-side Inference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../device_infer_example.html">Device-side Inference Sample</a></li>
<li class="toctree-l1"><a class="reference internal" href="../post_training_quantization.html">Post Training Quantization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_preprocessing.html">Data Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../runtime.html">Executing Model Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../micro.html">Performing Inference or Training on MCU or Small Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../asic.html">Application Specific Integrated Circuit Integration Instructions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Device-side Training</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../device_train_example.html">Device-side Training Sample</a></li>
<li class="toctree-l1"><a class="reference internal" href="../runtime_train.html">Executing Model Training</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Third-party hardware docking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../register.html">Custom Kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../delegate.html">Using Delegate to Support Third-party AI Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Device-side Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../converter.html">Converting Models for Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../benchmark.html">Benchmark Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cropper_tool.html">Static Library Cropper Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visual_tool.html">Visualization Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../obfuscator_tool.html">Model Obfuscation Tool</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Cloud-side Inference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="runtime.html">Performing Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime_parallel.html">Performing Concurrent Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime_distributed.html">Distributed Inference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Cloud-side Tools</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="converter.html">Model Converter</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Offline Conversion of Inference Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#linux-environment-usage-instructions">Linux Environment Usage Instructions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#environment-preparation">Environment Preparation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#directory-structure">Directory Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#description-of-parameters">Description of Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usage-examples">Usage Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="converter_python.html">Using Python Interface to Perform Model Conversions</a></li>
<li class="toctree-l2"><a class="reference internal" href="converter_tool_ascend.html">Ascend Conversion Tool Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="converter_tool_graph_kernel.html">Graph Kernel Fusion Configuration Instructions (Beta Feature)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="benchmark.html">Benchmark Tool</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../architecture_lite.html">Overall Architecture (Lite)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operator_list_lite.html">Lite Operator List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operator_list_codegen.html">Codegen Operator List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../model_lite.html">Model List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting_guide.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../log.html">Log</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../RELEASE.html">Release Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MindSpore Lite</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="converter.html">Model Converter</a> &raquo;</li>
      <li>Offline Conversion of Inference Models</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/use/cloud_infer/converter_tool.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="offline-conversion-of-inference-models">
<h1>Offline Conversion of Inference Models<a class="headerlink" href="#offline-conversion-of-inference-models" title="Permalink to this headline">ÔÉÅ</a></h1>
<p><a class="reference external" href="https://gitee.com/mindspore/docs/blob/r2.2/docs/lite/docs/source_en/use/cloud_infer/converter_tool.md"><img alt="View Source On Gitee" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.2/resource/_static/logo_source_en.svg" /></a></p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">ÔÉÅ</a></h2>
<p>MindSpore Lite cloud-side inference provides tools for offline conversion of models, and supports many types of model conversions, and the converted models can be used for inference. Command line parameters include a variety of personalized options to provide users with convenient conversion paths.</p>
<p>The currently supported input formats are MindSpore, TensorFlow Lite, Caffe, TensorFlow, and ONNX.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">mindir</span></code> model converted by the converter supports the converter companion and higher versions of the Runtime inference framework to perform inference.</p>
</section>
<section id="linux-environment-usage-instructions">
<h2>Linux Environment Usage Instructions<a class="headerlink" href="#linux-environment-usage-instructions" title="Permalink to this headline">ÔÉÅ</a></h2>
<section id="environment-preparation">
<h3>Environment Preparation<a class="headerlink" href="#environment-preparation" title="Permalink to this headline">ÔÉÅ</a></h3>
<p>To use MindSpore Lite cloud-side inference model converter, the following environment preparation is required.</p>
<ul>
<li><p><a class="reference external" href="https://www.mindspore.cn/lite/docs/en/r2.2/use/cloud_infer/build.html">Compile</a> or <a class="reference external" href="https://www.mindspore.cn/lite/docs/en/r2.2/use/downloads.html">download</a> model converter.</p></li>
<li><p>Add the dynamic link libraries required by the converter to the environment variable LD_LIBRARY_PATH.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">PACKAGE_ROOT_PATH</span><span class="si">}</span>/tools/converter/lib:<span class="si">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="si">}</span>
</pre></div>
</div>
<p>${PACKAGE_ROOT_PATH} is the path of the compiled or downloaded package after unpacking.</p>
</li>
</ul>
</section>
<section id="directory-structure">
<h3>Directory Structure<a class="headerlink" href="#directory-structure" title="Permalink to this headline">ÔÉÅ</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mindspore-lite-{version}-linux-x64
‚îî‚îÄ‚îÄ tools
    ‚îî‚îÄ‚îÄ converter
        ‚îú‚îÄ‚îÄ include                            # Custom operators, model parsing, node parsing, conversion optimization registration headers
        ‚îú‚îÄ‚îÄ converter                          # Model converter
        ‚îÇ   ‚îî‚îÄ‚îÄ converter_lite                 # Executable programs
        ‚îî‚îÄ‚îÄ lib                                # Dynamic libraries that the converter depends on
            ‚îú‚îÄ‚îÄ libmindspore_glog.so.0         # Glog dynamic libraries
            ‚îú‚îÄ‚îÄ libascend_pass_plugin.so       # Register for Ascend Backend Graph Optimization Plugin Dynamic Library
            ‚îú‚îÄ‚îÄ libmslite_shared_lib.so        # Adaptation of the dynamic library in the backend of Ascend
            ‚îú‚îÄ‚îÄ libmindspore_converter.so      # Dynamic library for model conversion
            ‚îú‚îÄ‚îÄ libmslite_converter_plugin.so  # Model conversion plugin
            ‚îú‚îÄ‚îÄ libmindspore_core.so           # MindSpore Core dynamic libraries
            ‚îú‚îÄ‚îÄ libopencv_core.so.4.5          # Dynamic libraries for OpenCV
            ‚îú‚îÄ‚îÄ libopencv_imgcodecs.so.4.5     # Dynamic libraries for OpenCV
            ‚îî‚îÄ‚îÄ libopencv_imgproc.so.4.5       # Dynamic libraries for OpenCV
        ‚îú‚îÄ‚îÄ third_party                        # Third party model proto definition
</pre></div>
</div>
</section>
<section id="description-of-parameters">
<h3>Description of Parameters<a class="headerlink" href="#description-of-parameters" title="Permalink to this headline">ÔÉÅ</a></h3>
<p>MindSpore Lite cloud-side inference model converter provides various parameter settings that users can choose to use according to their needs. In addition, users can enter <code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">/converter_lite</span> <span class="pre">--help</span></code> for live help.</p>
<p>Detailed parameter descriptions are provided below.</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head"><p>Required or not</p></th>
<th class="head"><p>Description of parameters</p></th>
<th class="head"><p>Value range</p></th>
<th class="head"><p>Default values</p></th>
<th class="head"><p>Remarks</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--help</span></code></p></td>
<td><p>Not</p></td>
<td><p>Print all help information.</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--fmk=&lt;FMK&gt;</span></code></p></td>
<td><p>Required</p></td>
<td><p>The original format of the input model.</p></td>
<td><p>MINDIR„ÄÅCAFFE„ÄÅTFLITE„ÄÅTF„ÄÅONNX</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--modelFile=&lt;MODELFILE&gt;</span></code></p></td>
<td><p>Required</p></td>
<td><p>The path of the input model.</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--outputFile=&lt;OUTPUTFILE&gt;</span></code></p></td>
<td><p>Required</p></td>
<td><p>The path to the output model, without the suffix, can be automatically generated with the <code class="docutils literal notranslate"><span class="pre">.mindir</span></code> suffix.</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--weightFile=&lt;WEIGHTFILE&gt;</span></code></p></td>
<td><p>Required when converting Caffe models</p></td>
<td><p>The path to the input model weight file.</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--configFile=&lt;CONFIGFILE&gt;</span></code></p></td>
<td><p>Not</p></td>
<td><p>1. can be used as a post-training quantization profile path; 2. can be used as an extended function profile path.</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--inputShape=&lt;INPUTSHAPE&gt;</span></code></p></td>
<td><p>Not</p></td>
<td><p>Set the dimensions of the model inputs, and keep the order of the input dimensions the same as the original model. The model structure can be further optimized for some specific models, but the converted model will probably lose the dynamic shape properties. Multiple inputs are split by <code class="docutils literal notranslate"><span class="pre">;</span></code>, along with double quotes <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>.</p></td>
<td><p>e.g.  ‚ÄúinTensorName_1: 1,32,32,4;inTensorName_2:1,64,64,4;‚Äù</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--saveType=&lt;SAVETYPE&gt;</span></code></p></td>
<td><p>Not</p></td>
<td><p>Set the exported model as <code class="docutils literal notranslate"><span class="pre">mindir</span></code> model or <code class="docutils literal notranslate"><span class="pre">ms</span></code> model.</p></td>
<td><p>MINDIR, MINDIR_LITE</p></td>
<td><p>MINDIR</p></td>
<td><p>This version can only be reasoned with models turned out by setting to MINDIR</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--optimize=&lt;OPTIMIZE&gt;</span></code></p></td>
<td><p>Not</p></td>
<td><p>Set the optimization accomplished in the process of converting model.</p></td>
<td><p>none, general, gpu_oriented, ascend_oriented, ascend_oriented:910b</p></td>
<td><p>general</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--decryptKey=&lt;DECRYPTKEY&gt;</span></code></p></td>
<td><p>Not</p></td>
<td><p>Set the key used to load the cipher text MindIR. The key is expressed in hexadecimal and is only valid when <code class="docutils literal notranslate"><span class="pre">fmk</span></code> is MINDIR.</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--decryptMode=&lt;DECRYPTMODE&gt;</span></code></p></td>
<td><p>Not</p></td>
<td><p>Set the mode to load the cipher MindIR, valid only when decryptKey is specified.</p></td>
<td><p>AES-GCM, AES-CBC</p></td>
<td><p>AES-GCM</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--encryptKey=&lt;ENCRYPTKEY&gt;</span></code></p></td>
<td><p>Not</p></td>
<td><p>Set the key to export the encryption <code class="docutils literal notranslate"><span class="pre">mindir</span></code> model. The key is expressed in hexadecimal. Only AES-GCM is supported, and the key length is only 16Byte.</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--encryption=&lt;ENCRYPTION&gt;</span></code></p></td>
<td><p>Not</p></td>
<td><p>Set whether to encrypt when exporting <code class="docutils literal notranslate"><span class="pre">mindir</span></code> models. Export encryption protects model integrity, but increases runtime initialization time.</p></td>
<td><p>true, false</p></td>
<td><p>true</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--infer=&lt;INFER&gt;</span></code></p></td>
<td><p>Not</p></td>
<td><p>Set whether to perform pre-inference when the conversion is completed.</p></td>
<td><p>true, false</p></td>
<td><p>false</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--inputDataFormat=&lt;INPUTDATAFORMAT&gt;</span></code></p></td>
<td><p>Not</p></td>
<td><p>Set the input format of the exported model, valid only for 4-dimensional inputs.</p></td>
<td><p>NHWC, NCHW</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--fp16=&lt;FP16&gt;</span></code></p></td>
<td><p>Not</p></td>
<td><p>Set whether the weights in Float32 data format need to be stored in Float16 data format during model serialization.</p></td>
<td><p>on, off</p></td>
<td><p>off</p></td>
<td><p>Not supported at the moment</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--inputDataType=&lt;INPUTDATATYPE&gt;</span></code></p></td>
<td><p>Not</p></td>
<td><p>Set the data type of the quantized model input tensor. Only if the quantization parameters (scale and zero point) of the model input tensor are available. The default is to keep the same data type as the original model input tensor.</p></td>
<td><p>FLOAT32, INT8, UINT8, DEFAULT</p></td>
<td><p>DEFAULT</p></td>
<td><p>Not supported at the moment</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--outputDataType=&lt;OUTPUTDATATYPE&gt;</span></code></p></td>
<td><p>Not</p></td>
<td><p>Set the data type of the quantized model output tensor. Only if the quantization parameters (scale and zero point) of the model output tensor are available. The default is to keep the same data type as the original model output tensor.</p></td>
<td><p>FLOAT32, INT8, UINT8, DEFAULT</p></td>
<td><p>DEFAULT</p></td>
<td><p>Not supported at the moment</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--device=&lt;DEVICE&gt;</span></code></p></td>
<td><p>Not</p></td>
<td><p>Set target device when converter model. The use case is when on the Ascend device, if you need to the converted model to have the ability to use Ascend backend to perform inference, you can set the parameter. If it is not set, the converted model will use CPU backend to perform inference by default.</p></td>
<td><p>This option will be deprecated. It is replaced by setting <code class="docutils literal notranslate"><span class="pre">optimize</span></code> option to <code class="docutils literal notranslate"><span class="pre">ascend_oriented</span></code></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<p>Notes:</p>
<ul>
<li><p>The parameter name and the parameter value are connected by an equal sign without any space between them.</p></li>
<li><p>Caffe models are generally divided into two files: <code class="docutils literal notranslate"><span class="pre">*.prototxt</span></code> model structure, corresponding to the <code class="docutils literal notranslate"><span class="pre">--modelFile</span></code> parameter, and <code class="docutils literal notranslate"><span class="pre">*.caffemodel</span></code> model weights, corresponding to the <code class="docutils literal notranslate"><span class="pre">--weightFile</span></code> parameter.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">configFile</span></code> configuration file uses the <code class="docutils literal notranslate"><span class="pre">key=value</span></code> approach to define the relevant parameters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--optimize</span></code> parameter is used to set the mode of optimization during the offline conversion. If this parameter is set to none, no relevant graph optimization operations will be performed during the offline conversion phase of the model, and the relevant graph optimization operations will be done during the execution of the inference phase. The advantage of this parameter is that the converted model can be deployed directly to any CPU/GPU/Ascend hardware backend since it is not optimized in a specific way, while the disadvantage is that the initialization time of the model increases during inference execution. If this parameter is set to general, general optimization will be performed, such as constant folding and operator fusion (the converted model only supports CPU/GPU hardware backend, not Ascend backend). If this parameter is set to gpu_oriented, the general optimization and extra optimization for GPU hardware will be performed (the converted model only supports GPU hardware backend). If this parameter is set to ascend_oriented, the optimization for Ascend hardware will be performed (the converted model only supports Ascend hardware backend). If this parameter is set to ascend_oriented:910b, the optimization for Ascend 910b hardware will be performed (the converted model only supports Ascend 910b hardware backend).</p></li>
<li><p>The encryption and decryption function only takes effect when <code class="docutils literal notranslate"><span class="pre">MSLITE_ENABLE_MODEL_ENCRYPTION=on</span></code> is set at <a class="reference external" href="https://www.mindspore.cn/lite/docs/en/r2.2/use/cloud_infer/build.html">compile</a> time and only supports Linux x86 platforms. <code class="docutils literal notranslate"><span class="pre">decrypt_key</span></code> and <code class="docutils literal notranslate"><span class="pre">encrypt_key</span></code> are string expressed in hexadecimal. For example, if encrypt_key is set as ‚Äú30313233343637383939414243444546‚Äù, the corresponding hexadecimal expression is ‚Äò(b)0123456789ABCDEF‚Äô . Linux platform users can use the‚Äô xxd ‚Äòtool to convert the key expressed in bytes into hexadecimal expressions.</p></li>
<li><p>For the MindSpore model, since it is already a <code class="docutils literal notranslate"><span class="pre">mindir</span></code> model, two approaches are suggested:</p>
<p>Inference is performed directly without offline conversion.</p>
<p>When using offline conversion, setting <code class="docutils literal notranslate"><span class="pre">--optimize</span></code> to general in CPU/GPU hardware backend (for general optimization), setting <code class="docutils literal notranslate"><span class="pre">--optimize</span></code> to gpu_oriented in GPU hardware (for GPU extra optimization based on general optimization), setting <code class="docutils literal notranslate"><span class="pre">--optimize</span></code> to ascend_oriented, ascend_oriented:910b in Ascend hardware. The relevant optimization is done in the offline phase to reduce the initialization time of inference execution.</p>
</li>
</ul>
</section>
<section id="usage-examples">
<h3>Usage Examples<a class="headerlink" href="#usage-examples" title="Permalink to this headline">ÔÉÅ</a></h3>
<p>The following selects common examples to illustrate the use of the conversion command.</p>
<ul>
<li><p>Take the Caffe model LeNet as an example and execute the conversion command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./converter_lite<span class="w"> </span>--fmk<span class="o">=</span>CAFFE<span class="w"> </span>--saveType<span class="o">=</span>MINDIR<span class="w"> </span>--optimize<span class="o">=</span>none<span class="w"> </span>--modelFile<span class="o">=</span>lenet.prototxt<span class="w"> </span>--weightFile<span class="o">=</span>lenet.caffemodel<span class="w"> </span>--outputFile<span class="o">=</span>lenet
</pre></div>
</div>
<p>In this example, because the Caffe model is used, two input files, model structure and model weights, are required. Together with the other two required parameters, fmk type and output path, it can be executed successfully.</p>
<p>The result is shown as:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>CONVERT RESULT SUCCESS:0
</pre></div>
</div>
<p>This indicates that the Caffe model has been successfully converted into a MindSpore Lite cloud-side inference model, obtaining the new file <code class="docutils literal notranslate"><span class="pre">lenet.mindir</span></code>.</p>
</li>
<li><p>Take MindSpore, TensorFlow Lite, TensorFlow and ONNX models as examples and execute the conversion command.</p>
<ul class="simple">
<li><p>MindSpore model <code class="docutils literal notranslate"><span class="pre">model.mindir</span></code></p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./converter_lite<span class="w"> </span>--fmk<span class="o">=</span>MINDIR<span class="w"> </span>--saveType<span class="o">=</span>MINDIR<span class="w"> </span>--optimize<span class="o">=</span>general<span class="w"> </span>--modelFile<span class="o">=</span>model.mindir<span class="w"> </span>--outputFile<span class="o">=</span>model
</pre></div>
</div>
<ul class="simple">
<li><p>TensorFlow Lite model <code class="docutils literal notranslate"><span class="pre">model.tflite</span></code></p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./converter_lite<span class="w"> </span>--fmk<span class="o">=</span>TFLITE<span class="w"> </span>--saveType<span class="o">=</span>MINDIR<span class="w"> </span>--optimize<span class="o">=</span>none<span class="w"> </span>--modelFile<span class="o">=</span>model.tflite<span class="w"> </span>--outputFile<span class="o">=</span>model
</pre></div>
</div>
<ul class="simple">
<li><p>TensorFlow model <code class="docutils literal notranslate"><span class="pre">model.pb</span></code></p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./converter_lite<span class="w"> </span>--fmk<span class="o">=</span>TF<span class="w"> </span>--saveType<span class="o">=</span>MINDIR<span class="w"> </span>--optimize<span class="o">=</span>none<span class="w"> </span>--modelFile<span class="o">=</span>model.pb<span class="w"> </span>--outputFile<span class="o">=</span>model
</pre></div>
</div>
<ul class="simple">
<li><p>ONNX model <code class="docutils literal notranslate"><span class="pre">model.onnx</span></code></p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./converter_lite<span class="w"> </span>--fmk<span class="o">=</span>ONNX<span class="w"> </span>--saveType<span class="o">=</span>MINDIR<span class="w"> </span>--optimize<span class="o">=</span>none<span class="w"> </span>--modelFile<span class="o">=</span>model.onnx<span class="w"> </span>--outputFile<span class="o">=</span>model
</pre></div>
</div>
<p>In all of the above cases, the following conversion success message is displayed and the <code class="docutils literal notranslate"><span class="pre">model.mindir</span></code> target file is obtained at the same time.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>CONVERT RESULT SUCCESS:0
</pre></div>
</div>
</li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="converter.html" class="btn btn-neutral float-left" title="Model Converter" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="converter_python.html" class="btn btn-neutral float-right" title="Using Python Interface to Perform Model Conversions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, MindSpore Lite.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>