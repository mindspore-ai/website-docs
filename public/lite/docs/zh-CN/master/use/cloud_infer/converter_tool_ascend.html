<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ascend转换工具功能说明 &mdash; MindSpore Lite master 文档</title>
      <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/lite.css" type="text/css" /><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/js/lite.js"></script>
        <script src="../../_static/translations.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="图算融合配置说明（beta特性）" href="converter_tool_graph_kernel.html" />
    <link rel="prev" title="使用Python接口模型转换" href="converter_python.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> MindSpore Lite
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">获取MindSpore Lite</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../downloads.html">下载MindSpore Lite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build.html">编译端侧MindSpore Lite</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">编译云侧MindSpore Lite</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">快速入门</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../quick_start/one_hour_introduction.html">端侧推理快速入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quick_start/one_hour_introduction_cloud.html">云侧推理快速入门</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">端侧推理</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../device_infer_example.html">端侧推理样例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../post_training_quantization.html">训练后量化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_preprocessing.html">预处理数据</a></li>
<li class="toctree-l1"><a class="reference internal" href="../runtime.html">执行推理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../micro.html">在MCU或小型系统上执行推理或训练</a></li>
<li class="toctree-l1"><a class="reference internal" href="../asic.html">专用芯片集成说明</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">端侧训练</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../device_train_example.html">端侧训练样例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../runtime_train.html">执行训练</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">端侧第三方接入</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../register.html">自定义算子</a></li>
<li class="toctree-l1"><a class="reference internal" href="../delegate.html">使用Delegate支持第三方AI框架接入</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">端侧工具</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../converter.html">模型转换工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../benchmark.html">基准测试工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cropper_tool.html">静态库裁剪工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visual_tool.html">可视化工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../obfuscator_tool.html">模型混淆工具</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">云侧推理</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="runtime.html">基础推理</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime_parallel.html">并发推理</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime_distributed.html">分布式推理</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">云侧工具</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="converter.html">模型转换工具</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="converter_tool.html">推理模型离线转换</a></li>
<li class="toctree-l2"><a class="reference internal" href="converter_python.html">使用Python接口模型转换</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Ascend转换工具功能说明</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#概述">概述</a></li>
<li class="toctree-l3"><a class="reference internal" href="#配置文件">配置文件</a></li>
<li class="toctree-l3"><a class="reference internal" href="#动态shape配置">动态shape配置</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#动态batch-size">动态Batch size</a></li>
<li class="toctree-l4"><a class="reference internal" href="#动态分辨率">动态分辨率</a></li>
<li class="toctree-l4"><a class="reference internal" href="#动态维度">动态维度</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#aoe自动调优">AOE自动调优</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#aoe工具调优">AOE工具调优</a></li>
<li class="toctree-l4"><a class="reference internal" href="#aoe-api调优">AOE API调优</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#部署ascend自定义算子">部署Ascend自定义算子</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="converter_tool_graph_kernel.html">图算融合配置说明（beta特性）</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="benchmark.html">基准测试工具</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">参考文档</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../architecture_lite.html">总体架构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operator_list_lite.html">Lite算子支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operator_list_codegen.html">Codegen算子支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../model_lite.html">模型支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting_guide.html">问题定位指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../log.html">日志</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../RELEASE.html">Release Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MindSpore Lite</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="converter.html">模型转换工具</a> &raquo;</li>
      <li>Ascend转换工具功能说明</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/use/cloud_infer/converter_tool_ascend.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ascend转换工具功能说明">
<h1>Ascend转换工具功能说明<a class="headerlink" href="#ascend转换工具功能说明" title="永久链接至标题"></a></h1>
<p><a class="reference external" href="https://gitee.com/mindspore/docs/blob/master/docs/lite/docs/source_zh_cn/use/cloud_infer/converter_tool_ascend.md"><img alt="查看源文件" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/master/resource/_static/logo_source.png" /></a></p>
<section id="概述">
<h2>概述<a class="headerlink" href="#概述" title="永久链接至标题"></a></h2>
<p>本文档介绍云侧推理模型转换工具在Ascend后端的相关功能，如配置文件的选项、动态shape、AOE、自定义算子等。</p>
</section>
<section id="配置文件">
<h2>配置文件<a class="headerlink" href="#配置文件" title="永久链接至标题"></a></h2>
<p>表1：配置[ascend_context]参数</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>属性</p></th>
<th class="head"><p>功能描述</p></th>
<th class="head"><p>参数类型</p></th>
<th class="head"><p>取值说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">input_format</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定模型输入format。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;NCHW&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;NHWC&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;ND&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">input_shape</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定模型输入Shape，input_name必须是转换前的网络模型中的输入名称，按输入次序排列，用<code class="docutils literal notranslate"><span class="pre">；</span></code>隔开。</p></td>
<td><p>String</p></td>
<td><p>例如：<code class="docutils literal notranslate"><span class="pre">&quot;input1:[1,64,64,3];input2:[1,256,256,3]&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dynamic_dims</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定动态BatchSize和动态分辨率参数。</p></td>
<td><p>String</p></td>
<td><p>见<a class="reference internal" href="#动态shape配置"><span class="std std-doc">动态shape配置</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">precision_mode</span></code></p></td>
<td><p>可选</p></td>
<td><p>配置模型精度模式。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;enforce_fp32&quot;</span></code>，<code class="docutils literal notranslate"><span class="pre">&quot;preferred_fp32&quot;</span></code>，<code class="docutils literal notranslate"><span class="pre">&quot;enforce_fp16&quot;</span></code>，<code class="docutils literal notranslate"><span class="pre">&quot;enforce_origin&quot;</span></code>或者<code class="docutils literal notranslate"><span class="pre">&quot;preferred_optimal&quot;</span></code>，默认为<code class="docutils literal notranslate"><span class="pre">&quot;enforce_fp16&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">op_select_impl_mode</span></code></p></td>
<td><p>可选</p></td>
<td><p>配置算子选择模式。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;high_performance&quot;</span></code>和<code class="docutils literal notranslate"><span class="pre">&quot;high_precision&quot;</span></code>，默认为<code class="docutils literal notranslate"><span class="pre">&quot;high_performance&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">output_type</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定网络输出数据类型。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;FP16&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;FP32&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;UINT8&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fusion_switch_config_file_path</span></code></p></td>
<td><p>可选</p></td>
<td><p>配置<a class="reference external" href="https://www.hiascend.com/document/detail/zh/canncommercial/601/inferapplicationdev/atctool/atctool_0078.html">融合规则开关配置</a>文件路径及文件名。</p></td>
<td><p>String</p></td>
<td><p>指定融合规则开关的配置文件</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">insert_op_config_file_path</span></code></p></td>
<td><p>可选</p></td>
<td><p>模型插入<a class="reference external" href="https://www.hiascend.com/document/detail/zh/canncommercial/601/inferapplicationdev/atctool/atctool_0018.html">AIPP</a>算子</p></td>
<td><p>String</p></td>
<td><p><a class="reference external" href="https://www.hiascend.com/document/detail/zh/canncommercial/601/inferapplicationdev/atctool/atctool_0021.html">AIPP</a>配置文件路径</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">aoe_mode</span></code></p></td>
<td><p>可选</p></td>
<td><p><a class="reference external" href="https://www.hiascend.com/document/detail/zh/canncommercial/601/devtools/auxiliarydevtool/aoe_16_001.html">AOE</a>自动调优模式</p></td>
<td><p>String</p></td>
<td><p>可选有”subgraph tuning”、”operator tuning”或者”subgraph tuning、operator tuning”，默认不使能</p></td>
</tr>
</tbody>
</table>
<p>表2：配置[acl_init_options]参数</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>属性</p></th>
<th class="head"><p>功能描述</p></th>
<th class="head"><p>参数类型</p></th>
<th class="head"><p>取值说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.engineType</span></code></p></td>
<td><p>可选</p></td>
<td><p>设置网络模型使用的Core类型。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;VectorCore&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;AiCore&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.socVersion</span></code></p></td>
<td><p>可选</p></td>
<td><p>昇腾AI处理器的版本。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;Ascend310&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;Ascend710&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;Ascend910&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.bufferOptimize</span></code></p></td>
<td><p>可选</p></td>
<td><p>数据缓存优化开关。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;l1_optimize&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;l2_optimize&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;off_optimize&quot;</span></code>，默认为<code class="docutils literal notranslate"><span class="pre">&quot;l2_optimize&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.enableCompressWeight</span></code></p></td>
<td><p>可选</p></td>
<td><p>可以对Weight进行数据压缩，提升性能。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;true&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;false&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">compress_weight_conf</span></code></p></td>
<td><p>可选</p></td>
<td><p>要压缩的node节点列表配置文件路径，node节点主要为conv算子、fc算子。</p></td>
<td><p>String</p></td>
<td><p>配置文件路径</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.exec.precision_mode</span></code></p></td>
<td><p>可选</p></td>
<td><p>选择算子精度模式。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;force_fp32&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;force_fp16&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;allow_fp32_to_fp16&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;must_keep_origin_dtype&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;allow_mix_precision&quot;</span></code>，默认为<code class="docutils literal notranslate"><span class="pre">&quot;force_fp16&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.exec.disableReuseMemory</span></code></p></td>
<td><p>可选</p></td>
<td><p>内存复用开关。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;１&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.enableSingleStream</span></code></p></td>
<td><p>可选</p></td>
<td><p>是否使能一个模型只使用一个stream。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;true&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;false&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.aicoreNum</span></code></p></td>
<td><p>可选</p></td>
<td><p>设置编译时使用的ai core数目。</p></td>
<td><p>String</p></td>
<td><p>默认<code class="docutils literal notranslate"><span class="pre">&quot;１0&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.fusionSwitchFile</span></code></p></td>
<td><p>可选</p></td>
<td><p>融合配置文件路径。</p></td>
<td><p>String</p></td>
<td><p>配置文件路径</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.enableSmallChannel</span></code></p></td>
<td><p>可选</p></td>
<td><p>是否使能small channel的优化。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;1&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.opSelectImplmode</span></code></p></td>
<td><p>可选</p></td>
<td><p>选择算子实现模式。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;high_precision&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;high_performance&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.optypelistForImplmode</span></code></p></td>
<td><p>可选</p></td>
<td><p>算子列表，列表中算子使用<code class="docutils literal notranslate"><span class="pre">ge.opSelectImplmode</span></code>参数指定的模式。</p></td>
<td><p>String</p></td>
<td><p>算子类型</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.op_compiler_cache_mode</span></code></p></td>
<td><p>可选</p></td>
<td><p>配置算子编译磁盘缓存模式。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;enable&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;force&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;disable&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.op_compiler_cache_dir</span></code></p></td>
<td><p>可选</p></td>
<td><p>配置算子变异磁盘缓存目录。</p></td>
<td><p>String</p></td>
<td><p>默认值<code class="docutils literal notranslate"><span class="pre">$HOME/atc_data</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.debugDir</span></code></p></td>
<td><p>可选</p></td>
<td><p>配置保存算子编译生成的调试相关的过程文件的路径。</p></td>
<td><p>String</p></td>
<td><p>默认生成当前路径</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.opDebugLevel</span></code></p></td>
<td><p>可选</p></td>
<td><p>算子debug功能开关。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;1&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.exec.modify_mixlist</span></code></p></td>
<td><p>可选</p></td>
<td><p>配置混合精度名单。</p></td>
<td><p>String</p></td>
<td><p>配置文件路径</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.enableSparseMatrixWeight</span></code></p></td>
<td><p>可选</p></td>
<td><p>使能全局稀疏特性。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;1&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.externalWeight</span></code></p></td>
<td><p>可选</p></td>
<td><p>是否将常量节点的权重单独保存到文件中。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;１&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.deterministic</span></code></p></td>
<td><p>可选</p></td>
<td><p>是否开启确定性计算。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;１&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.host_env_os</span></code></p></td>
<td><p>可选</p></td>
<td><p>支持编译环境操作系统与运行环境不一致。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;linux&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.host_env_cpu</span></code></p></td>
<td><p>可选</p></td>
<td><p>支持编译环境操作系统架构与运行环境不一致。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;aarch64&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;x86_64&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.virtual_type</span></code></p></td>
<td><p>可选</p></td>
<td><p>是否支持离线模型在昇腾虚拟化实例特性生成的虚拟设备上运行。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;1&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.compressionOptimizeConf</span></code></p></td>
<td><p>可选</p></td>
<td><p>压缩优化功能配置文件路径。</p></td>
<td><p>String</p></td>
<td><p>配置文件路径</p></td>
</tr>
</tbody>
</table>
<p>表3：配置[acl_build_options]参数</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>属性</p></th>
<th class="head"><p>功能描述</p></th>
<th class="head"><p>参数类型</p></th>
<th class="head"><p>取值说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">input_format</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定模型输入format。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;NCHW&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;NHWC&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;ND&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">input_shape</span></code></p></td>
<td><p>可选</p></td>
<td><p>模型输入shape。</p></td>
<td><p>String</p></td>
<td><p>例如：<code class="docutils literal notranslate"><span class="pre">input1:1,3,512,512;input2:1,3,224,224</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">input_shape_rang</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定输入的shape rang。</p></td>
<td><p>String</p></td>
<td><p>例如：<code class="docutils literal notranslate"><span class="pre">input1:[1-10,3,512,512];input2:[1-10,3,224,224]</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">op_name_map</span></code></p></td>
<td><p>可选</p></td>
<td><p>扩展算子映射配置文件路径。</p></td>
<td><p>String</p></td>
<td><p>配置文件路径</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.dynamicBatchSize</span></code></p></td>
<td><p>可选</p></td>
<td><p>设置动态batch档位参数。</p></td>
<td><p>String</p></td>
<td><p>该参数需要与<code class="docutils literal notranslate"><span class="pre">input_shape</span></code>参数配合使用</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.dynamicImageSize</span></code></p></td>
<td><p>可选</p></td>
<td><p>设置输入图片的动态分辨率参数。</p></td>
<td><p>String</p></td>
<td><p>该参数需要与<code class="docutils literal notranslate"><span class="pre">input_shape</span></code>参数配合使用</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.dynamicDims</span></code></p></td>
<td><p>可选</p></td>
<td><p>设置ND格式下的动态维度的档位。</p></td>
<td><p>String</p></td>
<td><p>该参数需要与<code class="docutils literal notranslate"><span class="pre">input_shape</span></code>参数配合使用</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.inserOpFile</span></code></p></td>
<td><p>可选</p></td>
<td><p>输入预处理算子的配置文件路径。</p></td>
<td><p>String</p></td>
<td><p>配置文件路径</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.exec.precision_mode</span></code></p></td>
<td><p>可选</p></td>
<td><p>选择算子精度模式。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;force_fp32&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;force_fp16&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;allow_fp32_to_fp16&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;must_keep_origin_dtype&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;allow_mix_precision&quot;</span></code>，默认为<code class="docutils literal notranslate"><span class="pre">&quot;force_fp16&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.exec.disableReuseMemory</span></code></p></td>
<td><p>可选</p></td>
<td><p>内存复用开关。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;１&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.outputDataType</span></code></p></td>
<td><p>可选</p></td>
<td><p>网络输出数据类型。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;FP32&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;UINT8&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;FP16&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.outputNodeName</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定输出节点。</p></td>
<td><p>String</p></td>
<td><p>例如：<code class="docutils literal notranslate"><span class="pre">&quot;node_name1:0;node_name1:1;node_name2:0&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.INPUT_NODES_SET_FP16</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定输入数据类型为FP16的输入节点名称。</p></td>
<td><p>String</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;node_name1;node_name2&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">log</span></code></p></td>
<td><p>可选</p></td>
<td><p>设置日志级别。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;debug&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;info&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;warning&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;error&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.op_compiler_cache_mode</span></code></p></td>
<td><p>可选</p></td>
<td><p>配置算子编译磁盘缓存模式。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;enable&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;force&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;disable&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.op_compiler_cache_dir</span></code></p></td>
<td><p>可选</p></td>
<td><p>配置算子变异磁盘缓存目录。</p></td>
<td><p>String</p></td>
<td><p>默认值<code class="docutils literal notranslate"><span class="pre">$HOME/atc_data</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.debugDir</span></code></p></td>
<td><p>可选</p></td>
<td><p>配置保存算子编译生成的调试相关的过程文件的路径。</p></td>
<td><p>String</p></td>
<td><p>默认生成当前路径</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.opDebugLevel</span></code></p></td>
<td><p>可选</p></td>
<td><p>算子debug功能开关。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;1&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.mdl_bank_path</span></code></p></td>
<td><p>可选</p></td>
<td><p>加载模型调优后自定义知识库的路径。</p></td>
<td><p>String</p></td>
<td><p>该参数需要和<code class="docutils literal notranslate"><span class="pre">ge.bufferOptimize</span></code>配合使用</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.op_bank_path</span></code></p></td>
<td><p>可选</p></td>
<td><p>加载算子调优后自定义知识库路径。</p></td>
<td><p>String</p></td>
<td><p>知识库路径</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.exec.modify_mixlist</span></code></p></td>
<td><p>可选</p></td>
<td><p>配置混合精度名单。</p></td>
<td><p>String</p></td>
<td><p>配置文件路径</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.exec.op_precision_mode</span></code></p></td>
<td><p>可选</p></td>
<td><p>设置具体某个算子的精度模式，通过该参数设置配置文件路径。</p></td>
<td><p>String</p></td>
<td><p>配置文件路径</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.shape_generalized_build_mode</span></code></p></td>
<td><p>可选</p></td>
<td><p>图编译时shape编译方式。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;shape_generalized&quot;</span></code>模糊编译、<code class="docutils literal notranslate"><span class="pre">&quot;shape_precise&quot;</span></code>精确编译</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">op_debug_config</span></code></p></td>
<td><p>可选</p></td>
<td><p>内存检测功能开关。</p></td>
<td><p>String</p></td>
<td><p>配置文件路径</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ge.externalWeight</span></code></p></td>
<td><p>可选</p></td>
<td><p>是否将常量节点的权重单独保存到文件中。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;１&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ge.exec.exclude_engines</span></code></p></td>
<td><p>可选</p></td>
<td><p>设置网络模型不使用某个或者某些加速引擎。</p></td>
<td><p>String</p></td>
<td><p>可选有<code class="docutils literal notranslate"><span class="pre">&quot;AiCore&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;AiVec&quot;</span></code>、<code class="docutils literal notranslate"><span class="pre">&quot;AiCpu&quot;</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="动态shape配置">
<h2>动态shape配置<a class="headerlink" href="#动态shape配置" title="永久链接至标题"></a></h2>
<p>在某些推理场景，如检测出目标后再执行目标识别网络，由于目标个数不固定导致目标识别网络输入BatchSize不固定。如果每次推理都按照最大的BatchSize或最大分辨率进行计算，会造成计算资源浪费。因此，推理需要支持动态BatchSize和动态分辨率的场景，Lite在Ascend上推理支持动态BatchSize和动态分辨率场景，在convert阶段通过congFile配置[ascend_context]中dynamic_dims动态参数，推理时使用model的<a class="reference external" href="https://www.mindspore.cn/lite/docs/zh-CN/master/use/cloud_infer/runtime_cpp.html#%E5%8A%A8%E6%80%81shape%E8%BE%93%E5%85%A5">Resize</a>功能，改变输入shape。</p>
<section id="动态batch-size">
<h3>动态Batch size<a class="headerlink" href="#动态batch-size" title="永久链接至标题"></a></h3>
<ul>
<li><p>参数名</p>
<p>dynamic_dims</p>
</li>
<li><p>功能</p>
<p>设置动态batch档位参数，适用于执行推理时，每次处理图片数量不固定的场景，该参数需要与input_shape配合使用，input_shape中-1的位置为动态batch所在的维度。</p>
</li>
<li><p>取值</p>
<p>最多支持100档配置，每一档通过英文逗号分隔，每个档位数值限制为：[1~2048]。例如配置文件中参数配置如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ascend_context</span><span class="p">]</span>
<span class="n">input_shape</span><span class="o">=</span><span class="nb">input</span><span class="p">:[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">64</span><span class="p">,</span><span class="mi">64</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">dynamic_dims</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<p>其中，input_shape中的”-1”表示设置动态batch，档位可取值为”1,2”，即支持档位0：[1,64,64,3]，档位1：[2,64,64,3]。</p>
<p>若存在多个输入，不同输入对应的挡位需要一致，并用<code class="docutils literal notranslate"><span class="pre">;</span></code>隔开。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ascend_context</span><span class="p">]</span>
<span class="n">input_shape</span><span class="o">=</span><span class="n">input1</span><span class="p">:[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">64</span><span class="p">,</span><span class="mi">64</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span><span class="n">input2</span><span class="p">:[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">256</span><span class="p">,</span><span class="mi">256</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">dynamic_dims</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">];[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>converter</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./converter_lite<span class="w"> </span>--fmk<span class="o">=</span>ONNX<span class="w"> </span>--modelFile<span class="o">=</span><span class="si">${</span><span class="nv">model_name</span><span class="si">}</span>.onnx<span class="w"> </span>--configFile<span class="o">=</span>./config.txt<span class="w"> </span>--optimize<span class="o">=</span>ascend_oriented<span class="w"> </span>--outputFile<span class="o">=</span><span class="si">${</span><span class="nv">model_name</span><span class="si">}</span>
</pre></div>
</div>
<p>说明：使能动态BatchSize时，不需要指定inputShape参数，仅需要通过configFile配置[ascend_context]动态batch size，即上节示例中配置内容。</p>
</li>
<li><p>推理</p>
<p>使能动态BatchSize，进行模型推理时，输入shape只能选择converter时设置的档位值，想切换到其他档位对应的输入shape，使用model <a class="reference external" href="https://www.mindspore.cn/lite/docs/zh-CN/master/use/cloud_infer/runtime_cpp.html#%E5%8A%A8%E6%80%81shape%E8%BE%93%E5%85%A5">Resize</a>功能。</p>
</li>
<li><p>注意事项</p>
<p>1）若用户执行推理业务时，每次处理的图片数量不固定，则可以通过配置该参数来动态分配每次处理的图片数量。例如用户执行推理业务时需要每次处理2张，4张，8张图片，则可以配置为2,4,8，申请了档位后，模型推理时会根据实际档位申请内存。<br/>
2）如果用户设置的档位数值过大或档位过多，可能会导致模型编译失败，此时建议用户减少档位或调低档位数值。<br/>
3）如果用户设置的档位数值过大或档位过多，在运行环境执行推理时，建议执行swapoff -a命令关闭swap交换区间作为内存的功能，防止出现由于内存不足，将swap交换空间作为内存继续调用，导致运行环境异常缓慢的情况。<br/></p>
</li>
</ul>
</section>
<section id="动态分辨率">
<h3>动态分辨率<a class="headerlink" href="#动态分辨率" title="永久链接至标题"></a></h3>
<ul>
<li><p>参数名</p>
<p>dynamic_dims</p>
</li>
<li><p>功能</p>
<p>设置输入图片的动态分辨率参数。适用于执行推理时，每次处理图片宽和高不固定的场景，该参数需要与input_shape配合使用，input_shape中-1的位置为动态分辨率所在的维度。</p>
</li>
<li><p>取值</p>
<p>最多支持100档配置，每一档通过英文逗号分隔。例如： “[imagesize1_height,imagesize1_width],[imagesize2_height,imagesize2_width]”。例如配置文件中参数配置如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ascend_context</span><span class="p">]</span>
<span class="n">input_format</span><span class="o">=</span><span class="n">NHWC</span>
<span class="n">input_shape</span><span class="o">=</span><span class="nb">input</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">dynamic_dims</span><span class="o">=</span><span class="p">[</span><span class="mi">64</span><span class="p">,</span><span class="mi">64</span><span class="p">],[</span><span class="mi">19200</span><span class="p">,</span><span class="mi">960</span><span class="p">]</span>
</pre></div>
</div>
<p>其中，input_shape中的”-1”表示设置动态分辨率，即支持档位0：[1,64,64,3]，档位1：[1,19200,960,3]。</p>
</li>
<li><p>converter</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./converter_lite<span class="w"> </span>--fmk<span class="o">=</span>ONNX<span class="w"> </span>--modelFile<span class="o">=</span><span class="si">${</span><span class="nv">model_name</span><span class="si">}</span>.onnx<span class="w"> </span>--configFile<span class="o">=</span>./config.txt<span class="w"> </span>--optimize<span class="o">=</span>ascend_oriented<span class="w"> </span>--outputFile<span class="o">=</span><span class="si">${</span><span class="nv">model_name</span><span class="si">}</span>
</pre></div>
</div>
<p>说明：使能动态BatchSize时，不需要指定inputShape参数，仅需要通过configFile配置[ascend_context]动态分辨率，即上节示例中配置内容。</p>
</li>
<li><p>推理</p>
<p>使能动态分辨率，进行模型推理时，输入shape只能选择converter时设置的档位值，想切换到其他档位对应的输入shape，使用model的<a class="reference external" href="https://www.mindspore.cn/lite/docs/zh-CN/master/use/cloud_infer/runtime_cpp.html#%E5%8A%A8%E6%80%81shape%E8%BE%93%E5%85%A5">Resize</a>功能。</p>
</li>
<li><p>注意事项</p>
<p>1）如果用户设置的分辨率数值过大或档位过多，可能会导致模型编译失败，此时建议用户减少档位或调低档位数值。<br/>
2）如果用户设置了动态分辨率，实际推理时，使用的数据集图片大小需要与具体使用的分辨率相匹配。<br/>
3）如果用户设置的分辨率数值过大或档位过多，在运行环境执行推理时，建议执行swapoff -a命令关闭swap交换区间作为内存的功能，防止出现由于内存不足，将swap交换空间作为内存继续调用，导致运行环境异常缓慢的情况。<br/></p>
</li>
</ul>
</section>
<section id="动态维度">
<h3>动态维度<a class="headerlink" href="#动态维度" title="永久链接至标题"></a></h3>
<ul>
<li><p>参数名</p>
<p><code class="docutils literal notranslate"><span class="pre">ge.dynamicDims</span></code></p>
</li>
<li><p>功能</p>
<p>设置ND格式下输入的动态维度的档位。适用于执行推理时，每次处理任意维度的场景，该参数需要与<code class="docutils literal notranslate"><span class="pre">input_shape</span></code>配合使用，<code class="docutils literal notranslate"><span class="pre">input_shape</span></code>中-1的位置为动态维度。</p>
</li>
<li><p>取值</p>
<p>最多支持100档配置，每一档通过英文逗号分隔。例如配置文件中参数配置如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">acl_build_options</span><span class="p">]</span>
<span class="n">input_format</span><span class="o">=</span><span class="s2">&quot;ND&quot;</span>
<span class="n">input_shape</span><span class="o">=</span><span class="s2">&quot;input1:1,-1,-1;input2:1,-1&quot;</span>
<span class="n">ge</span><span class="o">.</span><span class="n">dynamicDims</span><span class="o">=</span><span class="s2">&quot;32,32,24;64,64,36&quot;</span>
</pre></div>
</div>
<p>其中，input_shape中的”-1”表示设置动态维度，即支持档位0：input1:1,32,32; input2:1,24，档位1：1,64,64; input2:1,36。</p>
</li>
<li><p>converter</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./converter_lite<span class="w"> </span>--fmk<span class="o">=</span>ONNX<span class="w"> </span>--modelFile<span class="o">=</span><span class="si">${</span><span class="nv">model_name</span><span class="si">}</span>.onnx<span class="w"> </span>--configFile<span class="o">=</span>./config.txt<span class="w"> </span>--optimize<span class="o">=</span>ascend_oriented<span class="w"> </span>--outputFile<span class="o">=</span><span class="si">${</span><span class="nv">model_name</span><span class="si">}</span>
</pre></div>
</div>
<p>说明：使能动态维度时，<code class="docutils literal notranslate"><span class="pre">input_format</span></code>必须设置为<code class="docutils literal notranslate"><span class="pre">ND</span></code>。</p>
</li>
<li><p>推理</p>
<p>使能动态维度，进行模型推理时，输入shape只能选择converter时设置的档位值，想切换到其他档位对应的输入shape，使用model的<a class="reference external" href="https://www.mindspore.cn/lite/docs/zh-CN/master/use/cloud_infer/runtime_cpp.html#%E5%8A%A8%E6%80%81shape%E8%BE%93%E5%85%A5">Resize</a>功能。</p>
</li>
<li><p>注意事项</p>
<p>1）如果用户设置的动态维度数值过大或档位过多，可能会导致模型编译失败，此时建议用户减少档位或调低档位数值。<br/>
2）如果用户设置了动态维度，实际推理时，使用的数据集图片大小需要与具体使用的维度相匹配。<br/>
3）如果用户设置的动态维度数值过大或档位过多，在运行环境执行推理时，建议执行swapoff -a命令关闭swap交换区间作为内存的功能，防止出现由于内存不足，将swap交换空间作为内存继续调用，导致运行环境异常缓慢的情况。<br/></p>
</li>
</ul>
</section>
</section>
<section id="aoe自动调优">
<h2>AOE自动调优<a class="headerlink" href="#aoe自动调优" title="永久链接至标题"></a></h2>
<p>AOE是一款专门为Davinci平台打造的计算图形性能自动调优工具。Lite使能AOE的能力，是在converter阶段集成AOE离线可执行程序，对图进行性能调优，生成知识库，并保存离线模型。该功能支持子图调优和算子调优。具体使用流程如下：</p>
<section id="aoe工具调优">
<h3>AOE工具调优<a class="headerlink" href="#aoe工具调优" title="永久链接至标题"></a></h3>
<ol class="arabic">
<li><p>配置环境变量</p>
<p><code class="docutils literal notranslate"><span class="pre">${LOCAL_ASCEND}</span></code>为昇腾软件包安装所在路径</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">LOCAL_ASCEND</span><span class="o">=</span>/usr/local/Ascend
<span class="nb">source</span><span class="w"> </span><span class="si">${</span><span class="nv">LOCAL_ASCEND</span><span class="si">}</span>/latest/bin/setenv.bash
</pre></div>
</div>
<p>确认环境中AOE可执行程序可被找到并运行：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aoe<span class="w"> </span>-h
</pre></div>
</div>
</li>
<li><p>指定知识库路径</p>
<p>AOE调优会生成算子知识库，默认的路径为</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/Ascend/latest/data/aoe/custom/graph<span class="o">(</span>op<span class="o">)</span>/<span class="si">${</span><span class="nv">soc_version</span><span class="si">}</span>
</pre></div>
</div>
<p>（可选）也可通过<code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">TUNE_BANK_PATH</span></code>环境变量来自定义知识库路径。</p>
</li>
<li><p>清除缓存</p>
<p>为了模型编译能命中AOE生成的知识库，在使能AOE之前，最好先删除编译缓存，以免缓存复用，以昇腾310P环境，用户为root为例，删除<code class="docutils literal notranslate"><span class="pre">/root/atc_data/kernel_cache/Ascend310P3</span></code>和<code class="docutils literal notranslate"><span class="pre">/root/atc_data/fuzzy_kernel_cache/Ascend310P3</span></code>目录。</p>
</li>
<li><p>配置文件指定选项</p>
<p>在转换工具config配置文件中<code class="docutils literal notranslate"><span class="pre">[ascend_context]</span></code>指定AOE调优模式，如下举例中，会先执行子图调优，再执行算子调优。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>ascend_context<span class="o">]</span>
<span class="nv">aoe_mode</span><span class="o">=</span><span class="s2">&quot;subgraph tuning, operator tuning&quot;</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>性能提升结果会因不同环境存在差异，实际时延减少百分比不完全等同于调优日志中所展示的结果。</p></li>
<li><p>AOE调优会在执行任务的当前目录下产生<code class="docutils literal notranslate"><span class="pre">aoe_workspace</span></code>目录，用于保存调优前后的模型，用于性能提升对比，以及调优所必须的过程数据和结果文件。该目录会占用额外磁盘空间，如500MB左右的原始模型会占用2~10GB的磁盘空间，视模型大小，算子种类结构，输入shape的大小等因素浮动。因此建议预留足够的磁盘空间，否则可能导致调优失败。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aoe_workspace</span></code>目录需要手动删除来释放磁盘空间。</p></li>
</ul>
</div></blockquote>
</section>
<section id="aoe-api调优">
<h3>AOE API调优<a class="headerlink" href="#aoe-api调优" title="永久链接至标题"></a></h3>
<p>Ascend推理时，运行时指定 <code class="docutils literal notranslate"><span class="pre">provider</span></code> 为 <code class="docutils literal notranslate"><span class="pre">ge</span></code> 时，支持多个模型共享权重，支持模型中存在可以被更新的权重，即变量。当前仅AOE API调优支持模型中存在变量，默认的AOE工具调优不支持。环境变量、知识库路径的设置和使用、AOE调优缓存与AOE工具调优一致。详情可参考<a class="reference external" href="https://www.hiascend.com/document/detail/zh/CANNCommunityEdition/63RC2alpha003/developmenttools/devtool/aoe_16_001.html">AOE调优</a>。</p>
<p>转换工具支持AOE API调优，当 <code class="docutils literal notranslate"><span class="pre">optimize=ascend_oriented</span></code>，配置文件中识别到 <code class="docutils literal notranslate"><span class="pre">[ascend_context]</span></code> 存在 <code class="docutils literal notranslate"><span class="pre">provider=ge</span></code> ，且 <code class="docutils literal notranslate"><span class="pre">[ascend_context]</span></code> 或 <code class="docutils literal notranslate"><span class="pre">[acl_option_cfg_param]</span></code> 中存在有效的 <code class="docutils literal notranslate"><span class="pre">aoe_mode</span></code> 或 <code class="docutils literal notranslate"><span class="pre">[aoe_global_options]</span></code> 存在有效的 <code class="docutils literal notranslate"><span class="pre">job_type</span></code> ，将启动AOE API调优。AOE API调优只产生知识库，不产生优化后的模型。</p>
<ol class="arabic">
<li><p>指定 <code class="docutils literal notranslate"><span class="pre">provider</span></code> 为 <code class="docutils literal notranslate"><span class="pre">ge</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>ascend_context<span class="o">]</span>
<span class="nv">provider</span><span class="o">=</span>ge
</pre></div>
</div>
</li>
<li><p>AOE选项</p>
<p><code class="docutils literal notranslate"><span class="pre">[aoe_global_options]</span></code> 中的选项将传给AOE API的<a class="reference external" href="https://gitee.com/link?target=https://www.hiascend.com/document/detail/zh/CANNCommunityEdition/63RC2alpha003/developmenttools/devtool/aoe_16_070.html">全局选项</a>。 <code class="docutils literal notranslate"><span class="pre">[aoe_tuning_options]</span></code> 中的选项将传给AOE API的<a class="reference external" href="https://gitee.com/link?target=https://www.hiascend.com/document/detail/zh/CANNCommunityEdition/63RC2alpha003/developmenttools/devtool/aoe_16_071.html">调优选项</a>。</p>
<p>我们将提取 <code class="docutils literal notranslate"><span class="pre">[acl_option_cfg_param]</span></code> 、<code class="docutils literal notranslate"><span class="pre">[ascend_context]</span></code> 、 <code class="docutils literal notranslate"><span class="pre">[ge_session_options]</span></code> 、 <code class="docutils literal notranslate"><span class="pre">[ge_graph_options]</span></code> 等Section中的选项并转换为AOE选项，避免用户开启AOE调优时需要手动转换这些选项。提取的选项包括 <code class="docutils literal notranslate"><span class="pre">input_format</span></code> 、 <code class="docutils literal notranslate"><span class="pre">input_shape</span></code> 、 <code class="docutils literal notranslate"><span class="pre">dynamic_dims</span></code> 、 <code class="docutils literal notranslate"><span class="pre">precision_mode</span></code> 。相同选项在多个配置Section同时存在时，优先级从前往后由低到高，<code class="docutils literal notranslate"><span class="pre">[aoe_global_options]</span></code> 和 <code class="docutils literal notranslate"><span class="pre">[aoe_tuning_options]</span></code> 中的选项优先级最高。建议使用 <code class="docutils literal notranslate"><span class="pre">[ge_graph_options]</span></code> 和 <code class="docutils literal notranslate"><span class="pre">[aoe_tuning_options]</span></code> 。</p>
</li>
<li><p>AOE调优模式</p>
<p><code class="docutils literal notranslate"><span class="pre">aoe_mode</span></code> 当前仅限定为 <code class="docutils literal notranslate"><span class="pre">subgraph</span> <span class="pre">tuning</span></code> 或 <code class="docutils literal notranslate"><span class="pre">operator</span> <span class="pre">tuning</span></code> ，暂不支持 <code class="docutils literal notranslate"><span class="pre">subgraph</span> <span class="pre">tuning,</span> <span class="pre">operator</span> <span class="pre">tuning</span></code>，即不支持同一个调优过程进行子图和算子调优，如需要，可通过两次调用转换工具分别启动子图调优和算子调优。</p>
<p><code class="docutils literal notranslate"><span class="pre">[aoe_global_options]</span></code> 中， <code class="docutils literal notranslate"><span class="pre">job_type</span></code> 为 <code class="docutils literal notranslate"><span class="pre">1</span></code> 时为子图调优， <code class="docutils literal notranslate"><span class="pre">job_type</span></code> 为 <code class="docutils literal notranslate"><span class="pre">2</span></code> 时为算子调优。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>ascend_context<span class="o">]</span>
<span class="nv">aoe_mode</span><span class="o">=</span><span class="s2">&quot;operator tuning&quot;</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>acl_option_cfg_param<span class="o">]</span>
<span class="nv">aoe_mode</span><span class="o">=</span><span class="s2">&quot;operator tuning&quot;</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>aoe_global_options<span class="o">]</span>
<span class="nv">job_type</span><span class="o">=</span><span class="m">2</span>
</pre></div>
</div>
</li>
<li><p>动态分档</p>
<p>可在 <code class="docutils literal notranslate"><span class="pre">[acl_option_cfg_param]</span></code> 、<code class="docutils literal notranslate"><span class="pre">[ascend_context]</span></code> 、 <code class="docutils literal notranslate"><span class="pre">[ge_graph_options]</span></code> 、 <code class="docutils literal notranslate"><span class="pre">[aoe_tuning_options]</span></code> 设置动态分档信息，优先级从低到高。以下设置方式等价。 <code class="docutils literal notranslate"><span class="pre">[ascend_context]</span></code> 分档设置可参考 <a class="reference external" href="https://www.mindspore.cn/lite/docs/zh-CN/master/use/cloud_infer/converter_tool_ascend.html#%E5%8A%A8%E6%80%81shape%E9%85%8D%E7%BD%AE">动态shape配置</a>。 <code class="docutils literal notranslate"><span class="pre">[acl_option_cfg_param]</span></code> 、 <code class="docutils literal notranslate"><span class="pre">[ge_graph_options]</span></code> 、 <code class="docutils literal notranslate"><span class="pre">[aoe_tuning_options]</span></code> 分档设置可参考 <a class="reference external" href="https://www.hiascend.com/document/detail/zh/CANNCommunityEdition/63RC2alpha003/developmenttools/devtool/aoepar_16_015.html">dynamic_dims</a>、<a class="reference external" href="https://www.hiascend.com/document/detail/zh/CANNCommunityEdition/63RC2alpha003/developmenttools/devtool/aoepar_16_013.html">dynamic_batch_size</a>、<a class="reference external" href="https://www.hiascend.com/document/detail/zh/CANNCommunityEdition/63RC2alpha003/developmenttools/devtool/aoepar_16_014.html">dynamic_image_size</a>。注意， <code class="docutils literal notranslate"><span class="pre">[ge_graph_options]</span></code> 仅支持 <code class="docutils literal notranslate"><span class="pre">ge.dynamicDims</span></code> ，不支持类似 <code class="docutils literal notranslate"><span class="pre">dynamic_batch_size</span></code> 和 <code class="docutils literal notranslate"><span class="pre">dynamic_image_size</span></code> 的形式。 <code class="docutils literal notranslate"><span class="pre">input_format</span></code> 用于指定动态分档的输入维度排布，使用 <code class="docutils literal notranslate"><span class="pre">dynamic_image_size</span></code> 时需要指定 <code class="docutils literal notranslate"><span class="pre">input_format</span></code> 为 <code class="docutils literal notranslate"><span class="pre">NCHW</span></code> 或 <code class="docutils literal notranslate"><span class="pre">NHWC</span></code> 指示 <code class="docutils literal notranslate"><span class="pre">H</span></code> 和 <code class="docutils literal notranslate"><span class="pre">W</span></code> 维度所在位置。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>ascend_context<span class="o">]</span>
<span class="nv">input_shape</span><span class="o">=</span>x1:<span class="o">[</span>-1,3,224,224<span class="o">]</span><span class="p">;</span>x2:<span class="o">[</span>-1,3,1024,1024<span class="o">]</span>
<span class="nv">dynamic_dims</span><span class="o">=[</span><span class="m">1</span><span class="o">]</span>,<span class="o">[</span><span class="m">2</span><span class="o">]</span>,<span class="o">[</span><span class="m">3</span><span class="o">]</span>,<span class="o">[</span><span class="m">4</span><span class="o">]</span><span class="p">;</span><span class="o">[</span><span class="m">1</span><span class="o">]</span>,<span class="o">[</span><span class="m">2</span><span class="o">]</span>,<span class="o">[</span><span class="m">3</span><span class="o">]</span>,<span class="o">[</span><span class="m">4</span><span class="o">]</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>acl_option_cfg_param<span class="o">]</span>
<span class="nv">input_shape</span><span class="o">=</span>x1:-1,3,224,224<span class="p">;</span>x2:-1,3,1024,1024
<span class="nv">dynamic_dims</span><span class="o">=</span><span class="m">1</span>,1<span class="p">;</span><span class="m">2</span>,2<span class="p">;</span><span class="m">3</span>,3<span class="p">;</span><span class="m">4</span>,4
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>ge_graph_options<span class="o">]</span>
ge.inputShape<span class="o">=</span>x1:-1,3,224,224<span class="p">;</span>x2:-1,3,1024,1024
ge.dynamicDims<span class="o">=</span><span class="m">1</span>,1<span class="p">;</span><span class="m">2</span>,2<span class="p">;</span><span class="m">3</span>,3<span class="p">;</span><span class="m">4</span>,4
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>aoe_tuning_options<span class="o">]</span>
<span class="nv">input_shape</span><span class="o">=</span>x1:-1,3,224,224<span class="p">;</span>x2:-1,3,1024,1024
<span class="nv">dynamic_dims</span><span class="o">=</span><span class="m">1</span>,1<span class="p">;</span><span class="m">2</span>,2<span class="p">;</span><span class="m">3</span>,3<span class="p">;</span><span class="m">4</span>,4
</pre></div>
</div>
</li>
<li><p>精度模式</p>
<p>可在 <code class="docutils literal notranslate"><span class="pre">[acl_option_cfg_param]</span></code> 、<code class="docutils literal notranslate"><span class="pre">[ascend_context]</span></code> 、 <code class="docutils literal notranslate"><span class="pre">[ge_graph_options]</span></code> 、 <code class="docutils literal notranslate"><span class="pre">[aoe_tuning_options]</span></code> 设置模式信息，优先级从低到高。以下设置方式等价。</p>
<p><code class="docutils literal notranslate"><span class="pre">[ascend_context]</span></code> 和 <code class="docutils literal notranslate"><span class="pre">[acl_option_cfg_param]</span></code> 精度模式设置可参考 <a class="reference external" href="https://www.mindspore.cn/lite/docs/zh-CN/master/use/cloud_infer/converter_tool_ascend.html#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">ascend_context - precision_mode</a>。 <code class="docutils literal notranslate"><span class="pre">[ge_graph_options]</span></code> 和 <code class="docutils literal notranslate"><span class="pre">[aoe_tuning_options]</span></code> 精度模式设置可参考 <a class="reference external" href="https://www.hiascend.com/document/detail/zh/CANNCommunityEdition/63RC2alpha003/developmenttools/devtool/aoepar_16_046.html">precision_mode</a>。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>ascend_context<span class="o">]</span>
<span class="nv">precision_mode</span><span class="o">=</span>preferred_fp32
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>acl_option_cfg_param<span class="o">]</span>
<span class="nv">precision_mode</span><span class="o">=</span>preferred_fp32
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>ge_graph_options<span class="o">]</span>
<span class="nv">precision_mode</span><span class="o">=</span>allow_fp32_to_fp16
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>aoe_tuning_options<span class="o">]</span>
<span class="nv">precision_mode</span><span class="o">=</span>allow_fp32_to_fp16
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="部署ascend自定义算子">
<h2>部署Ascend自定义算子<a class="headerlink" href="#部署ascend自定义算子" title="永久链接至标题"></a></h2>
<p>MindSpore Lite converter支持将带有MindSpore Lite自定义Ascend算子的模型转换为MindSpore Lite的模型，通过自定义算子，可以在特殊场景下使用自定义算子对模型推理性能进行优化，如使用自定义的MatMul实现更高的矩阵乘法计算，使用MindSpore Lite提供的transformer融合算子提升transformer模型性能（待上线）以及使用AKG图算融合算子对模型进行自动融合优化提升推理性能等。</p>
<p>如果MindSpore Lite转换Ascend模型时有自定义算子，用户需要在调用converter之前部署自定义算子到ACL的算子库中才能正常完成转换，以下描述了部署Ascend自定义算子的关键步骤：</p>
<ol class="arabic">
<li><p>配置环境变量</p>
<p><code class="docutils literal notranslate"><span class="pre">${ASCEND_OPP_PATH}</span></code>为昇腾软件CANN包的算子库路径，通常是在昇腾软件安装路径下，默认一般是<code class="docutils literal notranslate"><span class="pre">/usr/local/Ascend/latest/opp</span></code>。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">ASCEND_OPP_PATH</span><span class="o">=</span>/usr/local/Ascend/latest/opp
</pre></div>
</div>
</li>
<li><p>获取Ascend自定义算子包</p>
<p>MindSpore Lite云侧推理包中会包含Ascend自定义算子包目录，其相对目录为<code class="docutils literal notranslate"><span class="pre">${LITE_PACKAGE_PATH}/tools/custom_kernels/ascend</span></code>，解压MindSpore Lite云侧推理包后，进入对应目录。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tar<span class="w"> </span>zxf<span class="w"> </span>mindspore-lite-<span class="o">{</span>version<span class="o">}</span>-linux-<span class="o">{</span>arch<span class="o">}</span>.tar.gz
<span class="nb">cd</span><span class="w"> </span>tools/custom_kernels/ascend
</pre></div>
</div>
</li>
<li><p>运行install.sh脚本部署自定义算子</p>
<p>在算子包目录下运行安装脚本部署自定义算子。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>install.sh
</pre></div>
</div>
</li>
<li><p>查看昇腾算子库目录检查是否安装成功</p>
<p>完成部署自定义算子之后，进入昇腾算子库目录<code class="docutils literal notranslate"><span class="pre">/usr/local/Ascend/latest/opp/vendors/</span></code>，查看其下目录是否有对应的自定义算子文件，当前主要提供了基本算子样例和AKG图算融合算子实现，具体文件结构如下。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/usr/local/Ascend/latest/opp/vendors/
├── config.ini                                                     # 自定义算子vendor配置文件，定义不同vendor间优先级，需要有mslite的vendor配置
└── mslite                                                         # mslite提供的自定义算子目录
    ├── framework                                                  # 第三方框架适配配置
    │    └── tensorflow                                            # tensorflow适配配置，非必需
    │       └── npu_supported_ops.json
    ├── op_impl                                                    # 自定义算子实现目录
    │   ├── ai_core                                                # 运行在ai_core的算子实现目录
    │   │   └── tbe                                                # tbe算子实现目录
    │   │       ├── config                                         # 不同芯片的算子配置
    │   │       │   ├── ascend310                                  # 310芯片的算子配置
    │   │       │       └── aic_ascend310-ops-info.json
    │   │       │   ├── ascend310p                                 # 310p芯片的算子配置
    │   │       │       └── aic_ascend310p-ops-info.json
    │   │       │   ├── ascend910                                  # 910芯片的算子配置
    │   │       │       └── aic_ascend910-ops-info.json
    │   │       └── mslite_impl                                    # 算子的实现逻辑目录
    │   │           ├── add_dsl.py                                 # 基于dsl开发的add样例逻辑实现文件
    │   │           ├── add_tik.py                                 # 基于tik开发的add样例逻辑实现文件
    │   │           ├── compiler.py                                # akg图算需要的算子编译逻辑文件
    │   │           ├── custom.py                                  # akg自定义算子实现文件
    │   │           ├── matmul_tik.py                              # 基于tik开发的matmul样例逻辑实现文件
    │   ├── cpu                                                    # aicpu自定义算子目录，非必需
    │   │   └── aicpu_kernel
    │   │       └── impl
    │   └── vector_core                                            # 运行在vector_core的算子实现目录
    │       └── tbe                                                # tbe算子实现目录
    │           └── mslite_impl                                    # 算子的实现逻辑目录
    │               ├── add_dsl.py                                 # 基于dsl开发的add样例逻辑实现文件
    │               ├── add_tik.py                                 # 基于tik开发的add样例逻辑实现文件
    │               └── matmul_tik.py                              # 基于tik开发的matmul样例逻辑实现文件
    └── op_proto                                                   # 算子原型定义包目录
        └── libcust_op_proto.so                                    # 算子原型定义so文件，akg自定义算子默认注册，不需要此文件
</pre></div>
</div>
</li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="converter_python.html" class="btn btn-neutral float-left" title="使用Python接口模型转换" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="converter_tool_graph_kernel.html" class="btn btn-neutral float-right" title="图算融合配置说明（beta特性）" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2021, MindSpore Lite.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>