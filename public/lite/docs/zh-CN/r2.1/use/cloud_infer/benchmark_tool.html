<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>benchmark &mdash; MindSpore Lite master 文档</title><script>;(()=>{const e=localStorage.getItem("ms-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;(e?"dark"===e:t)&&document.documentElement.setAttribute("data-o-theme","dark")})();</script>
      <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/lite.css" type="text/css" /><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script><script src="../../_static/jquery.js"></script>
        <script src="../../_static/js/theme.js"></script><script src="../../_static/underscore.js"></script><script src="../../_static/doctools.js"></script><script src="../../_static/js/lite.js"></script><script src="../../_static/translations.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="总体架构" href="../../architecture_lite.html" />
    <link rel="prev" title="基准测试工具" href="benchmark.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> MindSpore Lite
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">获取MindSpore Lite</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../downloads.html">下载MindSpore Lite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build.html">编译端侧MindSpore Lite</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">编译云侧MindSpore Lite</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">快速入门</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../quick_start/one_hour_introduction.html">端侧推理快速入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quick_start/one_hour_introduction_cloud.html">云侧推理快速入门</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">端侧推理</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../device_infer_example.html">端侧推理样例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../post_training_quantization.html">训练后量化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_preprocessing.html">预处理数据</a></li>
<li class="toctree-l1"><a class="reference internal" href="../runtime.html">执行推理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../micro.html">在MCU或小型系统上执行推理或训练</a></li>
<li class="toctree-l1"><a class="reference internal" href="../asic.html">专用芯片集成说明</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">端侧训练</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../device_train_example.html">端侧训练样例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../runtime_train.html">执行训练</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">端侧第三方接入</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../register.html">自定义算子</a></li>
<li class="toctree-l1"><a class="reference internal" href="../delegate.html">使用Delegate支持第三方AI框架接入</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">端侧工具</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../converter.html">模型转换工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../benchmark.html">基准测试工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cropper_tool.html">静态库裁剪工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visual_tool.html">可视化工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../obfuscator_tool.html">模型混淆工具</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">云侧推理</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="runtime.html">基础推理</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime_parallel.html">并发推理</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime_distributed.html">分布式推理</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">云侧工具</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="converter.html">模型转换工具</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="benchmark.html">基准测试工具</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">benchmark</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#概述">概述</a></li>
<li class="toctree-l3"><a class="reference internal" href="#linux环境使用说明">Linux环境使用说明</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#环境准备">环境准备</a></li>
<li class="toctree-l4"><a class="reference internal" href="#参数说明">参数说明</a></li>
<li class="toctree-l4"><a class="reference internal" href="#使用示例">使用示例</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">参考文档</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../architecture_lite.html">总体架构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operator_list_lite.html">Lite算子支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operator_list_codegen.html">Codegen算子支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../model_lite.html">模型支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting_guide.html">问题定位指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../log.html">日志</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../RELEASE.html">Release Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MindSpore Lite</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="benchmark.html">基准测试工具</a> &raquo;</li>
      <li>benchmark</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/use/cloud_infer/benchmark_tool.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="benchmark">
<h1>benchmark<a class="headerlink" href="#benchmark" title="永久链接至标题"></a></h1>
<p><a class="reference external" href="https://gitee.com/mindspore/docs/blob/r2.1/docs/lite/docs/source_zh_cn/use/cloud_infer/benchmark_tool.md"><img alt="查看源文件" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.1/resource/_static/logo_source.svg" /></a></p>
<section id="概述">
<h2>概述<a class="headerlink" href="#概述" title="永久链接至标题"></a></h2>
<p>转换模型后执行推理前，可以使用Benchmark工具对MindSpore Lite云侧推理模型进行基准测试。它不仅可以对MindSpore Lite云侧推理模型前向推理执行耗时进行定量分析（性能），还可以通过指定模型输出进行可对比的误差分析（精度）。</p>
</section>
<section id="linux环境使用说明">
<h2>Linux环境使用说明<a class="headerlink" href="#linux环境使用说明" title="永久链接至标题"></a></h2>
<section id="环境准备">
<h3>环境准备<a class="headerlink" href="#环境准备" title="永久链接至标题"></a></h3>
<p>使用Benchmark工具，需要进行如下环境准备工作。</p>
<ul>
<li><p>编译：Benchmark工具代码在MindSpore源码的<code class="docutils literal notranslate"><span class="pre">mindspore/lite/tools/benchmark</span></code>目录中，参考构建文档中的<a class="reference external" href="https://www.mindspore.cn/lite/docs/zh-CN/r2.1/use/cloud_infer/build.html#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87">环境要求</a>和<a class="reference external" href="https://www.mindspore.cn/lite/docs/zh-CN/r2.1/use/cloud_infer/build.html#%E7%BC%96%E8%AF%91%E7%A4%BA%E4%BE%8B">编译示例</a>执行编译。</p></li>
<li><p>运行：参考构建文档中的<a class="reference external" href="https://www.mindspore.cn/lite/docs/zh-CN/r2.1/use/cloud_infer/build.html#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84">编译输出</a>，从编译出来的包中获得<code class="docutils literal notranslate"><span class="pre">benchmark</span></code>工具。</p></li>
<li><p>将推理需要的动态链接库加入环境变量LD_LIBRARY_PATH。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">PACKAGE_ROOT_PATH</span><span class="si">}</span>/runtime/lib:<span class="si">${</span><span class="nv">PACKAGE_ROOT_PATH</span><span class="si">}</span>/tools/converter/lib:<span class="si">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="si">}</span>
</pre></div>
</div>
<p>其中${PACKAGE_ROOT_PATH}是编译得到的包解压后的根目录。</p>
</li>
</ul>
</section>
<section id="参数说明">
<h3>参数说明<a class="headerlink" href="#参数说明" title="永久链接至标题"></a></h3>
<p>使用编译好的Benchmark工具进行模型的基准测试时，其命令格式如下所示。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>./benchmark [--modelFile=&lt;MODELFILE&gt;] [--accuracyThreshold=&lt;ACCURACYTHRESHOLD&gt;]
   [--cosineDistanceThreshold=&lt;COSINEDISTANCETHRESHOLD&gt;]
   [--benchmarkDataFile=&lt;BENCHMARKDATAFILE&gt;] [--benchmarkDataType=&lt;BENCHMARKDATATYPE&gt;]
   [--cpuBindMode=&lt;CPUBINDMODE&gt;] [--device=&lt;DEVICE&gt;] [--help]
   [--inDataFile=&lt;INDATAFILE&gt;] [--loopCount=&lt;LOOPCOUNT&gt;]
   [--numThreads=&lt;NUMTHREADS&gt;] [--warmUpLoopCount=&lt;WARMUPLOOPCOUNT&gt;]
   [--enableFp16=&lt;ENABLEFP16&gt;] [--timeProfiling=&lt;TIMEPROFILING&gt;]
   [--inputShapes=&lt;INPUTSHAPES&gt;] [--perfProfiling=&lt;PERFPROFILING&gt;]
   [--perfEvent=&lt;PERFEVENT&gt;]
</pre></div>
</div>
<p>下面提供详细的参数说明。</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>参数名</p></th>
<th class="head"><p>属性</p></th>
<th class="head"><p>功能描述</p></th>
<th class="head"><p>参数类型</p></th>
<th class="head"><p>默认值</p></th>
<th class="head"><p>取值范围</p></th>
<th class="head"><p>备注</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--modelFile=&lt;MODELPATH&gt;</span></code></p></td>
<td><p>必选</p></td>
<td><p>指定需要进行基准测试的MindSpore Lite模型文件路径。</p></td>
<td><p>String</p></td>
<td><p>null</p></td>
<td><p>-</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--accuracyThreshold=&lt;ACCURACYTHRESHOLD&gt;</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定准确度阈值。</p></td>
<td><p>Float</p></td>
<td><p>0.5</p></td>
<td><p>-</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--benchmarkDataFile=&lt;CALIBDATAPATH&gt;</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定标杆数据的文件路径。标杆数据作为该测试模型的对比输出，是该测试模型使用相同输入并由其它深度学习框架前向推理而来。</p></td>
<td><p>String</p></td>
<td><p>null</p></td>
<td><p>-</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--benchmarkDataType=&lt;CALIBDATATYPE&gt;</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定标杆数据类型。</p></td>
<td><p>String</p></td>
<td><p>FLOAT</p></td>
<td><p>FLOAT、INT32、INT8、UINT8</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--device=&lt;DEVICE&gt;</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定模型推理程序运行的设备类型。</p></td>
<td><p>String</p></td>
<td><p>CPU</p></td>
<td><p>CPU、GPU、NPU、Ascend310、Ascend310P</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--help</span></code></p></td>
<td><p>可选</p></td>
<td><p>显示<code class="docutils literal notranslate"><span class="pre">benchmark</span></code>命令的帮助信息。</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--inDataFile=&lt;INDATAPATH&gt;</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定测试模型输入数据的文件路径。如果未设置，则使用随机输入。</p></td>
<td><p>String</p></td>
<td><p>null</p></td>
<td><p>-</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--loopCount=&lt;LOOPCOUNT&gt;</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定Benchmark工具进行基准测试时，测试模型的前向推理运行次数，其值为正整数。</p></td>
<td><p>Integer</p></td>
<td><p>10</p></td>
<td><p>-</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--numThreads=&lt;NUMTHREADS&gt;</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定模型推理程序运行的线程数。</p></td>
<td><p>Integer</p></td>
<td><p>2</p></td>
<td><p>-</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--warmUpLoopCount=&lt;WARMUPLOOPCOUNT&gt;</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定测试模型在执行基准测试运行轮数前进行的模型预热推理次数。</p></td>
<td><p>Integer</p></td>
<td><p>3</p></td>
<td><p>-</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--inputShapes=&lt;INPUTSHAPES&gt;</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定输入维度，维度应该按照原始模型格式. 维度值之间用‘,’隔开，多个输入的维度之间用‘:’隔开</p></td>
<td><p>String</p></td>
<td><p>Null</p></td>
<td><p>-</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--cosineDistanceThreshold=&lt;COSINEDISTANCETHRESHOLD&gt;</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定余弦距离阈值，只有指定该参数并且其值大于-1时，才会计算余弦距离。</p></td>
<td><p>Float</p></td>
<td><p>-1.1</p></td>
<td><p>-</p></td>
<td><p>暂不支持</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--cpuBindMode=&lt;CPUBINDMODE&gt;</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定模型推理程序运行时绑定的CPU核类型。</p></td>
<td><p>Integer</p></td>
<td><p>1</p></td>
<td><p>2：表示中核<br/>1：表示大核<br/>0：表示不绑定</p></td>
<td><p>暂不支持</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--enableFp16=&lt;FP16PIORITY&gt;</span></code></p></td>
<td><p>可选</p></td>
<td><p>指定是否优先使用float16算子。</p></td>
<td><p>Boolean</p></td>
<td><p>false</p></td>
<td><p>true, false</p></td>
<td><p>暂不支持</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--timeProfiling=&lt;TIMEPROFILING&gt;</span></code></p></td>
<td><p>可选</p></td>
<td><p>性能验证时生效，指定是否使用TimeProfiler打印每个算子的耗时。</p></td>
<td><p>Boolean</p></td>
<td><p>false</p></td>
<td><p>true, false</p></td>
<td><p>暂不支持</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--perfEvent=&lt;PERFEVENT&gt;</span></code></p></td>
<td><p>可选</p></td>
<td><p>CPU性能验证时生效，指定PerfProfiler打印的CPU性能参数的具体内容，指定为CYCLE时，会打印算子的CPU周期数和指令条数；指定为CACHE时，会打印算子的缓存读取次数和缓存未命中次数；指定为STALL时，会打印CPU前端等待周期数和后端等待周期数。</p></td>
<td><p>String</p></td>
<td><p>CYCLE</p></td>
<td><p>CYCLE/CACHE/STALL</p></td>
<td><p>暂不支持</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--decryptKey=&lt;DECRYPTKEY&gt;</span></code></p></td>
<td><p>可选</p></td>
<td><p>用于解密文件的密钥，以十六进制字符表示。仅支持 AES-GCM，密钥长度仅支持16Byte。</p></td>
<td><p>String</p></td>
<td><p>null</p></td>
<td><p>注意密钥为十六进制表示的字符串，如密钥定义为<code class="docutils literal notranslate"><span class="pre">b'0123456789ABCDEF'</span></code>对应的十六进制表示为<code class="docutils literal notranslate"><span class="pre">30313233343536373839414243444546</span></code>，Linux平台用户可以使用<code class="docutils literal notranslate"><span class="pre">xxd</span></code>工具对字节表示的密钥进行十六进制表达转换。</p></td>
<td><p>暂不支持</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--cryptoLibPath=&lt;CRYPTOLIBPATH&gt;</span></code></p></td>
<td><p>可选</p></td>
<td><p>OpenSSL加密库crypto的路径</p></td>
<td><p>String</p></td>
<td><p>null</p></td>
<td><p>-</p></td>
<td><p>暂不支持</p></td>
</tr>
</tbody>
</table>
</section>
<section id="使用示例">
<h3>使用示例<a class="headerlink" href="#使用示例" title="永久链接至标题"></a></h3>
<p>对于不同的MindSpore Lite云侧推理模型，在使用Benchmark工具对其进行基准测试时，可通过设置不同的参数，实现对其不同的测试功能。主要分为性能测试和精度测试。</p>
<section id="性能测试">
<h4>性能测试<a class="headerlink" href="#性能测试" title="永久链接至标题"></a></h4>
<p>Benchmark工具进行的性能测试主要的测试指标为模型单次前向推理的耗时。在性能测试任务中，不需要设置<code class="docutils literal notranslate"><span class="pre">benchmarkDataFile</span></code>等标杆数据参数。例如：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./benchmark<span class="w"> </span>--modelFile<span class="o">=</span>/path/to/model.mindir
</pre></div>
</div>
<p>这条命令使用随机输入，其他参数使用默认值。该命令执行后会输出如下统计信息，该信息显示了测试模型在运行指定推理轮数后所统计出的单次推理最短耗时、单次推理最长耗时和平均推理耗时。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Model = model.mindir, numThreads = 2, MinRunTime = 72.228996 ms, MaxRuntime = 73.094002 ms, AvgRunTime = 72.556000 ms
</pre></div>
</div>
</section>
<section id="精度测试">
<h4>精度测试<a class="headerlink" href="#精度测试" title="永久链接至标题"></a></h4>
<p>Benchmark工具进行的精度测试主要是通过设置标杆数据来对比验证MindSpore Lite云侧推理模型输出的精确性。在精确度测试任务中，除了需要设置<code class="docutils literal notranslate"><span class="pre">modelFile</span></code>参数以外，还必须设置<code class="docutils literal notranslate"><span class="pre">benchmarkDataFile</span></code>参数。例如：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./benchmark<span class="w"> </span>--modelFile<span class="o">=</span>/path/to/model.mindir<span class="w"> </span>--inDataFile<span class="o">=</span>/path/to/input.bin<span class="w"> </span>--device<span class="o">=</span>CPU<span class="w"> </span>--accuracyThreshold<span class="o">=</span><span class="m">3</span><span class="w"> </span>--benchmarkDataFile<span class="o">=</span>/path/to/output.out
</pre></div>
</div>
<p>这条命令指定了测试模型的输入数据、标杆数据（默认的输入及标杆数据类型均为float32），同时指定了模型推理程序在CPU上运行，并指定了准确度阈值为3%。该命令执行后会输出如下统计信息，该信息显示了测试模型的单条输入数据、输出节点的输出结果和平均偏差率以及所有节点的平均偏差率。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>InData0: 139.947 182.373 153.705 138.945 108.032 164.703 111.585 227.402 245.734 97.7776 201.89 134.868 144.851 236.027 18.1142 22.218 5.15569 212.318 198.43 221.853
================ Comparing Output data ================
Data of node age_out : 5.94584e-08 6.3317e-08 1.94726e-07 1.91809e-07 8.39805e-08 7.66035e-08 1.69285e-07 1.46246e-07 6.03796e-07 1.77631e-07 1.54343e-07 2.04623e-07 8.89609e-07 3.63487e-06 4.86876e-06 1.23939e-05 3.09981e-05 3.37098e-05 0.000107102 0.000213932 0.000533579 0.00062465 0.00296401 0.00993984 0.038227 0.0695085 0.162854 0.123199 0.24272 0.135048 0.169159 0.0221256 0.013892 0.00502971 0.00134921 0.00135701 0.000383242 0.000163475 0.000136294 9.77864e-05 8.00793e-05 5.73874e-05 3.53858e-05 2.18535e-05 2.04467e-05 1.85286e-05 1.05075e-05 9.34751e-06 6.12732e-06 4.55476e-06
Mean bias of node age_out : 0%
Mean bias of all nodes: 0%
=======================================================
</pre></div>
</div>
<p>如果需要指定输入数据的维度（例如输入维度为1，32，32，1），使用如下命令：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./benchmark<span class="w"> </span>--modelFile<span class="o">=</span>/path/to/model.mindir<span class="w"> </span>--inDataFile<span class="o">=</span>/path/to/input.bin<span class="w"> </span>--inputShapes<span class="o">=</span><span class="m">1</span>,32,32,1<span class="w"> </span>--device<span class="o">=</span>CPU<span class="w"> </span>--accuracyThreshold<span class="o">=</span><span class="m">3</span><span class="w"> </span>--benchmarkDataFile<span class="o">=</span>/path/to/output.out
</pre></div>
</div>
<p>如果输入的模型是加密模型，需要同时配置<code class="docutils literal notranslate"><span class="pre">decryptKey</span></code>和<code class="docutils literal notranslate"><span class="pre">cryptoLibPath</span></code>对模型解密后进行推理，使用如下命令：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./benchmark<span class="w"> </span>--modelFile<span class="o">=</span>/path/to/encry_model.mindir<span class="w"> </span>--decryptKey<span class="o">=</span><span class="m">30313233343536373839414243444546</span><span class="w"> </span>--cryptoLibPath<span class="o">=</span>/root/anaconda3/bin/openssl
</pre></div>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="benchmark.html" class="btn btn-neutral float-left" title="基准测试工具" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="../../architecture_lite.html" class="btn btn-neutral float-right" title="总体架构" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2021, MindSpore Lite.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>