

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mindarmour.fuzz_testing &mdash; MindSpore master documentation</title>
  

  
   
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  
  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="mindarmour.privacy.diff_privacy" href="mindarmour.privacy.diff_privacy.html" />
    <link rel="prev" title="mindarmour.adv_robustness.evaluations" href="mindarmour.adv_robustness.evaluations.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> MindSpore
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="mindarmour.html">mindarmour</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.adv_robustness.attacks.html">mindarmour.adv_robustness.attacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.adv_robustness.defenses.html">mindarmour.adv_robustness.defenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.adv_robustness.detectors.html">mindarmour.adv_robustness.detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.adv_robustness.evaluations.html">mindarmour.adv_robustness.evaluations</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">mindarmour.fuzz_testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.privacy.diff_privacy.html">mindarmour.privacy.diff_privacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.privacy.evaluation.html">mindarmour.privacy.evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.privacy.sup_privacy.html">mindarmour.privacy.sup_privacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.utils.html">mindarmour.utils</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MindSpore</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>mindarmour.fuzz_testing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/mindarmour.fuzz_testing.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-mindarmour.fuzz_testing">
<span id="mindarmour-fuzz-testing"></span><h1>mindarmour.fuzz_testing<a class="headerlink" href="#module-mindarmour.fuzz_testing" title="Permalink to this headline">¶</a></h1>
<p>This module provides a neuron coverage-gain based fuzz method to evaluate the
robustness of given model.</p>
<dl class="class">
<dt id="mindarmour.fuzz_testing.Fuzzer">
<em class="property">class </em><code class="sig-prename descclassname">mindarmour.fuzz_testing.</code><code class="sig-name descname">Fuzzer</code><span class="sig-paren">(</span><em class="sig-param">target_model</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/fuzz_testing/fuzzing.html#Fuzzer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.fuzz_testing.Fuzzer" title="Permalink to this definition">¶</a></dt>
<dd><p>Fuzzing test framework for deep neural networks.</p>
<p>Reference: <a class="reference external" href="https://dl.acm.org/doi/10.1145/3293882.3330579">DeepHunter: A Coverage-Guided Fuzz Testing Framework for Deep
Neural Networks</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>target_model</strong> (<em>Model</em>) – Target fuzz model.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mutate_config</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;Blur&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="s1">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;auto_param&#39;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">]}},</span>
<span class="gp">&gt;&gt;&gt; </span>                 <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;Contrast&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="s1">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;factor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">]}},</span>
<span class="gp">&gt;&gt;&gt; </span>                 <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;Translate&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="s1">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;x_bias&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="s1">&#39;y_bias&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">]}},</span>
<span class="gp">&gt;&gt;&gt; </span>                 <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;FGSM&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="s1">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;eps&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">],</span> <span class="s1">&#39;alpha&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">]}}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nc</span> <span class="o">=</span> <span class="n">KMultisectionNeuronCoverage</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">train_images</span><span class="p">,</span> <span class="n">segmented_num</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_fuzz_test</span> <span class="o">=</span> <span class="n">Fuzzer</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">samples</span><span class="p">,</span> <span class="n">gt_labels</span><span class="p">,</span> <span class="n">preds</span><span class="p">,</span> <span class="n">strategies</span><span class="p">,</span> <span class="n">metrics</span> <span class="o">=</span> <span class="n">model_fuzz_test</span><span class="o">.</span><span class="n">fuzzing</span><span class="p">(</span><span class="n">mutate_config</span><span class="p">,</span> <span class="n">initial_seeds</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                                                         <span class="n">nc</span><span class="p">,</span> <span class="n">max_iters</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="mindarmour.fuzz_testing.Fuzzer.fuzzing">
<code class="sig-name descname">fuzzing</code><span class="sig-paren">(</span><em class="sig-param">mutate_config</em>, <em class="sig-param">initial_seeds</em>, <em class="sig-param">coverage</em>, <em class="sig-param">evaluate=True</em>, <em class="sig-param">max_iters=10000</em>, <em class="sig-param">mutate_num_per_seed=20</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/fuzz_testing/fuzzing.html#Fuzzer.fuzzing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.fuzz_testing.Fuzzer.fuzzing" title="Permalink to this definition">¶</a></dt>
<dd><p>Fuzzing tests for deep neural networks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mutate_config</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a>) – Mutate configs. The format is
[{‘method’: ‘Blur’,
‘params’: {‘radius’: [0.1, 0.2], ‘auto_param’: [True, False]}},
{‘method’: ‘Contrast’,
‘params’: {‘factor’: [1, 1.5, 2]}},
{‘method’: ‘FGSM’,
‘params’: {‘eps’: [0.3, 0.2, 0.4], ‘alpha’: [0.1]}},
…].
The supported methods list is in <cite>self._strategies</cite>, and the params of each method must within the
range of optional parameters. Supported methods are grouped in three types: Firstly, pixel value based
transform methods include: ‘Contrast’, ‘Brightness’, ‘Blur’ and ‘Noise’. Secondly, affine transform
methods include: ‘Translate’, ‘Scale’, ‘Shear’ and ‘Rotate’. Thirdly, attack methods include: ‘FGSM’,
‘PGD’ and ‘MDIIM’. <cite>mutate_config</cite> must have method in the type of pixel value based transform methods.
The way of setting parameters for first and second type methods can be seen in
‘mindarmour/fuzz_testing/image_transform.py’. For third type methods, the optional parameters refer to
<cite>self._attack_param_checklists</cite>.</p></li>
<li><p><strong>initial_seeds</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>]</em>) – Initial seeds used to generate mutated samples. The format of initial seeds is
[[image_data, label], […], …] and the label must be one-hot.</p></li>
<li><p><strong>coverage</strong> (<a class="reference internal" href="#mindarmour.fuzz_testing.CoverageMetrics" title="mindarmour.fuzz_testing.CoverageMetrics"><em>CoverageMetrics</em></a>) – Class of neuron coverage metrics.</p></li>
<li><p><strong>evaluate</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – return evaluate report or not. Default: True.</p></li>
<li><p><strong>max_iters</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Max number of select a seed to mutate. Default: 10000.</p></li>
<li><p><strong>mutate_num_per_seed</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of mutate times for a seed. Default: 20.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>list, mutated samples in fuzz_testing.</p></li>
<li><p>list, ground truth labels of mutated samples.</p></li>
<li><p>list, preds of mutated samples.</p></li>
<li><p>list, strategies of mutated samples.</p></li>
<li><p>dict, metrics report of fuzzer.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – Coverage must be subclass of CoverageMetrics.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If initial seeds is empty.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If element of seed is not two in initial seeds.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mindarmour.fuzz_testing.CoverageMetrics">
<em class="property">class </em><code class="sig-prename descclassname">mindarmour.fuzz_testing.</code><code class="sig-name descname">CoverageMetrics</code><span class="sig-paren">(</span><em class="sig-param">model</em>, <em class="sig-param">incremental=False</em>, <em class="sig-param">batch_size=32</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#CoverageMetrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.fuzz_testing.CoverageMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>The abstract base class for Neuron coverage classes calculating coverage metrics.</p>
<p>As we all known, each neuron output of a network will have a output range after training (we call it original
range), and test dataset is used to estimate the accuracy of the trained network. However, neurons’ output
distribution would be different with different test datasets. Therefore, similar to function fuzz, model fuzz means
testing those neurons’ outputs and estimating the proportion of original range that has emerged with test
datasets.</p>
<p>Reference: <a class="reference external" href="https://arxiv.org/abs/1803.07519">DeepGauge: Multi-Granularity Testing Criteria for Deep Learning Systems</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>Model</em>) – The pre-trained model which waiting for testing.</p></li>
<li><p><strong>incremental</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Metrics will be calculate in incremental way or not. Default: False.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of samples in a fuzz test batch. Default: 32.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="mindarmour.fuzz_testing.CoverageMetrics.get_metrics">
<em class="property">abstract </em><code class="sig-name descname">get_metrics</code><span class="sig-paren">(</span><em class="sig-param">dataset</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#CoverageMetrics.get_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.fuzz_testing.CoverageMetrics.get_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate coverage metrics of given dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Dataset used to calculate coverage metrics.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#NotImplementedError" title="(in Python v3.8)"><strong>NotImplementedError</strong></a> – It is an abstract method.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mindarmour.fuzz_testing.NeuronCoverage">
<em class="property">class </em><code class="sig-prename descclassname">mindarmour.fuzz_testing.</code><code class="sig-name descname">NeuronCoverage</code><span class="sig-paren">(</span><em class="sig-param">model</em>, <em class="sig-param">threshold=0.1</em>, <em class="sig-param">incremental=False</em>, <em class="sig-param">batch_size=32</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#NeuronCoverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.fuzz_testing.NeuronCoverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the neurons activated coverage. Neuron is activated when its output is greater than the threshold.
Neuron coverage equals the proportion of activated neurons to total neurons in the network.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>Model</em>) – The pre-trained model which waiting for testing.</p></li>
<li><p><strong>threshold</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Threshold used to determined neurons is activated or not. Default: 0.1.</p></li>
<li><p><strong>incremental</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Metrics will be calculate in incremental way or not. Default: False.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of samples in a fuzz test batch. Default: 32.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="mindarmour.fuzz_testing.NeuronCoverage.get_metrics">
<code class="sig-name descname">get_metrics</code><span class="sig-paren">(</span><em class="sig-param">dataset</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#NeuronCoverage.get_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.fuzz_testing.NeuronCoverage.get_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the metric of neuron coverage: the proportion of activated neurons to total neurons in the network.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Dataset used to calculate coverage metrics.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>float, the metric of ‘neuron coverage’.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nc</span> <span class="o">=</span> <span class="n">NeuronCoverage</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nc_metrics</span> <span class="o">=</span> <span class="n">nc</span><span class="o">.</span><span class="n">get_metrics</span><span class="p">(</span><span class="n">test_data</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mindarmour.fuzz_testing.TopKNeuronCoverage">
<em class="property">class </em><code class="sig-prename descclassname">mindarmour.fuzz_testing.</code><code class="sig-name descname">TopKNeuronCoverage</code><span class="sig-paren">(</span><em class="sig-param">model</em>, <em class="sig-param">top_k=3</em>, <em class="sig-param">incremental=False</em>, <em class="sig-param">batch_size=32</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#TopKNeuronCoverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.fuzz_testing.TopKNeuronCoverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the top k activated neurons coverage. Neuron is activated when its output has the top k largest value in
that hidden layers. Top k neurons coverage equals the proportion of activated neurons to total neurons in the
network.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>Model</em>) – The pre-trained model which waiting for testing.</p></li>
<li><p><strong>top_k</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Neuron is activated when its output has the top k largest value in that hidden layers. Default: 3.</p></li>
<li><p><strong>incremental</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Metrics will be calculate in incremental way or not. Default: False.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of samples in a fuzz test batch. Default: 32.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="mindarmour.fuzz_testing.TopKNeuronCoverage.get_metrics">
<code class="sig-name descname">get_metrics</code><span class="sig-paren">(</span><em class="sig-param">dataset</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#TopKNeuronCoverage.get_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.fuzz_testing.TopKNeuronCoverage.get_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the metric of Top K activated neuron coverage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Dataset used to calculate coverage metrics.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>float, the metrics of ‘top k neuron coverage’.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tknc</span> <span class="o">=</span> <span class="n">TopKNeuronCoverage</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">top_k</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">metrics</span> <span class="o">=</span> <span class="n">tknc</span><span class="o">.</span><span class="n">get_metrics</span><span class="p">(</span><span class="n">test_data</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mindarmour.fuzz_testing.NeuronBoundsCoverage">
<em class="property">class </em><code class="sig-prename descclassname">mindarmour.fuzz_testing.</code><code class="sig-name descname">NeuronBoundsCoverage</code><span class="sig-paren">(</span><em class="sig-param">model</em>, <em class="sig-param">train_dataset</em>, <em class="sig-param">incremental=False</em>, <em class="sig-param">batch_size=32</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#NeuronBoundsCoverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.fuzz_testing.NeuronBoundsCoverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the metric of ‘neuron boundary coverage’ <span class="math notranslate nohighlight">\(NBC = (|UpperCornerNeuron| + |LowerCornerNeuron|)/(2*|N|)\)</span>,
where :math`|N|` is the number of neurons, NBC refers to the proportion of neurons whose neurons output value in
the test dataset exceeds the upper and lower bounds of the corresponding neurons output value in the training
dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>Model</em>) – The pre-trained model which waiting for testing.</p></li>
<li><p><strong>train_dataset</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Training dataset used for determine the neurons’ output boundaries.</p></li>
<li><p><strong>incremental</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Metrics will be calculate in incremental way or not. Default: False.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of samples in a fuzz test batch. Default: 32.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="mindarmour.fuzz_testing.NeuronBoundsCoverage.get_metrics">
<code class="sig-name descname">get_metrics</code><span class="sig-paren">(</span><em class="sig-param">dataset</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#NeuronBoundsCoverage.get_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.fuzz_testing.NeuronBoundsCoverage.get_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the metric of ‘neuron boundary coverage’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Dataset used to calculate coverage metrics.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>float, the metric of ‘neuron boundary coverage’.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nbc</span> <span class="o">=</span> <span class="n">NeuronBoundsCoverage</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">train_dataset</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">metrics</span> <span class="o">=</span> <span class="n">nbc</span><span class="o">.</span><span class="n">get_metrics</span><span class="p">(</span><span class="n">test_data</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mindarmour.fuzz_testing.SuperNeuronActivateCoverage">
<em class="property">class </em><code class="sig-prename descclassname">mindarmour.fuzz_testing.</code><code class="sig-name descname">SuperNeuronActivateCoverage</code><span class="sig-paren">(</span><em class="sig-param">model</em>, <em class="sig-param">train_dataset</em>, <em class="sig-param">incremental=False</em>, <em class="sig-param">batch_size=32</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#SuperNeuronActivateCoverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.fuzz_testing.SuperNeuronActivateCoverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the metric of ‘super neuron activation coverage’. <span class="math notranslate nohighlight">\(SNAC = |UpperCornerNeuron|/|N|\)</span>. SNAC refers to the
proportion of neurons whose neurons output value in the test set exceeds the upper bounds of the corresponding
neurons output value in the training set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>Model</em>) – The pre-trained model which waiting for testing.</p></li>
<li><p><strong>train_dataset</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Training dataset used for determine the neurons’ output boundaries.</p></li>
<li><p><strong>incremental</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Metrics will be calculate in incremental way or not. Default: False.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of samples in a fuzz test batch. Default: 32.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="mindarmour.fuzz_testing.SuperNeuronActivateCoverage.get_metrics">
<code class="sig-name descname">get_metrics</code><span class="sig-paren">(</span><em class="sig-param">dataset</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#SuperNeuronActivateCoverage.get_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.fuzz_testing.SuperNeuronActivateCoverage.get_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the metric of ‘strong neuron activation coverage’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Dataset used to calculate coverage metrics.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>float, the metric of ‘strong neuron activation coverage’.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">snac</span> <span class="o">=</span> <span class="n">SuperNeuronActivateCoverage</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">train_dataset</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">metrics</span> <span class="o">=</span> <span class="n">snac</span><span class="o">.</span><span class="n">get_metrics</span><span class="p">(</span><span class="n">test_data</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mindarmour.fuzz_testing.KMultisectionNeuronCoverage">
<em class="property">class </em><code class="sig-prename descclassname">mindarmour.fuzz_testing.</code><code class="sig-name descname">KMultisectionNeuronCoverage</code><span class="sig-paren">(</span><em class="sig-param">model</em>, <em class="sig-param">train_dataset</em>, <em class="sig-param">segmented_num=100</em>, <em class="sig-param">incremental=False</em>, <em class="sig-param">batch_size=32</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#KMultisectionNeuronCoverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.fuzz_testing.KMultisectionNeuronCoverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the metric of ‘k-multisection neuron coverage’. KMNC measures how thoroughly the given set of test inputs
covers the range of neurons output values derived from training dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>Model</em>) – The pre-trained model which waiting for testing.</p></li>
<li><p><strong>train_dataset</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Training dataset used for determine the neurons’ output boundaries.</p></li>
<li><p><strong>segmented_num</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of segmented sections of neurons’ output intervals. Default: 100.</p></li>
<li><p><strong>incremental</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Metrics will be calculate in incremental way or not. Default: False.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of samples in a fuzz test batch. Default: 32.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="mindarmour.fuzz_testing.KMultisectionNeuronCoverage.get_metrics">
<code class="sig-name descname">get_metrics</code><span class="sig-paren">(</span><em class="sig-param">dataset</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/fuzz_testing/model_coverage_metrics.html#KMultisectionNeuronCoverage.get_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.fuzz_testing.KMultisectionNeuronCoverage.get_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the metric of ‘k-multisection neuron coverage’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Dataset used to calculate coverage metrics.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>float, the metric of ‘k-multisection neuron coverage’.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kmnc</span> <span class="o">=</span> <span class="n">KMultisectionNeuronCoverage</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">train_dataset</span><span class="p">,</span> <span class="n">segmented_num</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">metrics</span> <span class="o">=</span> <span class="n">kmnc</span><span class="o">.</span><span class="n">get_metrics</span><span class="p">(</span><span class="n">test_data</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="mindarmour.privacy.diff_privacy.html" class="btn btn-neutral float-right" title="mindarmour.privacy.diff_privacy" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="mindarmour.adv_robustness.evaluations.html" class="btn btn-neutral float-left" title="mindarmour.adv_robustness.evaluations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, MindSpore.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   
	<script async="async" src="https://cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>