

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mindarmour.adv_robustness.detectors &mdash; MindSpore master documentation</title>
  

  
   
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  
  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        
        
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="mindarmour.adv_robustness.evaluations" href="mindarmour.adv_robustness.evaluations.html" />
    <link rel="prev" title="mindarmour.adv_robustness.defenses" href="mindarmour.adv_robustness.defenses.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> MindSpore
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mindarmour_install.html">MindSpore Armour Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">AI Security</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="improve_model_security_nad.html">Improving Model Security with NAD Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="test_model_security_fuzzing.html">Testing Model Security Using Fuzz Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluation_of_CNNCTC.html">Evaluating the Robustness of the OCR Model CNN-CTC</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamic_obfuscation_protection.html">Dynamic Model Obfuscation</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_encrypt_protection.html">Model Encryption Protection</a></li>
</ul>
<p class="caption"><span class="caption-text">AI Privacy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="protect_user_privacy_with_differential_privacy.html">Protecting User Privacy with Differential Privacy Mechanism</a></li>
<li class="toctree-l1"><a class="reference internal" href="protect_user_privacy_with_suppress_privacy.html">Protecting User Privacy with Suppress Privacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="test_model_security_membership_inference.html">Using Membership Inference to Test Model Security</a></li>
</ul>
<p class="caption"><span class="caption-text">AI Reliability</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="concept_drift_time_series.html">Implementing the Concept Drift Detection Application of Time Series Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="concept_drift_images.html">Implementing the Concept Drift Detection Application of Image Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="fault_injection.html">Implementing the Model Fault Injection and Evaluation</a></li>
</ul>
<p class="caption"><span class="caption-text">API References</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="mindarmour.html">mindarmour</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.adv_robustness.attacks.html">mindarmour.adv_robustness.attacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.adv_robustness.defenses.html">mindarmour.adv_robustness.defenses</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">mindarmour.adv_robustness.detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.adv_robustness.evaluations.html">mindarmour.adv_robustness.evaluations</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.fuzz_testing.html">mindarmour.fuzz_testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.natural_robustness.transform.image.html">mindarmour.natural_robustness.transform.image</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.privacy.diff_privacy.html">mindarmour.privacy.diff_privacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.privacy.evaluation.html">mindarmour.privacy.evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.privacy.sup_privacy.html">mindarmour.privacy.sup_privacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.reliability.html">mindarmour.reliability</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindarmour.utils.html">mindarmour.utils</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="design.html">Overall Security and Trustworthiness Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="differential_privacy_design.html">Differential Privacy Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="fuzzer_design.html">AI Model Security Testing Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="security_and_privacy.html">MindSpore Armour Module Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>
<p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="RELEASE.html">Release Notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MindSpore</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>mindarmour.adv_robustness.detectors</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/mindarmour.adv_robustness.detectors.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-mindarmour.adv_robustness.detectors">
<span id="module-mindarmour.adv_robustness.detectors"></span><span id="mindarmour-adv-robustness-detectors"></span><h1>mindarmour.adv_robustness.detectors<a class="headerlink" href="#module-mindarmour.adv_robustness.detectors" title="Permalink to this headline">¶</a></h1>
<p>This module includes detector methods on distinguishing adversarial examples
from benign examples.</p>
<dl class="class">
<dt id="mindarmour.adv_robustness.detectors.ErrorBasedDetector">
<em class="property">class </em><code class="sig-prename descclassname">mindarmour.adv_robustness.detectors.</code><code class="sig-name descname">ErrorBasedDetector</code><span class="sig-paren">(</span><em class="sig-param">auto_encoder</em>, <em class="sig-param">false_positive_rate=0.01</em>, <em class="sig-param">bounds=(0.0</em>, <em class="sig-param">1.0)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/mag_net.html#ErrorBasedDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.ErrorBasedDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>The detector reconstructs input samples, measures reconstruction errors and
rejects samples with large reconstruction errors.</p>
<p>Reference: <a class="reference external" href="https://arxiv.org/abs/1705.09064">MagNet: a Two-Pronged Defense against Adversarial Examples,
by Dongyu Meng and Hao Chen, at CCS 2017.</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>auto_encoder</strong> (<em>Model</em>) – An (trained) auto encoder which reconstructs the input image.</p></li>
<li><p><strong>false_positive_rate</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Detector’s false positive rate. Default: 0.01.</p></li>
<li><p><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#tuple" title="(in Python v3.8)"><em>tuple</em></a>) – (clip_min, clip_max). Default: (0.0, 1.0).</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.ops.operations</span> <span class="kn">import</span> <span class="n">Add</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">Model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindarmour.adv_robustness.detectors</span> <span class="kn">import</span> <span class="n">ErrorBasedDetector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">add</span> <span class="o">=</span> <span class="n">Add</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ori</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">Net</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detector</span> <span class="o">=</span> <span class="n">ErrorBasedDetector</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detector</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">ori</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adv_ids</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">detect</span><span class="p">(</span><span class="n">adv</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adv_trans</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">adv</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.ErrorBasedDetector.detect">
<code class="sig-name descname">detect</code><span class="sig-paren">(</span><em class="sig-param">inputs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/mag_net.html#ErrorBasedDetector.detect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.ErrorBasedDetector.detect" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect if input samples are adversarial or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Suspicious samples to be judged.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list[int], whether a sample is adversarial. if res[i]=1, then the
input sample with index i is adversarial.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.ErrorBasedDetector.detect_diff">
<code class="sig-name descname">detect_diff</code><span class="sig-paren">(</span><em class="sig-param">inputs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/mag_net.html#ErrorBasedDetector.detect_diff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.ErrorBasedDetector.detect_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect the distance between the original samples and reconstructed samples.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Input samples.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>float, the distance between reconstructed and original samples.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.ErrorBasedDetector.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param">inputs</em>, <em class="sig-param">labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/mag_net.html#ErrorBasedDetector.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.ErrorBasedDetector.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a threshold for a given dataset to distinguish adversarial examples.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Input samples.</p></li>
<li><p><strong>labels</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Labels of input samples. Default: None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>float, threshold to distinguish adversarial samples from benign ones.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.ErrorBasedDetector.set_threshold">
<code class="sig-name descname">set_threshold</code><span class="sig-paren">(</span><em class="sig-param">threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/mag_net.html#ErrorBasedDetector.set_threshold"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.ErrorBasedDetector.set_threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the parameters threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>threshold</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Detection threshold.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.ErrorBasedDetector.transform">
<code class="sig-name descname">transform</code><span class="sig-paren">(</span><em class="sig-param">inputs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/mag_net.html#ErrorBasedDetector.transform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.ErrorBasedDetector.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconstruct input samples.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Input samples.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy.ndarray, reconstructed images.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mindarmour.adv_robustness.detectors.DivergenceBasedDetector">
<em class="property">class </em><code class="sig-prename descclassname">mindarmour.adv_robustness.detectors.</code><code class="sig-name descname">DivergenceBasedDetector</code><span class="sig-paren">(</span><em class="sig-param">auto_encoder</em>, <em class="sig-param">model</em>, <em class="sig-param">option=&quot;jsd&quot;</em>, <em class="sig-param">t=1</em>, <em class="sig-param">bounds=(0.0</em>, <em class="sig-param">1.0)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/mag_net.html#DivergenceBasedDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.DivergenceBasedDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>The divergence-based detector learns to distinguish normal and adversarial
examples by their js-divergence.</p>
<p>Reference: <a class="reference external" href="https://arxiv.org/abs/1705.09064">MagNet: a Two-Pronged Defense against Adversarial Examples,
by Dongyu Meng and Hao Chen, at CCS 2017.</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>auto_encoder</strong> (<em>Model</em>) – Encoder model.</p></li>
<li><p><strong>model</strong> (<em>Model</em>) – Targeted model.</p></li>
<li><p><strong>option</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Method used to calculate Divergence. Default: “jsd”.</p></li>
<li><p><strong>t</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Temperature used to overcome numerical problem. Default: 1.</p></li>
<li><p><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#tuple" title="(in Python v3.8)"><em>tuple</em></a>) – Upper and lower bounds of data.
In form of (clip_min, clip_max). Default: (0.0, 1.0).</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mindspore.ops.operations</span> <span class="k">as</span> <span class="nn">P</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.nn</span> <span class="kn">import</span> <span class="n">Cell</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">Model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindarmour.adv_robustness.detectors</span> <span class="kn">import</span> <span class="n">DivergenceBasedDetector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">PredNet</span><span class="p">(</span><span class="n">Cell</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">super</span><span class="p">(</span><span class="n">PredNet</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">Shape</span><span class="p">()</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">reshape</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">Reshape</span><span class="p">()</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_softmax</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">Softmax</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">inputs</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_softmax</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">Cell</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">add</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">Add</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ori</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encoder</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">Net</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">PredNet</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detector</span> <span class="o">=</span> <span class="n">DivergenceBasedDetector</span><span class="p">(</span><span class="n">encoder</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">threshold</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">ori</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detector</span><span class="o">.</span><span class="n">set_threshold</span><span class="p">(</span><span class="n">threshold</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adv_ids</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">detect</span><span class="p">(</span><span class="n">adv</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adv_trans</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">adv</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.DivergenceBasedDetector.detect_diff">
<code class="sig-name descname">detect_diff</code><span class="sig-paren">(</span><em class="sig-param">inputs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/mag_net.html#DivergenceBasedDetector.detect_diff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.DivergenceBasedDetector.detect_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect the distance between original samples and reconstructed samples.</p>
<p>The distance is calculated by JSD.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Input samples.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>float, the distance.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#NotImplementedError" title="(in Python v3.8)"><strong>NotImplementedError</strong></a> – If the param <cite>option</cite> is not supported.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mindarmour.adv_robustness.detectors.RegionBasedDetector">
<em class="property">class </em><code class="sig-prename descclassname">mindarmour.adv_robustness.detectors.</code><code class="sig-name descname">RegionBasedDetector</code><span class="sig-paren">(</span><em class="sig-param">model</em>, <em class="sig-param">number_points=10</em>, <em class="sig-param">initial_radius=0.0</em>, <em class="sig-param">max_radius=1.0</em>, <em class="sig-param">search_step=0.01</em>, <em class="sig-param">degrade_limit=0.0</em>, <em class="sig-param">sparse=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/region_based_detector.html#RegionBasedDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.RegionBasedDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>The region-based detector uses the fact that adversarial examples are close
to the classification boundary, and ensembles information around the given example
to predict whether it is an adversarial example or not.</p>
<p>Reference: <a class="reference external" href="https://arxiv.org/abs/1709.05583">Mitigating evasion attacks to deep neural networks via
region-based classification</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>Model</em>) – Target model.</p></li>
<li><p><strong>number_points</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of samples generate from the
hyper cube of original sample. Default: 10.</p></li>
<li><p><strong>initial_radius</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Initial radius of hyper cube. Default: 0.0.</p></li>
<li><p><strong>max_radius</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Maximum radius of hyper cube. Default: 1.0.</p></li>
<li><p><strong>search_step</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Incremental during search of radius. Default: 0.01.</p></li>
<li><p><strong>degrade_limit</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Acceptable decrease of classification accuracy.
Default: 0.0.</p></li>
<li><p><strong>sparse</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – If True, input labels are sparse-encoded. If False,
input labels are one-hot-encoded. Default: False.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.ops.operations</span> <span class="kn">import</span> <span class="n">Add</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">Model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindarmour.adv_robustness.detectors</span> <span class="kn">import</span> <span class="n">RegionBasedDetector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">add</span> <span class="o">=</span> <span class="n">Add</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ori</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">Net</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detector</span> <span class="o">=</span> <span class="n">RegionBasedDetector</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">radius</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">ori</span><span class="p">,</span> <span class="n">labels</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detector</span><span class="o">.</span><span class="n">set_radius</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adv_ids</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">detect</span><span class="p">(</span><span class="n">adv</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.RegionBasedDetector.detect">
<code class="sig-name descname">detect</code><span class="sig-paren">(</span><em class="sig-param">inputs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/region_based_detector.html#RegionBasedDetector.detect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.RegionBasedDetector.detect" title="Permalink to this definition">¶</a></dt>
<dd><p>Tell whether input samples are adversarial or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Suspicious samples to be judged.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list[int], whether a sample is adversarial. if res[i]=1, then the
input sample with index i is adversarial.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.RegionBasedDetector.detect_diff">
<code class="sig-name descname">detect_diff</code><span class="sig-paren">(</span><em class="sig-param">inputs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/region_based_detector.html#RegionBasedDetector.detect_diff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.RegionBasedDetector.detect_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Return raw prediction results and region-based prediction results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Input samples.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy.ndarray, raw prediction results and region-based prediction results of input samples.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.RegionBasedDetector.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param">inputs</em>, <em class="sig-param">labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/region_based_detector.html#RegionBasedDetector.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.RegionBasedDetector.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Train detector to decide the best radius.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Benign samples.</p></li>
<li><p><strong>labels</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Ground truth labels of the input samples.
Default:None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>float, the best radius.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.RegionBasedDetector.set_radius">
<code class="sig-name descname">set_radius</code><span class="sig-paren">(</span><em class="sig-param">radius</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/region_based_detector.html#RegionBasedDetector.set_radius"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.RegionBasedDetector.set_radius" title="Permalink to this definition">¶</a></dt>
<dd><p>Set radius.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>radius</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Radius of region.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.RegionBasedDetector.transform">
<code class="sig-name descname">transform</code><span class="sig-paren">(</span><em class="sig-param">inputs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/region_based_detector.html#RegionBasedDetector.transform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.RegionBasedDetector.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate hyper cube for input samples.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Input samples.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy.ndarray, hyper cube corresponds to every sample.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mindarmour.adv_robustness.detectors.SpatialSmoothing">
<em class="property">class </em><code class="sig-prename descclassname">mindarmour.adv_robustness.detectors.</code><code class="sig-name descname">SpatialSmoothing</code><span class="sig-paren">(</span><em class="sig-param">model</em>, <em class="sig-param">ksize=3</em>, <em class="sig-param">is_local_smooth=True</em>, <em class="sig-param">metric=&quot;l1&quot;</em>, <em class="sig-param">false_positive_ratio=0.05</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/spatial_smoothing.html#SpatialSmoothing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.SpatialSmoothing" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect method based on spatial smoothing.
Using Gaussian filtering, median filtering, and mean filtering, to blur
the original image. When the model has a large threshold difference
between the predicted values before and after the sample is blurred,
it is judged as an adversarial example.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>Model</em>) – Target model.</p></li>
<li><p><strong>ksize</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Smooth window size. Default: 3.</p></li>
<li><p><strong>is_local_smooth</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – If True, trigger local smooth. If False, none
local smooth. Default: True.</p></li>
<li><p><strong>metric</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Distance method. Default: ‘l1’.</p></li>
<li><p><strong>false_positive_ratio</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – False positive rate over
benign samples. Default: 0.05.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mindspore.ops.operations</span> <span class="k">as</span> <span class="nn">P</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">Model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindarmour.adv_robustness.detectors</span> <span class="kn">import</span> <span class="n">SpatialSmoothing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_softmax</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">Softmax</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_softmax</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_np</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="o">*</span><span class="n">input_shape</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adv_np</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="o">*</span><span class="n">input_shape</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">Net</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detector</span> <span class="o">=</span> <span class="n">SpatialSmoothing</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">threshold</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">input_np</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detector</span><span class="o">.</span><span class="n">set_threshold</span><span class="p">(</span><span class="n">threshold</span><span class="o">.</span><span class="n">item</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detected_res</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">detector</span><span class="o">.</span><span class="n">detect</span><span class="p">(</span><span class="n">adv_np</span><span class="p">))</span>
</pre></div>
</div>
<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.SpatialSmoothing.detect">
<code class="sig-name descname">detect</code><span class="sig-paren">(</span><em class="sig-param">inputs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/spatial_smoothing.html#SpatialSmoothing.detect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.SpatialSmoothing.detect" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect if an input sample is an adversarial example.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Suspicious samples to be judged.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list[int], whether a sample is adversarial. if res[i]=1, then the
input sample with index i is adversarial.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.SpatialSmoothing.detect_diff">
<code class="sig-name descname">detect_diff</code><span class="sig-paren">(</span><em class="sig-param">inputs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/spatial_smoothing.html#SpatialSmoothing.detect_diff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.SpatialSmoothing.detect_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the raw distance value (before apply the threshold) between
the input sample and its smoothed counterpart.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Suspicious samples to be judged.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>float, distance.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.SpatialSmoothing.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param">inputs</em>, <em class="sig-param">labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/spatial_smoothing.html#SpatialSmoothing.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.SpatialSmoothing.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Train detector to decide the threshold. The proper threshold make
sure the actual false positive rate over benign sample is less than
the given value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Benign samples.</p></li>
<li><p><strong>labels</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Default None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>float, threshold, distance larger than which is reported
as positive, i.e. adversarial.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.SpatialSmoothing.set_threshold">
<code class="sig-name descname">set_threshold</code><span class="sig-paren">(</span><em class="sig-param">threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/spatial_smoothing.html#SpatialSmoothing.set_threshold"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.SpatialSmoothing.set_threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the parameters threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>threshold</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Detection threshold.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mindarmour.adv_robustness.detectors.EnsembleDetector">
<em class="property">class </em><code class="sig-prename descclassname">mindarmour.adv_robustness.detectors.</code><code class="sig-name descname">EnsembleDetector</code><span class="sig-paren">(</span><em class="sig-param">detectors</em>, <em class="sig-param">policy=&quot;vote&quot;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/ensemble_detector.html#EnsembleDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.EnsembleDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>The ensemble detector uses a list of detectors to detect the adversarial
examples from the input samples.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>detectors</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#tuple" title="(in Python v3.8)"><em>tuple</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>]</em>) – List of detector methods.</p></li>
<li><p><strong>policy</strong> (<a class="reference external" href="https://docs.python.org/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Decision policy, could be ‘vote’, ‘all’ or ‘any’.
Default: ‘vote’</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.ops.operations</span> <span class="kn">import</span> <span class="n">Add</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">Model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindarmour.adv_robustness.detectors</span> <span class="kn">import</span> <span class="n">ErrorBasedDetector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindarmour.adv_robustness.detectors</span> <span class="kn">import</span> <span class="n">RegionBasedDetector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindarmour.adv_robustness.detectors</span> <span class="kn">import</span> <span class="n">EnsembleDetector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Net</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Cell</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">super</span><span class="p">(</span><span class="n">Net</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">add</span> <span class="o">=</span> <span class="n">Add</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">AutoNet</span><span class="p">(</span><span class="n">Cell</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">super</span><span class="p">(</span><span class="n">AutoNet</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">add</span> <span class="o">=</span> <span class="n">Add</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">Net</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auto_encoder</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">AutoNet</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random_label</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">10</span><span class="p">)[</span><span class="n">random_label</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">magnet_detector</span> <span class="o">=</span> <span class="n">ErrorBasedDetector</span><span class="p">(</span><span class="n">auto_encoder</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">region_detector</span> <span class="o">=</span> <span class="n">RegionBasedDetector</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">region_detector</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">adv</span><span class="p">,</span> <span class="n">labels</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detectors</span> <span class="o">=</span> <span class="p">[</span><span class="n">magnet_detector</span><span class="p">,</span> <span class="n">region_detector</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detector</span> <span class="o">=</span> <span class="n">EnsembleDetector</span><span class="p">(</span><span class="n">detectors</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adv_ids</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">detect</span><span class="p">(</span><span class="n">adv</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.EnsembleDetector.detect">
<code class="sig-name descname">detect</code><span class="sig-paren">(</span><em class="sig-param">inputs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/ensemble_detector.html#EnsembleDetector.detect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.EnsembleDetector.detect" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect adversarial examples from input samples.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Input samples.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list[int], whether a sample is adversarial. if res[i]=1, then the
input sample with index i is adversarial.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If policy is not supported.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.EnsembleDetector.detect_diff">
<code class="sig-name descname">detect_diff</code><span class="sig-paren">(</span><em class="sig-param">inputs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/ensemble_detector.html#EnsembleDetector.detect_diff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.EnsembleDetector.detect_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is not available in this class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#tuple" title="(in Python v3.8)"><em>tuple</em></a><em>]</em>) – Data been used as
references to create adversarial examples.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#NotImplementedError" title="(in Python v3.8)"><strong>NotImplementedError</strong></a> – This function is not available in ensemble.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.EnsembleDetector.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param">inputs</em>, <em class="sig-param">labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/ensemble_detector.html#EnsembleDetector.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.EnsembleDetector.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit detector like a machine learning model. This method is not available
in this class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Data to calculate the threshold.</p></li>
<li><p><strong>labels</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Labels of data. Default: None.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#NotImplementedError" title="(in Python v3.8)"><strong>NotImplementedError</strong></a> – This function is not available in ensemble.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.EnsembleDetector.transform">
<code class="sig-name descname">transform</code><span class="sig-paren">(</span><em class="sig-param">inputs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/ensemble_detector.html#EnsembleDetector.transform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.EnsembleDetector.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter adversarial noises in input samples.
This method is not available in this class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#tuple" title="(in Python v3.8)"><em>tuple</em></a><em>]</em>) – Data been used as
references to create adversarial examples.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#NotImplementedError" title="(in Python v3.8)"><strong>NotImplementedError</strong></a> – This function is not available in ensemble.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mindarmour.adv_robustness.detectors.SimilarityDetector">
<em class="property">class </em><code class="sig-prename descclassname">mindarmour.adv_robustness.detectors.</code><code class="sig-name descname">SimilarityDetector</code><span class="sig-paren">(</span><em class="sig-param">trans_model</em>, <em class="sig-param">max_k_neighbor=1000</em>, <em class="sig-param">chunk_size=1000</em>, <em class="sig-param">max_buffer_size=10000</em>, <em class="sig-param">tuning=False</em>, <em class="sig-param">fpr=0.001</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/black/similarity_detector.html#SimilarityDetector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.SimilarityDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>The detector measures similarity among adjacent queries and rejects queries
which are remarkably similar to previous queries.</p>
<p>Reference: <a class="reference external" href="https://arxiv.org/abs/1907.05587">Stateful Detection of Black-Box Adversarial Attacks by Steven
Chen, Nicholas Carlini, and David Wagner. at arxiv 2019</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trans_model</strong> (<em>Model</em>) – A MindSpore model to encode input data into lower
dimension vector.</p></li>
<li><p><strong>max_k_neighbor</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The maximum number of the nearest neighbors.
Default: 1000.</p></li>
<li><p><strong>chunk_size</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Buffer size. Default: 1000.</p></li>
<li><p><strong>max_buffer_size</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Maximum buffer size. Default: 10000.</p></li>
<li><p><strong>tuning</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Calculate the average distance for the nearest k
neighbours, if tuning is true, k=K. If False k=1,…,K.
Default: False.</p></li>
<li><p><strong>fpr</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – False positive ratio on legitimate query sequences.
Default: 0.001</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.ops.operations</span> <span class="kn">import</span> <span class="n">Add</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore.nn</span> <span class="kn">import</span> <span class="n">Cell</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindspore</span> <span class="kn">import</span> <span class="n">Model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mindarmour.adv_robustness.detectors</span> <span class="kn">import</span> <span class="n">SimilarityDetector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">EncoderNet</span><span class="p">(</span><span class="n">Cell</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encode_dim</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">super</span><span class="p">(</span><span class="n">EncoderNet</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_encode_dim</span> <span class="o">=</span> <span class="n">encode_dim</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">add</span> <span class="o">=</span> <span class="n">Add</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">construct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">get_encode_dim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_encode_dim</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x_train</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">perm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">permutation</span><span class="p">(</span><span class="n">x_train</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">benign_queries</span> <span class="o">=</span> <span class="n">x_train</span><span class="p">[</span><span class="n">perm</span><span class="p">[:</span><span class="mi">10</span><span class="p">],</span> <span class="p">:,</span> <span class="p">:,</span> <span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">suspicious_queries</span> <span class="o">=</span> <span class="n">x_train</span><span class="p">[</span><span class="n">perm</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">:,</span> <span class="p">:,</span> <span class="p">:]</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="p">(</span><span class="mi">10</span><span class="p">,)</span> <span class="o">+</span> <span class="n">x_train</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">suspicious_queries</span> <span class="o">=</span> <span class="n">suspicious_queries</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encoder</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">EncoderNet</span><span class="p">(</span><span class="n">encode_dim</span><span class="o">=</span><span class="mi">256</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detector</span> <span class="o">=</span> <span class="n">SimilarityDetector</span><span class="p">(</span><span class="n">max_k_neighbor</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">trans_model</span><span class="o">=</span><span class="n">encoder</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">num_nearest_neighbors</span><span class="p">,</span> <span class="n">thresholds</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">x_train</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detector</span><span class="o">.</span><span class="n">set_threshold</span><span class="p">(</span><span class="n">num_nearest_neighbors</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">thresholds</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detector</span><span class="o">.</span><span class="n">detect</span><span class="p">(</span><span class="n">benign_queries</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detections</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">get_detection_interval</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detected_queries</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">get_detected_queries</span><span class="p">()</span>
</pre></div>
</div>
<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.SimilarityDetector.clear_buffer">
<code class="sig-name descname">clear_buffer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/black/similarity_detector.html#SimilarityDetector.clear_buffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.SimilarityDetector.clear_buffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the buffer memory.</p>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.SimilarityDetector.detect">
<code class="sig-name descname">detect</code><span class="sig-paren">(</span><em class="sig-param">inputs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/black/similarity_detector.html#SimilarityDetector.detect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.SimilarityDetector.detect" title="Permalink to this definition">¶</a></dt>
<dd><p>Process queries to detect black-box attack.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Query sequence.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – The parameters of threshold or num_of_neighbors is
    not available.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.SimilarityDetector.detect_diff">
<code class="sig-name descname">detect_diff</code><span class="sig-paren">(</span><em class="sig-param">inputs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/black/similarity_detector.html#SimilarityDetector.detect_diff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.SimilarityDetector.detect_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect adversarial samples from input samples, like the predict_proba
function in common machine learning model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#tuple" title="(in Python v3.8)"><em>tuple</em></a><em>]</em>) – Data been used as
references to create adversarial examples.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#NotImplementedError" title="(in Python v3.8)"><strong>NotImplementedError</strong></a> – This function is not available
    in class <cite>SimilarityDetector</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.SimilarityDetector.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param">inputs</em>, <em class="sig-param">labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/black/similarity_detector.html#SimilarityDetector.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.SimilarityDetector.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Process input training data to calculate the threshold.
A proper threshold should make sure the false positive
rate is under a given value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Training data to calculate the threshold.</p></li>
<li><p><strong>labels</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a>) – Labels of training data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>list[int], number of the nearest neighbors.</p></li>
<li><p>list[float], calculated thresholds for different K.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – The number of training data is less than
    max_k_neighbor!</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.SimilarityDetector.get_detected_queries">
<code class="sig-name descname">get_detected_queries</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/black/similarity_detector.html#SimilarityDetector.get_detected_queries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.SimilarityDetector.get_detected_queries" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the indexes of detected queries.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list[int], sequence number of detected malicious queries.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.SimilarityDetector.get_detection_interval">
<code class="sig-name descname">get_detection_interval</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/black/similarity_detector.html#SimilarityDetector.get_detection_interval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.SimilarityDetector.get_detection_interval" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the interval between adjacent detections.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list[int], number of queries between adjacent detections.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.SimilarityDetector.set_threshold">
<code class="sig-name descname">set_threshold</code><span class="sig-paren">(</span><em class="sig-param">num_of_neighbors</em>, <em class="sig-param">threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/black/similarity_detector.html#SimilarityDetector.set_threshold"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.SimilarityDetector.set_threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the parameters num_of_neighbors and threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_of_neighbors</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Number of the nearest neighbors.</p></li>
<li><p><strong>threshold</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Detection threshold.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mindarmour.adv_robustness.detectors.SimilarityDetector.transform">
<code class="sig-name descname">transform</code><span class="sig-paren">(</span><em class="sig-param">inputs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindarmour/adv_robustness/detectors/black/similarity_detector.html#SimilarityDetector.transform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mindarmour.adv_robustness.detectors.SimilarityDetector.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter adversarial noises in input samples.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>, </em><a class="reference external" href="https://docs.python.org/library/stdtypes.html#tuple" title="(in Python v3.8)"><em>tuple</em></a><em>]</em>) – Data been used as references to create adversarial examples.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/library/exceptions.html#NotImplementedError" title="(in Python v3.8)"><strong>NotImplementedError</strong></a> – This function is not available in class <cite>SimilarityDetector</cite>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="mindarmour.adv_robustness.evaluations.html" class="btn btn-neutral float-right" title="mindarmour.adv_robustness.evaluations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="mindarmour.adv_robustness.defenses.html" class="btn btn-neutral float-left" title="mindarmour.adv_robustness.defenses" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, MindSpore.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   
	<script async="async" src="https://cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>