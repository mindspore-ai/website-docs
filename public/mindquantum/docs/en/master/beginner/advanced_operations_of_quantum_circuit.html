<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advanced Operations of Quantum Circuit &mdash; MindSpore master documentation</title><script>;(()=>{const e=localStorage.getItem("ms-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;(e?"dark"===e:t)&&document.documentElement.setAttribute("data-o-theme","dark")})();</script><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script><script src="../_static/jquery.js"></script>
        <script src="../_static/js/theme.js"></script><script src="../_static/underscore.js"></script><script src="../_static/doctools.js"></script><script crossorigin="anonymous" integrity="sha256-1fEPhSsRKlFKGfK3eO710tEweHh1fwokU5wFGDHO+vg=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script><script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script><script async="async" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/mathjax/MathJax-3.2.2/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Bloch Sphere" href="bloch_sphere.html" />
    <link rel="prev" title="Quantum Measurement" href="quantum_measurement.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Beginner Tutorial</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="beginner.html">Beginner Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameterized_quantum_circuit.html">Variational Quantum Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantum_simulator.html">Quantum Simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantum_measurement.html">Quantum Measurement</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Advanced Operations of Quantum Circuit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#mindquantum.core.circuit.controlled">mindquantum.core.circuit.controlled</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mindquantum.core.circuit.dagger">mindquantum.core.circuit.dagger</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mindquantum.core.circuit.apply">mindquantum.core.circuit.apply</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mindquantum.core.circuit.add_prefix">mindquantum.core.circuit.add_prefix</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mindquantum.core.circuit.change_param_name">mindquantum.core.circuit.change_param_name</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mindquantum.core.circuit.UN">mindquantum.core.circuit.UN</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mindquantum.core.circuit.shift">mindquantum.core.circuit.shift</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#case---iris-classification-building-encoder">Case - Iris Classification: Building Encoder</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bloch_sphere.html">Bloch Sphere</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Middle Level Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../middle_level/middle_level.html">Middle Level Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../middle_level/noise.html">Noisy Quantum Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../middle_level/noise_simulator.html">Noise Simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../middle_level/qubit_mapping.html">Qubit Mapping</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../advanced/advanced.html">Advanced Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/get_gradient_of_PQC_with_mindquantum.html">Advanced Gradient Calculation of Variational Quantum Circuits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/initial_experience_of_quantum_neural_network.html">Initial Experience of Quantum Neural Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/equivalence_checking_of_PQC.html">Equivalence Checking of Parameterized Quantum Circuits</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Case Library</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../case_library/case_library.html">Case Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../case_library/grover_search_algorithm.html">Grover Search and Long Algorithms Based on MindSpore Quantum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../case_library/shor_algorithm.html">Shor’s Algorithm Based on MindSpore Quantum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../case_library/hhl_algorithm.html">HHL Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../case_library/quantum_phase_estimation.html">Quantum Phase Estimation Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../case_library/quantum_approximate_optimization_algorithm.html">Quantum Approximate Optimization Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../case_library/classification_of_iris_by_qnn.html">Classification of IRIS by Quantum Neural Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../case_library/vqe_for_quantum_chemistry.html">VQE Application in Quantum Chemistry Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../case_library/qnn_for_nlp.html">The Application of Quantum Neural Network in NLP</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.dtype.html">mindquantum.dtype</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.core.html">mindquantum.core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.simulator.html">mindquantum.simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.framework.html">mindquantum.framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.algorithm.html">mindquantum.algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.device.html">mindquantum.device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.io.html">mindquantum.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.engine.html">mindquantum.engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.utils.html">mindquantum.utils</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Paper with Code</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../paper_with_code.html">Paper with Code</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../RELEASE.html">Release Notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum_install.html">MindSpore Quantum Installation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Advanced Operations of Quantum Circuit</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/beginner/advanced_operations_of_quantum_circuit.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars and line breaks on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
    white-space: pre;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="advanced-operations-of-quantum-circuit">
<h1>Advanced Operations of Quantum Circuit<a class="headerlink" href="#advanced-operations-of-quantum-circuit" title="Permalink to this headline"></a></h1>
<p><a class="reference external" href="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/notebook/master/mindquantum/en/beginner/mindspore_advanced_operations_of_quantum_circuit.ipynb"><img alt="Download Notebook" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/master/resource/_static/logo_notebook_en.svg" /></a>  <a class="reference external" href="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/notebook/master/mindquantum/en/beginner/mindspore_advanced_operations_of_quantum_circuit.py"><img alt="Download Code" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/master/resource/_static/logo_download_code_en.svg" /></a>  <a class="reference external" href="https://gitee.com/mindspore/docs/blob/master/docs/mindquantum/docs/source_en/beginner/advanced_operations_of_quantum_circuit.ipynb"><img alt="View source on Gitee" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/master/resource/_static/logo_source_en.svg" /></a></p>
<p>In previous tutorial we introduced the basic usage of quantum circuit. In this tutorial, we will introduce how to operator the circuit in high level.</p>
<section id="mindquantum.core.circuit.controlled">
<h2><a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.controlled.html">mindquantum.core.circuit.controlled</a><a class="headerlink" href="#mindquantum.core.circuit.controlled" title="Permalink to this headline"></a></h2>
<p>The <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.controlled.html">controlled</a> method is used to add control qubits (which can be multiple) to any quantum circuit or quantum operator.</p>
<p>For example, let’s build a quantum circuit containing only two qubits and add a control qubit - <span class="math notranslate nohighlight">\(q_2\)</span> to it by a controlled method:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.algorithm.library</span> <span class="kn">import</span> <span class="n">qft</span>
<span class="kn">from</span> <span class="nn">mindquantum.core.circuit</span> <span class="kn">import</span> <span class="n">controlled</span>

<span class="n">u1</span> <span class="o">=</span> <span class="n">qft</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>  <span class="c1"># Build the quantum circuit</span>
<span class="n">u1</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_1_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_1_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">u2</span> <span class="o">=</span> <span class="n">controlled</span><span class="p">(</span><span class="n">u1</span><span class="p">)(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Add control qubit q2 to the circuit, returning a new circuit</span>
<span class="n">u2</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_2_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_2_0.svg" /></div>
</div>
<p>Actually, <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.controlled.html">controlled()</a> returns a function. E.g:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">u3</span> <span class="o">=</span> <span class="n">controlled</span><span class="p">(</span><span class="n">u1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>We can add control qubits to the initial circuit u1 by calling u3, which has the same effect as above:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">u4</span> <span class="o">=</span> <span class="n">u3</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">u4</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_6_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_6_0.svg" /></div>
</div>
<p>Note: The added control qubit cannot be the target qubit of a gate that already exists in the circuit, otherwise an error will be reported!</p>
<p>In addition, we can batch add control qubits to the quantum circuit. For example, in the following example we add control qubits - <span class="math notranslate nohighlight">\(q_2\)</span> and <span class="math notranslate nohighlight">\(q_3\)</span> to <span class="math notranslate nohighlight">\(q_0\)</span> and <span class="math notranslate nohighlight">\(q_1\)</span> respectively:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="o">=</span> <span class="n">controlled</span><span class="p">(</span><span class="n">qft</span><span class="p">)</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">u</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>  <span class="c1"># Bulk add control qubits</span>
<span class="n">u</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_8_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_8_0.svg" /></div>
</div>
</section>
<section id="mindquantum.core.circuit.dagger">
<h2><a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.dagger.html">mindquantum.core.circuit.dagger</a><a class="headerlink" href="#mindquantum.core.circuit.dagger" title="Permalink to this headline"></a></h2>
<p>The <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.dagger.html">dagger</a> method is used to find the Hermitian conjugates of quantum circuits or quantum operators.</p>
<p>The following examples provide two ways of doing dagger operations:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.core.circuit</span> <span class="kn">import</span> <span class="n">dagger</span>

<span class="n">u1</span> <span class="o">=</span> <span class="n">qft</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="n">u1</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_10_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_10_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">u2</span> <span class="o">=</span> <span class="n">dagger</span><span class="p">(</span><span class="n">u1</span><span class="p">)</span>
<span class="n">u2</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_11_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_11_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">u3</span> <span class="o">=</span> <span class="n">dagger</span><span class="p">(</span><span class="n">qft</span><span class="p">)</span>
<span class="n">u4</span> <span class="o">=</span> <span class="n">u3</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="n">u4</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_12_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_12_0.svg" /></div>
</div>
<p>It can be seen that the circuits obtained by the two methods are the same.</p>
</section>
<section id="mindquantum.core.circuit.apply">
<h2><a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.apply.html">mindquantum.core.circuit.apply</a><a class="headerlink" href="#mindquantum.core.circuit.apply" title="Permalink to this headline"></a></h2>
<p>The <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.apply.html">apply</a> method is used to apply a quantum circuit or quantum operator to the specified qubits (which can be multiple).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.core.circuit</span> <span class="kn">import</span> <span class="n">apply</span>

<span class="n">u1</span> <span class="o">=</span> <span class="n">qft</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">circuit1</span> <span class="o">=</span> <span class="n">apply</span><span class="p">(</span><span class="n">u1</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>  <span class="c1"># Apply quantum circuit u1 to qubits q1, q0</span>
<span class="n">circuit1</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_14_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_14_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">u2</span> <span class="o">=</span> <span class="n">apply</span><span class="p">(</span><span class="n">qft</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>  <span class="c1"># Apply qft to qubits q0, q1</span>
<span class="n">circuit2</span> <span class="o">=</span> <span class="n">u2</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">circuit2</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_15_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_15_0.svg" /></div>
</div>
</section>
<section id="mindquantum.core.circuit.add_prefix">
<h2><a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.add_prefix.html">mindquantum.core.circuit.add_prefix</a><a class="headerlink" href="#mindquantum.core.circuit.add_prefix" title="Permalink to this headline"></a></h2>
<p>The <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.add_prefix.html">add_prefix</a> method is used to prefix the parameter names of parameterized quantum circuits or parameterized quantum operators. This is useful in neural network layering, for example:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.core.circuit</span> <span class="kn">import</span> <span class="n">add_prefix</span><span class="p">,</span> <span class="n">Circuit</span>
<span class="kn">from</span> <span class="nn">mindquantum.core.gates</span> <span class="kn">import</span> <span class="n">RX</span><span class="p">,</span> <span class="n">H</span>

<span class="n">circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="s2">&quot;theta&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">circ</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_17_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_17_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># After adding, the parameter &quot;theta&quot; becomes &quot;l0_theta&quot;</span>
<span class="n">circ</span> <span class="o">=</span> <span class="n">add_prefix</span><span class="p">(</span><span class="n">circ</span><span class="p">,</span> <span class="s1">&#39;l0&#39;</span><span class="p">)</span>
<span class="n">circ</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_18_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_18_0.svg" /></div>
</div>
<p>We can prefix the parameter name of a parameterized qubit after it acts on a specific qubit, or we can add it when it has not yet been applied to the qubit. E.g:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">qubit</span><span class="p">:</span> <span class="n">Circuit</span><span class="p">([</span><span class="n">H</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">RX</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="n">qubit</span><span class="p">)])</span>

<span class="n">u1</span> <span class="o">=</span> <span class="n">u</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">u1</span> <span class="o">=</span> <span class="n">add_prefix</span><span class="p">(</span><span class="n">u1</span><span class="p">,</span> <span class="s1">&#39;ansatz&#39;</span><span class="p">)</span>
<span class="n">u1</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_20_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_20_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="n">u2</span> <span class="o">=</span> <span class="n">add_prefix</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="s1">&#39;ansatz&#39;</span><span class="p">)</span>
<span class="n">u2</span> <span class="o">=</span> <span class="n">u2</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">u2</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_21_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_21_0.svg" /></div>
</div>
</section>
<section id="mindquantum.core.circuit.change_param_name">
<h2><a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.change_param_name.html">mindquantum.core.circuit.change_param_name</a><a class="headerlink" href="#mindquantum.core.circuit.change_param_name" title="Permalink to this headline"></a></h2>
<p>The <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.change_param_name.html">change_param_name</a> method is used to modify the parameter name of a parameterized quantum circuit or a parameterized quantum operator.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.core.circuit</span> <span class="kn">import</span> <span class="n">change_param_name</span><span class="p">,</span> <span class="n">Circuit</span>
<span class="kn">from</span> <span class="nn">mindquantum.core.gates</span> <span class="kn">import</span> <span class="n">RX</span><span class="p">,</span> <span class="n">H</span>

<span class="n">u</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">qubit</span><span class="p">:</span> <span class="n">Circuit</span><span class="p">([</span><span class="n">H</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">RX</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="n">qubit</span><span class="p">)])</span>

<span class="n">u1</span> <span class="o">=</span> <span class="n">u</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">u1</span> <span class="o">=</span> <span class="n">change_param_name</span><span class="p">(</span><span class="n">u1</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">})</span>
<span class="n">u1</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_23_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_23_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">u2</span> <span class="o">=</span> <span class="n">change_param_name</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">})</span>
<span class="n">u2</span> <span class="o">=</span> <span class="n">u2</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">u2</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_24_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_24_0.svg" /></div>
</div>
</section>
<section id="mindquantum.core.circuit.UN">
<h2><a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.UN.html">mindquantum.core.circuit.UN</a><a class="headerlink" href="#mindquantum.core.circuit.UN" title="Permalink to this headline"></a></h2>
<p>The <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.UN.html">UN</a> module is used to actuate quantum gates on different target qubits and control qubits.</p>
<p>The general format is as follows: <code class="docutils literal notranslate"><span class="pre">mindquantum.circuit.UN(gate,</span> <span class="pre">maps_obj,</span> <span class="pre">maps_ctrl=None)</span></code>, the parameter <code class="docutils literal notranslate"><span class="pre">gate</span></code> is the gate to be executed, <code class="docutils literal notranslate"><span class="pre">maps_obj</span></code> is the target qubit to be executed, and <code class="docutils literal notranslate"><span class="pre">maps_Ctrl</span></code> is the control qubit (None if there are no control qubits). If each qubit implements the same quantum gate without parameters, <code class="docutils literal notranslate"><span class="pre">UN(gate,</span> <span class="pre">N)</span></code> can be used directly, where <code class="docutils literal notranslate"><span class="pre">N</span></code> represents the number of qubits.</p>
<p>Here is a simple example where we apply an <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/gates/mindquantum.core.gates.HGate.html">H-gate</a> to each qubit in the <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.Circuit.html">circuit</a> we build:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.core.circuit</span> <span class="kn">import</span> <span class="n">change_param_name</span><span class="p">,</span> <span class="n">Circuit</span><span class="p">,</span> <span class="n">UN</span>
<span class="kn">from</span> <span class="nn">mindquantum.core.gates</span> <span class="kn">import</span> <span class="n">X</span><span class="p">,</span> <span class="n">H</span><span class="p">,</span> <span class="n">SWAP</span>

<span class="n">circuit1</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span>
<span class="n">circuit1</span> <span class="o">+=</span> <span class="n">UN</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>  <span class="c1"># Apply the H gate to each qubit</span>
<span class="n">circuit1</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_26_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_26_0.svg" /></div>
</div>
<p>In the following example, we add a <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/gates/mindquantum.core.gates.XGate.html">CNOT</a> gate to the qubits <span class="math notranslate nohighlight">\(q_2\)</span> and <span class="math notranslate nohighlight">\(q_0\)</span>, <span class="math notranslate nohighlight">\(q_3\)</span> and <span class="math notranslate nohighlight">\(q_1\)</span> respectively, where <span class="math notranslate nohighlight">\(q_2\)</span> is the control bit, <span class="math notranslate nohighlight">\(q_0\)</span> is the target bit; <span class="math notranslate nohighlight">\(q_3\)</span> is the control bit , <span class="math notranslate nohighlight">\(q_1\)</span> is the target bit:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">circuit2</span> <span class="o">=</span> <span class="n">UN</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">maps_obj</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">maps_ctrl</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">circuit2</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_28_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_28_0.svg" /></div>
</div>
<p>For <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/gates/mindquantum.core.gates.SWAPGate.html">SWAP</a> gate</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">circuit3</span> <span class="o">=</span> <span class="n">UN</span><span class="p">(</span><span class="n">SWAP</span><span class="p">,</span> <span class="n">maps_obj</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">circuit3</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_30_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_30_0.svg" /></div>
</div>
</section>
<section id="mindquantum.core.circuit.shift">
<h2><a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.shift.html">mindquantum.core.circuit.shift</a><a class="headerlink" href="#mindquantum.core.circuit.shift" title="Permalink to this headline"></a></h2>
<p>The <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.shift.html">shift</a> method is used to modify the qubit range of a given circuit, and the parameter is the step size to be shifted. Note that the step size cannot be negative. Moreover, it can only move to the last qubit, and cannot cycle to <span class="math notranslate nohighlight">\(q_0\)</span> (the first qubit).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.core.circuit</span> <span class="kn">import</span> <span class="n">shift</span><span class="p">,</span> <span class="n">Circuit</span>
<span class="kn">from</span> <span class="nn">mindquantum.core.gates</span> <span class="kn">import</span> <span class="n">X</span>

<span class="n">circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">circ</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_32_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_32_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">circ</span> <span class="o">=</span> <span class="n">shift</span><span class="p">(</span><span class="n">circ</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">circ</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>  <span class="c1"># The qubit acting on the circuit changes from q0, q1 to q1, q2</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_33_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_33_0.svg" /></div>
</div>
<section id="case---iris-classification-building-encoder">
<h3>Case - Iris Classification: Building Encoder<a class="headerlink" href="#case---iris-classification-building-encoder" title="Permalink to this headline"></a></h3>
<p>The above examples of higher-order operations show the applicability and convenience of higher-order operations in quantum circuits. What magic will happen if we further combine them to build quantum circuits?</p>
<p>Next we will start with <a class="reference external" href="https://mindspore.cn/mindquantum/docs/en/master/classification_of_iris_by_qnn.html">Classification of irises by quantum neural network</a>. Build the Encoder part as an example, build the quantum circuit shown in the figure below:</p>
<p><img alt="encoder classification of iris by qnn" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/master/docs/mindquantum/docs/source_zh_cn/images/encoder_classification_of_iris_by_qnn.png" /></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.core.circuit</span> <span class="kn">import</span> <span class="n">shift</span><span class="p">,</span> <span class="n">add_prefix</span><span class="p">,</span> <span class="n">Circuit</span><span class="p">,</span> <span class="n">UN</span>
<span class="kn">from</span> <span class="nn">mindquantum.core.gates</span> <span class="kn">import</span> <span class="n">RZ</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">H</span>

<span class="n">template</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">([</span><span class="n">X</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">RZ</span><span class="p">(</span><span class="s1">&#39;alpha&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">X</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
<span class="n">encoder</span> <span class="o">=</span> <span class="n">UN</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">RZ</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">_alpha&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="n">add_prefix</span><span class="p">(</span><span class="n">shift</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">4</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="n">encoder</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #ff0000; text-decoration-color: #ff0000; font-weight: bold">                                    Circuit Summary                                     </span>
╭──────────────────────┬───────────────────────────────────────────────────────────────╮
│<span style="font-weight: bold"> </span><span style="color: #3b3b95; text-decoration-color: #3b3b95; font-weight: bold">Info</span><span style="font-weight: bold">                 </span>│<span style="font-weight: bold"> </span><span style="color: #3b3b95; text-decoration-color: #3b3b95; font-weight: bold">value</span><span style="font-weight: bold">                                                         </span>│
├──────────────────────┼───────────────────────────────────────────────────────────────┤
│ <span style="font-weight: bold">Number of qubit</span>      │ 4                                                             │
├──────────────────────┼───────────────────────────────────────────────────────────────┤
│ <span style="font-weight: bold">Total number of gate</span> │ 17                                                            │
│ Barrier              │ 0                                                             │
│ Noise Channel        │ 0                                                             │
│ Measurement          │ 0                                                             │
├──────────────────────┼───────────────────────────────────────────────────────────────┤
│ <span style="font-weight: bold">Parameter gate</span>       │ 7                                                             │
│ 7 ansatz parameters  │ <span style="color: #48c9b0; text-decoration-color: #48c9b0">0_alpha, 1_alpha, 2_alpha, 3_alpha, 4_alpha, 5_alpha, 6_alpha</span> │
╰──────────────────────┴───────────────────────────────────────────────────────────────╯
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">encoder</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/beginner_advanced_operations_of_quantum_circuit_36_0.svg" src="../_images/beginner_advanced_operations_of_quantum_circuit_36_0.svg" /></div>
</div>
<p>In the above code, we use the <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.UN.html">UN</a> module to apply the parameter-free <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/gates/mindquantum.core.gates.HGate.html">H</a> gate to the target qubits <span class="math notranslate nohighlight">\(q_0\)</span>~<span class="math notranslate nohighlight">\(q_3\)</span>, and then apply the <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/gates/mindquantum.core.gates.RZ.html">RZ</a>(i_alpha) gate to the i-th qubit. Next, it is
observed that there are three identical modules in the circuit, and they are all composed of a controlled <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/gates/mindquantum.core.gates.XGate.html">X</a> gate, a <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/gates/mindquantum.core.gates.RZ.html">RZ</a> gate and a controlled <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/gates/mindquantum.core.gates.XGate.html">X</a> gate. Therefore, we construct the corresponding
template template, which is controlled by <span class="math notranslate nohighlight">\(q_0\)</span>, an <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/gates/mindquantum.core.gates.XGate.html">X</a> gate acting on <span class="math notranslate nohighlight">\(q_1\)</span>, an <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/gates/mindquantum.core.gates.RZ.html">RZ</a> gate acting on <span class="math notranslate nohighlight">\(q_1\)</span>, and an <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/gates/mindquantum.core.gates.XGate.html">X</a> gate controlled by <span class="math notranslate nohighlight">\(q_0\)</span> acting on <span class="math notranslate nohighlight">\(q_1\)</span> are
formed. Then we use <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.shift.html">shift</a>(template, i) to change the qubit range that the template acts on, and build three modules with the same structure but the qubit range differs by 1. The qubit ranges involved are <span class="math notranslate nohighlight">\(q_0\)</span> and <span class="math notranslate nohighlight">\(q_1\)</span>, <span class="math notranslate nohighlight">\(q_1\)</span> and <span class="math notranslate nohighlight">\(q_2\)</span>, <span class="math notranslate nohighlight">\(q_2\)</span> and <span class="math notranslate nohighlight">\(q_3\)</span>. Finally, we use the
<a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/core/circuit/mindquantum.core.circuit.add_prefix.html">add_prefix</a> method to prefix the parameter names of all parameter quantum gates constructed by shift with a number.</p>
<p>So far, through these advanced operations of quantum circuit provided by MindSpore Quantum, we have built the required Encoder with only two lines of code!</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.utils.show_info</span> <span class="kn">import</span> <span class="n">InfoTable</span>

<span class="n">InfoTable</span><span class="p">(</span><span class="s1">&#39;mindquantum&#39;</span><span class="p">,</span> <span class="s1">&#39;scipy&#39;</span><span class="p">,</span> <span class="s1">&#39;numpy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table border="1">
  <tr>
    <th>Software</th>
    <th>Version</th>
  </tr>
<tr><td>mindquantum</td><td>0.9.11</td></tr>
<tr><td>scipy</td><td>1.10.1</td></tr>
<tr><td>numpy</td><td>1.24.4</td></tr>
<tr>
    <th>System</th>
    <th>Info</th>
</tr>
<tr><td>Python</td><td>3.8.17</td></tr><tr><td>OS</td><td>Linux x86_64</td></tr><tr><td>Memory</td><td>16.62 GB</td></tr><tr><td>CPU Max Thread</td><td>16</td></tr><tr><td>Date</td><td>Tue Jan  2 14:38:22 2024</td></tr>
</table></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quantum_measurement.html" class="btn btn-neutral float-left" title="Quantum Measurement" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="bloch_sphere.html" class="btn btn-neutral float-right" title="Bloch Sphere" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>