<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Noise simulator &mdash; MindSpore master documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Qubit Mapping" href="qubit_mapping.html" />
    <link rel="prev" title="Noisy Quantum Circuit" href="noise.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mindquantum_install.html">MindSpore Quantum Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="parameterized_quantum_circuit.html">Variational Quantum Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantum_simulator.html">Quantum simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="initial_experience_of_quantum_neural_network.html">Initial experience of quantum neural network</a></li>
<li class="toctree-l1"><a class="reference internal" href="get_gradient_of_PQC_with_mindquantum.html">Advanced gradient calculation of variational quantum circuits</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_operations_of_quantum_circuit.html">Advanced operations of quantum circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantum_measurement.html">Quantum Measurement</a></li>
<li class="toctree-l1"><a class="reference internal" href="noise.html">Noisy Quantum Circuit</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Noise simulator</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#channeladder">ChannelAdder</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bitflipadder">BitFlipAdder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#measureaccepter">MeasureAccepter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mixeradder">MixerAdder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sequentialadder">SequentialAdder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-adder">Custom <code class="docutils literal notranslate"><span class="pre">Adder</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#a-more-complex-example">A more complex example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#channeladder-list"><code class="docutils literal notranslate"><span class="pre">ChannelAdder</span></code> list</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#noise-simulator-based-on-channeladder">Noise simulator based on <code class="docutils literal notranslate"><span class="pre">ChannelAdder</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="qubit_mapping.html">Qubit Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="bloch_sphere.html">Bloch Sphere</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Variational Quantum Algorithm</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="classification_of_iris_by_qnn.html">Classification of iris by quantum neural network</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantum_approximate_optimization_algorithm.html">Quantum Approximate Optimization Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="qnn_for_nlp.html">The Application of Quantum Neural Network in NLP</a></li>
<li class="toctree-l1"><a class="reference internal" href="vqe_for_quantum_chemistry.html">VQE Application in Quantum Chemistry Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="equivalence_checking_of_PQC.html">Equivalence Checking of Parameterized Quantum Circuits</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">General Quantum Algorithm</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quantum_phase_estimation.html">Quantum Phase Estimation Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="grover_search_algorithm.html">Grover search and Long algorithms based on MindSpore Quantum</a></li>
<li class="toctree-l1"><a class="reference internal" href="shor_algorithm.html">Shor’s algorithm based on MindSpore Quantum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.dtype.html">mindquantum.dtype</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.core.html">mindquantum.core</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.simulator.html">mindquantum.simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.framework.html">mindquantum.framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.algorithm.html">mindquantum.algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.device.html">mindquantum.device</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.io.html">mindquantum.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.engine.html">mindquantum.engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.utils.html">mindquantum.utils</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="RELEASE.html">Release Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Noise simulator</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/noise_simulator.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars and line breaks on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
    white-space: pre;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="noise-simulator">
<h1>Noise simulator<a class="headerlink" href="#noise-simulator" title="Permalink to this headline"></a></h1>
<p><a class="reference external" href="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/notebook/master/mindquantum/en/mindspore_noise_simulator.ipynb"><img alt="Download Notebook" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/master/resource/_static/logo_notebook_en.png" /></a>  <a class="reference external" href="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/notebook/master/mindquantum/en/mindspore_noise_simulator.py"><img alt="Download Code" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/master/resource/_static/logo_download_code_en.png" /></a>  <a class="reference external" href="https://gitee.com/mindspore/docs/blob/master/docs/mindquantum/docs/source_en/noise_simulator.ipynb"><img alt="View source on Gitee" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/master/resource/_static/logo_source_en.png" /></a></p>
<section id="channeladder">
<h2>ChannelAdder<a class="headerlink" href="#channeladder" title="Permalink to this headline"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ChannelAdder</span></code> is a processor that can add specific channels at specific positions in the quantum circuit, such as adding a bit flip channel after a measurement gate. The <code class="docutils literal notranslate"><span class="pre">ChannelAdder</span></code> class mainly consists of three functions: <code class="docutils literal notranslate"><span class="pre">_accepter()</span></code>, <code class="docutils literal notranslate"><span class="pre">_excluder()</span></code>, and <code class="docutils literal notranslate"><span class="pre">_handler(BasicGate)</span></code>, whose functions are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_accepter()</span></code>: Returns a list of functions called the accept rule set, where each accept rule function takes a quantum gate as input. When the function returns <code class="docutils literal notranslate"><span class="pre">True</span></code>, we can add a channel after that quantum gate.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_excluder()</span></code>: Returns a list of functions called the reject rule set, where each reject rule function takes a quantum gate as input. When the function returns <code class="docutils literal notranslate"><span class="pre">True</span></code>, we reject adding a channel after that quantum gate.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_handler(BasicGate)</span></code>: Takes a quantum gate as input and returns a section of the quantum circuit that represents a custom channel added after the input quantum gate.</p></li>
</ul>
<p>We redefine the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> function of the <code class="docutils literal notranslate"><span class="pre">ChannelAdder</span></code> class and you can directly call <code class="docutils literal notranslate"><span class="pre">ChannelAdder</span></code> to generate the processed quantum circuit. Here are several types of <code class="docutils literal notranslate"><span class="pre">ChannelAdder</span></code>.</p>
<section id="bitflipadder">
<h3>BitFlipAdder<a class="headerlink" href="#bitflipadder" title="Permalink to this headline"></a></h3>
<p>The interface definition of <code class="docutils literal notranslate"><span class="pre">BitFlipAdder</span></code> is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">BitFlipAdder</span><span class="p">(</span><span class="n">flip_rate</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">with_ctrl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">focus_on</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">add_after</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">Adder</span></code> adds a bit flip channel after a quantum gate. The arguments of the interface are:</p>
<ul class="simple">
<li><p><strong>flip_rate</strong> (float): The flip probability of the bit flip channel.</p></li>
<li><p><strong>with_ctrl</strong> (bool): Whether to add bits on control. Default value: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>focus_on</strong> (bool): Only apply this noise channel to <code class="docutils literal notranslate"><span class="pre">focus_on</span></code> bits. If it is <code class="docutils literal notranslate"><span class="pre">None</span></code>, it will act on all bits of the quantum gate. Default value: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>add_after</strong> (bool): Whether to add the channel after the quantum gate. If it is <code class="docutils literal notranslate"><span class="pre">False</span></code>, the channel will be added before the quantum gate. Default value: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
<p>For example, we can add a bit flip channel with a flip probability of <code class="docutils literal notranslate"><span class="pre">0.3</span></code> after each quantum gate in the given quantum circuit:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.core.circuit.channel_adder</span> <span class="kn">import</span> <span class="n">BitFlipAdder</span>
<span class="kn">from</span> <span class="nn">mindquantum.core</span> <span class="kn">import</span> <span class="n">gates</span> <span class="k">as</span> <span class="n">G</span>
<span class="kn">from</span> <span class="nn">mindquantum.core.circuit</span> <span class="kn">import</span> <span class="n">Circuit</span>

<span class="n">circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span><span class="o">+</span><span class="n">G</span><span class="o">.</span><span class="n">H</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">+</span><span class="n">G</span><span class="o">.</span><span class="n">RX</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="n">G</span><span class="o">.</span><span class="n">Z</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">circ</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/noise_simulator_1_0.svg" src="_images/noise_simulator_1_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bit_flip_adder</span> <span class="o">=</span> <span class="n">BitFlipAdder</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">with_ctrl</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">new_circ</span> <span class="o">=</span> <span class="n">bit_flip_adder</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
<span class="n">new_circ</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/noise_simulator_2_0.svg" src="_images/noise_simulator_2_0.svg" /></div>
</div>
</section>
<section id="measureaccepter">
<h3>MeasureAccepter<a class="headerlink" href="#measureaccepter" title="Permalink to this headline"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">MeasureAccepter</span><span class="p">()</span>
</pre></div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">Adder</span></code> selects those measurement gates. It is currently only an <code class="docutils literal notranslate"><span class="pre">Accepter</span></code> and does not change any gates in the quantum circuit. It needs to be used with other <code class="docutils literal notranslate"><span class="pre">Adders</span></code> such as <code class="docutils literal notranslate"><span class="pre">MixerAdder</span></code>.</p>
</section>
<section id="mixeradder">
<h3>MixerAdder<a class="headerlink" href="#mixeradder" title="Permalink to this headline"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">MixerAdder</span><span class="p">(</span><span class="n">adders</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ChannelAdderBase</span><span class="p">])</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">MixerAdder</span></code> can mix multiple <code class="docutils literal notranslate"><span class="pre">Adder</span></code>s to ensure that the quantum gates are added in sequence according to the <code class="docutils literal notranslate"><span class="pre">_handler</span></code> generated by each <code class="docutils literal notranslate"><span class="pre">Adder</span></code> when the accept function set and reject function set of each quantum gate in each <code class="docutils literal notranslate"><span class="pre">Adder</span></code> are satisfied at the same time.</p>
<p>For example, we can mix <code class="docutils literal notranslate"><span class="pre">BitFlipAdder</span></code> and <code class="docutils literal notranslate"><span class="pre">MeasureAccepter</span></code> mentioned above to achieve the function of adding bit flip channels only before measurement gates:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display_svg</span>
<span class="kn">from</span> <span class="nn">mindquantum.core.circuit.channel_adder</span> <span class="kn">import</span> <span class="n">MixerAdder</span><span class="p">,</span> <span class="n">MeasureAccepter</span>

<span class="n">mixer</span> <span class="o">=</span> <span class="n">MixerAdder</span><span class="p">([</span>
    <span class="n">BitFlipAdder</span><span class="p">(</span><span class="n">flip_rate</span><span class="o">=</span><span class="mf">0.01</span><span class="p">),</span>
    <span class="n">MeasureAccepter</span><span class="p">(),</span>
<span class="p">],</span> <span class="n">add_after</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mixer</span><span class="p">)</span>

<span class="n">circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span> <span class="o">+</span> <span class="n">G</span><span class="o">.</span><span class="n">H</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">G</span><span class="o">.</span><span class="n">RX</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">G</span><span class="o">.</span><span class="n">Z</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">G</span><span class="o">.</span><span class="n">Measure</span><span class="p">()</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">display_svg</span><span class="p">(</span><span class="n">circ</span><span class="o">.</span><span class="n">svg</span><span class="p">())</span>
<span class="n">new_circ</span> <span class="o">=</span> <span class="n">mixer</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
<span class="n">new_circ</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MixerAdder&lt;
  BitFlipAdder&lt;flip_rate=0.01, with_ctrl=True&gt;
  MeasureAccepter&lt;&gt;
&gt;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/noise_simulator_5_1.svg" src="_images/noise_simulator_5_1.svg" /></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/noise_simulator_5_2.svg" src="_images/noise_simulator_5_2.svg" /></div>
</div>
</section>
<section id="sequentialadder">
<h3>SequentialAdder<a class="headerlink" href="#sequentialadder" title="Permalink to this headline"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SequentialAdder</span><span class="p">(</span><span class="n">adders</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ChannelAdderBase</span><span class="p">])</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">SequentialAdder</span></code> is a class composed of multiple <code class="docutils literal notranslate"><span class="pre">Adder</span></code>s in sequence. The quantum circuit will be processed by the <code class="docutils literal notranslate"><span class="pre">Adder</span></code>s in <code class="docutils literal notranslate"><span class="pre">SequentialAdder</span></code> in turn to generate the final quantum circuit. For example, we want to construct a quantum circuit that first adds a bit flip channel with <span class="math notranslate nohighlight">\(p=0.01\)</span> before the measurement gate, and then adds a depolarizing channel with <span class="math notranslate nohighlight">\(p=0.05\)</span> after the non-measurement gate and non-noise channel on the <code class="docutils literal notranslate"><span class="pre">q1</span></code> bit.</p>
</section>
<section id="custom-adder">
<h3>Custom <code class="docutils literal notranslate"><span class="pre">Adder</span></code><a class="headerlink" href="#custom-adder" title="Permalink to this headline"></a></h3>
<p>First, we customize an <code class="docutils literal notranslate"><span class="pre">Adder</span></code> that adds a bit flip channel to a specific bit:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.core.circuit.channel_adder</span> <span class="kn">import</span> <span class="n">ChannelAdderBase</span><span class="p">,</span> <span class="n">SequentialAdder</span>

<span class="k">class</span> <span class="nc">CustomDepolarizingAdder</span><span class="p">(</span><span class="n">ChannelAdderBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">=</span> <span class="n">p</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_accepter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">q</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">obj_qubits</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">q</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">ctrl_qubits</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_excluder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span>  <span class="p">[</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">Measure</span><span class="p">,</span> <span class="n">G</span><span class="o">.</span><span class="n">NoiseGate</span><span class="p">))]</span>

    <span class="k">def</span> <span class="nf">_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">g</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Circuit</span><span class="p">([</span><span class="n">G</span><span class="o">.</span><span class="n">DepolarizingChannel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">q</span><span class="p">)])</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;CustomDepolarizingAdder&lt;q=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">q</span><span class="si">}</span><span class="s2">, flip_rate=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

<span class="n">seq_adder</span> <span class="o">=</span> <span class="n">SequentialAdder</span><span class="p">([</span>
    <span class="n">MixerAdder</span><span class="p">([</span>
        <span class="n">MeasureAccepter</span><span class="p">(),</span>
        <span class="n">BitFlipAdder</span><span class="p">(</span><span class="n">flip_rate</span><span class="o">=</span><span class="mf">0.01</span><span class="p">),</span>
    <span class="p">],</span> <span class="n">add_after</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="n">CustomDepolarizingAdder</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mf">0.05</span><span class="p">),</span>
<span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">seq_adder</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SequentialAdder&lt;
  MixerAdder&lt;
    MeasureAccepter&lt;&gt;
    BitFlipAdder&lt;flip_rate=0.01, with_ctrl=True&gt;
  &gt;
  CustomDepolarizingAdder&lt;q=1, flip_rate=0.05&gt;
&gt;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span> <span class="o">+</span> <span class="n">G</span><span class="o">.</span><span class="n">H</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">G</span><span class="o">.</span><span class="n">RX</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">G</span><span class="o">.</span><span class="n">Z</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">G</span><span class="o">.</span><span class="n">Measure</span><span class="p">()</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">display_svg</span><span class="p">(</span><span class="n">circ</span><span class="o">.</span><span class="n">svg</span><span class="p">())</span>
<span class="n">new_circ</span> <span class="o">=</span> <span class="n">seq_adder</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
<span class="n">new_circ</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/noise_simulator_8_0.svg" src="_images/noise_simulator_8_0.svg" /></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/noise_simulator_8_1.svg" src="_images/noise_simulator_8_1.svg" /></div>
</div>
<p>The custom quantum channel above can also be constructed using the predefined channels in MindQuantum.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.core.circuit</span> <span class="kn">import</span> <span class="n">ReverseAdder</span><span class="p">,</span> <span class="n">NoiseExcluder</span><span class="p">,</span> <span class="n">NoiseChannelAdder</span>
<span class="n">seq_adder</span> <span class="o">=</span> <span class="n">SequentialAdder</span><span class="p">([</span>
    <span class="n">MixerAdder</span><span class="p">([</span>
        <span class="n">MeasureAccepter</span><span class="p">(),</span>
        <span class="n">BitFlipAdder</span><span class="p">(</span><span class="n">flip_rate</span><span class="o">=</span><span class="mf">0.01</span><span class="p">),</span>
    <span class="p">],</span> <span class="n">add_after</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="n">MixerAdder</span><span class="p">([</span>
        <span class="n">ReverseAdder</span><span class="p">(</span><span class="n">MeasureAccepter</span><span class="p">()),</span>
        <span class="n">NoiseExcluder</span><span class="p">(),</span>
        <span class="n">NoiseChannelAdder</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">DepolarizingChannel</span><span class="p">(</span><span class="mf">0.05</span><span class="p">),</span> <span class="n">focus_on</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">])</span>
<span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">seq_adder</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SequentialAdder&lt;
  MixerAdder&lt;
    MeasureAccepter&lt;&gt;
    BitFlipAdder&lt;flip_rate=0.01, with_ctrl=True&gt;
  &gt;
  MixerAdder&lt;
    ReverseAdder&lt;
      MeasureAccepter&lt;&gt;
    &gt;
    NoiseExcluder&lt;&gt;
    NoiseChannelAdder&lt;channel=DC(p=1/20), with_ctrl=True&gt;
  &gt;
&gt;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">seq_adder</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/noise_simulator_11_0.svg" src="_images/noise_simulator_11_0.svg" /></div>
</div>
</section>
<section id="a-more-complex-example">
<h3>A more complex example<a class="headerlink" href="#a-more-complex-example" title="Permalink to this headline"></a></h3>
<p>We now build a more complex <code class="docutils literal notranslate"><span class="pre">ChannelAdder</span></code> example where the noise of single qubit gate operations on different bits of the chip can be ignored, while the two qubit gates have different depolarizing channels on different bits, and the measurement of the circuit has a bit flip error with a flip probability of 0.01.</p>
<p>We assume that the depolarizing channels on different bits are:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dc0</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">DepolarizingChannel</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
<span class="n">dc1</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">DepolarizingChannel</span><span class="p">(</span><span class="mf">0.02</span><span class="p">)</span>
<span class="n">dc2</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">DepolarizingChannel</span><span class="p">(</span><span class="mf">0.03</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Then we define an <code class="docutils literal notranslate"><span class="pre">Adder</span></code> that meets the requirements:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.core.circuit</span> <span class="kn">import</span> <span class="n">QubitNumberConstrain</span>
<span class="n">noise_adder</span> <span class="o">=</span> <span class="n">SequentialAdder</span><span class="p">([</span>
    <span class="n">MixerAdder</span><span class="p">([</span>
        <span class="n">NoiseExcluder</span><span class="p">(),</span>
        <span class="n">ReverseAdder</span><span class="p">(</span><span class="n">MeasureAccepter</span><span class="p">()),</span>
        <span class="n">QubitNumberConstrain</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">NoiseChannelAdder</span><span class="p">(</span><span class="n">dc0</span><span class="p">,</span> <span class="n">focus_on</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
    <span class="p">]),</span>
    <span class="n">MixerAdder</span><span class="p">([</span>
        <span class="n">NoiseExcluder</span><span class="p">(),</span>
        <span class="n">ReverseAdder</span><span class="p">(</span><span class="n">MeasureAccepter</span><span class="p">()),</span>
        <span class="n">QubitNumberConstrain</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">NoiseChannelAdder</span><span class="p">(</span><span class="n">dc1</span><span class="p">,</span> <span class="n">focus_on</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">]),</span>
    <span class="n">MixerAdder</span><span class="p">([</span>
        <span class="n">NoiseExcluder</span><span class="p">(),</span>
        <span class="n">ReverseAdder</span><span class="p">(</span><span class="n">MeasureAccepter</span><span class="p">()),</span>
        <span class="n">QubitNumberConstrain</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">NoiseChannelAdder</span><span class="p">(</span><span class="n">dc2</span><span class="p">,</span> <span class="n">focus_on</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
    <span class="p">]),</span>
    <span class="n">MixerAdder</span><span class="p">([</span>
        <span class="n">NoiseExcluder</span><span class="p">(),</span>
        <span class="n">MeasureAccepter</span><span class="p">(),</span>
        <span class="n">BitFlipAdder</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
    <span class="p">],</span> <span class="n">add_after</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
<span class="p">])</span>
<span class="n">noise_adder</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SequentialAdder&lt;
  MixerAdder&lt;
    NoiseExcluder&lt;&gt;
    ReverseAdder&lt;
      MeasureAccepter&lt;&gt;
    &gt;
    QubitNumberConstrain&lt;n_qubits=2, with_ctrl=True&gt;
    NoiseChannelAdder&lt;channel=DC(p=1/100), with_ctrl=True&gt;
  &gt;
  MixerAdder&lt;
    NoiseExcluder&lt;&gt;
    ReverseAdder&lt;
      MeasureAccepter&lt;&gt;
    &gt;
    QubitNumberConstrain&lt;n_qubits=2, with_ctrl=True&gt;
    NoiseChannelAdder&lt;channel=DC(p=1/50), with_ctrl=True&gt;
  &gt;
  MixerAdder&lt;
    NoiseExcluder&lt;&gt;
    ReverseAdder&lt;
      MeasureAccepter&lt;&gt;
    &gt;
    QubitNumberConstrain&lt;n_qubits=2, with_ctrl=True&gt;
    NoiseChannelAdder&lt;channel=DC(p=0.03), with_ctrl=True&gt;
  &gt;
  MixerAdder&lt;
    NoiseExcluder&lt;&gt;
    MeasureAccepter&lt;&gt;
    BitFlipAdder&lt;flip_rate=0.01, with_ctrl=True&gt;
  &gt;
&gt;
</pre></div></div>
</div>
<p>Suppose the quantum circuit we want to process is the first-order Trotter approximation circuit of the time-evolving Hamiltonian</p>
<div class="math notranslate nohighlight">
\[H=a_{01} Z_0Z_1 + a_{12} Z_1Z_2 + b_0 X_0 + b_1 X_1 + b_2 X_2\]</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.core.operators</span> <span class="kn">import</span> <span class="n">TimeEvolution</span><span class="p">,</span> <span class="n">QubitOperator</span>

<span class="n">ham</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span>
    <span class="n">QubitOperator</span><span class="p">(</span><span class="s1">&#39;X0&#39;</span><span class="p">,</span> <span class="s1">&#39;b_0&#39;</span><span class="p">),</span>
    <span class="n">QubitOperator</span><span class="p">(</span><span class="s1">&#39;X1&#39;</span><span class="p">,</span> <span class="s1">&#39;b_1&#39;</span><span class="p">),</span>
    <span class="n">QubitOperator</span><span class="p">(</span><span class="s1">&#39;X2&#39;</span><span class="p">,</span> <span class="s1">&#39;b_2&#39;</span><span class="p">),</span>
    <span class="n">QubitOperator</span><span class="p">(</span><span class="s1">&#39;Z0 Z1&#39;</span><span class="p">,</span> <span class="s1">&#39;a_01&#39;</span><span class="p">),</span>
    <span class="n">QubitOperator</span><span class="p">(</span><span class="s1">&#39;Z1 Z2&#39;</span><span class="p">,</span> <span class="s1">&#39;a_12&#39;</span><span class="p">)</span>
<span class="p">])</span>
<span class="n">ham</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
 b_0 [X0] +
 b_1 [X1] +
 b_2 [X2] +
a_01 [Z0 Z1] +
a_12 [Z1 Z2]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">circ</span> <span class="o">=</span> <span class="n">TimeEvolution</span><span class="p">(</span><span class="n">ham</span><span class="p">)</span><span class="o">.</span><span class="n">circuit</span>
<span class="n">circ</span><span class="o">.</span><span class="n">barrier</span><span class="p">()</span>
<span class="n">circ</span><span class="o">.</span><span class="n">measure_all</span><span class="p">()</span>
<span class="n">circ</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/noise_simulator_18_0.svg" src="_images/noise_simulator_18_0.svg" /></div>
</div>
<p>Here is the processed quantum circuit after being processed by the <code class="docutils literal notranslate"><span class="pre">noise_adder</span></code> defined above:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">noise_adder</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/noise_simulator_20_0.svg" src="_images/noise_simulator_20_0.svg" /></div>
</div>
</section>
<section id="channeladder-list">
<h3><code class="docutils literal notranslate"><span class="pre">ChannelAdder</span></code> list<a class="headerlink" href="#channeladder-list" title="Permalink to this headline"></a></h3>
<p>Here are some of the existing <code class="docutils literal notranslate"><span class="pre">ChannelAdder</span></code>s in MindQuantum and their specific meanings:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">ChannelAdder</span></code></p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ChannelAdderBase</p></td>
<td><p>Add channels before or after quantum gates</p></td>
</tr>
<tr class="row-odd"><td><p>NoiseChannelAdder</p></td>
<td><p>Add a single-bit quantum channel</p></td>
</tr>
<tr class="row-even"><td><p>MeasureAccepter</p></td>
<td><p>Select measurement gates</p></td>
</tr>
<tr class="row-odd"><td><p>ReverseAdder</p></td>
<td><p>Flip the accept and reject rules of the given channel adder</p></td>
</tr>
<tr class="row-even"><td><p>NoiseExcluder</p></td>
<td><p>Exclude noise gates</p></td>
</tr>
<tr class="row-odd"><td><p>BitFlipAdder</p></td>
<td><p>Add a bit flip channel before or after the quantum gate</p></td>
</tr>
<tr class="row-even"><td><p>MixerAdder</p></td>
<td><p>Execute all adders in sequence when the accept and reject sets of the sub-adders are met</p></td>
</tr>
<tr class="row-odd"><td><p>SequentialAdder</p></td>
<td><p>Execute each adder in sequence</p></td>
</tr>
<tr class="row-even"><td><p>QubitNumberConstrain</p></td>
<td><p>Only apply noise channels to quantum gates with <code class="docutils literal notranslate"><span class="pre">n_qubits</span></code> bits</p></td>
</tr>
<tr class="row-odd"><td><p>QubitIDConstrain</p></td>
<td><p>Only apply noise channels to quantum gates with the given bit number</p></td>
</tr>
</tbody>
</table>
<p>For API documentation of <code class="docutils literal notranslate"><span class="pre">ChannelAdder</span></code> in MindQuantum, please refer to: <a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/en/master/mindquantum.core.circuit.html#channel-adder">channel_adder</a></p>
</section>
</section>
<section id="noise-simulator-based-on-channeladder">
<h2>Noise simulator based on <code class="docutils literal notranslate"><span class="pre">ChannelAdder</span></code><a class="headerlink" href="#noise-simulator-based-on-channeladder" title="Permalink to this headline"></a></h2>
<p>We can combine the various <code class="docutils literal notranslate"><span class="pre">Adder</span></code> defined above with existing simulators to create a noisy simulator.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.simulator</span> <span class="kn">import</span> <span class="n">Simulator</span>
<span class="kn">from</span> <span class="nn">mindquantum.simulator.noise</span> <span class="kn">import</span> <span class="n">NoiseBackend</span>

<span class="n">noiseless_sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">(</span><span class="s1">&#39;mqvector&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">noiseless_circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">z</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">display_svg</span><span class="p">(</span><span class="n">noiseless_circ</span><span class="o">.</span><span class="n">svg</span><span class="p">())</span>
<span class="n">res1</span> <span class="o">=</span> <span class="n">noiseless_sim</span><span class="o">.</span><span class="n">sampling</span><span class="p">(</span><span class="n">noiseless_circ</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">res1</span><span class="o">.</span><span class="n">svg</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/noise_simulator_23_0.svg" src="_images/noise_simulator_23_0.svg" /></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/noise_simulator_23_1.svg" src="_images/noise_simulator_23_1.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">noise_sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">(</span><span class="n">NoiseBackend</span><span class="p">(</span><span class="s1">&#39;mqvector&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">seq_adder</span><span class="p">))</span>
<span class="n">res2</span> <span class="o">=</span> <span class="n">noise_sim</span><span class="o">.</span><span class="n">sampling</span><span class="p">(</span><span class="n">noiseless_circ</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">res2</span><span class="o">.</span><span class="n">svg</span><span class="p">())</span>
<span class="n">display</span><span class="p">(</span><span class="n">noise_sim</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">transform_circ</span><span class="p">(</span><span class="n">noiseless_circ</span><span class="p">)</span><span class="o">.</span><span class="n">svg</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/noise_simulator_24_0.svg" src="_images/noise_simulator_24_0.svg" /></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/noise_simulator_24_1.svg" src="_images/noise_simulator_24_1.svg" /></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="noise.html" class="btn btn-neutral float-left" title="Noisy Quantum Circuit" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="qubit_mapping.html" class="btn btn-neutral float-right" title="Qubit Mapping" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>