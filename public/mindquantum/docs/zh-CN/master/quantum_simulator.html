<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>量子模拟器 &mdash; MindSpore master 文档</title><script>;(()=>{const e=localStorage.getItem("ms-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;(e?"dark"===e:t)&&document.documentElement.setAttribute("data-o-theme","dark")})();</script><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script><script src="_static/jquery.js"></script>
        <script src="_static/js/theme.js"></script><script src="_static/underscore.js"></script><script src="_static/doctools.js"></script><script src="_static/translations.js"></script><script crossorigin="anonymous" integrity="sha256-1fEPhSsRKlFKGfK3eO710tEweHh1fwokU5wFGDHO+vg=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script><script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script><script async="async" src="https://cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="量子神经网络初体验" href="initial_experience_of_quantum_neural_network.html" />
    <link rel="prev" title="变分量子线路" href="parameterized_quantum_circuit.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">安装部署</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mindquantum_install.html">安装MindSpore Quantum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">基础使用指南</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="parameterized_quantum_circuit.html">变分量子线路</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">量子模拟器</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#概述">概述</a></li>
<li class="toctree-l2"><a class="reference internal" href="#环境准备">环境准备</a></li>
<li class="toctree-l2"><a class="reference internal" href="#作用量子门和量子线路">作用量子门和量子线路</a></li>
<li class="toctree-l2"><a class="reference internal" href="#设置并获取模拟器状态">设置并获取模拟器状态</a></li>
<li class="toctree-l2"><a class="reference internal" href="#量子线路采样">量子线路采样</a></li>
<li class="toctree-l2"><a class="reference internal" href="#模拟器支持情况">模拟器支持情况</a></li>
<li class="toctree-l2"><a class="reference internal" href="#模拟器的选择">模拟器的选择</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="initial_experience_of_quantum_neural_network.html">量子神经网络初体验</a></li>
<li class="toctree-l1"><a class="reference internal" href="get_gradient_of_PQC_with_mindquantum.html">变分量子线路梯度计算进阶</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_operations_of_quantum_circuit.html">量子线路高阶操作</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantum_measurement.html">量子测量</a></li>
<li class="toctree-l1"><a class="reference internal" href="noise.html">含噪声量子线路</a></li>
<li class="toctree-l1"><a class="reference internal" href="noise_simulator.html">噪声模拟器</a></li>
<li class="toctree-l1"><a class="reference internal" href="qubit_mapping.html">比特映射</a></li>
<li class="toctree-l1"><a class="reference internal" href="bloch_sphere.html">布洛赫球</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">变分量子算法</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="classification_of_iris_by_qnn.html">通过量子神经网络对鸢尾花进行分类</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantum_approximate_optimization_algorithm.html">量子近似优化算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="qnn_for_nlp.html">量子神经网络在自然语言处理中的应用</a></li>
<li class="toctree-l1"><a class="reference internal" href="vqe_for_quantum_chemistry.html">在量子化学计算中应用量子变分求解器</a></li>
<li class="toctree-l1"><a class="reference internal" href="equivalence_checking_of_PQC.html">含参量子线路的等价性检查</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">通用量子算法</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quantum_phase_estimation.html">量子相位估计算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="grover_search_algorithm.html">基于MindSpore Quantum的Grover搜索算法和龙算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="shor_algorithm.html">基于MindSpore Quantum的Shor算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="hhl_algorithm.html">HHL 算法</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API参考</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">总览</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.dtype.html">mindquantum.dtype</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.core.html">mindquantum.core</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.simulator.html">mindquantum.simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.framework.html">mindquantum.framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.algorithm.html">mindquantum.algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.device.html">mindquantum.device</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.io.html">mindquantum.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.engine.html">mindquantum.engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.utils.html">mindquantum.utils</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="RELEASE.html">Release Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>量子模拟器</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/quantum_simulator.ipynb.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars and line breaks on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
    white-space: pre;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="量子模拟器">
<h1>量子模拟器<a class="headerlink" href="#量子模拟器" title="永久链接至标题"></a></h1>
<p><a class="reference external" href="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/notebook/master/mindquantum/zh_cn/mindspore_quantum_simulator.ipynb"><img alt="下载Notebook" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/master/resource/_static/logo_notebook.svg" /></a>  <a class="reference external" href="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/notebook/master/mindquantum/zh_cn/mindspore_quantum_simulator.py"><img alt="下载样例代码" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/master/resource/_static/logo_download_code.svg" /></a>  <a class="reference external" href="https://gitee.com/mindspore/docs/blob/master/docs/mindquantum/docs/source_zh_cn/quantum_simulator.ipynb"><img alt="查看源文件" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/master/resource/_static/logo_source.svg" /></a></p>
<section id="概述">
<h2>概述<a class="headerlink" href="#概述" title="永久链接至标题"></a></h2>
<p>搭建出量子线路后，我们需要指定一个后端来运行量子线路，在MindSpore Quantum中，我们可以利用量子模拟器 <a class="reference external" href="https://mindspore.cn/mindquantum/docs/zh-CN/master/simulator/mindquantum.simulator.Simulator.html#mindquantum.simulator.Simulator">Simulator</a> 来对量子线路进行模拟运行。在本教程中我们声明一个两比特的<code class="docutils literal notranslate"><span class="pre">mqvector</span></code>模拟器，并以此来简介模拟器的关键功能。</p>
</section>
<section id="环境准备">
<h2>环境准备<a class="headerlink" href="#环境准备" title="永久链接至标题"></a></h2>
<p>导入本教程所依赖的模块。</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>                             <span class="c1"># 导入numpy库并简写为np</span>
<span class="kn">from</span> <span class="nn">mindquantum.simulator</span> <span class="kn">import</span> <span class="n">Simulator</span>    <span class="c1"># 从mindquantum.simulator中导入Simulator类</span>
<span class="kn">from</span> <span class="nn">mindquantum.core.gates</span> <span class="kn">import</span> <span class="n">X</span><span class="p">,</span> <span class="n">H</span><span class="p">,</span> <span class="n">RY</span>    <span class="c1"># 导入量子门H, X, RY</span>
</pre></div>
</div>
</div>
<p>说明：</p>
<p>（1）numpy是一个功能强大的Python库，主要用于对多维数组执行计算，支持大量的维度数组与矩阵运算，此外也针对数组运算提供大量的数学函数库；</p>
<p>（2）mindquantum是量子-经典混合计算框架，支持多种量子神经网络的训练和推理；</p>
<p>（3）搭建的量子线路中所需执行的量子门需要从mindquantum.core模块中导入；</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">(</span><span class="s1">&#39;mqvector&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>   <span class="c1">#声明一个两比特的mqvector模拟器</span>
<span class="n">sim</span>                              <span class="c1">#展示模拟器状态</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
mqvector simulator with 2 qubits (little endian).
Current quantum state:
1¦00⟩
</pre></div></div>
</div>
<p>在MindSpore Quantum中，我们可以在<code class="docutils literal notranslate"><span class="pre">mindquantum.simulator</span></code>模块导入模拟器。<a class="reference external" href="https://mindspore.cn/mindquantum/docs/zh-CN/master/simulator/mindquantum.simulator.Simulator.html#mindquantum.simulator.Simulator">Simulator</a> 类可以接受四个参数：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">backend</span></code>：所用到的模拟器名称，目前<code class="docutils literal notranslate"><span class="pre">mindquantum</span></code>支持<code class="docutils literal notranslate"><span class="pre">mqvector</span></code>、<code class="docutils literal notranslate"><span class="pre">mqvector_gpu</span></code>、<code class="docutils literal notranslate"><span class="pre">mqmatrix</span></code> 和 <a class="reference external" href="https://mindspore.cn/mindquantum/docs/zh-CN/master/simulator/mindquantum.simulator.NoiseBackend.html#mindquantum.simulator.NoiseBackend">NoiseBackend</a> 作为后端进行模拟。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_qubits</span></code>：模拟器所用到的比特数，也就是这里的2。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">seed</span></code>：模拟器在运行随机性相关算法时的随机种子，默认为一个随机数，可以不用提供。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dtype</span></code>: 模拟器模拟时用到的数据类型。由于量子态为复数，因此模拟器当前支持 <a class="reference external" href="https://mindspore.cn/mindquantum/docs/zh-CN/master/mindquantum.dtype.html">mindquantum.complex64</a> 的单精度模拟和 <a class="reference external" href="https://mindspore.cn/mindquantum/docs/zh-CN/master/mindquantum.dtype.html">mindquantum.complex128</a> 的双精度模拟，默认值为<a class="reference external" href="https://mindspore.cn/mindquantum/docs/zh-CN/master/mindquantum.dtype.html">mindquantum.complex128</a>。</p></li>
</ul>
<p>通过模拟器的输出结果我们可以发现，这是一个<code class="docutils literal notranslate"><span class="pre">mqvector</span></code>的2比特模拟器，并且是little endian的。这里little endian的意思是，整个模拟器中，我们都是将比特序号小的比特放在量子态矢量的右边。接下来，输出还说明了模拟器当前所处的量子态是多少，且在模拟器初始化后，当前的量子态默认处于零态。注意，量子模拟器始终会维护一个内部的量子态，当我们作用量子门或者量子线路到模拟器上时，这个量子态会随即发生改变，而当我们只是想获取关于这个量子态的一些信息时，这个量子态则不会改变。这里就涉及到对量子模拟器的两类操作：</p>
<ul class="simple">
<li><p>会改变量子态的操作，通常以<code class="docutils literal notranslate"><span class="pre">apply</span></code>开头，主要有如下几个</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">apply_gate</span></code>: 作用一个量子门到模拟器上</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apply_circuit</span></code>: 作用一个量子线路到模拟器上</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apply_hamiltonian</span></code>: 将一个哈密顿量作用到模拟器上，注意，此后模拟器的量子态将不再是一个真的量子态</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_qs</span></code>: 直接设置模拟器的当前量子态</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reset</span></code>: 重置模拟器的状态为|0⟩态</p></li>
</ul>
</li>
<li><p>不会改变量子态的操作，通常以<code class="docutils literal notranslate"><span class="pre">get</span></code>开头，主要有如下几个</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">get_qs</span></code>: 获取模拟器的当前量子态</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_expectation</span></code>: 计算模拟器当前量子态关于某个观察量的期望值</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_expectation_with_grad</span></code>: 跟上一个接口类似，只不过这个方法还会计算期望值关于参数化量子线路的梯度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sampling</span></code>: 在当前量子态下，对给定的量子线路进行采样</p></li>
</ul>
</li>
</ul>
<p>下面我们简单学习模拟器的基本操作。</p>
</section>
<section id="作用量子门和量子线路">
<h2>作用量子门和量子线路<a class="headerlink" href="#作用量子门和量子线路" title="永久链接至标题"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">(</span><span class="s1">&#39;mqvector&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>    <span class="c1">#声明一个2比特的mqvector模拟器</span>
<span class="n">sim</span><span class="o">.</span><span class="n">apply_gate</span><span class="p">(</span><span class="n">H</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>           <span class="c1">#作用一个Hadamard门到0号比特上</span>
<span class="n">sim</span>                               <span class="c1">#输出量子模拟器的信息</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
mqvector simulator with 2 qubits (little endian).
Current quantum state:
√2/2¦00⟩
√2/2¦01⟩
</pre></div></div>
</div>
<p>上面我们在量子模拟器的初态上作用了一个Hadamard门，并输出了演化过后的量子态。接下来我们生成一个参数化量子线路，并将其作用到当前的量子态上。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.core.circuit</span> <span class="kn">import</span> <span class="n">Circuit</span>   <span class="c1"># 导入Circuit模块，用于搭建量子线路</span>

<span class="n">circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span>                               <span class="c1">#声明一个空的量子线路</span>
<span class="n">circ</span> <span class="o">+=</span> <span class="n">H</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                                <span class="c1">#向其中添加一个hadamard门，并作用到1号比特上</span>
<span class="n">circ</span> <span class="o">+=</span> <span class="n">RY</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                          <span class="c1">#向其中添加一个参数化的RY门，并作用到0号比特上</span>
<span class="n">circ</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>                                     <span class="c1">#绘制SVG格式的量子线路图片</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/quantum_simulator_8_0.svg" src="_images/quantum_simulator_8_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">.</span><span class="n">apply_circuit</span><span class="p">(</span><span class="n">circ</span><span class="p">,</span> <span class="n">pr</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mf">1.234</span><span class="p">})</span>  <span class="c1">#作用一个量子线路，当线路是一个参数化量子线路时，我们还需要提供参数值。</span>
<span class="n">sim</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
mqvector simulator with 2 qubits (little endian).
Current quantum state:
0.11851349145283657¦00⟩
0.6971044056263442¦01⟩
0.11851349145283657¦10⟩
0.6971044056263442¦11⟩
</pre></div></div>
</div>
<p>在上面的代码中，我们先生成了一个参数化量子线路<code class="docutils literal notranslate"><span class="pre">circ</span></code>，随后我们将其作用到量子模拟器上，并通过传入字典的方式，将参数<code class="docutils literal notranslate"><span class="pre">a</span></code>设置为<code class="docutils literal notranslate"><span class="pre">1.234</span></code>。最后输出量子模拟器演化出来的量子态。</p>
</section>
<section id="设置并获取模拟器状态">
<h2>设置并获取模拟器状态<a class="headerlink" href="#设置并获取模拟器状态" title="永久链接至标题"></a></h2>
<p>我们使用<code class="docutils literal notranslate"><span class="pre">get_qs(ket=False)</span></code>查看当前模拟器的状态， 参数ket是一个bool类型的数，它决定了当前模拟器的状态是否以ket的形式返回，ket=False时是以numpy.ndarray形式，ket=True时是以ket形式。默认ket=False。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">get_qs</span><span class="p">())</span>  <span class="c1">#查看模拟器状态,以numpy.ndarray形式返回结果</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[0.11851349+0.j 0.69710441+0.j 0.11851349+0.j 0.69710441+0.j]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">get_qs</span><span class="p">(</span><span class="kc">True</span><span class="p">))</span>  <span class="c1">#查看模拟器状态,以ket形式返回结果</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.11851349145283657¦00⟩
0.6971044056263442¦01⟩
0.11851349145283657¦10⟩
0.6971044056263442¦11⟩
</pre></div></div>
</div>
<p>在实际写代码过程中，我们常常需要将模拟器指定一个初始态开始演化，这个操作可以使用<code class="docutils literal notranslate"><span class="pre">set_qs()</span></code>实现。</p>
<p>例如，我们希望模拟器状态为</p>
<div class="math notranslate nohighlight">
\[\frac{\sqrt{3}}{3}|00⟩+\frac{\sqrt{6}}{3}|11⟩\]</div>
<p>第一步：我们计算出目标状态的向量形式：</p>
<div class="math notranslate nohighlight">
\[\begin{split}\frac{\sqrt{3}}{3}|00⟩+\frac{\sqrt{6}}{3}|11⟩ =\frac{\sqrt{3}}{3}\times
\left(
\begin{array}{l}
1\\
0
\end{array}
\right)
\otimes
\left(
\begin{array}{l}
1\\
0
\end{array}
\right)+
\frac{\sqrt{6}}{3}\times
\left(
\begin{array}{l}
0\\
1
\end{array}
\right)\otimes
\left(
\begin{array}{l}
0\\
1
\end{array}
\right)= \frac{\sqrt{3}}{3}\times
\left(
\begin{array}{l}
1\\
0\\
0\\
0
\end{array}
\right)+
\frac{\sqrt{6}}{3}\times
\left(
\begin{array}{l}
0\\
0\\
0\\
1
\end{array}
\right)=
\left(
\begin{array}{l}
\frac{\sqrt{3}}{3}\\
0\\
0\\
\frac{\sqrt{6}}{3}
\end{array}
\right)\end{split}\]</div>
<p>第二步：我们将这个向量使用<code class="docutils literal notranslate"><span class="pre">set_qs()</span></code>赋值给模拟器，让其作为模拟器的状态：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">.</span><span class="n">set_qs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="o">**</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="o">**</span><span class="mf">0.5</span><span class="p">]))</span>        <span class="c1">#设置模拟器状态，无需归一化</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">get_qs</span><span class="p">(</span><span class="kc">True</span><span class="p">))</span>                             <span class="c1">#查看模拟器状态</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.5773502691896258¦00⟩
0.816496580927726¦11⟩
</pre></div></div>
</div>
<p>通过<code class="docutils literal notranslate"><span class="pre">get_qs()</span></code>查看模拟器状态可以发现，当前模拟器状态即为我们希望设置的<span class="math notranslate nohighlight">\(\frac{\sqrt{3}}{3}|00⟩+\frac{\sqrt{6}}{3}|11⟩\)</span>。</p>
<p>在实际编程过程中，我们常常需要多次模拟电路，通过多开模拟器的方式会导致内存占用非常大，我们可以通过现有模拟器复位的方式来复用模拟器，从而减少内存消耗。</p>
<p>我们使用<code class="docutils literal notranslate"><span class="pre">reset()</span></code>来复位模拟器：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>          <span class="c1">#复位模拟器</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">get_qs</span><span class="p">())</span>  <span class="c1">#查看模拟器状态</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[1.+0.j 0.+0.j 0.+0.j 0.+0.j]
</pre></div></div>
</div>
<p>可以发现，当前模拟器被复位成了初始的<span class="math notranslate nohighlight">\(1|00⟩\)</span>态，相当于一个全新的模拟器。</p>
<p>因此，我们可以根据自身所需的量子初态，设置对应的量子模拟器，并运行自定义的量子线路。赶紧动手运行你构造出的的第一个量子线路吧！</p>
</section>
<section id="量子线路采样">
<h2>量子线路采样<a class="headerlink" href="#量子线路采样" title="永久链接至标题"></a></h2>
<p>线路采样是指对量子线路执行多次模拟测量，统计测量出各种结果出现的频次。<strong>采样不会改变量子线路中的状态</strong>。</p>
<p><code class="docutils literal notranslate"><span class="pre">sampling(circuit,</span> <span class="pre">pr=None,</span> <span class="pre">shots=1,</span> <span class="pre">seed=None)</span></code>是<code class="docutils literal notranslate"><span class="pre">MindSpore</span> <span class="pre">Quantum</span></code>中提供的对模拟器进行线路采样方法，它接受四个参数：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">circuit</span> <span class="pre">(Circuit)</span></code>：希望进行采样的量子线路，注意，该线路中必须包含至少一个测量操作（即采样点）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pr</span> <span class="pre">(Union[None,</span> <span class="pre">dict,</span> <span class="pre">ParameterResolver])</span></code>：parameter resolver，当 <code class="docutils literal notranslate"><span class="pre">circuit</span></code>是含参线路时，需要给出参数的值。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shots</span> <span class="pre">(int)</span></code>：采样的次数，默认为1。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">seed</span></code>：采样时的随机种子，默认为一个随机数，可以不用提供。</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 不含参线路采样：</span>
<span class="kn">from</span> <span class="nn">mindquantum.core.gates</span> <span class="kn">import</span> <span class="n">Measure</span>  <span class="c1"># 引入测量门</span>

<span class="n">circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span>                            <span class="c1"># 初始化量子线路</span>
<span class="n">circ</span> <span class="o">+=</span> <span class="n">H</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                             <span class="c1"># H门作用在第0位量子比特</span>
<span class="n">circ</span> <span class="o">+=</span> <span class="n">X</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>                          <span class="c1"># X门作用在第1位量子比特且受第0位量子比特控制</span>
<span class="n">circ</span> <span class="o">+=</span> <span class="n">Measure</span><span class="p">(</span><span class="s1">&#39;q0&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                 <span class="c1"># 在0号量子比特作用一个测量，并将该测量命名为&#39;q0&#39;</span>
<span class="n">circ</span> <span class="o">+=</span> <span class="n">Measure</span><span class="p">(</span><span class="s1">&#39;q1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                 <span class="c1"># 在1号量子比特作用一个测量，并将该测量命名为&#39;q1&#39;</span>
<span class="n">circ</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>                                  <span class="c1"># 绘制SVG格式的量子线路图片</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/quantum_simulator_19_0.svg" src="_images/quantum_simulator_19_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">sampling</span><span class="p">(</span><span class="n">circ</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>  <span class="c1"># 对上面定义的线路采样1000次</span>
<span class="n">result</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space: pre;"><span style="color: #808000; text-decoration-color: #808000">shots: </span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1000</span>
<span style="color: #808000; text-decoration-color: #808000">Keys: q1 q0│</span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0.00</span><span style="color: #808000; text-decoration-color: #808000">   </span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0.128</span><span style="color: #808000; text-decoration-color: #808000">       </span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0.256</span><span style="color: #808000; text-decoration-color: #808000">       </span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0.384</span><span style="color: #808000; text-decoration-color: #808000">       </span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0.512</span><span style="color: #808000; text-decoration-color: #808000">        </span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0.64</span>
<span style="color: #808000; text-decoration-color: #808000">───────────┼───────────┴───────────┴───────────┴───────────┴───────────┴</span>
<span style="color: #808000; text-decoration-color: #808000">         </span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">00</span><span style="color: #808000; text-decoration-color: #808000">│▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒</span>
<span style="color: #808000; text-decoration-color: #808000">           │</span>
<span style="color: #808000; text-decoration-color: #808000">         </span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">11</span><span style="color: #808000; text-decoration-color: #808000">│▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</span>
<span style="color: #808000; text-decoration-color: #808000">           │</span>
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">'00'</span><span style="color: #808000; text-decoration-color: #808000">: </span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">488</span><span style="color: #808000; text-decoration-color: #808000">, </span><span style="color: #008000; text-decoration-color: #008000">'11'</span><span style="color: #808000; text-decoration-color: #808000">: </span><span style="color: #008080; text-decoration-color: #008080; font-weight: bold">512</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">}</span>
</pre></div>
</div>
<p>MindSpore Quantum还提供了采样结果绘制SVG图的功能：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>  <span class="c1"># 打印出测量结果的SVG格式</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/quantum_simulator_22_0.svg" src="_images/quantum_simulator_22_0.svg" /></div>
</div>
<p>我们可以看到，采样1000中，’00’出现了488次，’11’出现了512次。我们搭建的线路实际上制备出了一个贝尔态<span class="math notranslate nohighlight">\(\frac{\sqrt{2}}{2}|00⟩+\frac{\sqrt{2}}{2}|11⟩\)</span>。直观上，我们可以看到对该状态进行测量得到’00’的概率为<span class="math notranslate nohighlight">\(\frac{1}{2}\)</span>,得到’11’的概率为<span class="math notranslate nohighlight">\(\frac{1}{2}\)</span>，采样结果符合概率，细微的误差是由模拟器噪声导致。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 含参线路采样：</span>
<span class="n">para_circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span>             <span class="c1"># 初始化量子线路</span>
<span class="n">para_circ</span> <span class="o">+=</span> <span class="n">H</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>              <span class="c1"># H门作用在第0位量子比特</span>
<span class="n">para_circ</span> <span class="o">+=</span> <span class="n">X</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>           <span class="c1"># X门作用在第1位量子比特且受第0位量子比特控制</span>
<span class="n">para_circ</span> <span class="o">+=</span> <span class="n">RY</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>    <span class="c1"># RY(theta)门作用在第2位量子比特</span>
<span class="n">para_circ</span> <span class="o">+=</span> <span class="n">Measure</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>   <span class="c1"># 在0号量子比特作用一个测量，并将该测量命名为&#39;q0&#39;</span>
<span class="n">para_circ</span> <span class="o">+=</span> <span class="n">Measure</span><span class="p">(</span><span class="s1">&#39;q1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># 在1号量子比特作用一个测量，并将该测量命名为&#39;q1&#39;</span>
<span class="n">para_circ</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>                   <span class="c1"># 绘制SVG格式的量子线路图片</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/quantum_simulator_24_0.svg" src="_images/quantum_simulator_24_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">sampling</span><span class="p">(</span><span class="n">para_circ</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;theta&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span> <span class="n">shots</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>  <span class="c1"># 将上面定义的线路参数&#39;theta&#39;赋值为0采样1000次</span>
<span class="n">result</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/quantum_simulator_25_0.svg" src="_images/quantum_simulator_25_0.svg" /></div>
</div>
<p>我们可以看到，采样结果中’00’出现了513次，’11’出现了487次。事实上把RY门参数赋值为0，它即为我们熟悉的I门，相当于不对线路做任何操作，因此该采样线路与上面不含参线路本质是同一个，可以观察到二次采样结果几乎相同，符合预期结果。</p>
</section>
<section id="模拟器支持情况">
<h2>模拟器支持情况<a class="headerlink" href="#模拟器支持情况" title="永久链接至标题"></a></h2>
<p>当前 MindSpore Quantum 支持多种模拟器，具体情况如下：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 52%" />
<col style="width: 38%" />
<col style="width: 4%" />
<col style="width: 3%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>模拟器名称</p></th>
<th class="head"><p>特性</p></th>
<th class="head"><p>是否支持GPU</p></th>
<th class="head"><p>单精度支持</p></th>
<th class="head"><p>多精度支持</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mqvector</span></code></p></td>
<td><p>全振幅模拟器</p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mqvector_gpu</span></code></p></td>
<td><p>GPU版全振幅模拟器</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mqmatrix</span></code></p></td>
<td><p>密度矩阵模拟器</p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://mindspore.cn/mindquantum/docs/zh-CN/master/simulator/mindquantum.simulator.NoiseBackend.html#mindquantum.simulator.NoiseBackend">NoiseBackend</a></p></td>
<td><p>噪声模拟器，教程请参考：<a class="reference external" href="https://mindspore.cn/mindquantum/docs/zh-CN/master/noise_simulator.html">噪声模拟器</a></p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
</tr>
</tbody>
</table>
</section>
<section id="模拟器的选择">
<h2>模拟器的选择<a class="headerlink" href="#模拟器的选择" title="永久链接至标题"></a></h2>
<p>我们知道，量子态的维度是随着比特数的增多而指数增加的，因此模拟大比特量子系统时，需要的物理内存将急剧增加。下面，我们给出不同比特下，存储一个全振幅量子态所需要的内存空间：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 45%" />
<col style="width: 43%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>比特数</p></th>
<th class="head"><p>mindquantum.complex128</p></th>
<th class="head"><p>mindquantum.complex64</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>6</p></td>
<td><p>1kB</p></td>
<td><p>0.5kB</p></td>
</tr>
<tr class="row-odd"><td><p>16</p></td>
<td><p>1MB</p></td>
<td><p>0.5MB</p></td>
</tr>
<tr class="row-even"><td><p>26</p></td>
<td><p>1GB</p></td>
<td><p>0.5GB</p></td>
</tr>
<tr class="row-odd"><td><p>30</p></td>
<td><p>16GB</p></td>
<td><p>8GB</p></td>
</tr>
<tr class="row-even"><td><p>36</p></td>
<td><p>1TB</p></td>
<td><p>0.5TB</p></td>
</tr>
<tr class="row-odd"><td><p>40</p></td>
<td><p>16TB</p></td>
<td><p>8TB</p></td>
</tr>
<tr class="row-even"><td><p>46</p></td>
<td><p>1PB</p></td>
<td><p>0.5PB</p></td>
</tr>
</tbody>
</table>
<p>由此可见，在模拟大比特系统时，我们可以考虑使用单精度类型来减小内存占用量。在 MindSpore Quantum 中，我们可以通过 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 来方便的修改模拟器的数据类型：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindquantum</span> <span class="k">as</span> <span class="nn">mq</span>
<span class="kn">from</span> <span class="nn">mindquantum.simulator</span> <span class="kn">import</span> <span class="n">Simulator</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">(</span><span class="s1">&#39;mqvector&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">mq</span><span class="o">.</span><span class="n">complex64</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
mqvector simulator with 2 qubits (little endian), dtype: mindquantum.complex64.
Current quantum state:
1¦00⟩
</pre></div></div>
</div>
<p>下面我们给出一些经验规则，帮助大家来合理的选择不同的模拟器：</p>
<ul class="simple">
<li><p>量子系统小于8比特时：<code class="docutils literal notranslate"><span class="pre">mqvector</span></code>。在小比特时，CPU反而会比GPU运行快速。</p></li>
<li><p>量子系统大于8比特时：<code class="docutils literal notranslate"><span class="pre">mqvector_gpu</span></code>。在大比特时，GPU将会发挥其并行运算优势。</p></li>
<li><p>混态模拟时：<code class="docutils literal notranslate"><span class="pre">mqmatrix</span></code>。<code class="docutils literal notranslate"><span class="pre">mqmatrix</span></code>是密度矩阵模拟器，因此支持混态系统的模拟。</p></li>
<li><p>量子系统含噪声时：<a class="reference external" href="https://mindspore.cn/mindquantum/docs/zh-CN/master/simulator/mindquantum.simulator.NoiseBackend.html#mindquantum.simulator.NoiseBackend">NoiseBackend</a>。通过该模拟器，我们可以方便的往线路中添加不同的量子信道，达到对噪声系统的模拟。</p></li>
<li><p>当进行量子化学模拟时：<code class="docutils literal notranslate"><span class="pre">mindquantum.complex128</span></code>。量子化学模拟需要模拟基态能量达到化学精度，因此建议用双精度类型。</p></li>
<li><p>当进行量子机器学习时：<code class="docutils literal notranslate"><span class="pre">mindquantum.complex64</span></code>。机器学习类任务对精度要求不敏感，因此建议用单精度类型。</p></li>
</ul>
<p>想进一步学习如何对量子线路做测量操作，想了解采样结果分布的理论解释，请点击：<a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/zh-CN/master/quantum_measurement.html">量子测量教程</a>。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.utils.show_info</span> <span class="kn">import</span> <span class="n">InfoTable</span>

<span class="n">InfoTable</span><span class="p">(</span><span class="s1">&#39;mindquantum&#39;</span><span class="p">,</span> <span class="s1">&#39;scipy&#39;</span><span class="p">,</span> <span class="s1">&#39;numpy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table border="1">
  <tr>
    <th>Software</th>
    <th>Version</th>
  </tr>
<tr><td>mindquantum</td><td>0.9.0</td></tr>
<tr><td>scipy</td><td>1.10.1</td></tr>
<tr><td>numpy</td><td>1.21.6</td></tr>
<tr>
    <th>System</th>
    <th>Info</th>
</tr>
<tr><td>Python</td><td>3.9.13</td></tr><tr><td>OS</td><td>Linux x86_64</td></tr><tr><td>Memory</td><td>16.62 GB</td></tr><tr><td>CPU Max Thread</td><td>16</td></tr><tr><td>Date</td><td>Wed Aug 23 16:17:43 2023</td></tr>
</table></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="parameterized_quantum_circuit.html" class="btn btn-neutral float-left" title="变分量子线路" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="initial_experience_of_quantum_neural_network.html" class="btn btn-neutral float-right" title="量子神经网络初体验" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 MindSpore.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>