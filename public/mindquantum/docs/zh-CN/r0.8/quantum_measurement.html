

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>量子测量 &mdash; MindSpore master 文档</title>
  

  
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
   
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  
  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
        
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="含噪声量子线路" href="noise.html" />
    <link rel="prev" title="量子线路高阶操作" href="advanced_operations_of_quantum_circuit.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> MindSpore
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">安装部署</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mindquantum_install.html">安装MindQuantum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">基础使用指南</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="parameterized_quantum_circuit.html">变分量子线路</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantum_simulator.html">量子模拟器</a></li>
<li class="toctree-l1"><a class="reference internal" href="initial_experience_of_quantum_neural_network.html">量子神经网络初体验</a></li>
<li class="toctree-l1"><a class="reference internal" href="get_gradient_of_PQC_with_mindquantum.html">变分量子线路梯度计算进阶</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_operations_of_quantum_circuit.html">量子线路高阶操作</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">量子测量</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#概述">概述</a></li>
<li class="toctree-l2"><a class="reference internal" href="#计算基测量">计算基测量</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#单量子比特在计算基下的测量">单量子比特在计算基下的测量</a></li>
<li class="toctree-l3"><a class="reference internal" href="#多量子比特在计算基下的测量——以双量子比特为例">多量子比特在计算基下的测量——以双量子比特为例</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#测量系统中所有比特">测量系统中所有比特</a></li>
<li class="toctree-l4"><a class="reference internal" href="#测量系统中单个比特">测量系统中单个比特</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#计算基测量的mindquantum实现">计算基测量的MindQuantum实现</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#mindquantum实现测量系统中所有比特">MindQuantum实现测量系统中所有比特</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mindquantum实现测量系统中单个比特">MindQuantum实现测量系统中单个比特</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#投影测量">投影测量</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pauli测量">Pauli测量</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="noise.html">含噪声量子线路</a></li>
<li class="toctree-l1"><a class="reference internal" href="bloch_sphere.html">布洛赫球</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">变分量子算法</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="classification_of_iris_by_qnn.html">通过量子神经网络对鸢尾花进行分类</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantum_approximate_optimization_algorithm.html">量子近似优化算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="qnn_for_nlp.html">量子神经网络在自然语言处理中的应用</a></li>
<li class="toctree-l1"><a class="reference internal" href="vqe_for_quantum_chemistry.html">在量子化学计算中应用量子变分求解器</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">通用量子算法</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quantum_phase_estimation.html">量子相位估计算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="grover_search_algorithm.html">基于MindQuantum的Grover搜索算法和龙算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="shor_algorithm.html">基于MindQuantum的Shor算法</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API参考</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.core.html">mindquantum.core</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.simulator.html">mindquantum.simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.framework.html">mindquantum.framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.algorithm.html">mindquantum.algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.io.html">mindquantum.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.engine.html">mindquantum.engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindquantum.utils.html">mindquantum.utils</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="RELEASE.html">Release Notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MindSpore</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>量子测量</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/quantum_measurement.ipynb.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars and line breaks on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
    white-space: pre;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="量子测量">
<h1>量子测量<a class="headerlink" href="#量子测量" title="永久链接至标题"></a></h1>
<p><a class="reference external" href="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/notebook/r2.0.0-alpha/mindquantum/zh_cn/mindspore_quantum_measurement.ipynb"><img alt="下载Notebook" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.0.0-alpha/resource/_static/logo_notebook.png" /></a>  <a class="reference external" href="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/notebook/r2.0.0-alpha/mindquantum/zh_cn/mindspore_quantum_measurement.py"><img alt="下载样例代码" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.0.0-alpha/resource/_static/logo_download_code.png" /></a>  <a class="reference external" href="https://gitee.com/mindspore/docs/blob/r2.0.0-alpha/docs/mindquantum/docs/source_zh_cn/quantum_measurement.ipynb"><img alt="查看源文件" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.0.0-alpha/resource/_static/logo_source.png" /></a>  <a class="reference external" href="https://authoring-modelarts-cnnorth4.huaweicloud.com/console/lab?share-url-b64=aHR0cHM6Ly9taW5kc3BvcmUtd2Vic2l0ZS5vYnMuY24tbm9ydGgtNC5teWh1YXdlaWNsb3VkLmNvbS9ub3RlYm9vay9yMi4wLjAtYWxwaGEvbWluZHF1YW50dW0vemhfY24vbWluZHNwb3JlX3F1YW50dW1fbWVhc3VyZW1lbnQuaXB5bmI%3D&amp;imageid=b711ac95-db2b-45b7-ab9b-98de275dd57e"><img alt="在ModelArts平台运行" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.0.0-alpha/resource/_static/logo_modelarts.png" /></a></p>
<section id="概述">
<h2>概述<a class="headerlink" href="#概述" title="永久链接至标题"></a></h2>
<p>在量子线路设计时，我们最终需要通过测量(measure)操作获得结果，进行测量的时候需要选定特定的基态进行测量，而测量得到的结果是不确定的，测量后量子态也会随机坍塌到我们测量的某个基态上。</p>
<p>量子测量由一组测量算子<span class="math notranslate nohighlight">\({M_m}\)</span>描述，这些算子作用在被测系统状态空间上，指标<span class="math notranslate nohighlight">\(m\)</span>表示实验中可能的测量结果，若在测量前，量子系统的状态为<span class="math notranslate nohighlight">\(|\psi⟩\)</span>，则结果<span class="math notranslate nohighlight">\(m\)</span>发生的可能性为：</p>
<div class="math notranslate nohighlight">
\[p(m)=⟨\psi|M^\dagger_mM_m|\psi⟩\]</div>
<p>测量后系统的状态塌缩为：</p>
<div class="math notranslate nohighlight">
\[\frac{M_m|\psi⟩}{\sqrt{⟨\psi|M^\dagger_mM_m|\psi⟩}}\]</div>
<p>测量算子满足完备性方程：</p>
<div class="math notranslate nohighlight">
\[\Sigma_mM^\dagger_mM_m=I\]</div>
<p>完备性方程表达了概率之和为1的事实：</p>
<div class="math notranslate nohighlight">
\[1=\Sigma_m p(m)=\Sigma_m ⟨\psi|M^\dagger_mM_m|\psi⟩\]</div>
<p>该方程对所有的<span class="math notranslate nohighlight">\(|\psi⟩\)</span>都成立，与完备性方程等价，但直接验证完备性方程更简单，所以将完备性方程作为约束条件。</p>
<p>根据选取测量算子的不同，我们常见的测量分成计算基测量、投影测量、Pauli测量等，MindQuantum提供了丰富的测量功能与可视化展示工具，我们利用这些功能进一步学习量子测量。</p>
</section>
<section id="计算基测量">
<h2>计算基测量<a class="headerlink" href="#计算基测量" title="永久链接至标题"></a></h2>
<p>我们先对计算基测量有一个简单认识：假设有一个n个量子比特的态，我们对它执行n比特计算基测量，测量后，如果结果为<span class="math notranslate nohighlight">\(00 \cdots0\)</span>，表明该n量子比特系统的量子状态已塌缩到<span class="math notranslate nohighlight">\(|00 \cdots0⟩\)</span>态；类似地，如果测量其中一个量子比特，那么它表示的<span class="math notranslate nohighlight">\(2^n\)</span>种情况就会被排除掉一半，即在两个各占一半的空间中，测量操作将量子态投影到其中一个空间，表明该n量子比特系统的量子状态中一个子系统塌缩了。</p>
<section id="单量子比特在计算基下的测量">
<h3>单量子比特在计算基下的测量<a class="headerlink" href="#单量子比特在计算基下的测量" title="永久链接至标题"></a></h3>
<p>计算基测量算子：<span class="math notranslate nohighlight">\(M_0=|0⟩⟨0|\)</span>和<span class="math notranslate nohighlight">\(M_1=|1⟩⟨1|\)</span>，注意到每个测量算子都是Hermite的，即满足<span class="math notranslate nohighlight">\(M_0^\dagger=M_0,M_1^\dagger=M_1\)</span>，并且<span class="math notranslate nohighlight">\(M^2_0=M_0,M^2_1=M_1\)</span>，于是满足完备性关系：</p>
<div class="math notranslate nohighlight">
\[I=M^\dagger_0M_0+M^\dagger_1M_1=M_0+M_1\]</div>
<p>假设被测量状态<span class="math notranslate nohighlight">\(|\psi⟩=a|0⟩+b|1⟩\)</span>，则获得测量结果0的概率是：</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
p(0)&amp;=⟨\psi|M^\dagger_0M_0|\psi⟩\\
&amp;=⟨\psi|M_0|\psi⟩\\
&amp;=⟨\psi|(|0⟩⟨0|)|\psi⟩\\
&amp;=(⟨\psi|0⟩)(⟨0|\psi⟩)\\
&amp;=[(⟨0|a^{\star}+⟨1|b^{\star})|0⟩][⟨0|(a|0⟩+b|1⟩)]\\
&amp;=(a^{\star}⟨0|0⟩+b^{\star}⟨1|0⟩)(a⟨0|0⟩+b⟨1|0⟩)\\
&amp;=a^{\star}a\\
&amp;=|a|^2
\end{align*}\end{split}\]</div>
<p>类似地，获得测量结果1的概率是<span class="math notranslate nohighlight">\(p(1)=|b|^2\)</span>。两种情况下，测量后的状态分别为：</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
\frac{M_0|\psi⟩}{|a|}=\frac{a}{|a|}|0⟩\\
\frac{M_1|\psi⟩}{|b|}=\frac{b}{|b|}|1⟩\\
\end{align*}\end{split}\]</div>
</section>
<section id="多量子比特在计算基下的测量——以双量子比特为例">
<h3>多量子比特在计算基下的测量——以双量子比特为例<a class="headerlink" href="#多量子比特在计算基下的测量——以双量子比特为例" title="永久链接至标题"></a></h3>
<section id="测量系统中所有比特">
<h4>测量系统中所有比特<a class="headerlink" href="#测量系统中所有比特" title="永久链接至标题"></a></h4>
<p>双量子比特系统下计算基测量算子：<span class="math notranslate nohighlight">\(M_{00}=|00⟩⟨00|,M_{01}=|01⟩⟨01|,M_{10}=|10⟩⟨10|\)</span>和<span class="math notranslate nohighlight">\(M_{11}=|11⟩⟨11|\)</span>，注意到每个测量算子都是Hermite的，即满足<span class="math notranslate nohighlight">\(M_{ij}^\dagger=M_{ij},i,j\in\{0,1\}\)</span>，并且<span class="math notranslate nohighlight">\(M_{ij}^2=M_{ij}\)</span>，于是满足完备性关系：</p>
<div class="math notranslate nohighlight">
\[I=M^\dagger_{00}M_{00}+M^\dagger_{01}M_{01}+M^\dagger_{10}M_{10}+M^\dagger_{11}M_{11}=M_{00}+M_{01}+M_{10}+M_{11}\]</div>
<p>假设被测量状态<span class="math notranslate nohighlight">\(|\psi⟩=a|00⟩+b|01⟩+c|10⟩+d|11⟩\)</span>，则获得测量结果00的概率是：</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
p(00)&amp;=⟨\psi|M^\dagger_{00}M_{00}|\psi⟩\\
&amp;=⟨\psi|M_{00}|\psi⟩\\
&amp;=⟨\psi|(|00⟩⟨00|)|\psi⟩\\
&amp;=(⟨\psi|00⟩)(⟨00|\psi⟩)\\
&amp;=[(⟨00|a^{\star}+⟨01|b^{\star}+⟨10|c^{\star}+⟨11|d^{\star})|00⟩][⟨00|(a|00⟩+b|01⟩+c|10⟩+d|11⟩)]\\
&amp;=(a^{\star}⟨00|00⟩+b^{\star}⟨01|00⟩+c^{\star}⟨10|00⟩+d^{\star}⟨11|00⟩)(a⟨00|00⟩+b⟨00|01⟩+c⟨00|10⟩+b⟨00|11⟩)\\
&amp;=a^{\star}a\\
&amp;=|a|^2
\end{align*}\end{split}\]</div>
<p>类似地，获得测量结果01的概率是<span class="math notranslate nohighlight">\(p(01)=|b|^2\)</span>，10的概率是<span class="math notranslate nohighlight">\(p(10)=|c|^2\)</span>，11的概率是<span class="math notranslate nohighlight">\(p(11)=|d|^2\)</span>。四种情况下，测量后的状态分别为：</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
\frac{M_{00}|\psi⟩}{|a|}=\frac{a}{|a|}|00⟩\\
\frac{M_{01}|\psi⟩}{|b|}=\frac{b}{|b|}|01⟩\\
\frac{M_{10}|\psi⟩}{|c|}=\frac{c}{|c|}|10⟩\\
\frac{M_{11}|\psi⟩}{|d|}=\frac{d}{|d|}|11⟩\\
\end{align*}\end{split}\]</div>
</section>
<section id="测量系统中单个比特">
<h4>测量系统中单个比特<a class="headerlink" href="#测量系统中单个比特" title="永久链接至标题"></a></h4>
<p>如果测量双量子比特量子状态的第一个量子比特，双计算基测量算子：<span class="math notranslate nohighlight">\(M_0=|0⟩⟨0|\otimes I\)</span>和<span class="math notranslate nohighlight">\(M_1=|1⟩⟨1|\otimes I\)</span>，注意到每个测量算子都是Hermite的，即满足<span class="math notranslate nohighlight">\(M_0^\dagger=M_0,M_1^\dagger=M_1\)</span>，并且<span class="math notranslate nohighlight">\(M^2_0=M_0,M^2_1=M_1\)</span>，于是满足完备性关系：</p>
<div class="math notranslate nohighlight">
\[I=M^\dagger_0M_0+M^\dagger_1M_1=M_0+M_1\]</div>
<p>假设被测量状态<span class="math notranslate nohighlight">\(|\psi⟩=a|00⟩+b|01⟩+c|10⟩+d|11⟩\)</span>，则测量双量子比特量子状态的第一个量子比特，获得测量结果0的概率是：</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
p(0)&amp;=⟨\psi|M^\dagger_0M_0|\psi⟩\\
&amp;=⟨\psi|M_0|\psi⟩\\
&amp;=⟨\psi|(|0⟩⟨0|\otimes I)|\psi⟩\\
&amp;=(⟨00|a^{\star}+⟨01|b^{\star}+⟨10|c^{\star}+⟨11|d^{\star})|(|0⟩⟨0|\otimes I)|(a|00⟩+b|01⟩+c|10⟩+d|11⟩)\\
&amp;=(⟨00|a^{\star}+⟨01|b^{\star}+⟨10|c^{\star}+⟨11|d^{\star})|(a|00⟩+b|01⟩)\\
&amp;=a^{\star}a+b^{\star}b\\
&amp;=|a|^2+|b|^2
\end{align*}\end{split}\]</div>
<p>类似地，获得测量结果1的概率是<span class="math notranslate nohighlight">\(p(1)=|c|^2+|d|^2\)</span>。两种情况下，测量后的状态分别为：</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
\frac{M_0|\psi⟩}{\sqrt{|a|^2+|b|^2}}=\frac{a}{\sqrt{|a|^2+|b|^2}}|00⟩+\frac{b}{\sqrt{|a|^2+|b|^2}}|01⟩\\
\frac{M_1|\psi⟩}{\sqrt{|c|^2+|d|^2}}=\frac{c}{\sqrt{|c|^2+|d|^2}}|10⟩+\frac{d}{\sqrt{|c|^2+|d|^2}}|11⟩\\
\end{align*}\end{split}\]</div>
<p>通过对计算基测量的学习，我们可以直观认识到，在多量子比特态的其中一个比特上做测量，本质是将量子态投影到两个子空间之一中。为了简洁的区分出这两个子空间，我们利用线性代数知识知道，可以通过恰好有两个唯一特征值的矩阵来描述两个正交子空间。</p>
</section>
</section>
<section id="计算基测量的mindquantum实现">
<h3>计算基测量的MindQuantum实现<a class="headerlink" href="#计算基测量的mindquantum实现" title="永久链接至标题"></a></h3>
<p>接下来我们使用MindQuantum搭建一个含测量操作的量子线路并观察结果，首先导入本教程所依赖的模块。</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>                           <span class="c1"># 导入numpy库并简写为np</span>
<span class="kn">from</span> <span class="nn">mindquantum.core.gates</span> <span class="kn">import</span> <span class="n">X</span><span class="p">,</span> <span class="n">H</span>      <span class="c1"># 导入量子门H, X</span>
<span class="kn">from</span> <span class="nn">mindquantum.simulator</span> <span class="kn">import</span> <span class="n">Simulator</span>  <span class="c1"># 从mindquantum.simulator中导入Simulator类</span>
<span class="kn">from</span> <span class="nn">mindquantum.core.circuit</span> <span class="kn">import</span> <span class="n">Circuit</span> <span class="c1"># 导入Circuit模块，用于搭建量子线路</span>
<span class="kn">from</span> <span class="nn">mindquantum.core.gates</span> <span class="kn">import</span> <span class="n">Measure</span>   <span class="c1"># 引入测量门</span>
</pre></div>
</div>
</div>
<p>说明：</p>
<p>（1）numpy是一个功能强大的Python库，主要用于对多维数组执行计算，支持大量的维度数组与矩阵运算，此外也针对数组运算提供大量的数学函数库；</p>
<p>（2）mindquantum是量子-经典混合计算框架，支持多种量子神经网络的训练和推理；</p>
<p>（3）搭建的量子线路中所需执行的量子门需要从mindquantum.core模块中导入；</p>
<p>（4）运行量子线路所需要的量子模拟器需要从mindquantum.simulator模块中导入；</p>
<p>（5）搭建量子线路所需要的量子线路类Circuit需要从mindquantum.core模块中导入；</p>
<p>（6）对量子线路进行测量需要从mindquantum中导入Measure操作。</p>
<p>我们搭建出一个制备双量子比特均匀叠加态<span class="math notranslate nohighlight">\(|\psi⟩=\frac{\sqrt{2}(|00⟩+|11⟩)}{2}\)</span>的量子线路，并分别展示在所有量子比特上使用计算基测量和只在0号量子比特上使用计算基测量的结果。</p>
<section id="mindquantum实现测量系统中所有比特">
<h4>MindQuantum实现测量系统中所有比特<a class="headerlink" href="#mindquantum实现测量系统中所有比特" title="永久链接至标题"></a></h4>
<p>在使用代码演示之前，我们先简单计算出理论值。</p>
<p>在所有量子比特上使用计算基测量<span class="math notranslate nohighlight">\(|\psi⟩=\frac{\sqrt{2}(|00⟩+|11⟩)}{2}\)</span>：</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
p(00)&amp;=|a|^2=(\frac{\sqrt{2}}{{2}})^2=\frac{1}{2}\\
p(01)&amp;=|b|^2=0^2=0\\
p(10)&amp;=|c|^2=0^2=0\\
p(11)&amp;=|d|^2=(\frac{\sqrt{2}}{{2}})^2=\frac{1}{2}\\
\end{align*}\end{split}\]</div>
<p>可以看到，测量结果只有两种可能：00和11，概率均是<span class="math notranslate nohighlight">\(\frac{1}{2}\)</span>。测量后的状态分别为：</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
\frac{a}{|a|}|00⟩=|00⟩\\
\frac{d}{|d|}|11⟩=|11⟩\\
\end{align*}\end{split}\]</div>
<p>我们开始搭建制备<span class="math notranslate nohighlight">\(|\psi⟩=\frac{\sqrt{2}(|00⟩+|11⟩)}{2}\)</span>并在所有比特上做测量的量子线路：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">circ_all</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span>             <span class="c1"># 初始化量子线路</span>
<span class="n">circ_all</span> <span class="o">+=</span> <span class="n">H</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>              <span class="c1"># H门作用在第0位量子比特</span>
<span class="n">circ_all</span> <span class="o">+=</span> <span class="n">X</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>           <span class="c1"># X门作用在第1位量子比特且受第0位量子比特控制</span>
<span class="n">circ_all</span> <span class="o">+=</span> <span class="n">Measure</span><span class="p">(</span><span class="s1">&#39;q0&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># 在0号量子比特作用一个测量，并将该测量命名为&#39;q0&#39;</span>
<span class="n">circ_all</span> <span class="o">+=</span> <span class="n">Measure</span><span class="p">(</span><span class="s1">&#39;q1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># 在1号量子比特作用一个测量，并将该测量命名为&#39;q1&#39;</span>
<span class="n">circ_all</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>                   <span class="c1"># 绘制SVG格式的量子线路图片</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/quantum_measurement_4_0.svg" src="_images/quantum_measurement_4_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">(</span><span class="s1">&#39;mqvector&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># 声明一个2比特的mqvector模拟器</span>
<span class="n">sim</span><span class="o">.</span><span class="n">apply_circuit</span><span class="p">(</span><span class="n">circ_all</span><span class="p">)</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>     <span class="c1"># 在模拟器上运行量子线路</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/quantum_measurement_5_0.svg" src="_images/quantum_measurement_5_0.svg" /></div>
</div>
<p>可以看到我们得到的测量结果是’00’，测量后的量子态塌缩为：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">get_qs</span><span class="p">(</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1¦11⟩
</pre></div></div>
</div>
<p>量子态塌缩成了<span class="math notranslate nohighlight">\(1|00⟩\)</span>，与理论值相符。</p>
<p>如果我们多测量几次，可以发现测量结果也会为’11’：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>  <span class="c1">#复位模拟器</span>
<span class="n">sim</span><span class="o">.</span><span class="n">apply_circuit</span><span class="p">(</span><span class="n">circ_all</span><span class="p">)</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>  <span class="c1"># 在模拟器上运行量子线路</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/quantum_measurement_9_0.svg" src="_images/quantum_measurement_9_0.svg" /></div>
</div>
<p>打印出此时量子态，可以看到它坍缩成了相应的<span class="math notranslate nohighlight">\(|11⟩\)</span>：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">get_qs</span><span class="p">(</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1¦00⟩
</pre></div></div>
</div>
<p>我们观察到，测量结果时而为’00’时而为’11’，符合理论预期，但是没有办法观察出现00和11的概率是否相同，我们希望可以多次测量，统计出不同结果出现的频率，以此观察结果是否满足预期的概率分布。为此我们使用量子线路采样(Sampling)功能：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">sampling</span><span class="p">(</span><span class="n">circ_all</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>  <span class="c1"># 对上面定义的线路采样1000次</span>
<span class="n">result</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/quantum_measurement_13_0.svg" src="_images/quantum_measurement_13_0.svg" /></div>
</div>
<p>我们可以看到，采样1000中，’00’出现了495次，’11’出现了505次，采样结果符合概率分布，细微的误差是由模拟器噪声导致。仔细阅读的同学可以发现，在<a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/zh-CN/r0.8/quantum_simulator.html">量子模拟器教程</a>中我们已经展示过该线路的采样结果，但并未解释结果如是分布的原因，在本教程中学习了计算基测量后，相信同学们对该结果分布的认识更加深刻。</p>
</section>
<section id="mindquantum实现测量系统中单个比特">
<h4>MindQuantum实现测量系统中单个比特<a class="headerlink" href="#mindquantum实现测量系统中单个比特" title="永久链接至标题"></a></h4>
<p>同样地，在使用代码演示之前，我们先简单计算出理论值。</p>
<p>在0号量子比特上使用计算基测量<span class="math notranslate nohighlight">\(|\psi⟩=\frac{\sqrt{2}(|00⟩+|11⟩)}{2}\)</span>：</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
p(0)=|a|^2+|b|^2=(\frac{\sqrt{2}}{{2}})^2=\frac{1}{2}\\
p(1)=|c|^2+|d|^2=(\frac{\sqrt{2}}{{2}})^2=\frac{1}{2}\\
\end{align*}\end{split}\]</div>
<p>可以看到，测量结果有两种可能：0和1，概率均是<span class="math notranslate nohighlight">\(\frac{1}{2}\)</span>。测量后的状态分别为：</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
\frac{a}{\sqrt{|a|^2+|b|^2}}|00⟩+\frac{b}{\sqrt{|a|^2+|b|^2}}|01⟩=|00⟩\\
\frac{c}{\sqrt{|c|^2+|d|^2}}|10⟩+\frac{d}{\sqrt{|c|^2+|d|^2}}|11⟩=|11⟩\\
\end{align*}\end{split}\]</div>
<p>我们开始搭建制备<span class="math notranslate nohighlight">\(|\psi⟩=\frac{\sqrt{2}(|00⟩+|11⟩)}{2}\)</span>并在0号量子比特上做测量的量子线路：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">circ_partial</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span>             <span class="c1"># 初始化量子线路</span>
<span class="n">circ_partial</span> <span class="o">+=</span> <span class="n">H</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>              <span class="c1"># H门作用在第0位量子比特</span>
<span class="n">circ_partial</span> <span class="o">+=</span> <span class="n">X</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>           <span class="c1"># X门作用在第1位量子比特且受第0位量子比特控制</span>
<span class="n">circ_partial</span> <span class="o">+=</span> <span class="n">Measure</span><span class="p">(</span><span class="s1">&#39;q0&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># 在0号量子比特作用一个测量，并将该测量命名为&#39;q0&#39;</span>
<span class="n">circ_partial</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>                   <span class="c1"># 绘制SVG格式的量子线路图片</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/quantum_measurement_15_0.svg" src="_images/quantum_measurement_15_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>                            <span class="c1"># 复位模拟器</span>
<span class="n">sim</span><span class="o">.</span><span class="n">apply_circuit</span><span class="p">(</span><span class="n">circ_partial</span><span class="p">)</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>  <span class="c1"># 在模拟器上运行量子线路</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/quantum_measurement_16_0.svg" src="_images/quantum_measurement_16_0.svg" /></div>
</div>
<p>可以看到我们得到的测量结果是’0’，测量后的量子态塌缩为：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">get_qs</span><span class="p">(</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1¦00⟩
</pre></div></div>
</div>
<p>量子态塌缩成了<span class="math notranslate nohighlight">\(1|00⟩\)</span>，与理论值相符。</p>
<p>同样地，如果我们多测量几次，可以发现测量结果也会为’1’，此处不再演示。我们直接对该量子线路采样1000次观察结果：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">sampling</span><span class="p">(</span><span class="n">circ_partial</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>  <span class="c1"># 对上面定义的线路采样1000次</span>
<span class="n">result</span><span class="o">.</span><span class="n">svg</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="_images/quantum_measurement_20_0.svg" src="_images/quantum_measurement_20_0.svg" /></div>
</div>
<p>我们可以看到，采样1000中，’0’出现了488次，’1’出现了512次。采样结果符合概率分布，细微的误差是由模拟器噪声导致。</p>
<p>以上我们完成了量子计算基测量的学习，接下来我们进入到另一种测量操作的学习：投影测量。</p>
</section>
</section>
</section>
<section id="投影测量">
<h2>投影测量<a class="headerlink" href="#投影测量" title="永久链接至标题"></a></h2>
<p>投影测量(projective measuremen)由被观察系统状态空间上一个可观测量（observable）Hermite算子<span class="math notranslate nohighlight">\(M\)</span>来描述(<span class="math notranslate nohighlight">\(M=M^{\dagger}\)</span>)，该可观测量具有谱分解：</p>
<div class="math notranslate nohighlight">
\[M=\Sigma_{m}mP_m\]</div>
<p>这里的<span class="math notranslate nohighlight">\(P_m\)</span>是在<span class="math notranslate nohighlight">\(m\)</span>的特征值<span class="math notranslate nohighlight">\(m\)</span>对应特征空间上的投影，测量的可能结果对应于测量算子的特征值<span class="math notranslate nohighlight">\(m\)</span>。测量状态<span class="math notranslate nohighlight">\(|\psi⟩\)</span>时，得到结果<span class="math notranslate nohighlight">\(m\)</span>的概率为</p>
<div class="math notranslate nohighlight">
\[p(m)=⟨\psi|P_m|\psi⟩\]</div>
<p>测量后量子系统的状态立即为：</p>
<div class="math notranslate nohighlight">
\[\frac{P_m|\psi⟩}{\sqrt{p(m)}}\]</div>
<p>直观解释是，我们对状态<span class="math notranslate nohighlight">\(|\psi⟩\)</span>使用<span class="math notranslate nohighlight">\(M\)</span>投影测量，是把<span class="math notranslate nohighlight">\(|\psi⟩\)</span>往<span class="math notranslate nohighlight">\(M\)</span>的特征空间上投影，有<span class="math notranslate nohighlight">\(p_m\)</span>的概率投影到空间<span class="math notranslate nohighlight">\(V_{m}\)</span>中，此时测量结果为该空间对应的特征值<span class="math notranslate nohighlight">\(m\)</span>。</p>
<p>投影测量一个重要的特征就是很容易计算投影测量的期望值<span class="math notranslate nohighlight">\(E(M)\)</span>。</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
    E(M) &amp;=\Sigma_i \lambda_i p_i\\
         &amp;=\Sigma_i \lambda_i⟨\psi|P_i|\psi⟩\\
         &amp;=⟨\psi|(\Sigma_i\lambda_i P_i)|\psi⟩\\
         &amp;=⟨\psi|M|\psi⟩
\end{align*}\end{split}\]</div>
<p>投影测量可以视为一般测量的特殊情况，当测量算子除了满足完备性关系<span class="math notranslate nohighlight">\(\Sigma_mM_m^\dagger M_m=I\)</span>时，还满足<span class="math notranslate nohighlight">\(M_m\)</span>是正交投影算子的条件，即<span class="math notranslate nohighlight">\(M_m\)</span>是Hermite的，并且</p>
<div class="math notranslate nohighlight">
\[M_mM_{m'}=\delta_{mm'}M_m\]</div>
<p>有了这些附加限制，一般测量退化成投影测量。</p>
</section>
<section id="pauli测量">
<h2>Pauli测量<a class="headerlink" href="#pauli测量" title="永久链接至标题"></a></h2>
<p>最后我们学习Pauli测量，Pauli测量是投影测量中把可观测量<span class="math notranslate nohighlight">\(M\)</span>选取为泡利算子。以Pauli-Z测量为例，我们考虑Z算子：</p>
<div class="math notranslate nohighlight">
\[\begin{split}Z=
\left(
    \begin{array}{l}
    1&amp;0\\
    0&amp;-1
    \end{array}
\right)\end{split}\]</div>
<p>可以看出，Z满足<span class="math notranslate nohighlight">\(Z=Z^\dagger\)</span>，即Z是Hermite的。Z有两个特征值+1，-1，对应的特征向量分别为：<a href="#id9"><span class="problematic" id="id10">|</span></a>0⟩和|1⟩。因此Z的谱分解形式为：</p>
<div class="math notranslate nohighlight">
\[\begin{split}Z=\left(
    \begin{array}{l}
    1&amp;0\\
    0&amp;-1
    \end{array}
\right)=1\times|0⟩⟨0|+(-1)\times|1⟩⟨1|\end{split}\]</div>
<p>使用Z做投影测量，如果测量结果为+1，我们可得出该量子比特的状态被投影到Z算子的+1特征子空间<span class="math notranslate nohighlight">\(V_{+1}\)</span>中，表明被测量态被投影成了|0⟩，相似地，如果测量结果为-1，可得出该量子比特被投影到-1特征子空间<span class="math notranslate nohighlight">\(V_{-1}\)</span>中，表明被测量态被投影成了|1⟩，这即为Pauli-Z测量。</p>
<p>MindQuantum中为我们提供了基于给定可观测量H计算投影测量期望值的功能：</p>
<p><code class="docutils literal notranslate"><span class="pre">get_expectation(hamiltonian)</span></code>可以计算出模拟器当前量子态关于某个观察量的期望值：<span class="math notranslate nohighlight">\(E=⟨\psi|H|\psi⟩\)</span>。<strong>该操作不会改变量子态</strong>。</p>
<p>例如，我们希望对处于<span class="math notranslate nohighlight">\(\frac{\sqrt{2}}{2}|00⟩+\frac{\sqrt{2}}{2}|11⟩\)</span>态的系统上的q1比特上作用一个Pauli-Z测量，首先我们将模拟器置位：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">(</span><span class="s1">&#39;mqvector&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>                        <span class="c1"># 声明一个2比特的mqvector模拟器</span>
<span class="n">sim</span><span class="o">.</span><span class="n">set_qs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="o">**</span><span class="mf">0.5</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mf">0.5</span> <span class="o">/</span> <span class="mi">2</span><span class="p">]))</span>  <span class="c1"># 设置模拟器状态</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">get_qs</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[0.70710678+0.j 0.        +0.j 0.        +0.j 0.70710678+0.j]
</pre></div></div>
</div>
<p>然后我们构造出在q1上做Pauli-Z测量对应的哈密顿量hams:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.core.operators</span> <span class="kn">import</span> <span class="n">Hamiltonian</span>    <span class="c1"># 引入哈密顿量定义模块</span>
<span class="kn">from</span> <span class="nn">mindquantum.core.operators</span> <span class="kn">import</span> <span class="n">QubitOperator</span>  <span class="c1"># 引入稀疏算子定义模块</span>

<span class="n">hams</span> <span class="o">=</span> <span class="n">Hamiltonian</span><span class="p">(</span><span class="n">QubitOperator</span><span class="p">(</span><span class="s1">&#39;Z1&#39;</span><span class="p">))</span>  <span class="c1"># 构建在q1上作Pauli-Z测量的哈密顿量</span>
</pre></div>
</div>
</div>
<p>为了深刻认识学习Pauli-Z测量操作，我们先手动计算出模拟器当前量子态在q1上做Pauli-Z测量的期望值，并推算出测量结果为+1，-1的概率：</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
E&amp;=⟨\psi|H|\psi⟩\\&amp;=
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}&amp; 0&amp; 0&amp; \frac{\sqrt{2}}{2}
    \end{array}
\right) \times
(Z \otimes I) \times
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}\\
    0\\
    0\\
    \frac{\sqrt{2}}{2}
    \end{array}
\right) \\&amp;=
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}&amp; 0&amp; 0&amp; \frac{\sqrt{2}}{2}
    \end{array}
\right) \times
\left(
    \begin{array}{l}
    1&amp;0\\
    0&amp;-1\\
    \end{array}
\right) \otimes
\left(
\begin{array}{l}
    1&amp;0\\
    0&amp;1\\
\end{array}
\right)
\times
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}\\
    0\\
    0\\
    \frac{\sqrt{2}}{2}
    \end{array}
\right) \\&amp;=
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}&amp; 0&amp; 0&amp; \frac{\sqrt{2}}{2}
    \end{array}
\right) \times
\left(
    \begin{array}{l}
    1&amp;0&amp;0&amp;0\\
    0&amp;1&amp;0&amp;0\\
    0&amp;0&amp;-1&amp;0\\
    0&amp;0&amp;0&amp;-1
    \end{array}
\right)
\times
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}\\
    0\\
    0\\
    \frac{\sqrt{2}}{2}
    \end{array}
\right) \\&amp;=
0\\
&amp;=1\times p(1)+(-1)\times p(-1)\\
&amp;=1\times p(1)+(-1)\times (1-p(1))\\
&amp;=p(1)-1+p(-1)\\
\Longrightarrow&amp;p(1)=p(-1)=0.5
\end{align*}\end{split}\]</div>
<p>这说明测量的理论期望值为0，测量出+1，-1的概率均为50%，我们使用MindQuantum提供的<code class="docutils literal notranslate"><span class="pre">get_expectation()</span></code>来验证结果：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">.</span><span class="n">get_expectation</span><span class="p">(</span><span class="n">hams</span><span class="p">)</span>  <span class="c1"># 计算出模拟器当前量子态关于hams的期望值</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0j
</pre></div></div>
</div>
<p>可以看到，手动计算和使用<code class="docutils literal notranslate"><span class="pre">get_expectation(hamiltonian)</span></code>计算出的结果相同，符合预期。</p>
<p>我们还可以对处于<span class="math notranslate nohighlight">\(\frac{\sqrt{2}}{2}|00⟩+\frac{\sqrt{2}}{2}|11⟩\)</span>态的系统上的q0,q1比特上均作用Pauli-Z测量。类似地构造出在q0,q1上做Pauli-Z测量对应的哈密顿量hams2:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hams2</span> <span class="o">=</span> <span class="n">Hamiltonian</span><span class="p">(</span><span class="n">QubitOperator</span><span class="p">(</span><span class="s1">&#39;Z0&#39;</span><span class="p">)</span> <span class="o">+</span>
                    <span class="n">QubitOperator</span><span class="p">(</span><span class="s1">&#39;Z1&#39;</span><span class="p">))</span>  <span class="c1"># 构建在q0,q1上作Pauli-Z测量的哈密顿量</span>
</pre></div>
</div>
</div>
<p>我们同样可以手动计算出模拟器当前量子态在q0,q1上做Pauli-Z测量的期望值：</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
E&amp;=⟨\psi|H|\psi⟩\\&amp;=
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}&amp; 0&amp; 0&amp; \frac{\sqrt{2}}{2}
    \end{array}
\right) \times
(Z \otimes I) \times
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}\\
    0\\
    0\\
    \frac{\sqrt{2}}{2}
    \end{array}
\right)
+
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}&amp; 0&amp; 0&amp; \frac{\sqrt{2}}{2}
    \end{array}
\right) \times
(I \otimes Z) \times
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}\\
    0\\
    0\\
    \frac{\sqrt{2}}{2}
    \end{array}
\right) \\&amp;=
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}&amp; 0&amp; 0&amp; \frac{\sqrt{2}}{2}
    \end{array}
\right) \times
\left(
    \begin{array}{l}
    1&amp;0\\
    0&amp;-1\\
    \end{array}
\right) \otimes
\left(
\begin{array}{l}
    1&amp;0\\
    0&amp;1\\
\end{array}
\right)
\times
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}\\
    0\\
    0\\
    \frac{\sqrt{2}}{2}
    \end{array}
\right)
+
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}&amp; 0&amp; 0&amp; \frac{\sqrt{2}}{2}
    \end{array}
\right) \times
\left(
    \begin{array}{l}
    1&amp;0\\
    0&amp;1\\
    \end{array}
\right) \otimes
\left(
\begin{array}{l}
    1&amp;0\\
    0&amp;-1\\
\end{array}
\right)
\times
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}\\
    0\\
    0\\
    \frac{\sqrt{2}}{2}
    \end{array}
\right) \\&amp;=
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}&amp; 0&amp; 0&amp; \frac{\sqrt{2}}{2}
    \end{array}
\right) \times
\left(
    \begin{array}{l}
    1&amp;0&amp;0&amp;0\\
    0&amp;1&amp;0&amp;0\\
    0&amp;0&amp;-1&amp;0\\
    0&amp;0&amp;0&amp;-1
    \end{array}
\right)
\times
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}\\
    0\\
    0\\
    \frac{\sqrt{2}}{2}
    \end{array}
\right)
+
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}&amp; 0&amp; 0&amp; \frac{\sqrt{2}}{2}
    \end{array}
\right) \times
\left(
    \begin{array}{l}
    1&amp;0&amp;0&amp;0\\
    0&amp;-1&amp;0&amp;0\\
    0&amp;0&amp;1&amp;0\\
    0&amp;0&amp;0&amp;-1
    \end{array}
\right)
\times
\left(
    \begin{array}{l}
    \frac{\sqrt{2}}{2}\\
    0\\
    0\\
    \frac{\sqrt{2}}{2}
    \end{array}
\right) \\&amp;=
0+0 \\
&amp;=0
\end{align*}\end{split}\]</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">.</span><span class="n">set_qs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="o">**</span><span class="mf">0.5</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mf">0.5</span> <span class="o">/</span> <span class="mi">2</span><span class="p">]))</span>  <span class="c1"># 设置模拟器状态</span>
<span class="n">sim</span><span class="o">.</span><span class="n">get_expectation</span><span class="p">(</span><span class="n">hams2</span><span class="p">)</span>                            <span class="c1"># 计算出模拟器当前量子态关于hams2的期望值</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0j
</pre></div></div>
</div>
<p>该操作不会改变量子态，我们查看当前量子态：</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">.</span><span class="n">get_qs</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([0.70710678+0.j, 0.        +0.j, 0.        +0.j, 0.70710678+0.j])
</pre></div></div>
</div>
<p>可以发现，量子态依然是最初设定的<span class="math notranslate nohighlight">\(\frac{\sqrt{2}}{2}|00⟩+\frac{\sqrt{2}}{2}|11⟩\)</span></p>
<p>我们学习认识了量子计算中重要的一个操作——测量，还使用MindQuantum测量量子线路验证我们的理论结果，并使用不同可视化工具展示出测量结果。</p>
<p>想学习MindQuantum中量子线路的高阶操作，构建并训练量子经典混合神经网络，请查看<code class="docutils literal notranslate"><span class="pre">get_expectation_with_grad()</span></code>和<code class="docutils literal notranslate"><span class="pre">apply_hamitonian()</span></code>的文档。</p>
<p>若想查询更多关于MindQuantum的API，请点击：<a class="reference external" href="https://mindspore.cn/mindquantum/">https://mindspore.cn/mindquantum/</a>。</p>
</section>
</section>


           </div>
           
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="advanced_operations_of_quantum_circuit.html" class="btn btn-neutral float-left" title="量子线路高阶操作" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="noise.html" class="btn btn-neutral float-right" title="含噪声量子线路" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2022, MindSpore.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   
	<script async="async" src="https://cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>