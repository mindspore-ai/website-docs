<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>使用量子退火启发式算法求解最大割问题 &mdash; MindSpore master 文档</title><script>;(()=>{const e=localStorage.getItem("ms-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;(e?"dark"===e:t)&&document.documentElement.setAttribute("data-o-theme","dark")})();</script><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script><script src="../_static/jquery.js"></script>
        <script src="../_static/js/theme.js"></script><script src="../_static/underscore.js"></script><script src="../_static/doctools.js"></script><script src="../_static/translations.js"></script><script crossorigin="anonymous" integrity="sha256-1fEPhSsRKlFKGfK3eO710tEweHh1fwokU5wFGDHO+vg=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script><script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script><script async="async" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/mathjax/MathJax-3.2.2/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="总览" href="../overview.html" />
    <link rel="prev" title="量子神经网络在自然语言处理中的应用" href="qnn_for_nlp.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">初级使用教程</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../beginner/beginner.html">初级使用教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../beginner/parameterized_quantum_circuit.html">变分量子线路</a></li>
<li class="toctree-l1"><a class="reference internal" href="../beginner/quantum_simulator.html">量子模拟器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../beginner/quantum_measurement.html">量子测量</a></li>
<li class="toctree-l1"><a class="reference internal" href="../beginner/advanced_operations_of_quantum_circuit.html">量子线路高阶操作</a></li>
<li class="toctree-l1"><a class="reference internal" href="../beginner/bloch_sphere.html">布洛赫球</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">中级使用教程</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../middle_level/middle_level.html">中级使用教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../middle_level/noise.html">含噪声量子线路</a></li>
<li class="toctree-l1"><a class="reference internal" href="../middle_level/noise_simulator.html">噪声模拟器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../middle_level/qubit_mapping.html">比特映射</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">高级使用教程</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../advanced/advanced.html">高级使用教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/get_gradient_of_PQC_with_mindquantum.html">变分量子线路梯度计算进阶</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/initial_experience_of_quantum_neural_network.html">量子神经网络初体验</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/equivalence_checking_of_PQC.html">含参量子线路的等价性检查</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">案例库</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="case_library.html">案例库</a></li>
<li class="toctree-l1"><a class="reference internal" href="grover_search_algorithm.html">基于MindSpore Quantum的Grover搜索算法和龙算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="shor_algorithm.html">基于MindSpore Quantum的Shor算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="hhl_algorithm.html">HHL 算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantum_phase_estimation.html">量子相位估计算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantum_approximate_optimization_algorithm.html">量子近似优化算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="classification_of_iris_by_qnn.html">通过量子神经网络对鸢尾花进行分类</a></li>
<li class="toctree-l1"><a class="reference internal" href="vqe_for_quantum_chemistry.html">在量子化学计算中应用量子变分求解器</a></li>
<li class="toctree-l1"><a class="reference internal" href="qnn_for_nlp.html">量子神经网络在自然语言处理中的应用</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">使用量子退火启发式算法求解最大割问题</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#概述">概述</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#最大割问题">最大割问题</a></li>
<li class="toctree-l3"><a class="reference internal" href="#量子退火启发式算法">量子退火启发式算法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#数据准备">数据准备</a></li>
<li class="toctree-l2"><a class="reference internal" href="#运行量子启发式求解器">运行量子启发式求解器</a></li>
<li class="toctree-l2"><a class="reference internal" href="#验证结果">验证结果</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#1绘制折线图">1.绘制折线图</a></li>
<li class="toctree-l3"><a class="reference internal" href="#2绘制直方图">2.绘制直方图</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#参考文献-">参考文献：</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">总览</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.dtype.html">mindquantum.dtype</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.core.html">mindquantum.core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.simulator.html">mindquantum.simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.framework.html">mindquantum.framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.algorithm.html">mindquantum.algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.device.html">mindquantum.device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.io.html">mindquantum.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.engine.html">mindquantum.engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum.utils.html">mindquantum.utils</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">论文复现代码</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../paper_with_code.html">论文复现代码</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE NOTES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../RELEASE.html">Release Notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">安装指南</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mindquantum_install.html">安装MindSpore Quantum</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>使用量子退火启发式算法求解最大割问题</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/case_library/quantum_annealing_inspired_algorithm.ipynb.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars and line breaks on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
    white-space: pre;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="使用量子退火启发式算法求解最大割问题">
<h1>使用量子退火启发式算法求解最大割问题<a class="headerlink" href="#使用量子退火启发式算法求解最大割问题" title="永久链接至标题"></a></h1>
<p><a class="reference external" href="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/notebook/r2.2/mindquantum/zh_cn/case_library/mindspore_quantum_annealing_inspired_algorithm.ipynb"><img alt="下载Notebook" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.2/resource/_static/logo_notebook.svg" /></a>  <a class="reference external" href="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/notebook/r2.2/mindquantum/zh_cn/case_library/mindspore_quantum_annealing_inspired_algorithm.py"><img alt="下载样例代码" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.2/resource/_static/logo_download_code.svg" /></a>  <a class="reference external" href="https://gitee.com/mindspore/docs/blob/r2.2/docs/mindquantum/docs/source_zh_cn/case_library/quantum_annealing_inspired_algorithm.ipynb"><img alt="在Gitee上查看源文件" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.2/resource/_static/logo_source.svg" /></a></p>
<section id="概述">
<h2>概述<a class="headerlink" href="#概述" title="永久链接至标题"></a></h2>
<section id="最大割问题">
<h3>最大割问题<a class="headerlink" href="#最大割问题" title="永久链接至标题"></a></h3>
<p>组合优化问题是一类在有限的选项集合中找到最优解的数学问题，它有广泛的应用，像投资组合，旅行商问题等。它的求解难度随着问题规模的增加指数增长。因此，目前还不存在高效的经典算法来求解组合优化问题。Max-Cut问题就是其中一种组合优化问题，该问题需要将一个图中的顶点分成两部分，并使得两部分被切割的边最多。如下图：</p>
<p><img alt="max cut" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.2/docs/mindquantum/docs/source_zh_cn/images/Max_Cut.png" /></p>
</section>
<section id="量子退火启发式算法">
<h3>量子退火启发式算法<a class="headerlink" href="#量子退火启发式算法" title="永久链接至标题"></a></h3>
<p>量子启发式算法是一类基于量子力学原理的计算方法衍生或启发的经典力学方法。比较有名的是Ewin tang受HHL启发提出的算法，但目前没有实用场景。为了便于区分，我们把受量子退火或者模拟量子Ising机，称为量子退火启发式算法。研究这类算法的意义在于不断探索经典算法的上界；其次可以对现实问题进行建模，使其能够被量子算法或者量子启发式算法进行求解，并且后续可以用QPU来代替启发式算法进行加速。</p>
<p>量子退火启发式算法主要包括:</p>
<ul class="simple">
<li><p>SimCIM(模拟相干伊辛机算法)</p></li>
<li><p>NMFA(含噪平均场退火算法)</p></li>
<li><p>ASB(绝热模拟分叉算法)</p></li>
<li><p>BSB(弹道模拟分叉算法)</p></li>
<li><p>DSB(离散模拟分叉算法)</p></li>
</ul>
<p>本篇教程案例，基于量子退火启发式算法求解图分割问题</p>
<p>工作流程：</p>
<ol class="arabic simple">
<li><p>加载数据，下载 Stanford 的graph 大规模数据集，包含2000个节点</p></li>
<li><p>调用mindquantum的qaia模块，选择不同的算法求解器，计算切割值</p></li>
<li><p>根据不同算法得到的切割值，绘图，可以直观看到在有限时间内启发式算法得到的近似解逼近理论最优解</p></li>
</ol>
<p><strong>环境准备</strong> &gt; 需要提前安装<a class="reference external" href="https://gitee.com/mindspore/mindquantum#%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B">mindquantum&gt;=0.9.11</a></p>
<p>导入常用的Python库和模块</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 设置忽略警告信息，即在程序运行时不输出warning警告信息。</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="c1"># QAIA量子启发式算法相关求解器</span>
<span class="kn">from</span> <span class="nn">mindquantum.algorithm.qaia</span> <span class="kn">import</span> <span class="n">ASB</span><span class="p">,</span> <span class="n">BSB</span><span class="p">,</span> <span class="n">DSB</span><span class="p">,</span> <span class="n">SimCIM</span><span class="p">,</span> <span class="n">NMFA</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># 绘图，自定义图例的显示方式，设置字体属性</span>
<span class="kn">from</span> <span class="nn">matplotlib.legend_handler</span> <span class="kn">import</span> <span class="n">HandlerTuple</span>
<br/></pre></div>
</div>
</div>
</section>
</section>
<section id="数据准备">
<h2>数据准备<a class="headerlink" href="#数据准备" title="永久链接至标题"></a></h2>
<p>下载数据，大规模的无向图数据集来源于<a class="reference external" href="https://web.stanford.edu/~yyye/">Stanford Professor Yinyu Ye</a>。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># HTTP 网络通信库-requests</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">graph_file</span> <span class="o">=</span> <span class="s1">&#39;https://web.stanford.edu/~yyye/yyye/Gset/G22&#39;</span>

<span class="c1"># 使用requests库中的get方法发送HTTP请求，将url的响应结果存入变量，再以二进制写入模式打开文件写入本地</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">graph_file</span><span class="p">)</span>
<span class="nb">open</span><span class="p">(</span><span class="s1">&#39;G22.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>


<span class="c1"># 如果上述-下载图集的代码执行，报错TimeoutError，说明是网络问题</span>
<span class="c1"># 可以手动点击网址 https://web.stanford.edu/~yyye/yyye/Gset/G22，下载数据，保存在本地，与该教程同级目录</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
217828
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">scipy.sparse</span> <span class="kn">import</span> <span class="n">coo_matrix</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>


<span class="k">def</span> <span class="nf">read_gset</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">negate</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="c1"># 读取图表</span>
    <span class="n">graph</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
    <span class="c1"># 节点的数量</span>
    <span class="n">n_v</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">graph</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="c1"># 边的数量</span>
    <span class="n">n_e</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">graph</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="c1"># 如果节点和边不匹配，会抛出错误</span>
    <span class="k">assert</span> <span class="n">n_e</span> <span class="o">==</span> <span class="n">graph</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;The number of edges is not matched&#39;</span>

    <span class="c1"># 将读取的数据转换为一个COO矩阵（Coordinate List Format），并返回一个稀疏矩阵</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">coo_matrix</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">graph</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">graph</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]]),</span>
                    <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">graph</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">graph</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span>
                     <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">graph</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">graph</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">]))),</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">n_v</span><span class="p">,</span> <span class="n">n_v</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">negate</span><span class="p">:</span>
        <span class="n">G</span> <span class="o">=</span> <span class="o">-</span><span class="n">G</span>

    <span class="k">return</span> <span class="n">G</span>

<span class="n">G</span> <span class="o">=</span> <span class="n">read_gset</span><span class="p">(</span><span class="s2">&quot;./G22.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="运行量子启发式求解器">
<h2>运行量子启发式求解器<a class="headerlink" href="#运行量子启发式求解器" title="永久链接至标题"></a></h2>
<p>读取数据集，转换成对应的graph矩阵后，使用QAIA量子启发式算法进行求解MAX-CUT问题 mindquantum集成了强大、丰富的<a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/zh-CN/r0.9/algorithm/mindquantum.algorithm.qaia.html#module-mindquantum.algorithm.qaia">启发式算法QAIA武器库</a></p>
<ul class="simple">
<li><p>mindquantum.algorithm.qaia.QAIA 量子退火启发式算法基类。</p></li>
<li><p>mindquantum.algorithm.qaia.CAC 混沌振幅控制算法。</p></li>
<li><p>mindquantum.algorithm.qaia.CFC 混沌振幅反馈算法</p></li>
<li><p>mindquantum.algorithm.qaia.LQA 局域量子退火算法。</p></li>
<li><p>mindquantum.algorithm.qaia.NMFA 含噪平均场退火算法。</p></li>
<li><p>mindquantum.algorithm.qaia.ASB 绝热模拟分叉算法。</p></li>
<li><p>mindquantum.algorithm.qaia.BSB 弹道模拟分叉算法。</p></li>
<li><p>mindquantum.algorithm.qaia.DSB 离散模拟分叉算法。</p></li>
<li><p>mindquantum.algorithm.qaia.SFC 离散振幅反馈算法。</p></li>
<li><p>mindquantum.algorithm.qaia.SimCIM 模拟相干伊辛机算法。</p></li>
</ul>
<blockquote>
<div><p>下面使用“NMFA/含噪平均场退火算法”, “SimCIM/模拟相干伊辛机算法”, “ASB/绝热模拟分叉算法”, “BSB弹道模拟分叉算法”, “DSB离散模拟分叉算法”。 分别求解MAX-CUT问题，并设置采样次数和迭代次数，得到近似解，运行时间。 最后比较五种算法得到的近似解和理论最终解，体现出QAIA启发式算法的优势。</p>
</div></blockquote>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 设置采样次数，迭代步数，切割值</span>
<span class="n">sample_size</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">n_iter_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">750</span><span class="p">,</span> <span class="mi">1000</span><span class="p">]</span>

<span class="n">cut_value_list</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 开始时间，统计运行时间</span>
<span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>


<span class="k">for</span> <span class="n">n_iter</span> <span class="ow">in</span> <span class="n">n_iter_list</span><span class="p">:</span>
    <span class="c1"># 使用NMFA算法，设置耦合矩阵、样本次数、迭代次数</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">NMFA</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">sample_size</span><span class="p">,</span> <span class="n">n_iter</span><span class="o">=</span><span class="n">n_iter</span><span class="p">)</span>
    <span class="c1"># 动力学演化</span>
    <span class="n">s</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="c1"># 计算切割值</span>
    <span class="n">cut_value</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">calc_cut</span><span class="p">()</span>
    <span class="n">cut_value_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cut_value</span><span class="p">)</span>

<span class="n">ntime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NMFA dynamical evolution complete, </span><span class="se">\t</span><span class="s2">run time </span><span class="si">{</span><span class="n">ntime</span><span class="o">-</span><span class="n">start_time</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="k">for</span> <span class="n">n_iter</span> <span class="ow">in</span> <span class="n">n_iter_list</span><span class="p">:</span>
    <span class="c1"># 使用SimCIM算法，设置耦合矩阵、样本次数、迭代次数、迭代步长、噪声标准差</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">SimCIM</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">sample_size</span><span class="p">,</span> <span class="n">n_iter</span><span class="o">=</span><span class="n">n_iter</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="n">cut_value</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">calc_cut</span><span class="p">()</span>
    <span class="n">cut_value_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cut_value</span><span class="p">)</span>

<span class="n">stime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SimCIM dynamical evolution complete, </span><span class="se">\t</span><span class="s2">run time </span><span class="si">{</span><span class="n">stime</span><span class="o">-</span><span class="n">ntime</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="k">for</span> <span class="n">n_iter</span> <span class="ow">in</span> <span class="n">n_iter_list</span><span class="p">:</span>
    <span class="c1"># 使用ASB算法，设置耦合矩阵、样本次数、迭代次数</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">ASB</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">sample_size</span><span class="p">,</span> <span class="n">n_iter</span><span class="o">=</span><span class="n">n_iter</span><span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="n">cut_value</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">calc_cut</span><span class="p">()</span>
    <span class="n">cut_value_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cut_value</span><span class="p">)</span>

<span class="n">atime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ASB dynamical evolution complete, </span><span class="se">\t</span><span class="s2">run time </span><span class="si">{</span><span class="n">atime</span><span class="o">-</span><span class="n">stime</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="k">for</span> <span class="n">n_iter</span> <span class="ow">in</span> <span class="n">n_iter_list</span><span class="p">:</span>
    <span class="c1"># 使用BSB算法，设置耦合矩阵、样本次数、迭代次数</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">BSB</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">sample_size</span><span class="p">,</span> <span class="n">n_iter</span><span class="o">=</span><span class="n">n_iter</span><span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="n">cut_value</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">calc_cut</span><span class="p">()</span>
    <span class="n">cut_value_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cut_value</span><span class="p">)</span>

<span class="n">btime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;BSB dynamical evolution complete, </span><span class="se">\t</span><span class="s2">run time </span><span class="si">{</span><span class="n">btime</span><span class="o">-</span><span class="n">atime</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="k">for</span> <span class="n">n_iter</span> <span class="ow">in</span> <span class="n">n_iter_list</span><span class="p">:</span>
    <span class="c1"># 使用DSB算法，设置耦合矩阵、样本次数、迭代次数</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">DSB</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">sample_size</span><span class="p">,</span> <span class="n">n_iter</span><span class="o">=</span><span class="n">n_iter</span><span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="n">cut_value</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">calc_cut</span><span class="p">()</span>
    <span class="n">cut_value_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cut_value</span><span class="p">)</span>

<span class="n">dtime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DSB dynamical evolution complete, </span><span class="se">\t</span><span class="s2">run time </span><span class="si">{</span><span class="n">dtime</span><span class="o">-</span><span class="n">btime</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;use time </span><span class="si">{</span><span class="n">dtime</span><span class="o">-</span><span class="n">start_time</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
NMFA dynamical evolution complete,      run time 27.952094316482544
SimCIM dynamical evolution complete,    run time 20.83353018760681
ASB dynamical evolution complete,       run time 29.15273404121399
BSB dynamical evolution complete,       run time 11.221607446670532
DSB dynamical evolution complete,       run time 15.010071277618408
use time 104.17003726959229
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 转换成numpy array格式的矩阵</span>
<span class="n">cut_value_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">cut_value_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="验证结果">
<h2>验证结果<a class="headerlink" href="#验证结果" title="永久链接至标题"></a></h2>
<p>使用不同的启发式算法，得到切割值近似解后，再对比理论最优解，绘图比较。 可以直观发现面对大规模图分割问题，QAIA算法在10s级时间内，<strong>近似解即可逼近到最优解，优势明显</strong>。</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 设置标签、标识、颜色</span>
<span class="n">label</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;NMFA&quot;</span><span class="p">,</span> <span class="s2">&quot;SimCIM&quot;</span><span class="p">,</span> <span class="s2">&quot;aSB&quot;</span><span class="p">,</span> <span class="s2">&quot;bSB&quot;</span><span class="p">,</span> <span class="s2">&quot;dSB&quot;</span><span class="p">,</span> <span class="s2">&quot;BLS&quot;</span><span class="p">]</span>
<span class="n">marker</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;^&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;P&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]</span>
<span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;olivedrab&quot;</span><span class="p">,</span> <span class="s2">&quot;darkorange&quot;</span><span class="p">,</span> <span class="s2">&quot;grey&quot;</span><span class="p">,</span> <span class="s2">&quot;dodgerblue&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<section id="1绘制折线图">
<h3>1.绘制折线图<a class="headerlink" href="#1绘制折线图" title="永久链接至标题"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cut value curves，设置figure画布 尺寸</span>
<span class="n">legend_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">mean_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">max_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># 查表可知，G22.txt对应的节点图，MAXCUT的理论最优解是13359</span>
<span class="c1"># 设置最优解的折线，x\y轴</span>
<span class="p">(</span><span class="n">best</span><span class="p">,)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mf">1.05</span><span class="p">,</span> <span class="mf">3.15</span><span class="p">],</span> <span class="p">[</span><span class="mi">13359</span><span class="p">,</span> <span class="mi">13359</span><span class="p">],</span> <span class="s2">&quot;--k&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># 遍历，将五种算法得到的切割值近似解，绘图</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">label</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
    <span class="n">tmp_mean_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tmp_max_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">n_iter_list</span><span class="p">)):</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">cut_value_list</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">9</span> <span class="o">+</span> <span class="n">j</span><span class="p">]</span>
        <span class="n">mean_val</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span>
        <span class="n">max_val</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span>
        <span class="n">tmp_mean_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mean_val</span><span class="p">)</span>
        <span class="n">tmp_max_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">max_val</span><span class="p">)</span>
    <span class="p">(</span><span class="n">mean_axis</span><span class="p">,)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">n_iter_list</span><span class="p">),</span> <span class="n">tmp_mean_list</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span>
    <span class="p">)</span>
    <span class="p">(</span><span class="n">max_axis</span><span class="p">,)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">n_iter_list</span><span class="p">),</span>
        <span class="n">tmp_max_list</span><span class="p">,</span>
        <span class="s2">&quot;--o&quot;</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
        <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
        <span class="n">markersize</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span>
        <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
        <span class="n">mfc</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
        <span class="n">mew</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">legend_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">mean_axis</span><span class="p">,</span> <span class="n">max_axis</span><span class="p">))</span>


<span class="c1"># 根据散点拟合成折线</span>
<span class="n">legend_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="mf">1.05</span><span class="p">,</span> <span class="mf">3.15</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">12500</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">13380</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span>
    <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">n_iter_list</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;$10^2$&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;$10^3$&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;$10^4$&quot;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">28</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;$N_</span><span class="si">{step}</span><span class="s2">$&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Cut value&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
    <span class="n">legend_list</span><span class="p">,</span>
    <span class="n">label</span><span class="p">,</span>
    <span class="n">numpoints</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">handler_map</span><span class="o">=</span><span class="p">{</span><span class="nb">tuple</span><span class="p">:</span> <span class="n">HandlerTuple</span><span class="p">(</span><span class="n">ndivide</span><span class="o">=</span><span class="kc">None</span><span class="p">)},</span>
    <span class="n">fontsize</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
    <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">labelspacing</span><span class="o">=</span><span class="mf">0.18</span><span class="p">,</span>
    <span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mf">0.68</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.legend.Legend at 0x7fd1b605c2e0&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/case_library_quantum_annealing_inspired_algorithm_19_1.png" src="../_images/case_library_quantum_annealing_inspired_algorithm_19_1.png" />
</div>
</div>
</section>
<section id="2绘制直方图">
<h3>2.绘制直方图<a class="headerlink" href="#2绘制直方图" title="永久链接至标题"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="c1"># Histogram，创建画布，设置区间、颜色、标签、中心对齐</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span>
    <span class="n">cut_value_list</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">9</span><span class="p">)]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span>
    <span class="n">bins</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
    <span class="n">align</span><span class="o">=</span><span class="s2">&quot;mid&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># 绘直方图</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">13359</span><span class="p">,</span> <span class="mi">13359</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1050</span><span class="p">],</span> <span class="s2">&quot;--k&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;BLS (13359)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">80</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.45</span><span class="p">),</span> <span class="n">labelspacing</span><span class="o">=</span><span class="mf">0.18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Cut value&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Counts&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span>
    <span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s2">&quot;$13212$&quot;</span><span class="p">,</span>
        <span class="s2">&quot;$13226$&quot;</span><span class="p">,</span>
        <span class="s2">&quot;$13241$&quot;</span><span class="p">,</span>
        <span class="s2">&quot;$13255$&quot;</span><span class="p">,</span>
        <span class="s2">&quot;$13270$&quot;</span><span class="p">,</span>
        <span class="s2">&quot;$13285$&quot;</span><span class="p">,</span>
        <span class="s2">&quot;$13299$&quot;</span><span class="p">,</span>
        <span class="s2">&quot;$13314$&quot;</span><span class="p">,</span>
        <span class="s2">&quot;$13328$&quot;</span><span class="p">,</span>
        <span class="s2">&quot;$13343$&quot;</span><span class="p">,</span>
        <span class="s2">&quot;$13358$&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">rotation</span><span class="o">=-</span><span class="mi">45</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">28</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/case_library_quantum_annealing_inspired_algorithm_21_0.png" src="../_images/case_library_quantum_annealing_inspired_algorithm_21_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindquantum.utils.show_info</span> <span class="kn">import</span> <span class="n">InfoTable</span>

<span class="n">InfoTable</span><span class="p">(</span><span class="s1">&#39;mindquantum&#39;</span><span class="p">,</span> <span class="s1">&#39;scipy&#39;</span><span class="p">,</span> <span class="s1">&#39;numpy&#39;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table border="1">
  <tr>
    <th>Software</th>
    <th>Version</th>
  </tr>
<tr><td>mindquantum</td><td>0.9.11</td></tr>
<tr><td>scipy</td><td>1.8.1</td></tr>
<tr><td>numpy</td><td>1.21.5</td></tr>
<tr>
    <th>System</th>
    <th>Info</th>
</tr>
<tr><td>Python</td><td>3.9.12</td></tr><tr><td>OS</td><td>Linux x86_64</td></tr><tr><td>Memory</td><td>1623.2 GB</td></tr><tr><td>CPU Max Thread</td><td>192</td></tr><tr><td>Date</td><td>Tue Mar  5 12:29:37 2024</td></tr>
</table></div>
</div>
</section>
</section>
<section id="参考文献-">
<h2>参考文献：<a class="headerlink" href="#参考文献-" title="永久链接至标题"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://www.mindspore.cn/mindquantum/docs/zh-CN/r0.9/algorithm/mindquantum.algorithm.qaia.html#module-mindquantum.algorithm.qaia">mindquantum.algorithm.qaia API</a></p></li>
<li><ol class="upperalpha simple">
<li><p>Lucas Ising formulations of many NP problems. Front. Physics 2, 5 (2014).</p></li>
</ol>
</li>
<li><ol class="upperalpha simple" start="8">
<li><p>Goto,K. Tatsumura, A. R. Dixon, Combinatorial optimization by simulating adiabatic bifurcations in nonlinear</p></li>
</ol>
</li>
<li><p>Hamiltonian systems.Sci. Adv. 5, eaav2372 (2019).</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="qnn_for_nlp.html" class="btn btn-neutral float-left" title="量子神经网络在自然语言处理中的应用" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="../overview.html" class="btn btn-neutral float-right" title="总览" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 MindSpore.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>