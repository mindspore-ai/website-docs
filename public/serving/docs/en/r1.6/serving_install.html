<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MindSpore Serving Installation &mdash; MindSpore master documentation</title><script>;(()=>{const e=localStorage.getItem("ms-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;(e?"dark"===e:t)&&document.documentElement.setAttribute("data-o-theme","dark")})();</script><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script><script src="_static/jquery.js"></script>
        <script src="_static/js/theme.js"></script><script src="_static/underscore.js"></script><script src="_static/doctools.js"></script><script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MindSpore Serving-based Inference Service Deployment" href="serving_example.html" />
    <link rel="prev" title="MindSpore Serving Documents" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">MindSpore Serving Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation-by-pip">Installation by pip</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation-by-source-code">Installation by Source Code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation-verification">Installation Verification</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="serving_example.html">MindSpore Serving-based Inference Service Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="serving_distributed_example.html">MindSpore Serving-based Distributed Inference Service Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="serving_grpc.html">gRPC-based MindSpore Serving Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="serving_restful.html">RESTful-based MindSpore Serving Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="serving_model.html">Servable Provided Through Model Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="serving_multi_subgraphs.html">Service Deployment with Multiple Subgraphs and Stateful Model</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="server.html">mindspore_serving.server</a></li>
<li class="toctree-l1"><a class="reference internal" href="client.html">mindspore_serving.client</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>MindSpore Serving Installation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/serving_install.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="mindspore-serving-installation">
<h1>MindSpore Serving Installation<a class="headerlink" href="#mindspore-serving-installation" title="Permalink to this headline"></a></h1>
<p><a class="reference external" href="https://gitee.com/mindspore/docs/blob/r1.6/docs/serving/docs/source_en/serving_install.md"><img alt="View Source On Gitee" src="https://gitee.com/mindspore/docs/raw/r1.6/resource/_static/logo_source_en.png" /></a></p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline"></a></h2>
<p>MindSpore Serving wheel packages are common to various hardware platforms(Nvidia GPU, Ascend 910/310P/310, CPU). The inference task depends on the MindSpore or MindSpore Lite inference framework. We need to select one of them as the Serving Inference backend. When these two inference backend both exist, Mindspore Lite inference framework will be used.</p>
<p>MindSpore and MindSpore Lite have different build packages for different hardware platforms. The following table lists the target devices and model formats supported by each build package.</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Inference backend</p></th>
<th class="head"><p>Build platform</p></th>
<th class="head"><p>Target device</p></th>
<th class="head"><p>Supported model formats</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>MindSpore</p></td>
<td><p>Nvidia GPU</p></td>
<td><p>Nvidia GPU</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MindIR</span></code></p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>Ascend</p></td>
<td><p>Ascend 910</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MindIR</span></code></p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p></p></td>
<td><p>Ascend 310P/310</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MindIR</span></code>, <code class="docutils literal notranslate"><span class="pre">OM</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>MindSpore Lite</p></td>
<td><p>Nvidia GPU</p></td>
<td><p>Nvidia GPU, CPU</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MindIR_Opt</span></code></p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>Ascend</p></td>
<td><p>Ascend 310, CPU</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MindIR_Opt</span></code></p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>CPU</p></td>
<td><p>CPU</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MindIR_Opt</span></code></p></td>
</tr>
</tbody>
</table>
<p>When <a class="reference external" href="https://www.mindspore.cn/">MindSpore</a> is used as the inference backend, MindSpore Serving supports the Ascend 910/310P/310 and Nvidia GPU environments. The Ascend 310P/310 environment supports both <code class="docutils literal notranslate"><span class="pre">OM</span></code> and <code class="docutils literal notranslate"><span class="pre">MindIR</span></code> model formats, and the Ascend 910 and GPU environment only supports the <code class="docutils literal notranslate"><span class="pre">MindIR</span></code> model format.</p>
<p>For details about how to install and configure MindSpore, see <a class="reference external" href="https://gitee.com/mindspore/mindspore/blob/r1.6/README.md#installation">Installing MindSpore</a> and <a class="reference external" href="https://gitee.com/mindspore/docs/blob/r1.6/install/mindspore_ascend_install_source_en.md#configuring-environment-variables">Configuring MindSpore</a>.</p>
<p>When <a class="reference external" href="https://www.mindspore.cn/lite">MindSpore Lite</a> is used as the inference backend, MindSpore Serving supports Ascend 310, Nvidia GPU and CPU environments. Only the <code class="docutils literal notranslate"><span class="pre">MindIR_Opt</span></code> model format is supported. Currently, models in <code class="docutils literal notranslate"><span class="pre">MindIR</span></code> format exported from MindSpore and models exported from other frameworks need to be converted to <code class="docutils literal notranslate"><span class="pre">MindIR_Opt</span></code> format using MindSpore Lite conversion tool. During model conversion, if the target device is set to <code class="docutils literal notranslate"><span class="pre">Ascend310</span></code>, the generated <code class="docutils literal notranslate"><span class="pre">MindIR_Opt</span></code> model can be used only in the Ascend 310 environment. Otherwise, the generated <code class="docutils literal notranslate"><span class="pre">MindIR_Opt</span></code> model can be used only in the Nvidia GPU and CPU environments.</p>
<p>For details about how to compile and install MindSpore Lite, see the <a class="reference external" href="https://www.mindspore.cn/lite/docs/en/r1.6/index.html">MindSpore Lite Documentation</a>.
We should configure the environment variable <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> to indicates the installation path of <code class="docutils literal notranslate"><span class="pre">libmindspore-lite.so</span></code>.</p>
<p>We can install MindSpore Serving either by pip or by source code.</p>
<section id="installation-by-pip">
<h3>Installation by pip<a class="headerlink" href="#installation-by-pip" title="Permalink to this headline"></a></h3>
<p>Perform the following steps to install Serving:</p>
<p>If use the pip command, download the .whl package from the <a class="reference external" href="https://www.mindspore.cn/versions/en">MindSpore Serving page</a> and install it.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>https://ms-release.obs.cn-north-4.myhuaweicloud.com/<span class="o">{</span>version<span class="o">}</span>/Serving/<span class="o">{</span>arch<span class="o">}</span>/mindspore_serving-<span class="o">{</span>version<span class="o">}</span>-<span class="o">{</span>python_version<span class="o">}</span>-linux_<span class="o">{</span>arch<span class="o">}</span>.whl<span class="w"> </span>--trusted-host<span class="w"> </span>ms-release.obs.cn-north-4.myhuaweicloud.com<span class="w"> </span>-i<span class="w"> </span>https://pypi.tuna.tsinghua.edu.cn/simple
</pre></div>
</div>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">{version}</span></code> denotes the version of MindSpore Serving. For example, when you are downloading MindSpore Serving 1.1.0, <code class="docutils literal notranslate"><span class="pre">{version}</span></code> should be 1.1.0.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{arch}</span></code> denotes the system architecture. For example, the Linux system you are using is x86 architecture 64-bit, <code class="docutils literal notranslate"><span class="pre">{arch}</span></code> should be <code class="docutils literal notranslate"><span class="pre">x86_64</span></code>. If the system is ARM architecture 64-bit, then it should be <code class="docutils literal notranslate"><span class="pre">aarch64</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{python_version}</span></code> spcecifies the python version for which MindSpore Serving is built. If you wish to use Python3.7.5,<code class="docutils literal notranslate"><span class="pre">{python_version}</span></code> should be <code class="docutils literal notranslate"><span class="pre">cp37-cp37m</span></code>. If Python3.9.0 is used, it should be <code class="docutils literal notranslate"><span class="pre">cp39-cp39</span></code>. Please use the same Python environment whereby MindSpore Serving is installed.</p></li>
</ul>
</div></blockquote>
</section>
<section id="installation-by-source-code">
<h3>Installation by Source Code<a class="headerlink" href="#installation-by-source-code" title="Permalink to this headline"></a></h3>
<p>Install Serving using the <a class="reference external" href="https://gitee.com/mindspore/serving">source code</a>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://gitee.com/mindspore/serving.git<span class="w"> </span>-b<span class="w"> </span>master
<span class="nb">cd</span><span class="w"> </span>serving
bash<span class="w"> </span>build.sh
</pre></div>
</div>
<p>For the <code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">build.sh</span></code> above, we can add <code class="docutils literal notranslate"><span class="pre">-jn</span></code>, for example <code class="docutils literal notranslate"><span class="pre">-j16</span></code>, to accelerate compilation. By adding <code class="docutils literal notranslate"><span class="pre">-S</span> <span class="pre">on</span></code>
option, third-party dependencies can be downloaded from gitee instead of github.</p>
<p>After the build is complete, find the .whl installation package of Serving in the <code class="docutils literal notranslate"><span class="pre">serving/build/package/</span></code> directory
and install it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">mindspore_serving</span><span class="o">-</span><span class="p">{</span><span class="n">version</span><span class="p">}</span><span class="o">-</span><span class="p">{</span><span class="n">python_version</span><span class="p">}</span><span class="o">-</span><span class="n">linux_</span><span class="p">{</span><span class="n">arch</span><span class="p">}</span><span class="o">.</span><span class="n">whl</span>
</pre></div>
</div>
</section>
</section>
<section id="installation-verification">
<h2>Installation Verification<a class="headerlink" href="#installation-verification" title="Permalink to this headline"></a></h2>
<p>Run the following commands to verify the installation. Import the Python module. If no error is reported, the installation is successful.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mindspore_serving</span> <span class="kn">import</span> <span class="n">server</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="MindSpore Serving Documents" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="serving_example.html" class="btn btn-neutral float-right" title="MindSpore Serving-based Inference Service Deployment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>