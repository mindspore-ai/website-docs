<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data Processing and Augmentation &mdash; MindSpore r0.5 documentation</title><script>;(()=>{const e=localStorage.getItem("ms-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;(e?"dark"===e:t)&&document.documentElement.setAttribute("data-o-theme","dark")})();</script><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script><script src="../../_static/jquery.js"></script>
        <script src="../../_static/js/theme.js"></script><script src="../../_static/underscore.js"></script><script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Defining the Network" href="../defining_the_network.html" />
    <link rel="prev" title="Converting Datasets to the Mindspore Data Format" href="converting_datasets.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Quick Start</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../quick_start/quick_start.html">Implementing an Image Classification Application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="data_preparation.html">Data Preparation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="loading_the_datasets.html">Loading the Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="converting_datasets.html">Converting Datasets to the Mindspore Data Format</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Data Processing and Augmentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-processing-operations-supported-by-mindspore">Data Processing Operations Supported by Mindspore</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#repeat">repeat</a></li>
<li class="toctree-l4"><a class="reference internal" href="#batch">batch</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shuffle">shuffle</a></li>
<li class="toctree-l4"><a class="reference internal" href="#map">map</a></li>
<li class="toctree-l4"><a class="reference internal" href="#zip">zip</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#data-augmentation">Data Augmentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-the-c-transforms-module">Using the <code class="docutils literal notranslate"><span class="pre">c_transforms</span></code> Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-the-py-transforms-module">Using the <code class="docutils literal notranslate"><span class="pre">py_transforms</span></code> Module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../defining_the_network.html">Defining the Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../saving_and_loading_model_parameters.html">Saving and Loading Model Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../multi_platform_inference.html">Multi-platform Inference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Application</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../advanced_use/computer_vision_application.html">Computer Vision Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced_use/nlp_application.html">Natural Language Processing (NLP) Application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Model Optimization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../advanced_use/debugging_in_pynative_mode.html">Debugging in PyNative Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced_use/customized_debugging_information.html">Customized Debugging Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced_use/visualization_tutorials.html">Training Process Visualization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Performance Optimization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../advanced_use/distributed_training_tutorials.html">Distributed training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced_use/mixed_precision.html">Mixed Precision</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage on Device</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../advanced_use/on_device_inference.html">On-Device Inference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Migration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../advanced_use/network_migration.html">Network Migration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AI Security and Privacy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../advanced_use/model_security.html">Model Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced_use/differential_privacy.html">Differential Privacy in Machine Learning</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="data_preparation.html">Data Preparation</a> &raquo;</li>
      <li>Data Processing and Augmentation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/use/data_preparation/data_processing_and_augmentation.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="data-processing-and-augmentation">
<h1>Data Processing and Augmentation<a class="headerlink" href="#data-processing-and-augmentation" title="Permalink to this headline"></a></h1>
<p><a class="reference external" href="https://gitee.com/mindspore/docs/blob/r0.5/tutorials/source_en/use/data_preparation/data_processing_and_augmentation.md"><img alt="View Source On Gitee" src="../../_images/logo_source.png" /></a></p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p>Data is the basis of deep learning. Data input plays an important role in the deep neural network training. Therefore, after the original dataset is obtained and before data is loaded and trained, data processing or augmentation is often required due to data size and performance restrictions, to obtain optimized data input.<br />
MindSpore provides users with data processing and augmentation functions.</p>
<blockquote>
<div><p>Essentially, data augmentation is implemented through the data processing operation <code class="docutils literal notranslate"><span class="pre">map</span></code>. Yet data augmentation is described separately due to its diversified transform operations.</p>
</div></blockquote>
</section>
<section id="data-processing-operations-supported-by-mindspore">
<h2>Data Processing Operations Supported by Mindspore<a class="headerlink" href="#data-processing-operations-supported-by-mindspore" title="Permalink to this headline"></a></h2>
<p>MindSpore supports multiple data processing operations, including repeat, batch, shuffle, and map, as shown in the following table.</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>repeat</p></td>
<td><p>Repeat a dataset to increase the data size.</p></td>
</tr>
<tr class="row-odd"><td><p>batch</p></td>
<td><p>Process data in batches to accelerate the training process.</p></td>
</tr>
<tr class="row-even"><td><p>shuffle</p></td>
<td><p>Shuffle data.</p></td>
</tr>
<tr class="row-odd"><td><p>map</p></td>
<td><p>Apply the provided functions or operators to the specified column data.</p></td>
</tr>
<tr class="row-even"><td><p>zip</p></td>
<td><p>Combine multiple datasets into one dataset.</p></td>
</tr>
</tbody>
</table>
<p>The operations can be performed separately. In practice, they are often used together as needed. You are advised to use them in the following sequence:</p>
<p><img alt="avatar" src="../../_images/dataset_pipeline.png" /></p>
<p>In the following example, the <code class="docutils literal notranslate"><span class="pre">shuffle</span></code>, <code class="docutils literal notranslate"><span class="pre">batch</span></code>, and <code class="docutils literal notranslate"><span class="pre">repeat</span></code> operations are performed when the MNIST dataset is read.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore.dataset</span> <span class="k">as</span> <span class="nn">ds</span>

<span class="n">ds1</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">MnistDataset</span><span class="p">(</span><span class="n">MNIST_DATASET_PATH</span><span class="p">,</span> <span class="n">MNIST_SCHEMA</span><span class="p">)</span>  <span class="c1"># Create MNIST dataset.</span>

<span class="n">ds1</span> <span class="o">=</span> <span class="n">ds1</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">buffer_size</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span> 
<span class="n">ds1</span> <span class="o">=</span> <span class="n">ds1</span><span class="o">.</span><span class="n">batch</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="n">drop_remainder</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ds1</span> <span class="o">=</span> <span class="n">ds1</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>In the preceding operations, data is shuffled, every 32 data records are combined into a batch, and then the dataset is repeated for 10 times.</p>
<p>The following describes how to construct a simple dataset <code class="docutils literal notranslate"><span class="pre">ds1</span></code> and perform data processing operations on it.</p>
<ol class="arabic">
<li><p>Import the module on which data processing depends.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore.dataset</span> <span class="k">as</span> <span class="nn">ds</span>
</pre></div>
</div>
</li>
<li><p>Define the <code class="docutils literal notranslate"><span class="pre">generator_func</span></code> function for dataset generating.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">generator_func</span><span class="p">():</span>
     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
         <span class="k">yield</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]),)</span>
</pre></div>
</div>
</li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">GeneratorDataset</span></code> to create the dataset <code class="docutils literal notranslate"><span class="pre">ds1</span></code> for data processing.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds1</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">GeneratorDataset</span><span class="p">(</span><span class="n">generator_func</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ds1:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">ds1</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>The output is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds1</span><span class="p">:</span>
<span class="p">[</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
<span class="p">[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<span class="p">[</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">]</span>
<span class="p">[</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
</li>
</ol>
<section id="repeat">
<h3>repeat<a class="headerlink" href="#repeat" title="Permalink to this headline"></a></h3>
<p>In limited datasets, to optimize the network, a dataset is usually trained for multiple times.</p>
<p><img alt="avatar" src="../../_images/repeat.png" /></p>
<blockquote>
<div><p>In machine learning, an epoch refers to one cycle through the full training dataset.</p>
</div></blockquote>
<p>During multiple epochs, <code class="docutils literal notranslate"><span class="pre">repeat</span></code> can be used to increase the data size. The definition of <code class="docutils literal notranslate"><span class="pre">repeat</span></code> is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">repeat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</pre></div>
</div>
<p>You can define the dataset <code class="docutils literal notranslate"><span class="pre">ds2</span></code> and call <code class="docutils literal notranslate"><span class="pre">repeat</span></code> to increase the data size. The sample code is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds2</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">GeneratorDataset</span><span class="p">(</span><span class="n">generator_func</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
<span class="n">ds2</span> <span class="o">=</span> <span class="n">ds2</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ds2:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">ds2</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Set the multiple to 2. Therefore, the data size of <code class="docutils literal notranslate"><span class="pre">ds2</span></code> is twice that of the original dataset <code class="docutils literal notranslate"><span class="pre">ds1</span></code>. The output is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds2</span><span class="p">:</span>
<span class="p">[</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
<span class="p">[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<span class="p">[</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">]</span>
<span class="p">[</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
<span class="p">[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<span class="p">[</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">]</span>
<span class="p">[</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="batch">
<h3>batch<a class="headerlink" href="#batch" title="Permalink to this headline"></a></h3>
<p>Combine data records in datasets into batches. In practice, data can be processed in batches. Training data in batches can reduce training steps and accelerate the training process. MindSpore uses the <code class="docutils literal notranslate"><span class="pre">batch</span></code> function to implement the batch operation. The function is defined as follows:</p>
<p><img alt="avatar" src="../../_images/batch.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">batch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">batch_size</span><span class="p">,</span> <span class="n">drop_remainder</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">num_parallel_workers</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Use the dataset <code class="docutils literal notranslate"><span class="pre">ds1</span></code> generated by GeneratorDataset to construct two datasets.</p>
<ul class="simple">
<li><p>In the first dataset <code class="docutils literal notranslate"><span class="pre">ds2</span></code>, combine every two data records into a batch.</p></li>
<li><p>In the second dataset <code class="docutils literal notranslate"><span class="pre">ds3</span></code>, combine every three data records into a batch, and remove the remaining data records that are less than three.</p></li>
</ul>
<p>The sample code of <code class="docutils literal notranslate"><span class="pre">ds2</span></code> is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds2</span> <span class="o">=</span> <span class="n">ds1</span><span class="o">.</span><span class="n">batch</span><span class="p">(</span><span class="n">batch_size</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Default drop_remainder is False, the last remainder batch isn&#39;t dropped.</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;batch size:2    drop remainder:False&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">ds2</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>The output is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">batch</span> <span class="n">size</span><span class="p">:</span><span class="mi">2</span>    <span class="n">drop</span> <span class="n">remainder</span><span class="p">:</span><span class="kc">False</span>
<span class="p">[[</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]]</span>
<span class="p">[[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">]]</span>
<span class="p">[[</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">]]</span>
</pre></div>
</div>
<p>The sample code of <code class="docutils literal notranslate"><span class="pre">ds3</span></code> is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds3</span> <span class="o">=</span> <span class="n">ds1</span><span class="o">.</span><span class="n">batch</span><span class="p">(</span><span class="n">batch_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">drop_remainder</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># When drop_remainder is True, the last remainder batch will be dropped.</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;batch size:3    drop remainder:True&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">ds3</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>The output is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">batch</span> <span class="n">size</span><span class="p">:</span><span class="mi">3</span>    <span class="n">drop</span> <span class="n">remainder</span><span class="p">:</span><span class="kc">True</span>
<span class="p">[[</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]]</span>
</pre></div>
</div>
</section>
<section id="shuffle">
<h3>shuffle<a class="headerlink" href="#shuffle" title="Permalink to this headline"></a></h3>
<p>You can shuffle ordered or repeated datasets.</p>
<p><img alt="avatar" src="../../_images/shuffle.png" /></p>
<p>The shuffle operation is used to shuffle data. A larger value of buffer_size indicates a higher shuffling degree, consuming more time and computing resources.
The definition of <code class="docutils literal notranslate"><span class="pre">shuffle</span></code> is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">shuffle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer_size</span><span class="p">):</span>
</pre></div>
</div>
<p>Call <code class="docutils literal notranslate"><span class="pre">shuffle</span></code> to shuffle the dataset <code class="docutils literal notranslate"><span class="pre">ds1</span></code>. The sample code is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before shuffle:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">ds1</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>

<span class="n">ds2</span> <span class="o">=</span> <span class="n">ds1</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">buffer_size</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After shuffle:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">ds2</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>The possible output is as follows. After data is shuffled, the data sequence changes randomly.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Before</span> <span class="n">shuffle</span><span class="p">:</span>
<span class="p">[</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
<span class="p">[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<span class="p">[</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">]</span>
<span class="p">[</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">]</span>
<span class="n">After</span> <span class="n">shuffle</span><span class="p">:</span>
<span class="p">[</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">]</span>
<span class="p">[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<span class="p">[</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="map">
<h3>map<a class="headerlink" href="#map" title="Permalink to this headline"></a></h3>
<p>The map operation is used to process data. For example, convert the dataset of color images into the dataset of grayscale images. You can flexibly perform the operation as required.
MindSpore provides the <code class="docutils literal notranslate"><span class="pre">map</span></code> function to map datasets. You can apply the provided functions or operators to the specified column data.<br />
You can customize the function or use <code class="docutils literal notranslate"><span class="pre">c_transforms</span></code> or <code class="docutils literal notranslate"><span class="pre">py_transforms</span></code> for data augmentation.</p>
<blockquote>
<div><p>For details about data augmentation operations, see Data Augmentation section.</p>
</div></blockquote>
<p><img alt="avatar" src="../../_images/map.png" /></p>
<p>The definition of <code class="docutils literal notranslate"><span class="pre">map</span></code> is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_columns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">operations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">output_columns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">columns_order</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">num_parallel_workers</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</pre></div>
</div>
<p>In the following example, the <code class="docutils literal notranslate"><span class="pre">map</span></code> function is used to apply the defined anonymous function (lambda function) to the dataset <code class="docutils literal notranslate"><span class="pre">ds1</span></code> so that the data values in the dataset are multiplied by 2.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="mi">2</span>  <span class="c1"># Define lambda function to multiply each element by 2.</span>
<span class="n">ds2</span> <span class="o">=</span> <span class="n">ds1</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">input_columns</span><span class="o">=</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">operations</span><span class="o">=</span><span class="n">func</span><span class="p">)</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">ds2</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>The code output is as follows. Data values in each row of the dataset <code class="docutils literal notranslate"><span class="pre">ds2</span></code> is multiplied by 2.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span> <span class="mi">2</span> <span class="mi">4</span><span class="p">]</span>
<span class="p">[</span><span class="mi">2</span> <span class="mi">4</span> <span class="mi">6</span><span class="p">]</span>
<span class="p">[</span><span class="mi">4</span> <span class="mi">6</span> <span class="mi">8</span><span class="p">]</span>
<span class="p">[</span><span class="mi">6</span> <span class="mi">8</span> <span class="mi">10</span><span class="p">]</span>
<span class="p">[</span><span class="mi">8</span> <span class="mi">10</span> <span class="mi">12</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="zip">
<h3>zip<a class="headerlink" href="#zip" title="Permalink to this headline"></a></h3>
<p>MindSpore provides the <code class="docutils literal notranslate"><span class="pre">zip</span></code> function to combine multiple datasets into one dataset.</p>
<p><img alt="avatar" src="../../_images/zip.png" /></p>
<blockquote>
<div><p>If the column names in the two datasets are the same, the two datasets are not combined. Therefore, pay attention to column names.<br />
If the number of rows in the two datasets is different, the number of rows after combination is the same as the smaller number.</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">zip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">datasets</span><span class="p">):</span>
</pre></div>
</div>
<ol class="arabic">
<li><p>Use the preceding construction method of the dataset <code class="docutils literal notranslate"><span class="pre">ds1</span></code> to construct the dataset <code class="docutils literal notranslate"><span class="pre">ds2</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">generator_func2</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="k">yield</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">i</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]),)</span>

<span class="n">ds2</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">GeneratorDataset</span><span class="p">(</span><span class="n">generator_func2</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;data2&quot;</span><span class="p">])</span>
</pre></div>
</div>
</li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">zip()</span></code> to combine the <code class="docutils literal notranslate"><span class="pre">data1</span></code> column of the dataset <code class="docutils literal notranslate"><span class="pre">ds1</span></code>and the <code class="docutils literal notranslate"><span class="pre">data2</span></code> column of the dataset <code class="docutils literal notranslate"><span class="pre">ds2</span></code> into the dataset <code class="docutils literal notranslate"><span class="pre">ds3</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds3</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">zip</span><span class="p">((</span><span class="n">ds1</span><span class="p">,</span> <span class="n">ds2</span><span class="p">))</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">ds3</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>The output is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;data1&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int64</span><span class="p">),</span> <span class="s1">&#39;data2&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int64</span><span class="p">)}</span>
<span class="p">{</span><span class="s1">&#39;data1&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int64</span><span class="p">),</span> <span class="s1">&#39;data2&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int64</span><span class="p">)}</span>
<span class="p">{</span><span class="s1">&#39;data1&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int64</span><span class="p">),</span> <span class="s1">&#39;data2&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int64</span><span class="p">)}</span>
<span class="p">{</span><span class="s1">&#39;data1&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int64</span><span class="p">),</span> <span class="s1">&#39;data2&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int64</span><span class="p">)}</span>
<span class="p">{</span><span class="s1">&#39;data1&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int64</span><span class="p">),</span> <span class="s1">&#39;data2&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int64</span><span class="p">)}</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="data-augmentation">
<h2>Data Augmentation<a class="headerlink" href="#data-augmentation" title="Permalink to this headline"></a></h2>
<p>During image training, especially when the dataset size is relatively small, you can preprocess images by using a series of data augmentation operations, thereby enriching the datasets.<br />
MindSpore provides the <code class="docutils literal notranslate"><span class="pre">c_transforms</span></code> and <code class="docutils literal notranslate"><span class="pre">py_transforms</span></code> module functions for users to perform data augmentation. You can also customize functions or operators to perform data augmentation. The following table describes the two modules provided by MindSpore. For details, see the related description in the API reference document.</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Module</p></th>
<th class="head"><p>Implementation</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">c_transforms</span></code></p></td>
<td><p>C++-based <a class="reference external" href="https://opencv.org/">OpenCV</a> implementation</p></td>
<td><p>The performance is high.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">py_transforms</span></code></p></td>
<td><p>Python-based <a class="reference external" href="https://pypi.org/project/Pillow/">PIL</a> implementation</p></td>
<td><p>This module provides multiple image augmentation functions and the method for converting between PIL images and NumPy arrays.</p></td>
</tr>
</tbody>
</table>
<p>For users who would like to use Python PIL in image learning tasks, the <code class="docutils literal notranslate"><span class="pre">py_transforms</span></code> module is a good tool for image augmentation. You can use Python PIL to customize extensions.<br />
Data augmentation requires the <code class="docutils literal notranslate"><span class="pre">map</span></code> function. For details about how to use the <code class="docutils literal notranslate"><span class="pre">map</span></code> function, see <a class="reference internal" href="#map"><span class="std std-doc">map</span></a>.</p>
<section id="using-the-c-transforms-module">
<h3>Using the <code class="docutils literal notranslate"><span class="pre">c_transforms</span></code> Module<a class="headerlink" href="#using-the-c-transforms-module" title="Permalink to this headline"></a></h3>
<ol class="arabic">
<li><p>Import the module to the code.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore.dataset.transforms.vision.c_transforms</span> <span class="k">as</span> <span class="nn">transforms</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.image</span> <span class="k">as</span> <span class="nn">mpimg</span>
</pre></div>
</div>
</li>
<li><p>Define data augmentation operators. The following uses <code class="docutils literal notranslate"><span class="pre">Resize</span></code> as an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">ImageFolderDatasetV2</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="n">decode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Decode images. </span>
<span class="n">resize_op</span> <span class="o">=</span> <span class="n">transforms</span><span class="o">.</span><span class="n">Resize</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="mi">500</span><span class="p">),</span> <span class="n">interpolation</span><span class="o">=</span><span class="n">Inter</span><span class="o">.</span><span class="n">LINEAR</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">input_columns</span><span class="o">=</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="n">operations</span><span class="o">=</span><span class="n">resize_op</span><span class="p">)</span>

<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
    <span class="n">imgplot_resized</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ol>
<p>The running result shows that the original image is changed from 1024 x 683 pixels to 500 x 500 pixels after data processing by using <code class="docutils literal notranslate"><span class="pre">Resize</span></code>.
<img alt="avatar" src="../../_images/image.png" /></p>
<p>Figure 1: Original image</p>
<p><img alt="avatar" src="../../_images/image_resized.png" /></p>
<p>Figure 2: Image after its size is reset</p>
</section>
<section id="using-the-py-transforms-module">
<h3>Using the <code class="docutils literal notranslate"><span class="pre">py_transforms</span></code> Module<a class="headerlink" href="#using-the-py-transforms-module" title="Permalink to this headline"></a></h3>
<ol class="arabic">
<li><p>Import the module to the code.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mindspore.dataset.transforms.vision.py_transforms</span> <span class="k">as</span> <span class="nn">transforms</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.image</span> <span class="k">as</span> <span class="nn">mpimg</span>
</pre></div>
</div>
</li>
<li><p>Define data augmentation operators and use the <code class="docutils literal notranslate"><span class="pre">ComposeOp</span></code> API to combine multiple data augmentation operations. The following uses <code class="docutils literal notranslate"><span class="pre">RandomCrop</span></code> as an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">ImageFolderDatasetV2</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">)</span>

<span class="n">transforms_list</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">transforms</span><span class="o">.</span><span class="n">Decode</span><span class="p">(),</span>  <span class="c1"># Decode images to PIL format.</span>
    <span class="n">transforms</span><span class="o">.</span><span class="n">RandomCrop</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="mi">500</span><span class="p">)),</span>
    <span class="n">transforms</span><span class="o">.</span><span class="n">ToTensor</span><span class="p">()</span>  <span class="c1"># Convert PIL images to Numpy ndarray.</span>
<span class="p">]</span>
<span class="n">compose</span> <span class="o">=</span> <span class="n">transforms</span><span class="o">.</span><span class="n">ComposeOp</span><span class="p">(</span><span class="n">transforms_list</span><span class="p">)</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">input_columns</span><span class="o">=</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="n">operations</span><span class="o">=</span><span class="n">compose</span><span class="p">())</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">create_dict_iterator</span><span class="p">():</span>
     <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">])</span>
     <span class="n">imgplot_resized</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
     <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ol>
<p>The running result shows that the original image is changed from 1024 x 683 pixels to 500 x 500 pixels after data processing by using <code class="docutils literal notranslate"><span class="pre">RandomCrop</span></code>.
<img alt="avatar" src="../../_images/image.png" /></p>
<p>Figure 1: Original image</p>
<p><img alt="avatar" src="../../_images/image_random_crop.png" /></p>
<p>Figure 2: 500 x 500 image that is randomly cropped from the original image</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="converting_datasets.html" class="btn btn-neutral float-left" title="Converting Datasets to the Mindspore Data Format" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../defining_the_network.html" class="btn btn-neutral float-right" title="Defining the Network" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>