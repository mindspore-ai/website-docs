<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Building MindSpore Lite &mdash; MindSpore Lite r1.1 documentation</title><script>;(()=>{const e=localStorage.getItem("ms-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;(e?"dark"===e:t)&&document.documentElement.setAttribute("data-o-theme","dark")})();</script>
      <link rel="stylesheet" href="../_static/css/bootstrap.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/lite.css" type="text/css" /><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script><script src="../_static/jquery.js"></script>
        <script src="../_static/js/theme.js"></script><script src="../_static/underscore.js"></script><script src="../_static/doctools.js"></script><script src="../_static/js/lite.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Converting Models for Inference" href="converter_tool.html" />
    <link rel="prev" title="Downloading MindSpore Lite" href="downloads.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MindSpore Lite
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Quick Start</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/quick_start.html">Implementing an Image Classification Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/train_lenet.html">Training a LeNet Model</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Obtain MindSpore Lite</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="downloads.html">Downloading MindSpore Lite</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Building MindSpore Lite</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#linux-environment-compilation">Linux Environment Compilation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#environment-requirements">Environment Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compilation-options">Compilation Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compilation-example">Compilation Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inference-output-description">Inference Output Description</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#description-of-converter-s-directory-structure">Description of Converter’s Directory Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#description-of-runtime-and-other-tools-directory-structure">Description of Runtime and Other tools’ Directory Structure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#training-output-description">Training Output Description</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#description-of-training-converter-s-directory-structure">Description of Training Converter’s Directory Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#description-of-training-runtime-and-other-tools-directory-structure">Description of Training Runtime and Other tools’ Directory Structure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#windows-environment-compilation">Windows Environment Compilation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Environment Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Compilation Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Compilation Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#output-description">Output Description</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">Description of Converter’s Directory Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#description-of-benchmark-s-directory-structure">Description of Benchmark’s Directory Structure</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Inference on Devices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="converter_tool.html">Converting Models for Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="post_training_quantization.html">Optimizing the Model (Quantization After Training)</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_preprocessing.html">Data Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime.html">Executing Model Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Other Tools</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Training on Devices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="converter_train.html">Creating MindSpore Lite Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime_train.html">Executing Model Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools_train.html">Other Tools</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MindSpore Lite</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Building MindSpore Lite</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/use/build.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="building-mindspore-lite">
<h1>Building MindSpore Lite<a class="headerlink" href="#building-mindspore-lite" title="Permalink to this headline"></a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Windows</span></code> <code class="docutils literal notranslate"><span class="pre">Linux</span></code> <code class="docutils literal notranslate"><span class="pre">Android</span></code> <code class="docutils literal notranslate"><span class="pre">Environment</span> <span class="pre">Preparation</span></code> <code class="docutils literal notranslate"><span class="pre">Intermediate</span></code> <code class="docutils literal notranslate"><span class="pre">Expert</span></code></p>
<p><a class="reference external" href="https://gitee.com/mindspore/docs/blob/r1.1/tutorials/lite/source_en/use/build.md"><img alt="View Source On Gitee" src="../_images/logo_source.png" /></a></p>
<p>This chapter introduces how to quickly compile MindSpore Lite, which includes the following modules:</p>
<p>Modules in inference version:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Module</p></th>
<th class="head"><p>Support Platform</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>converter</p></td>
<td><p>Linux, Windows</p></td>
<td><p>Model Conversion Tool</p></td>
</tr>
<tr class="row-odd"><td><p>runtime(cpp, java)</p></td>
<td><p>Linux, Windows, Android</p></td>
<td><p>Model Inference Framework(Windows platform does not support java version runtime)</p></td>
</tr>
<tr class="row-even"><td><p>benchmark</p></td>
<td><p>Linux, Windows, Android</p></td>
<td><p>Benchmarking Tool</p></td>
</tr>
<tr class="row-odd"><td><p>cropper</p></td>
<td><p>Linux</p></td>
<td><p>Static library crop tool for libmindspore-lite.a</p></td>
</tr>
<tr class="row-even"><td><p>minddata</p></td>
<td><p>Linux, Android</p></td>
<td><p>Image Processing Library</p></td>
</tr>
</tbody>
</table>
<p>Modules in training version:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Module</p></th>
<th class="head"><p>Support Platform</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>converter</p></td>
<td><p>Linux</p></td>
<td><p>Model Conversion Tool</p></td>
</tr>
<tr class="row-odd"><td><p>runtime(cpp)</p></td>
<td><p>Linux, Android</p></td>
<td><p>Model Train Framework(java is not support)</p></td>
</tr>
<tr class="row-even"><td><p>benchmark</p></td>
<td><p>Linux, Android</p></td>
<td><p>Benchmarking Tool</p></td>
</tr>
<tr class="row-odd"><td><p>cropper</p></td>
<td><p>Linux</p></td>
<td><p>Static library crop tool for libmindspore-lite.a</p></td>
</tr>
<tr class="row-even"><td><p>minddata</p></td>
<td><p>Linux, Android</p></td>
<td><p>Image Processing Library</p></td>
</tr>
<tr class="row-odd"><td><p>benchmark_train</p></td>
<td><p>Linux, Android</p></td>
<td><p>Performance and Accuracy Validation</p></td>
</tr>
</tbody>
</table>
<section id="linux-environment-compilation">
<h2>Linux Environment Compilation<a class="headerlink" href="#linux-environment-compilation" title="Permalink to this headline"></a></h2>
<section id="environment-requirements">
<h3>Environment Requirements<a class="headerlink" href="#environment-requirements" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The compilation environment supports Linux x86_64 only. Ubuntu 18.04.02 LTS is recommended.</p></li>
<li><p>Compilation dependencies of runtime(cpp):</p>
<ul>
<li><p><a class="reference external" href="https://cmake.org/download/">CMake</a> &gt;= 3.18.3</p></li>
<li><p><a class="reference external" href="https://gcc.gnu.org/releases.html">GCC</a> &gt;= 7.3.0</p></li>
<li><p><a class="reference external" href="https://dl.google.com/android/repository/android-ndk-r20b-linux-x86_64.zip">Android_NDK r20b</a></p></li>
<li><p><a class="reference external" href="https://git-scm.com/downloads">Git</a> &gt;= 2.28.0</p></li>
</ul>
</li>
<li><p>Compilation dependencies of converter:</p>
<ul>
<li><p><a class="reference external" href="https://cmake.org/download/">CMake</a> &gt;= 3.18.3</p></li>
<li><p><a class="reference external" href="https://gcc.gnu.org/releases.html">GCC</a> &gt;= 7.3.0</p></li>
<li><p><a class="reference external" href="https://dl.google.com/android/repository/android-ndk-r20b-linux-x86_64.zip">Android_NDK r20b</a></p></li>
<li><p><a class="reference external" href="https://git-scm.com/downloads">Git</a> &gt;= 2.28.0</p></li>
<li><p><a class="reference external" href="http://ftp.gnu.org/gnu/autoconf/">Autoconf</a> &gt;= 2.69</p></li>
<li><p><a class="reference external" href="https://www.gnu.org/software/libtool/">Libtool</a> &gt;= 2.4.6</p></li>
<li><p><a class="reference external" href="http://www.libressl.org/">LibreSSL</a> &gt;= 3.1.3</p></li>
<li><p><a class="reference external" href="https://www.gnu.org/software/automake/">Automake</a> &gt;= 1.11.6</p></li>
<li><p><a class="reference external" href="https://libevent.org">Libevent</a> &gt;= 2.0</p></li>
<li><p><a class="reference external" href="https://www.gnu.org/software/m4/m4.html">M4</a> &gt;= 1.4.18</p></li>
<li><p><a class="reference external" href="https://www.openssl.org/">OpenSSL</a> &gt;= 1.1.1</p></li>
</ul>
</li>
<li><p>Compilation dependencies of runtime(java)</p>
<ul>
<li><p><a class="reference external" href="https://cmake.org/download/">CMake</a> &gt;= 3.18.3</p></li>
<li><p><a class="reference external" href="https://gcc.gnu.org/releases.html">GCC</a> &gt;= 7.3.0</p></li>
<li><p><a class="reference external" href="https://dl.google.com/android/repository/android-ndk-r20b-linux-x86_64.zip">Android_NDK</a> &gt;= r20</p></li>
<li><p><a class="reference external" href="https://git-scm.com/downloads">Git</a> &gt;= 2.28.0</p></li>
<li><p><a class="reference external" href="https://developer.android.com/studio?hl=zh-cn#cmdline-tools">Android SDK</a></p></li>
<li><p><a class="reference external" href="https://gradle.org/releases/">Gradle</a> &gt;= 6.6.1</p></li>
<li><p><a class="reference external" href="https://openjdk.java.net/install/">OpenJDK</a> &gt;= 1.8</p></li>
</ul>
</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>To install and use <code class="docutils literal notranslate"><span class="pre">Android_NDK</span></code>, you need to configure environment variables. The command example is <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">ANDROID_NDK=${NDK_PATH}/android-ndk-r20b</span></code>.</p></li>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">build.sh</span></code> script, run the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> command to obtain the code in the third-party dependency library. Ensure that the network settings of Git are correct.</p></li>
<li><p>After Gradle is installed, you need to add its installation path to the PATH: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">PATH=${GRADLE_PATH}/bin:$PATH</span></code>.</p></li>
<li><p>To install the Android SDK via <code class="docutils literal notranslate"><span class="pre">Android</span> <span class="pre">command</span> <span class="pre">line</span> <span class="pre">tools</span></code>, you need to create a new directory first and configure its path to the environment variable in <code class="docutils literal notranslate"><span class="pre">${ANDROID_SDK_ROOT}</span></code>, then create SDK via <code class="docutils literal notranslate"><span class="pre">sdkmanager</span></code>: <code class="docutils literal notranslate"><span class="pre">./sdkmanager</span> <span class="pre">--sdk_root=$</span> <span class="pre">{ANDROID_SDK_ROOT}</span> <span class="pre">&quot;cmdline-tools;latest&quot;</span></code>, and finally accept the license through <code class="docutils literal notranslate"><span class="pre">sdkmanager</span></code> under the <code class="docutils literal notranslate"><span class="pre">${ANDROID_SDK_ROOT}</span></code> directory: <code class="docutils literal notranslate"><span class="pre">yes</span> <span class="pre">|</span> <span class="pre">./sdkmanager</span> <span class="pre">--licenses</span></code>.</p></li>
<li><p>Compiling AAR relies on Android SDK Build-Tools, Android SDK Platform-Tools and other Android SDK related components. If the Android SDK in the environment does not have related components, the required dependencies will be automatically downloaded during compilation.</p></li>
<li><p>When compiling the NPU operator, you need to download <a class="reference external" href="https://developer.huawei.com/consumer/cn/doc/development/hiai-Library/ddk-download-0000001053590180">DDK V500.010</a>, the directory where the compressed package is decompressed Set to the environment variable <code class="docutils literal notranslate"><span class="pre">${HWHIAI_DDK}</span></code>.</p></li>
</ul>
</div></blockquote>
</section>
<section id="compilation-options">
<h3>Compilation Options<a class="headerlink" href="#compilation-options" title="Permalink to this headline"></a></h3>
<p>MindSpore Lite provides a compilation script <code class="docutils literal notranslate"><span class="pre">build.sh</span></code> for one-click compilation, located in the root directory of MindSpore. This script can be used to compile the code of training and inference. The following describes the compilation options of MindSpore Lite.</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Parameter Description</p></th>
<th class="head"><p>Value Range</p></th>
<th class="head"><p>Mandatory or No</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-I</p></td>
<td><p>Selects an applicable architecture. This option is required when compile MindSpore Lite.</p></td>
<td><p>arm64, arm32, or x86_64</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>-d</p></td>
<td><p>If this parameter is set, the debug version is compiled. Otherwise, the release version is compiled.</p></td>
<td><p>None</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>-i</p></td>
<td><p>If this parameter is set, incremental compilation is performed. Otherwise, full compilation is performed.</p></td>
<td><p>None</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>-j[n]</p></td>
<td><p>Sets the number of threads used during compilation. Otherwise, the number of threads is set to 8 by default.</p></td>
<td><p>Integer</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>-e</p></td>
<td><p>In the ARM architecture, select the backend operator. Otherwise, all operator of the framework is compiled at the same time.</p></td>
<td><p>cpu, gpu, npu</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>-h</p></td>
<td><p>Displays the compilation help information.</p></td>
<td><p>None</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>-n</p></td>
<td><p>Specifies to compile the lightweight image processing module.</p></td>
<td><p>lite_cv</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>-A</p></td>
<td><p>Language used by mindspore lite, default cpp. If the parameter is set to java，the AAR is compiled.</p></td>
<td><p>cpp, java</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>-C</p></td>
<td><p>If this parameter is set, the converter is compiled, default on.</p></td>
<td><p>on, off</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>-o</p></td>
<td><p>If this parameter is set, the benchmark and static library crop tool are compiled, default on.</p></td>
<td><p>on, off</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>-t</p></td>
<td><p>If this parameter is set, the testcase is compiled, default off.</p></td>
<td><p>on, off</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>-T</p></td>
<td><p>If this parameter is set, MindSpore Lite training version is compiled, i.e., this option is required when compiling, default off.</p></td>
<td><p>on, off</p></td>
<td><p>No</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>When the <code class="docutils literal notranslate"><span class="pre">-I</span></code> parameter changes, such as <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code> is converted to <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm64</span></code>, adding <code class="docutils literal notranslate"><span class="pre">-i</span></code> for parameter compilation does not take effect.</p>
<p>When compiling the AAR package, the <code class="docutils literal notranslate"><span class="pre">-A</span> <span class="pre">java</span></code> parameter must be added, and there is no need to add the <code class="docutils literal notranslate"><span class="pre">-I</span></code> parameter. By default, the built-in CPU and GPU operators are compiled at the same time.</p>
<p>The compiler will only generate training packages when <code class="docutils literal notranslate"><span class="pre">-T</span></code> is opened.</p>
<p>Any <code class="docutils literal notranslate"><span class="pre">-e</span></code> compilation option, the CPU operators will be compiled into it.</p>
</div></blockquote>
</section>
<section id="compilation-example">
<h3>Compilation Example<a class="headerlink" href="#compilation-example" title="Permalink to this headline"></a></h3>
<p>First, download source code from the MindSpore code repository.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://gitee.com/mindspore/mindspore.git<span class="w"> </span>-b<span class="w"> </span>r1.1
</pre></div>
</div>
<p>Then, run the following commands in the root directory of the source code to compile MindSpore Lite of different versions:</p>
<ul>
<li><p>Debug version of the x86_64 architecture:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>x86_64<span class="w"> </span>-d
</pre></div>
</div>
</li>
<li><p>Release version of the x86_64 architecture, with the number of threads set:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>x86_64<span class="w"> </span>-j32
</pre></div>
</div>
</li>
<li><p>Release version of the x86_64 architecture, with the testcase compiled:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>x86_64<span class="w"> </span>-t<span class="w"> </span>on
</pre></div>
</div>
</li>
<li><p>Release version of the ARM 64-bit architecture in the incremental compilation mode, with the number of threads set:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>arm64<span class="w"> </span>-i<span class="w"> </span>-j32
</pre></div>
</div>
</li>
<li><p>Release version of the ARM 64-bit architecture, with the built-in CPU operators compiled:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>arm64<span class="w"> </span>-e<span class="w"> </span>cpu
</pre></div>
</div>
</li>
<li><p>Release version of the ARM 64-bit architecture, with the built-in CPU and GPU operators compiled:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>arm64<span class="w"> </span>-e<span class="w"> </span>gpu
</pre></div>
</div>
</li>
<li><p>Release version of the ARM 64-bit architecture, with the built-in CPU and NPU operators compiled:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>arm64<span class="w"> </span>-e<span class="w"> </span>npu
</pre></div>
</div>
</li>
<li><p>Compile ARM64 with image preprocessing module:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>arm64<span class="w"> </span>-n<span class="w"> </span>lite_cv
</pre></div>
</div>
</li>
<li><p>Compile MindSpore Lite AAR, with the built-in CPU and GPU operators compiled:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-A<span class="w"> </span>java
</pre></div>
</div>
</li>
<li><p>Compile MindSpore Lite AAR, with the built-in CPU operators compiled:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-A<span class="w"> </span>java<span class="w"> </span>-e<span class="w"> </span>cpu
</pre></div>
</div>
</li>
<li><p>Release version of the x86_64 architecture, with the benchmark, cropper and converter compiled:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>x86_64
</pre></div>
</div>
</li>
<li><p>Release version of the x86_64 architecture, with the converter compiled and train on device enabled:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash<span class="w"> </span>build.sh<span class="w"> </span>-I<span class="w"> </span>x86_64<span class="w"> </span>-T<span class="w"> </span>on
</pre></div>
</div>
</li>
</ul>
</section>
<section id="inference-output-description">
<h3>Inference Output Description<a class="headerlink" href="#inference-output-description" title="Permalink to this headline"></a></h3>
<p>After the compilation is complete, go to the <code class="docutils literal notranslate"><span class="pre">mindspore/output</span></code> directory of the source code to view the file generated after compilation. The file is divided into the following parts.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mindspore-lite-{version}-converter-{os}-{arch}.tar.gz</span></code>: Model converter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mindspore-lite-{version}-inference-{os}-{arch}.tar.gz</span></code>: Contains model inference framework, benchmarking tool, performance analysis tool and library crop tool.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mindspore-lite-maven-{version}.zip</span></code>: Contains model reasoning framework AAR package.</p></li>
</ul>
<blockquote>
<div><p>version: Version of the output, consistent with that of the MindSpore.</p>
<p>os: Operating system on which the output will be deployed.</p>
<p>arch: System architecture on which the output will be deployed.</p>
</div></blockquote>
<p>Execute the decompression command to obtain the compiled output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tar<span class="w"> </span>-xvf<span class="w"> </span>mindspore-lite-<span class="o">{</span>version<span class="o">}</span>-converter-<span class="o">{</span>os<span class="o">}</span>-<span class="o">{</span>arch<span class="o">}</span>.tar.gz
tar<span class="w"> </span>-xvf<span class="w"> </span>mindspore-lite-<span class="o">{</span>version<span class="o">}</span>-inference-<span class="o">{</span>os<span class="o">}</span>-<span class="o">{</span>arch<span class="o">}</span>.tar.gz
unzip<span class="w"> </span>mindspore-lite-maven-<span class="o">{</span>version<span class="o">}</span>.zip
</pre></div>
</div>
<section id="description-of-converter-s-directory-structure">
<h4>Description of Converter’s Directory Structure<a class="headerlink" href="#description-of-converter-s-directory-structure" title="Permalink to this headline"></a></h4>
<p>The conversion tool is only available under the <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code> compilation option, and the content includes the following parts:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>│
├── mindspore-lite-{version}-converter-{os}-{arch}
│   └── converter # Model conversion Ttool
│       ├── converter_lite # Executable program
│   └── lib # The dynamic link library that converter depends
│       ├── libmindspore_gvar.so # A dynamic library that stores some global variables
│   └── third_party # Header files and libraries of third party libraries
│       ├── glog # Dynamic library of Glog
</pre></div>
</div>
</section>
<section id="description-of-runtime-and-other-tools-directory-structure">
<h4>Description of Runtime and Other tools’ Directory Structure<a class="headerlink" href="#description-of-runtime-and-other-tools-directory-structure" title="Permalink to this headline"></a></h4>
<p>The inference framework can be obtained under <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code>, <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm64</span></code> and <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm32</span></code> compilation options, and the content includes the following parts:</p>
<ul>
<li><p>When the compilation option is <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>│
├── mindspore-lite-{version}-inference-linux-x64
│   └── benchmark # Benchmarking Tool
│   └── cropper # Static library crop tool
│       ├── cropper  # Executable file of static library crop tool
│       ├── cropper_mapping_cpu.cfg # Crop cpu library related configuration files
│   └── include # Header files of inference framework
│   └── lib # Inference framework library
│       ├── libmindspore-lite.a  # Static library of infernece framework in MindSpore Lite
│       ├── libmindspore-lite.so # Dynamic library of infernece framework in MindSpore Lite
│   └── minddata # Image processing dynamic library
│       └── include # Header files
│           └── lite_cv # The Header files of image processing dynamic library
│               ├── image_process.h # The Header files of image processing function
│               ├── lite_mat.h # The Header files of image data class structure
│       └── lib # Image processing dynamic library
│           ├── libminddata-lite.so # The files of image processing dynamic library
</pre></div>
</div>
</li>
<li><p>When the compilation option is <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm64</span></code> or <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm32</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>│
├── mindspore-lite-{version}-inference-android-{arch}
│   └── benchmark # Benchmarking Tool
│   └── include # Header files of inference framework
│   └── lib # Inference framework library
│       ├── libmindspore-lite.a  # Static library of infernece framework in MindSpore Lite
│       ├── libmindspore-lite.so # Dynamic library of infernece framework in MindSpore Lite
│   └── minddata # Image processing dynamic library
│       └── include # Header files
│           └── lite_cv # The Header files of image processing dynamic library
│               ├── image_process.h # The Header files of image processing function
│               ├── lite_mat.h # The Header files of image data class structure
│       └── lib # Image processing dynamic library
│           ├── libminddata-lite.so # The files of image processing dynamic library
</pre></div>
</div>
</li>
<li><p>When the compilation option is <code class="docutils literal notranslate"><span class="pre">-A</span> <span class="pre">java</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>│
├── mindspore-lite-maven-{version}
│   └── mindspore
│       └── mindspore-lite
│           └── {version}
│               ├── mindspore-lite-{version}.aar # MindSpore Lite runtime aar
</pre></div>
</div>
</li>
</ul>
<blockquote>
<div><ol class="arabic simple">
<li><p>Compile ARM64 to get the inference framework output of cpu/gpu/npu by default, if you add <code class="docutils literal notranslate"><span class="pre">-e</span> <span class="pre">gpu</span></code>, you will get the inference framework output of cpu/gpu, ARM32 only supports CPU.</p></li>
<li><p>Before running the tools in the converter, benchmark directory, you need to configure environment variables, and configure the path where the dynamic libraries of MindSpore Lite are located to the path where the system searches for dynamic libraries.</p></li>
</ol>
</div></blockquote>
<p>Configure converter:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>./output/mindspore-lite-<span class="o">{</span>version<span class="o">}</span>-converter-<span class="o">{</span>os<span class="o">}</span>-<span class="o">{</span>arch<span class="o">}</span>/lib:./output/mindspore-lite-<span class="o">{</span>version<span class="o">}</span>-converter-<span class="o">{</span>os<span class="o">}</span>-<span class="o">{</span>arch<span class="o">}</span>/third_party/glog/lib:<span class="si">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="si">}</span>
</pre></div>
</div>
<p>Configure benchmark:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="w"> </span>./output/mindspore-lite-<span class="o">{</span>version<span class="o">}</span>-inference-<span class="o">{</span>os<span class="o">}</span>-<span class="o">{</span>arch<span class="o">}</span>/lib:<span class="si">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="si">}</span>
</pre></div>
</div>
</section>
</section>
<section id="training-output-description">
<h3>Training Output Description<a class="headerlink" href="#training-output-description" title="Permalink to this headline"></a></h3>
<p>If the <code class="docutils literal notranslate"><span class="pre">-T</span> <span class="pre">on</span></code> is added to the MindSpore Lite, go to the <code class="docutils literal notranslate"><span class="pre">mindspore/output</span></code> directory of the source code to view the file generated after compilation. The file is divided into the following parts.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mindspore-lite-{version}-train-converter-{os}-{arch}.tar.gz</span></code>: Model converter, only support MINDIR format model file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mindspore-lite-{version}-train-{os}-{arch}.tar.gz</span></code>: Contains model training framework, performance analysis tool.</p></li>
</ul>
<blockquote>
<div><p>version: Version of the output, consistent with that of the MindSpore.</p>
<p>os: Operating system on which the output will be deployed.</p>
<p>arch: System architecture on which the output will be deployed.</p>
</div></blockquote>
<p>Execute the decompression command to obtain the compiled output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tar<span class="w"> </span>-xvf<span class="w"> </span>mindspore-lite-<span class="o">{</span>version<span class="o">}</span>-train-converter-<span class="o">{</span>os<span class="o">}</span>-<span class="o">{</span>arch<span class="o">}</span>.tar.gz
tar<span class="w"> </span>-xvf<span class="w"> </span>mindspore-lite-<span class="o">{</span>version<span class="o">}</span>-train-<span class="o">{</span>os<span class="o">}</span>-<span class="o">{</span>arch<span class="o">}</span>.tar.gz
</pre></div>
</div>
<section id="description-of-training-converter-s-directory-structure">
<h4>Description of Training Converter’s Directory Structure<a class="headerlink" href="#description-of-training-converter-s-directory-structure" title="Permalink to this headline"></a></h4>
<p>The training model conversion tool is only available under the <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code> compilation option, and the content includes the following parts:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>│
├── mindspore-lite-{version}-train-converter-linux-x64
│   └── converter # Model conversion Ttool
│       ├── converter_lite # Executable program
│   └── lib # The dynamic link library that converter depends
│       ├── libmindspore_gvar.so # A dynamic library that stores some global variables
│   └── third_party # Header files and libraries of third party libraries
│       ├── glog # Dynamic library of Glog
</pre></div>
</div>
</section>
<section id="description-of-training-runtime-and-other-tools-directory-structure">
<h4>Description of Training Runtime and Other tools’ Directory Structure<a class="headerlink" href="#description-of-training-runtime-and-other-tools-directory-structure" title="Permalink to this headline"></a></h4>
<p>The MindSpore Lite training framework can be obtained under <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code>, <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm64</span></code> and <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm32</span></code> compilation options, and the content includes the following parts:</p>
<ul>
<li><p>When the compilation option is <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">x86_64</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>│
├── mindspore-lite-{version}-train-linux-x64
│   └── cropper # Static library crop tool
│       ├── cropper  # Executable file of static library crop tool
│       ├── cropper_mapping_cpu.cfg # Crop cpu library related configuration files
│   └── include # Header files of training framework
│   └── lib # Inference framework library
│       ├── libmindspore-lite.a  # Static library of training framework in MindSpore Lite
│       ├── libmindspore-lite.so # Dynamic library of training framework in MindSpore Lite
│   └── minddata # Image processing dynamic library
│       └── include # Header files
│           └── lite_cv # The Header files of image processing dynamic library
│               ├── image_process.h # The Header files of image processing function
│               ├── lite_mat.h # The Header files of image data class structure
│       └── lib # Image processing dynamic library
│           ├── libminddata-lite.so # The files of image processing dynamic library
│   └── benchmark_train
│       ├── benchmark_train # training model benchmark tool
</pre></div>
</div>
</li>
<li><p>When the compilation option is <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm64</span></code> or <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">arm32</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>│
├── mindspore-lite-{version}-train-android-{arch}
│   └── include # Header files of training framework
│   └── lib # Training framework library
│       ├── libmindspore-lite.a  # Static library of training framework in MindSpore Lite
│       ├── libmindspore-lite.so # Dynamic library of training framework in MindSpore Lite
│   └── minddata # Image processing dynamic library
│       └── include # Header files
│           └── lite_cv # The Header files of image processing dynamic library
│               ├── image_process.h # The Header files of image processing function
│               ├── lite_mat.h # The Header files of image data class structure
│       └── lib # Image processing dynamic library
│           ├── libminddata-lite.so # The files of image processing dynamic library
│   └── benchmark_train
│       ├── benchmark_train # training model benchmark tool
</pre></div>
</div>
</li>
</ul>
<blockquote>
<div><p>Before running the tools in the converter and the benchmark_train directory, you need to configure environment variables, and configure the path where the dynamic libraries of MindSpore Lite are located to the path where the system searches for dynamic libraries.</p>
</div></blockquote>
<p>Configure converter:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>./output/mindspore-lite-<span class="o">{</span>version<span class="o">}</span>-train-converter-<span class="o">{</span>os<span class="o">}</span>-<span class="o">{</span>arch<span class="o">}</span>/lib:./output/mindspore-lite-<span class="o">{</span>version<span class="o">}</span>-train-converter-<span class="o">{</span>os<span class="o">}</span>-<span class="o">{</span>arch<span class="o">}</span>/third_party/glog/lib:<span class="si">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="si">}</span>
</pre></div>
</div>
<p>Configure benchmark_train:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="w"> </span>./output/mindspore-lite-<span class="o">{</span>version<span class="o">}</span>-train-<span class="o">{</span>os<span class="o">}</span>-<span class="o">{</span>arch<span class="o">}</span>/lib:<span class="si">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="si">}</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="windows-environment-compilation">
<h2>Windows Environment Compilation<a class="headerlink" href="#windows-environment-compilation" title="Permalink to this headline"></a></h2>
<section id="id1">
<h3>Environment Requirements<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>System environment: Windows 7, Windows 10; 64-bit.</p></li>
<li><p>Compilation dependencies are:</p>
<ul>
<li><p><a class="reference external" href="https://cmake.org/download/">CMake</a> &gt;= 3.18.3</p></li>
<li><p><a class="reference external" href="https://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/mingw-builds/7.3.0/threads-posix/seh/x86_64-7.3.0-release-posix-seh-rt_v5-rev0.7z/download">MinGW GCC</a> = 7.3.0</p></li>
</ul>
</li>
</ul>
<blockquote>
<div><p>The compilation script will execute <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> to obtain the code of the third-party dependent libraries. Please make sure that the git network settings are correct and available in advance.</p>
</div></blockquote>
</section>
<section id="id2">
<h3>Compilation Options<a class="headerlink" href="#id2" title="Permalink to this headline"></a></h3>
<p>The compilation options of MindSpore Lite are as follows:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Parameter Description</p></th>
<th class="head"><p>Mandatory or Not</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>lite</p></td>
<td><p>Set this parameter to compile the MindSpore Lite project.</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>[n]</p></td>
<td><p>Set the number of threads used during compilation, otherwise the default is set to 6 threads.</p></td>
<td><p>No</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id3">
<h3>Compilation Example<a class="headerlink" href="#id3" title="Permalink to this headline"></a></h3>
<p>First, use the git tool to download the source code from the MindSpore code repository.</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span>git clone https://gitee.com/mindspore/mindspore.git -b r1.1
</pre></div>
</div>
<p>Then, use the cmd tool to compile MindSpore Lite in the root directory of the source code and execute the following commands.</p>
<ul class="simple">
<li><p>Compile the Windows version with the default number of threads (6 threads).</p></li>
</ul>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">call</span> build.bat lite
</pre></div>
</div>
<ul class="simple">
<li><p>Compile the Windows version with the specified number of 8 threads.</p></li>
</ul>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">call</span> build.bat lite 8
</pre></div>
</div>
</section>
<section id="output-description">
<h3>Output Description<a class="headerlink" href="#output-description" title="Permalink to this headline"></a></h3>
<p>After the compilation is complete, go to the <code class="docutils literal notranslate"><span class="pre">mindspore/output</span></code> directory of the source code to view the file generated after compilation. The file is divided into the following parts.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mindspore-lite-{version}-converter-win-x64.zip</span></code>: Contains model conversion tool.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mindspore-lite-{version}-inference-win-x64.zip</span></code>: Contains model inference framework and benchmarking tool.</p></li>
</ul>
<blockquote>
<div><p>version: Version of the output, consistent with that of the MindSpore.</p>
</div></blockquote>
<p>Execute the decompression command to obtain the compiled output:</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span>unzip mindspore-lite-{version}-converter-win-x64.zip
unzip mindspore-lite-{version}-inference-win-x64.zip
</pre></div>
</div>
<section id="id4">
<h4>Description of Converter’s Directory Structure<a class="headerlink" href="#id4" title="Permalink to this headline"></a></h4>
<p>The content includes the following parts:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>│
├── mindspore-lite-{version}-converter-win-x64
│   └── converter # Model conversion Ttool
│       ├── converter_lite # Executable program
│       ├── libglog.dll # Dynamic library of Glog
│       ├── libmindspore_gvar.dll # A dynamic library that stores some global variables
│       ├── libgcc_s_seh-1.dll # Dynamic library of MinGW
│       ├── libssp-0.dll # Dynamic library of MinGW
│       ├── libstdc++-6.dll # Dynamic library of MinGW
│       ├── libwinpthread-1.dll # Dynamic library of MinGW
</pre></div>
</div>
</section>
<section id="description-of-benchmark-s-directory-structure">
<h4>Description of Benchmark’s Directory Structure<a class="headerlink" href="#description-of-benchmark-s-directory-structure" title="Permalink to this headline"></a></h4>
<p>The content includes the following parts:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>│
├── mindspore-lite-{version}-inference-win-x64
│   └── benchmark # Benchmarking Tool
│       ├── benchmark.exe # Executable program
│       ├── libmindspore-lite.a  # Static library of infernece framework in MindSpore Lite
│       ├── libmindspore-lite.dll # Dynamic library of infernece framework in MindSpore Lite
│       ├── libmindspore-lite.dll.a # Link file of dynamic library of infernece framework in MindSpore Lite
│       ├── libgcc_s_seh-1.dll # Dynamic library of MinGW
│       ├── libssp-0.dll # Dynamic library of MinGW
│       ├── libstdc++-6.dll # Dynamic library of MinGW
│       ├── libwinpthread-1.dll # Dynamic library of MinGW
│   └── include # Header files of inference framework
</pre></div>
</div>
<blockquote>
<div><p>Currently, MindSpore Lite is not supported on Windows.</p>
</div></blockquote>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="downloads.html" class="btn btn-neutral float-left" title="Downloading MindSpore Lite" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="converter_tool.html" class="btn btn-neutral float-right" title="Converting Models for Inference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, MindSpore Lite.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>