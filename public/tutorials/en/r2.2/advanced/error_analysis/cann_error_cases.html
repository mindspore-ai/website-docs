<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CANN Common Error Analysis &mdash; MindSpore master documentation</title><script>;(()=>{const e=localStorage.getItem("ms-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;(e?"dark"===e:t)&&document.documentElement.setAttribute("data-o-theme","dark")})();</script>
      <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/training.css" type="text/css" /><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script><script src="../../_static/jquery.js"></script>
        <script src="../../_static/js/theme.js"></script><script src="../../_static/underscore.js"></script><script src="../../_static/doctools.js"></script><script src="../../_static/js/training.js"></script><script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="IR File Analysis" href="mindir.html" />
    <link rel="prev" title="Network Construction and Training Error Analysis" href="mindrt_debug.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> MindSpore
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Quick Start</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../beginner/introduction.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../beginner/quick_start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../beginner/tensor.html">Tensor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../beginner/dataset.html">Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../beginner/transforms.html">Transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../beginner/model.html">Building a Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../beginner/autograd.html">Automatic Differentiation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../beginner/train.html">Model Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../beginner/save_load.html">Saving and Loading the Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../beginner/accelerate_with_static_graph.html">Accelerating with Static Graphs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../model.html">Advanced Encapsulation: Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Model Module Customization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dataset.html">Advanced Data Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../derivation.html">Advanced Automatic Differentiation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../static_graph_expert_programming.html">Advanced Programming Techniques for Static Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mixed_precision.html">Automatic Mix Precision</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../error_analysis.html">Error Reporting Analysis</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="error_scenario_analysis.html">Error Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="minddata_debug.html">Data Processing Debugging Methods and Common Errors Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="mindrt_debug.html">Network Construction and Training Error Analysis</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">CANN Common Error Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="mindir.html">IR File Analysis</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MindSpore</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../error_analysis.html">Error Reporting Analysis</a> &raquo;</li>
      <li>CANN Common Error Analysis</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/advanced/error_analysis/cann_error_cases.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="cann-common-error-analysis">
<h1>CANN Common Error Analysis<a class="headerlink" href="#cann-common-error-analysis" title="Permalink to this headline"></a></h1>
<p><a class="reference external" href="https://gitee.com/mindspore/docs/blob/r2.2/tutorials/source_en/advanced/error_analysis/cann_error_cases.md"><img alt="View Source On Gitee" src="https://mindspore-website.obs.cn-north-4.myhuaweicloud.com/website-images/r2.2/resource/_static/logo_source_en.svg" /></a>  </p>
<p>This article focuses on the handling of common CANN errors by users. When encountering CANN errors, MindSpore logs may not be sufficient to analyze the related errors. You can print CANN logs to better analyze the errors by setting the following two environment variables:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">ASCEND_GLOBAL_LOG_LEVEL</span><span class="o">=</span><span class="m">1</span><span class="w">        </span><span class="c1"># CANN log level, 0 for debug, 1 for info, 2 for warning, 3 for error</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">ASCEND_SLOG_PRINT_TO_STDOUT</span><span class="o">=</span><span class="m">1</span><span class="w">    </span><span class="c1"># Configure to enable log displaying</span>
</pre></div>
</div>
<p>In addition, if you need to know the network structure and operator information during graph compilation, you can <a class="reference external" href="https://www.mindspore.cn/tutorials/en/r2.2/advanced/error_analysis/mindir.html">View Intermediate File</a> to save intermediate files such as IR graphs for viewing.</p>
<section id="aicore-operator-compilation-problem">
<h2>AICORE Operator Compilation Problem<a class="headerlink" href="#aicore-operator-compilation-problem" title="Permalink to this headline"></a></h2>
<p>AICORE operator compilation errors will start with <code class="docutils literal notranslate"><span class="pre">E5</span></code>~<code class="docutils literal notranslate"><span class="pre">EB</span></code> according to different modules, where some checksum errors occur in the <code class="docutils literal notranslate"><span class="pre">E5</span></code>~<code class="docutils literal notranslate"><span class="pre">E8</span></code> error codes AICORE operator compilation process, and the <code class="docutils literal notranslate"><span class="pre">E9</span></code>~<code class="docutils literal notranslate"><span class="pre">EB</span></code> error code is the error reported by TBE before and after compilation. Generally speaking an error report means that the operator specification TBE is not yet supported, and specific information can be obtained from the error report log. Some specific AICORE operator compilation failure problems can be seen below:</p>
<section id="e80000-stridedslicegradd-illegal-input-value">
<h3>E80000: StridedSliceGradD Illegal Input Value<a class="headerlink" href="#e80000-stridedslicegradd-illegal-input-value" title="Permalink to this headline"></a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span>[WARNING] CORE(51545,ffff8ba74480,python):2019-07-25-19:17:35.411.770 [mindspore/core/ir/anf_extends.cc:66] fullname_with_scope] Input 0 of cnode is not a value node, its type is CNode.
[WARNING] DEVICE(51545,ffff8ba74480,python):2019-07-25-19:17:41.850.324 [mindspore/ccsrc/runtime/hardware/ascend/ascend_graph_optimization.cc:255] SelectKernel] There are 2 node/nodes used raise precision to selected the kernel!
[CRITICAL] KERNEL(51545,ffff8ba74480,python):2019-07-25-19:17:54.525.980 [mindspore/ccsrc/backend/kernel_compiler/tbe/tbe_kernel_compile.cc:494] QueryProcess] Single op compile failed, op: strided_slice_grad_d_1157509189447431479_0
except_msg: 2019-07-25 19:17:54.522852: Query except_msg:Traceback (most recent call last):
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/te_fusion/parallel_compilation.py&quot;, line 1453, in run
    op_name=self._op_name)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/te_fusion/fusion_manager.py&quot;, line 1283, in build_single_op
    compile_info = call_op()
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/te_fusion/fusion_manager.py&quot;, line 1271, in call_op
    opfunc(*inputs, *outputs, *new_attrs, **kwargs)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/tbe/common/utils/para_check.py&quot;, line 545, in _in_wrapper
    return func(*args, **kwargs)
  File &quot;/usr/local/Ascend/opp/op_impl/built-in/ai_core/tbe/impl/strided_slice_grad_d.py&quot;, line 1101, in strided_slice_grad_d
    _check_shape_parameter(shape, shape_dy, begin_shape, end_shape, stride_shape)
  File &quot;/usr/local/Ascend/opp/op_impl/built-in/ai_core/tbe/impl/strided_slice_grad_d.py&quot;, line 996, in _check_shape_parameter
    &quot;1&quot;, str(strides_i))
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/te/utils/error_manager/error_manager_vector.py&quot;, line 40, in raise_err_input_value_invalid
    return raise_err_input_value_invalid(op_name, param_name, excepted_value, real_value)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/tbe/common/utils/errormgr/error_manager_vector.py&quot;, line 41, in raise_err_input_value_invalid
    raise RuntimeError(args_dict, msg)
RuntimeError: ({&#39;errCode&#39;: &#39;E80000&#39;, &#39;op_name&#39;: &#39;strided_slice_grad_d&#39;, &#39;param_name&#39;: &#39;strides[0]&#39;, &#39;excepted_value&#39;: &#39;1&#39;, &#39;real_value&#39;: &#39;2&#39;}, &#39;In op[strided_slice_grad_d], the parameter[strides[0]] should be , but actually is [2].&#39;)

The function call stack:
In file /home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/ops/_grad_experimental/grad_array_ops.py(700)/        dx = input_grad(dout, x_shape, begin, end, strides)/
Corresponding forward node candidate:
- In file /home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/ops/composite/multitype_ops/_compile_utils.py(306)/        return P.StridedSlice(begin_mask, end_mask, 0, 0, 0)(data, begin_strides, end_strides, step_strides)/
  In file /home/jenkins/models/official/cv/lenet/src/lenet.py(61)/        y = x[0::2] #Splitting operation, x.shape=(32,10) y.shape=(32), leading to dimensionality reduction/
  In file /home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/amp.py(126)/            out = self._backbone(data)/
  In file /home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/nn/wrap/loss_scale.py(332)/        loss = self.network(*inputs)/
  In file /home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/dataset_helper.py(95)/        return self.network(*outputs)/
</pre></div>
</div>
<p>From the error message of the above error code, we can see that the first data in the parameter strides of StridedSliceGradD operator is expected to be 1, but the actual one obtained is 2, so the error is reported. Users can confirm the information of the wrong operator and correct the strides parameter according to the IR diagram.</p>
</section>
<section id="e80012-reducesum-operator-input-dimension-is-too-high">
<h3>E80012: ReduceSum Operator Input Dimension Is Too High<a class="headerlink" href="#e80012-reducesum-operator-input-dimension-is-too-high" title="Permalink to this headline"></a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span>RuntimeError: ({&#39;errCode&#39;: &#39;E80012&#39;, &#39;op_name&#39;: &#39;reduce_sum_d&#39;, &#39;param_name&#39;: &#39;x&#39;, &#39;min_value&#39;: 0, &#39;max_value&#39;: 8, &#39;real_value&#39;: 10}, &#39;In op, the num of dimensions of input/output[x] should be in the range of [0, 8], but actually is [10].&#39;)
</pre></div>
</div>
<p>As you can see from the error message in the error code above, the input and output of the ReduceSum operator only supports 8 dimensions of data, but it actually encounters 10 dimensions of data, hence the error occurs. The user can circumvent this error by modifying the network script to avoid inputting 10-dimensional data to ReduceSum.</p>
</section>
<section id="e80029-assign-operator-shape-inconsistency">
<h3>E80029: Assign Operator Shape Inconsistency<a class="headerlink" href="#e80029-assign-operator-shape-inconsistency" title="Permalink to this headline"></a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span>RuntimeError: ({&#39;errCode&#39;: &#39;E80029&#39;, &#39;op_name&#39;: &#39;assign&#39;, &#39;param_name1&#39;: &#39;ref&#39;, &#39;param_name2&#39;: &#39;value&#39;, &#39;error_detail&#39;: &#39;Shape of ref and value should be same&#39;}, &#39;In op[assign], the shape of inputs[ref][value] are invalid, [Shape of ref and value should be same].&#39;)
</pre></div>
</div>
<p>The logic of the Assign operator is to use the second input (i.e. value) to assign a value to the parameter (i.e. ref) of the first input. From the error message of the above error code, we can see that the two inputs are expected to have the same shape, but they do not, so the error is reported. The user can identify the operator in error and correct the input of the Assign operator based on the IR graph.</p>
</section>
<section id="eb0000-transpose-specifications-are-not-supported">
<h3>EB0000: Transpose Specifications Are Not Supported<a class="headerlink" href="#eb0000-transpose-specifications-are-not-supported" title="Permalink to this headline"></a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span>[ERROR] KERNEL(1062,fffe557fa160,python):2021-10-11-22:37:53.881.210 [mindspore/ccsrc/backend/kernel_compiler/tbe/tbe_kernel_parallel_build.cc:99] TbeOpParallelBuild] task compile Failed, task id:3, cause:TBEException:ERROR:

Traceback (most recent call last):
  File &quot;/usr/local/python3.7/lib/python3.7/site-packages/mindspore/_extends/parallel_compile/tbe_compiler/compiler.py&quot;, line 155, in build_op
    optune_opt_list=op_tune_list)
  File &quot;/usr/local/Ascend/nnae/latest/fwkacllib/python/site-packages/te_fusion/fusion_manager.py&quot;, line 1258, in build_single_op
    compile_info = call_op()
  File &quot;/usr/local/Ascend/nnae/latest/fwkacllib/python/site-packages/te_fusion/fusion_manager.py&quot;, line 1246, in call_op
    opfunc(*inputs, *outputs, *attrs, **kwargs)
  File &quot;/usr/local/Ascend/nnae/latest/fwkacllib/python/site-packages/tbe/common/utils/para_check.py&quot;, line 539, in _in_wrapper
    return func(*args, **kwargs)
  File &quot;/usr/local/Ascend/nnae/latest/opp/op_impl/built-in/ai_core/tbe/impl/transpose_d.py&quot;, line 24644, in transpose_d
    tvm.build(sch, tensor_list, &quot;cce&quot;, name=kernel_name)
  File &quot;/usr/local/Ascend/nnae/5.0.T301/fwkacllib/python/site-packages/te/tvm/build_module.py&quot;, line 799, in build
    build_cce(inputs, args, target, target_host, name, rules, binds, evaluates)
  File &quot;/usr/local/Ascend/nnae/5.0.T301/fwkacllib/python/site-packages/te/tvm/cce_build_module.py&quot;, line 855, in build_cce
    cce_lower(inputs, args, name, binds=binds, evaluates=evaluates, rule=rules)
  File &quot;/usr/local/Ascend/nnae/5.0.T301/fwkacllib/python/site-packages/te/tvm/cce_build_module.py&quot;, line 50, in wrapper
    r = fn(*args, **kw)
  File &quot;/usr/local/Ascend/nnae/5.0.T301/fwkacllib/python/site-packages/te/tvm/cce_build_module.py&quot;, line 404, in cce_lower
    arg_list, cfg, evaluates, inputs_num, rule)
  File &quot;/usr/local/Ascend/nnae/5.0.T301/fwkacllib/python/site-packages/te/tvm/cce_build_module.py&quot;, line 146, in cce_static_lower
    stmt = ir_pass.StorageRewriteCCE(stmt)
  File &quot;/usr/local/Ascend/nnae/5.0.T301/fwkacllib/python/site-packages/te/tvm/_ffi/_ctypes/function.py&quot;, line 209, in __call__
    raise get_last_ffi_error()
tvm._ffi.base.TVMError: Traceback (most recent call last):
  [bt] (5) /usr/local/Ascend/nnae/5.0.T301/fwkacllib/lib64/libtvm.so(TVMFuncCall+0x70) [0xffffa0ccd5a8]
  [bt] (4) /usr/local/Ascend/nnae/5.0.T301/fwkacllib/lib64/libtvm.so(std::_Function_handler&lt;void (tvm::runtime::TVMArgs, tvm::runtime::TVMRetValue*), void tvm::runtime::TypedPackedFunc&lt;tvm::Stmt (tvm::Stmt)&gt;::AssignTypedLambda&lt;tvm::Stmt (*)(tvm::Stmt)&gt;(tvm::Stmt (*)(tvm::Stmt))::{lambda(tvm::runtime::TVMArgs const&amp;, tvm::runtime::TVMRetValue*)#1}&gt;::_M_invoke(std::_Any_data const&amp;, tvm::runtime::TVMArgs&amp;&amp;, tvm::runtime::TVMRetValue*&amp;&amp;)+0x5c) [0xffff9ffb69fc]
  [bt] (3) /usr/local/Ascend/nnae/5.0.T301/fwkacllib/lib64/libtvm.so(tvm::ir::StorageRewriteCCE(tvm::Stmt)+0x590) [0xffffa09753d0]
  [bt] (2) /usr/local/Ascend/nnae/5.0.T301/fwkacllib/lib64/libtvm.so(+0x1d40658) [0xffffa0974658]
  [bt] (1) /usr/local/Ascend/nnae/5.0.T301/fwkacllib/lib64/libtvm.so(+0x1d61844) [0xffffa0995844]
  [bt] (0) /usr/local/Ascend/nnae/5.0.T301/fwkacllib/lib64/libtvm.so(tvm_dmlc::LogMessageFatal::~LogMessageFatal()+0x4c) [0xffff9ff6602c]
  File &quot;storage_rewrite_cce.cc&quot;, line 840

TVMError: [EB0000] Check failed: need_nbits &lt;= info-&gt;max_num_bits (4194304 vs. 2097152) : data_ub exceed bound of memory: local.UB ! Current IR Stmt:copy_ubuf_to_gm(tvm_access_ptr(0h, res, ((i0*263168) + (blockIdx.x*1024)), 1024, 2, 1, 2048, 1, 2048, 2048), tvm_access_ptr(0h, data_ub, (i0*1024), 1024, 1, 1, 2048, 1, 2048, 2048), 0, 1, 64, 0, 0)

input_args: {&quot;SocInfo&quot;: {&quot;autoTilingMode&quot;: &quot;NO_TUNE&quot;, &quot;coreNum&quot;: &quot;&quot;, &quot;coreType&quot;: &quot;&quot;, &quot;l1Fusion&quot;: &quot;false&quot;, &quot;l2Fusion&quot;: &quot;false&quot;, &quot;l2Mode&quot;: &quot;2&quot;, &quot;op_debug_level&quot;: &quot;&quot;, &quot;op_impl_mode&quot;: &quot;&quot;, &quot;op_impl_mode_list&quot;: [], &quot;socVersion&quot;: &quot;Ascend910A&quot;}, &quot;impl_path&quot;: &quot;&quot;, &quot;op_info&quot;: {&quot;Type&quot;: &quot;Transpose&quot;, &quot;attr_desc&quot;: [[0, 2, 1, 3]], &quot;attrs&quot;: [{&quot;name&quot;: &quot;perm&quot;, &quot;valid&quot;: true, &quot;value&quot;: [0, 2, 1, 3]}], &quot;full_name&quot;: &quot;Default/encode_image-EncodeImage/visual-ViT/body-Transformer/layers-SequentialCell/0-SequentialCell/0-ResidualCell/cell-SequentialCell/1-AttentionWithMask/Transpose-op662&quot;, &quot;gen_model&quot;: &quot;single&quot;, &quot;graph_id&quot;: 0, &quot;inputs&quot;: [[{&quot;addr_type&quot;: 0, &quot;dtype&quot;: &quot;float16&quot;, &quot;format&quot;: &quot;NCHW&quot;, &quot;name&quot;: &quot;x_0&quot;, &quot;ori_format&quot;: &quot;NCHW&quot;, &quot;ori_shape&quot;: [256, 16, 257, 64], &quot;param_type&quot;: &quot;required&quot;, &quot;range&quot;: [[256, 256], [16, 16], [257, 257], [64, 64]], &quot;shape&quot;: [256, 16, 257, 64], &quot;valid&quot;: true}]], &quot;is_dynamic_shape&quot;: false, &quot;kernel_name&quot;: &quot;Transpose_4779120815397556904_6&quot;, &quot;module_name&quot;: &quot;impl.transpose_d&quot;, &quot;name&quot;: &quot;transpose_d&quot;, &quot;op_tune_list&quot;: &quot;ALL&quot;, &quot;op_tune_switch&quot;: &quot;on&quot;, &quot;outputs&quot;: [[{&quot;addr_type&quot;: 0, &quot;dtype&quot;: &quot;float16&quot;, &quot;format&quot;: &quot;NCHW&quot;, &quot;name&quot;: &quot;y&quot;, &quot;ori_format&quot;: &quot;NCHW&quot;, &quot;ori_shape&quot;: [256, 257, 16, 64], &quot;param_type&quot;: &quot;required&quot;, &quot;range&quot;: [[256, 256], [257, 257], [16, 16], [64, 64]], &quot;shape&quot;: [256, 257, 16, 64], &quot;valid&quot;: true}]], &quot;pass_list&quot;: &quot;ALL&quot;, &quot;py_module_path&quot;: &quot;/usr/local/Ascend/opp/op_impl/built-in/ai_core/tbe&quot;, &quot;rl_tune_list&quot;: &quot;ALL&quot;, &quot;rl_tune_switch&quot;: &quot;on&quot;, &quot;socVersion&quot;: &quot;Ascend910A&quot;}, &quot;platform&quot;: &quot;TBE&quot;, &quot;reset_op_info&quot;: [{&quot;type&quot;: &quot;clear_vector&quot;, &quot;bin_path&quot;: &quot;./kernel_meta/vector_random_buff.o&quot;, &quot;kernel_name&quot;: &quot;vector_random_buff&quot;}, {&quot;type&quot;: &quot;clear_cube&quot;, &quot;bin_path&quot;: &quot;./kernel_meta/cube_random_buff.o&quot;, &quot;kernel_name&quot;: &quot;cube_random_buff&quot;}]} trace:
In file /cache/user-job-dir/mindspore_clip_20210923/msvision/backbone/clip.py(380)/        out = self.transpose(out, (0, 2, 1, 3))/
In file /usr/local/python3.7/lib/python3.7/site-packages/mindspore/nn/layer/container.py(236)/        for cell in self.cell_list:/
In file /cache/user-job-dir/mindspore_clip_20210923/msvision/backbone/vit.py(105)/        return self.cell(x, **kwargs) + x/
In file /usr/local/python3.7/lib/python3.7/site-packages/mindspore/nn/layer/container.py(236)/        for cell in self.cell_list:/
In file /usr/local/python3.7/lib/python3.7/site-packages/mindspore/nn/layer/container.py(236)/        for cell in self.cell_list:/
In file /cache/user-job-dir/mindspore_clip_20210923/msvision/backbone/vit.py(427)/        return self.layers(x)/
In file /cache/user-job-dir/mindspore_clip_20210923/msvision/backbone/vit.py(232)/        x = self.body(x)/
In file /cache/user-job-dir/mindspore_clip_20210923/msvision/backbone/clip.py(562)/        return self.visual(image)/
In file /cache/user-job-dir/mindspore_clip_20210923/msvision/backbone/clip.py(635)/        image_features = self.encode_image(image)/
</pre></div>
</div>
<p>From the error message reported in the above error code, we can see that the specification of this transpose operator is not supported and its data exceeds the limit when doing memory copy instructions. For such problems, users can submit issues to <a class="reference external" href="https://gitee.com/mindspore">MindSpore Community</a> for help.</p>
</section>
</section>
<section id="aicore-operator-execution-problem">
<h2>AICORE Operator Execution Problem<a class="headerlink" href="#aicore-operator-execution-problem" title="Permalink to this headline"></a></h2>
<section id="ez9999-aicore-operator-execution-failure">
<h3>EZ9999: AICORE Operator Execution Failure<a class="headerlink" href="#ez9999-aicore-operator-execution-failure" title="Permalink to this headline"></a></h3>
<p>Generally AICORE operator execution failure will report <code class="docutils literal notranslate"><span class="pre">EZ9999</span></code> error, while MindSpore side will have <code class="docutils literal notranslate"><span class="pre">Call</span> <span class="pre">rt</span> <span class="pre">api</span> <span class="pre">rtStreamSynchronize</span> <span class="pre">failed</span></code> error log. According to the error code log, it may be possible to specify the operator that failed to execute, such as the following error reporting scenario where the execution of the Add operator failed:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">EXCEPTION</span><span class="p">]</span><span class="w"> </span><span class="n">GE</span><span class="p">(</span><span class="mi">118114</span><span class="p">,</span><span class="n">ffff4effd1e0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-11-16</span><span class="o">:</span><span class="mi">48</span><span class="o">:</span><span class="mf">31.511.063</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">ge_runtime</span><span class="o">/</span><span class="n">runtime_model</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">233</span><span class="p">]</span><span class="w"> </span><span class="n">Run</span><span class="p">]</span><span class="w"> </span><span class="n">Call</span><span class="w"> </span><span class="n">rt</span><span class="w"> </span><span class="n">api</span><span class="w"> </span><span class="n">rtStreamSynchronize</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">ret</span><span class="o">:</span><span class="w"> </span><span class="mi">507011</span>
<span class="p">[</span><span class="n">WARNING</span><span class="p">]</span><span class="w"> </span><span class="n">DEVICE</span><span class="p">(</span><span class="mi">118114</span><span class="p">,</span><span class="n">ffff4effd1e0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-11-16</span><span class="o">:</span><span class="mi">48</span><span class="o">:</span><span class="mf">31.511.239</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">ascend_kernel_runtime</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">662</span><span class="p">]</span><span class="w"> </span><span class="n">GetDumpPath</span><span class="p">]</span><span class="w"> </span><span class="n">MS_OM_PATH</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">null</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">dump</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">rank_id</span><span class="o">/</span><span class="n">node_dump</span><span class="o">/</span><span class="p">...</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">DEVICE</span><span class="p">(</span><span class="mi">118114</span><span class="p">,</span><span class="n">ffff4effd1e0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-11-16</span><span class="o">:</span><span class="mi">48</span><span class="o">:</span><span class="mf">31.511.290</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">ascend_kernel_runtime</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">679</span><span class="p">]</span><span class="w"> </span><span class="n">DumpTaskExceptionInfo</span><span class="p">]</span><span class="w"> </span><span class="n">Task</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="n">infos</span><span class="w"> </span><span class="n">task_id</span><span class="o">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="n">stream_id</span><span class="o">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w"> </span><span class="n">tid</span><span class="o">:</span><span class="w"> </span><span class="mi">118198</span><span class="p">,</span><span class="w"> </span><span class="n">device_id</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">retcode</span><span class="o">:</span><span class="w"> </span><span class="mi">507011</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">)</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">DEVICE</span><span class="p">(</span><span class="mi">118114</span><span class="p">,</span><span class="n">ffff4effd1e0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-11-16</span><span class="o">:</span><span class="mi">48</span><span class="o">:</span><span class="mf">31.511.460</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">ascend_kernel_runtime</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">688</span><span class="p">]</span><span class="w"> </span><span class="n">DumpTaskExceptionInfo</span><span class="p">]</span><span class="w"> </span><span class="n">Dump</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="p">(</span><span class="n">Default</span><span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">op8</span><span class="p">)</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">input</span><span class="o">/</span><span class="n">output</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">to</span><span class="o">:</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">rank_0</span><span class="o">/</span><span class="n">node_dump</span><span class="w"> </span><span class="n">trace</span><span class="o">:</span>
<span class="n">In</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">miniconda3</span><span class="o">/</span><span class="n">envs</span><span class="o">/</span><span class="n">ci</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.7</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ops</span><span class="o">/</span><span class="n">composite</span><span class="o">/</span><span class="n">multitype_ops</span><span class="o">/</span><span class="n">add_impl</span><span class="p">.</span><span class="n">py</span><span class="p">(</span><span class="mi">212</span><span class="p">)</span><span class="o">/</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">F</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="o">/</span>
<span class="n">In</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="k">try</span><span class="p">.</span><span class="n">py</span><span class="p">(</span><span class="mi">19</span><span class="p">)</span><span class="o">/</span><span class="w">        </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">/</span>
<span class="p">[</span><span class="n">EXCEPTION</span><span class="p">]</span><span class="w"> </span><span class="n">SESSION</span><span class="p">(</span><span class="mi">118114</span><span class="p">,</span><span class="n">ffff4effd1e0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-11-16</span><span class="o">:</span><span class="mi">48</span><span class="o">:</span><span class="mf">31.524.043</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">backend</span><span class="o">/</span><span class="n">session</span><span class="o">/</span><span class="n">ascend_session</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">1456</span><span class="p">]</span><span class="w"> </span><span class="n">Execute</span><span class="p">]</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">error</span><span class="o">!</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">SESSION</span><span class="p">(</span><span class="mi">118114</span><span class="p">,</span><span class="n">ffff4effd1e0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-11-16</span><span class="o">:</span><span class="mi">48</span><span class="o">:</span><span class="mf">31.524.162</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">backend</span><span class="o">/</span><span class="n">session</span><span class="o">/</span><span class="n">ascend_session</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">1857</span><span class="p">]</span><span class="w"> </span><span class="n">ReportErrorMessage</span><span class="p">]</span><span class="w"> </span><span class="n">Ascend</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">occurred</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">message</span><span class="o">:</span>
<span class="nl">EZ9999</span><span class="p">:</span><span class="w"> </span><span class="n">Inner</span><span class="w"> </span><span class="n">Error</span><span class="o">!</span>
<span class="w">        </span><span class="n">The</span><span class="w"> </span><span class="n">device</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="w"> </span><span class="n">core</span><span class="w"> </span><span class="n">list</span><span class="p">[</span><span class="mi">0-0</span><span class="p">],</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">is</span><span class="o">:</span><span class="p">[</span><span class="n">FUNC</span><span class="o">:</span><span class="n">ProcessCoreErrorInfo</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">device_error_proc</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">461</span><span class="p">]</span>
<span class="w">        </span><span class="n">coreId</span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="o">:</span><span class="w">        </span><span class="mh">0x800000</span><span class="w">    </span><span class="p">[</span><span class="n">FUNC</span><span class="o">:</span><span class="n">ProcessCoreErrorInfo</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">device_error_proc</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">472</span><span class="p">]</span>
<span class="w">        </span><span class="n">Aicore</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">device_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">stream_id</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span><span class="w"> </span><span class="n">report_stream_id</span><span class="o">=</span><span class="mi">17</span><span class="p">,</span><span class="w"> </span><span class="n">task_id</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="n">kernel_name</span><span class="o">=</span><span class="n">add_13570952190744021808_0__kernel0</span><span class="p">,</span><span class="w"> </span><span class="n">func_name</span><span class="o">=</span><span class="n">add_13570952190744021808_0__kernel0</span><span class="p">,</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="o">=</span><span class="mi">14046644073217913723</span><span class="p">[</span><span class="n">FUNC</span><span class="o">:</span><span class="n">GetError</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">stream</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">701</span><span class="p">]</span>
<span class="w">        </span><span class="n">Stream</span><span class="w"> </span><span class="n">synchronize</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0xffff441cc970</span><span class="p">[</span><span class="n">FUNC</span><span class="o">:</span><span class="n">ReportError</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">logger</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">566</span><span class="p">]</span>
<span class="w">        </span><span class="n">rtStreamSynchronize</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="o">=</span><span class="p">[</span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">][</span><span class="n">FUNC</span><span class="o">:</span><span class="n">ReportError</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">error_message_manage</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">566</span><span class="p">]</span>

<span class="n">Traceback</span><span class="w"> </span><span class="p">(</span><span class="n">most</span><span class="w"> </span><span class="n">recent</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="o">:</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;try.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">34</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">&lt;</span><span class="k">module</span><span class="o">&gt;</span>
<span class="w">    </span><span class="n">output_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">net</span><span class="p">(</span><span class="n">Tensor</span><span class="p">(</span><span class="n">x1</span><span class="p">),</span><span class="w"> </span><span class="n">Tensor</span><span class="p">(</span><span class="n">x1</span><span class="p">))</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/nn/cell.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">391</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">__call__</span>
<span class="w">    </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">compile_and_run</span><span class="p">(</span><span class="o">*</span><span class="n">inputs</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/nn/cell.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">671</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">compile_and_run</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">_cell_graph_executor</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">new_inputs</span><span class="p">,</span><span class="w"> </span><span class="n">phase</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">phase</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/common/api.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">599</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">__call__</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="n">phase</span><span class="o">=</span><span class="n">phase</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/common/api.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">627</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">run</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">_exec_pip</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="n">phase</span><span class="o">=</span><span class="n">phase_real</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/common/api.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">77</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">wrapper</span>
<span class="w">    </span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fn</span><span class="p">(</span><span class="o">*</span><span class="n">arg</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/common/api.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">610</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">_exec_pip</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">_graph_executor</span><span class="p">(</span><span class="n">args_list</span><span class="p">,</span><span class="w"> </span><span class="n">phase</span><span class="p">)</span>
<span class="nl">RuntimeError</span><span class="p">:</span><span class="w"> </span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">backend</span><span class="o">/</span><span class="n">session</span><span class="o">/</span><span class="n">ascend_session</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">1456</span><span class="w"> </span><span class="n">Execute</span><span class="p">]</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">error</span><span class="o">!</span>
</pre></div>
</div>
<p>AICORE operator execution failure may be due to data input mismatch, access out-of-bounds, computation overflow, or it may be a code problem with the operator itself. For this kind of problem, users can use the logs and dump data to first check by themselves and construct a single-calculus use case to locate. If you cannot locate the problem, you can submit an issue to the <a class="reference external" href="https://gitee.com/mindspore">MindSpore Community</a> for help.</p>
</section>
</section>
<section id="aicpu-operator-execution-problem">
<h2>AICPU Operator Execution Problem<a class="headerlink" href="#aicpu-operator-execution-problem" title="Permalink to this headline"></a></h2>
<p>The AICPU operator problem error starts with <code class="docutils literal notranslate"><span class="pre">E3</span></code>.</p>
<section id="e39999-aicpu-operator-execution-failure">
<h3>E39999: AICPU Operator Execution Failure<a class="headerlink" href="#e39999-aicpu-operator-execution-failure" title="Permalink to this headline"></a></h3>
<p>Generally the AICPU operator will report <code class="docutils literal notranslate"><span class="pre">E39999</span></code> error during operator execution failure, while there will be <code class="docutils literal notranslate"><span class="pre">Call</span> <span class="pre">rt</span> <span class="pre">api</span> <span class="pre">rtStreamSynchronize</span> <span class="pre">failed</span></code> error log on MindSpore side. According to the error code log, it is possible to specify the operator that failed to execute, such as the following error reporting scenario:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">150840</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-14-09</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mf">01.014.355</span><span class="w"> </span><span class="p">[</span><span class="n">engine</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">914</span><span class="p">]</span><span class="mi">150900</span><span class="w"> </span><span class="n">ReportExceptProc</span><span class="o">:</span><span class="n">Task</span><span class="w"> </span><span class="n">exception</span><span class="o">!</span><span class="w"> </span><span class="n">device_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">stream_id</span><span class="o">=</span><span class="mi">117</span><span class="p">,</span><span class="w"> </span><span class="n">task_id</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="n">retCode</span><span class="o">=</span><span class="mh">0x91</span><span class="p">.</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">150840</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-14-09</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mf">01.014.485</span><span class="w"> </span><span class="p">[</span><span class="n">task</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">600</span><span class="p">]</span><span class="mi">150900</span><span class="w"> </span><span class="n">PrintAicpuErrorInfo</span><span class="o">:</span><span class="n">Aicpu</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">device_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">stream_id</span><span class="o">=</span><span class="mi">116</span><span class="p">,</span><span class="w"> </span><span class="n">task_id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="n">so_name</span><span class="o">=</span><span class="n">libaicpu_kernels</span><span class="p">.</span><span class="n">so</span><span class="p">,</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="n">kernel_name</span><span class="o">=</span><span class="n">GetNext</span><span class="p">,</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="n">op_name</span><span class="o">=</span><span class="p">,</span><span class="w"> </span><span class="n">extend_info</span><span class="o">=</span><span class="p">.</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">150840</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-14-09</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mf">01.014.498</span><span class="w"> </span><span class="p">[</span><span class="n">task</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">2292</span><span class="p">]</span><span class="mi">150900</span><span class="w"> </span><span class="n">ReportErrorInfo</span><span class="o">:</span><span class="n">model</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">retCode</span><span class="o">=</span><span class="mh">0x91</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">].</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">150840</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-14-09</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mf">01.014.506</span><span class="w"> </span><span class="p">[</span><span class="n">task</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">2269</span><span class="p">]</span><span class="mi">150900</span><span class="w"> </span><span class="n">PrintErrorInfo</span><span class="o">:</span><span class="n">model</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">device_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">stream_id</span><span class="o">=</span><span class="mi">117</span><span class="p">,</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">task_id</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span><span class="w"> </span><span class="n">model_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">first_task_id</span><span class="o">=</span><span class="mi">65535</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">150840</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-14-09</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mf">01.014.548</span><span class="w"> </span><span class="p">[</span><span class="n">stream</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">693</span><span class="p">]</span><span class="mi">150900</span><span class="w"> </span><span class="n">GetError</span><span class="o">:</span><span class="n">Stream</span><span class="w"> </span><span class="n">Synchronize</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">stream_id</span><span class="o">=</span><span class="mi">117</span><span class="w"> </span><span class="n">retCode</span><span class="o">=</span><span class="mh">0x91</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">].</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">150840</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-14-09</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mf">01.014.594</span><span class="w"> </span><span class="p">[</span><span class="n">logger</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">285</span><span class="p">]</span><span class="mi">150900</span><span class="w"> </span><span class="n">StreamSynchronize</span><span class="o">:</span><span class="n">Stream</span><span class="w"> </span><span class="n">synchronize</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0xffff1c182e70</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">150840</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-14-09</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mf">01.014.622</span><span class="w"> </span><span class="p">[</span><span class="n">api_c</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">581</span><span class="p">]</span><span class="mi">150900</span><span class="w"> </span><span class="n">rtStreamSynchronize</span><span class="o">:</span><span class="n">ErrCode</span><span class="o">=</span><span class="mi">507011</span><span class="p">,</span><span class="w"> </span><span class="n">desc</span><span class="o">=</span><span class="p">[</span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">],</span><span class="w"> </span><span class="n">InnerCode</span><span class="o">=</span><span class="mh">0x7150050</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">150840</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-14-09</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mf">01.014.633</span><span class="w"> </span><span class="p">[</span><span class="n">error_message_manage</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">41</span><span class="p">]</span><span class="mi">150900</span><span class="w"> </span><span class="n">ReportFuncErrorReason</span><span class="o">:</span><span class="n">rtStreamSynchronize</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="o">=</span><span class="p">[</span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">]</span>
<span class="p">[</span><span class="n">EXCEPTION</span><span class="p">]</span><span class="w"> </span><span class="n">GE</span><span class="p">(</span><span class="mi">150840</span><span class="p">,</span><span class="n">ffff2effd1e0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-14-09</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mf">01.014.680</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">ge_runtime</span><span class="o">/</span><span class="n">runtime_model</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">233</span><span class="p">]</span><span class="w"> </span><span class="n">Run</span><span class="p">]</span><span class="w"> </span><span class="n">Call</span><span class="w"> </span><span class="n">rt</span><span class="w"> </span><span class="n">api</span><span class="w"> </span><span class="n">rtStreamSynchronize</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">ret</span><span class="o">:</span><span class="w"> </span><span class="mi">507011</span>
<span class="p">[</span><span class="n">WARNING</span><span class="p">]</span><span class="w"> </span><span class="n">DEVICE</span><span class="p">(</span><span class="mi">150840</span><span class="p">,</span><span class="n">ffff2effd1e0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-14-09</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mf">01.015.138</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">ascend_kernel_runtime</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">668</span><span class="p">]</span><span class="w"> </span><span class="n">GetDumpPath</span><span class="p">]</span><span class="w"> </span><span class="n">MS_OM_PATH</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">null</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">dump</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">rank_id</span><span class="o">/</span><span class="n">node_dump</span><span class="o">/</span><span class="p">...</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">DEVICE</span><span class="p">(</span><span class="mi">150840</span><span class="p">,</span><span class="n">ffff2effd1e0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-14-09</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mf">01.015.177</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">ascend_kernel_runtime</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">685</span><span class="p">]</span><span class="w"> </span><span class="n">DumpTaskExceptionInfo</span><span class="p">]</span><span class="w"> </span><span class="n">Task</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="n">infos</span><span class="w"> </span><span class="n">task_id</span><span class="o">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">stream_id</span><span class="o">:</span><span class="w"> </span><span class="mi">116</span><span class="p">,</span><span class="w"> </span><span class="n">tid</span><span class="o">:</span><span class="w"> </span><span class="mi">150900</span><span class="p">,</span><span class="w"> </span><span class="n">device_id</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">retcode</span><span class="o">:</span><span class="w"> </span><span class="mi">507011</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">)</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">DEVICE</span><span class="p">(</span><span class="mi">150840</span><span class="p">,</span><span class="n">ffff2effd1e0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-14-09</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mf">01.015.357</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">ascend_kernel_runtime</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">694</span><span class="p">]</span><span class="w"> </span><span class="n">DumpTaskExceptionInfo</span><span class="p">]</span><span class="w"> </span><span class="n">Dump</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="p">(</span><span class="n">Default</span><span class="o">/</span><span class="n">GetNext</span><span class="o">-</span><span class="n">op1</span><span class="p">)</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">input</span><span class="o">/</span><span class="n">output</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">to</span><span class="o">:</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">rank_0</span><span class="o">/</span><span class="n">node_dump</span><span class="w"> </span><span class="n">trace</span><span class="o">:</span>
<span class="n">In</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">jenkins</span><span class="o">/</span><span class="n">solution_test</span><span class="o">/</span><span class="n">remaining</span><span class="o">/</span><span class="n">common</span><span class="o">/</span><span class="n">features</span><span class="o">/</span><span class="n">dataset_base</span><span class="p">.</span><span class="n">py</span><span class="p">(</span><span class="mi">1023</span><span class="p">)</span><span class="o">/</span><span class="w">        </span><span class="n">getnext_input</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">get_next</span><span class="p">()</span><span class="o">/</span>

<span class="p">[</span><span class="n">EXCEPTION</span><span class="p">]</span><span class="w"> </span><span class="n">SESSION</span><span class="p">(</span><span class="mi">150840</span><span class="p">,</span><span class="n">ffff2effd1e0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-14-09</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mf">01.060.662</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">backend</span><span class="o">/</span><span class="n">session</span><span class="o">/</span><span class="n">ascend_session</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">1456</span><span class="p">]</span><span class="w"> </span><span class="n">Execute</span><span class="p">]</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">error</span><span class="o">!</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">SESSION</span><span class="p">(</span><span class="mi">150840</span><span class="p">,</span><span class="n">ffff2effd1e0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-14-09</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mf">01.060.809</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">backend</span><span class="o">/</span><span class="n">session</span><span class="o">/</span><span class="n">ascend_session</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">1857</span><span class="p">]</span><span class="w"> </span><span class="n">ReportErrorMessage</span><span class="p">]</span><span class="w"> </span><span class="n">Ascend</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">occurred</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">message</span><span class="o">:</span>
<span class="nl">E39999</span><span class="p">:</span><span class="w"> </span><span class="n">Inner</span><span class="w"> </span><span class="n">Error</span><span class="o">!</span>
<span class="w">        </span><span class="n">Aicpu</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">device_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">stream_id</span><span class="o">=</span><span class="mi">116</span><span class="p">,</span><span class="w"> </span><span class="n">task_id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="n">so_name</span><span class="o">=</span><span class="n">libaicpu_kernels</span><span class="p">.</span><span class="n">so</span><span class="p">,</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="n">kernel_name</span><span class="o">=</span><span class="n">GetNext</span><span class="p">,</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="n">op_name</span><span class="o">=</span><span class="p">,</span><span class="w"> </span><span class="n">extend_info</span><span class="o">=</span><span class="p">[</span><span class="n">FUNC</span><span class="o">:</span><span class="n">GetError</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">stream</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">701</span><span class="p">]</span>
<span class="w">        </span><span class="n">Stream</span><span class="w"> </span><span class="n">synchronize</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0xffff1c182e70</span><span class="p">[</span><span class="n">FUNC</span><span class="o">:</span><span class="n">ReportError</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">logger</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">566</span><span class="p">]</span>
<span class="w">        </span><span class="n">rtStreamSynchronize</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="o">=</span><span class="p">[</span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">][</span><span class="n">FUNC</span><span class="o">:</span><span class="n">ReportError</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">error_message_manage</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">566</span><span class="p">]</span>

<span class="n">INFO</span><span class="w"> </span><span class="mi">2021-09-14</span><span class="w"> </span><span class="mi">09</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mo">01</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">test_ms_cifar10_tdt_consume_beyond_produce_more_RDR</span><span class="p">.</span><span class="n">py</span><span class="o">:</span><span class="n">test_run</span><span class="o">:</span><span class="mi">50</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">dataset</span><span class="w"> </span><span class="n">batch</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">less</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">train</span><span class="w"> </span><span class="n">loop</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">backend</span><span class="o">/</span><span class="n">session</span><span class="o">/</span><span class="n">ascend_session</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">1456</span><span class="w"> </span><span class="n">Execute</span><span class="p">]</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">error</span><span class="o">!</span>
</pre></div>
</div>
<p>The AICPU operator execution failure may be due to data input mismatch, access out-of-bounds, AICPU thread hang, or caused by the operator itself. For this kind of problem, users can use the logs and dump data to first check by themselves and construct a single-calculus use case to locate. If you cannot locate the problem, you can submit an issue to the <a class="reference external" href="https://gitee.com/mindspore">MindSpore Community</a> for help.</p>
</section>
</section>
<section id="runtime-faq">
<h2>runtime FAQ<a class="headerlink" href="#runtime-faq" title="Permalink to this headline"></a></h2>
<p>The Runtime module takes over the calls of MindSpore, ACL, GE, HCCL and schedules each module on the NPU through the Driver module. The error code of the Runtime module starts with <code class="docutils literal notranslate"><span class="pre">EE</span></code>.</p>
<section id="ee9999-hbm-video-memory-allocation-failure">
<h3>EE9999: HBM Video Memory Allocation Failure<a class="headerlink" href="#ee9999-hbm-video-memory-allocation-failure" title="Permalink to this headline"></a></h3>
<p>When the HBM memory requested by the framework exceeds the remaining memory of the Device, a <code class="docutils literal notranslate"><span class="pre">halMemAlloc</span> <span class="pre">failed</span></code> error is reported, as shown in the following error scenario:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">EXCEPTION</span><span class="p">]</span><span class="w"> </span><span class="n">DEVICE</span><span class="p">(</span><span class="mi">170414</span><span class="p">,</span><span class="n">fffe397fa1e0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-13-15</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mf">07.465.388</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">ascend_memory_manager</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">62</span><span class="p">]</span><span class="w"> </span><span class="n">MallocDeviceMemory</span><span class="p">]</span><span class="w"> </span><span class="n">Malloc</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">[</span><span class="mi">32212254720</span><span class="p">],</span><span class="w"> </span><span class="n">ret</span><span class="p">[</span><span class="mi">207001</span><span class="p">],</span><span class="w"> </span><span class="n">Device</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">processes</span><span class="w"> </span><span class="n">occupying</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="n">card</span><span class="p">,</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">as</span><span class="o">:</span><span class="w"> </span><span class="n">ps</span><span class="w"> </span><span class="o">-</span><span class="n">ef</span><span class="o">|</span><span class="n">grep</span><span class="w"> </span><span class="n">python</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">DEVICE</span><span class="p">(</span><span class="mi">170414</span><span class="p">,</span><span class="n">fffe397fa1e0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2021-09-13-15</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="mf">07.466.049</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">ascend_kernel_runtime</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">375</span><span class="p">]</span><span class="w"> </span><span class="n">Init</span><span class="p">]</span><span class="w"> </span><span class="n">Ascend</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">occurred</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">message</span><span class="o">:</span>
<span class="nl">EE9999</span><span class="p">:</span><span class="w"> </span><span class="n">Inner</span><span class="w"> </span><span class="n">Error</span><span class="o">!</span>
<span class="w">        </span><span class="p">[</span><span class="n">driver</span><span class="w"> </span><span class="n">interface</span><span class="p">]</span><span class="w"> </span><span class="n">halMemAlloc</span><span class="w"> </span><span class="n">failed</span><span class="o">:</span><span class="w"> </span><span class="n">device_id</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="o">=</span><span class="mi">32212254720</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">env_type</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">drvRetCode</span><span class="o">=</span><span class="mi">6</span><span class="o">!</span><span class="p">[</span><span class="n">FUNC</span><span class="o">:</span><span class="n">ReportError</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">npu_driver</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">568</span><span class="p">]</span>
<span class="w">        </span><span class="p">[</span><span class="n">driver</span><span class="w"> </span><span class="n">interface</span><span class="p">]</span><span class="w"> </span><span class="n">halMemAlloc</span><span class="w"> </span><span class="n">failed</span><span class="o">:</span><span class="w"> </span><span class="n">size</span><span class="o">=</span><span class="mi">32212254720</span><span class="p">,</span><span class="w"> </span><span class="n">deviceId</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">env_type</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">drvRetCode</span><span class="o">=</span><span class="mi">6</span><span class="o">!</span><span class="p">[</span><span class="n">FUNC</span><span class="o">:</span><span class="n">ReportError</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">npu_driver</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">568</span><span class="p">]</span>
<span class="w">        </span><span class="n">DevMemAlloc</span><span class="w"> </span><span class="n">huge</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">failed</span><span class="o">:</span><span class="w"> </span><span class="n">deviceId</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="o">=</span><span class="mi">32212254720</span><span class="p">,</span><span class="w"> </span><span class="n">retCode</span><span class="o">=</span><span class="mi">117571606</span><span class="o">!</span><span class="p">[</span><span class="n">FUNC</span><span class="o">:</span><span class="n">ReportError</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">npu_driver</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">566</span><span class="p">]</span>
<span class="w">        </span><span class="n">Device</span><span class="w"> </span><span class="n">malloc</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="o">=</span><span class="mi">32212254720</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="mf">2.</span><span class="p">[</span><span class="n">FUNC</span><span class="o">:</span><span class="n">ReportError</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">logger</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">566</span><span class="p">]</span>
<span class="w">        </span><span class="n">rtMalloc</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="o">=</span><span class="p">[</span><span class="n">driver</span><span class="w"> </span><span class="n">error</span><span class="o">:</span><span class="n">out</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">memory</span><span class="p">][</span><span class="n">FUNC</span><span class="o">:</span><span class="n">ReportError</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">error_message_manage</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">566</span><span class="p">]</span>

<span class="n">Traceback</span><span class="w"> </span><span class="p">(</span><span class="n">most</span><span class="w"> </span><span class="n">recent</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="o">:</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;train.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">298</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">&lt;</span><span class="k">module</span><span class="o">&gt;</span>
<span class="w">    </span><span class="n">train_net</span><span class="p">()</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/jenkins/solution_test/remaining/test_scripts/fmea_multi_task/scripts/train/src/model_utils/moxing_adapter.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">104</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">wrapped_func</span>
<span class="w">    </span><span class="n">run_func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;train.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">292</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">train_net</span>
<span class="w">    </span><span class="n">sink_size</span><span class="o">=</span><span class="n">dataset</span><span class="p">.</span><span class="n">get_dataset_size</span><span class="p">(),</span><span class="w"> </span><span class="n">dataset_sink_mode</span><span class="o">=</span><span class="n">dataset_sink_mode</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/model.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">715</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">train</span>
<span class="w">    </span><span class="n">sink_size</span><span class="o">=</span><span class="n">sink_size</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/model.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">_train</span>
<span class="w">    </span><span class="n">self</span><span class="p">.</span><span class="n">_train_dataset_sink_process</span><span class="p">(</span><span class="n">epoch</span><span class="p">,</span><span class="w"> </span><span class="n">train_dataset</span><span class="p">,</span><span class="w"> </span><span class="n">list_callback</span><span class="p">,</span><span class="w"> </span><span class="n">cb_params</span><span class="p">,</span><span class="w"> </span><span class="n">sink_size</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/model.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">553</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">_train_dataset_sink_process</span>
<span class="w">    </span><span class="n">dataset_helper</span><span class="o">=</span><span class="n">dataset_helper</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/model.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">345</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">_exec_preprocess</span>
<span class="w">    </span><span class="n">dataset_helper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DatasetHelper</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span><span class="w"> </span><span class="n">dataset_sink_mode</span><span class="p">,</span><span class="w"> </span><span class="n">sink_size</span><span class="p">,</span><span class="w"> </span><span class="n">epoch_num</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/dataset_helper.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">245</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">__init__</span>
<span class="w">    </span><span class="n">self</span><span class="p">.</span><span class="n">iter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iterclass</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span><span class="w"> </span><span class="n">sink_size</span><span class="p">,</span><span class="w"> </span><span class="n">epoch_num</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/dataset_helper.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">393</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">__init__</span>
<span class="w">    </span><span class="n">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span><span class="w"> </span><span class="n">sink_size</span><span class="p">,</span><span class="w"> </span><span class="n">epoch_num</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/dataset_helper.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">__init__</span>
<span class="w">    </span><span class="n">create_data_info_queue</span><span class="o">=</span><span class="n">create_data_info_queue</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/_utils.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">73</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">_exec_datagraph</span>
<span class="w">    </span><span class="n">phase</span><span class="o">=</span><span class="n">phase</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/common/api.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">470</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">init_dataset</span>
<span class="w">    </span><span class="n">phase</span><span class="o">=</span><span class="n">phase</span><span class="p">)</span><span class="o">:</span>
<span class="nl">RuntimeError</span><span class="p">:</span><span class="w"> </span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">ascend_memory_manager</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">62</span><span class="w"> </span><span class="n">MallocDeviceMemory</span><span class="p">]</span><span class="w"> </span><span class="n">Malloc</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">[</span><span class="mi">32212254720</span><span class="p">],</span><span class="w"> </span><span class="n">ret</span><span class="p">[</span><span class="mi">207001</span><span class="p">],</span><span class="w"> </span><span class="n">Device</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">processes</span><span class="w"> </span><span class="n">occupying</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="n">card</span><span class="p">,</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">as</span><span class="o">:</span><span class="w"> </span><span class="n">ps</span><span class="w"> </span><span class="o">-</span><span class="n">ef</span><span class="o">|</span><span class="n">grep</span><span class="w"> </span><span class="n">python</span>
</pre></div>
</div>
<p>When encounter such an error, you can first check whether the card running the program is already occupied by another program. At present, MindSpore only supports one program running on the same Device in Ascend environment, and the program will apply for 32212254720KB (i.e. 30GB) of video memory at one time when it is executed on the 910 training server, so if the error message shows that the size of video memory in the failed application is 32212254720, it is likely that the card is already occupied by other programs, resulting in the failed application of video memory for the new program. When you encounter this problem just make sure the card is not occupied by another program and restart the program.If the error message shows that the size of video memory in the failed application is not 32212254720, but any other number, the network model may be too large and exceed the Device memory (32GB for 910 servers), consider changing the batchsize, optimizing the network model or using model parallelism for training.</p>
<p>In addition, currently MindSpore will verify the remaining Device memory of the device during program initialization. If the remaining Device memory is less than half of the total, the following error will be reported to indicate that the device is occupied:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span>[CRITICAL] DEVICE(164104,ffff841795d0,python):2022-12-01-03:58:52.033.238 [mindspore/ccsrc/runtime/device/kernel_runtime.cc:124] LockRuntime] The pointer[stream] is null.
[ERROR] DEVICE(164104,ffff841795d0,python):2022-12-01-03:58:52.033.355 [mindspore/ccsrc/runtime/device/kernel_runtime_manager.cc:138] WaitTaskFinishOnDevice] SyncStream failed, exception:The pointer[stream] is null.

----------------------------------------------------
- C++ Call Stack: (For framework developers)
----------------------------------------------------
mindspore/ccsrc/runtime/device/kernel_runtime.cc:124 LockRuntime

Traceback (most recent call last):
  File &quot;train.py&quot;, line 377, in &lt;module&gt;
    train_net()
  File &quot;/home/jenkins/workspace/TDT_deployment/solution_test/remaining/test_scripts/mindspore/reliability/fmea/business/process/multitask/test_ms_fmea_multi_task_1p_1p_0001_2_GRAPH_MODE/scripts/train/src/model_utils/moxing_adapter.py&quot;, line 104, in wrapped_func
    run_func(*args, **kwargs)
  File &quot;train.py&quot;, line 370, in train_net
    sink_size=dataset.get_dataset_size(), dataset_sink_mode=dataset_sink_mode)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/model.py&quot;, line 1052, in train
    initial_epoch=initial_epoch)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/model.py&quot;, line 98, in wrapper
    func(self, *args, **kwargs)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/model.py&quot;, line 614, in _train
    cb_params, sink_size, initial_epoch, valid_infos)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/model.py&quot;, line 673, in _train_dataset_sink_process
    dataset_helper=dataset_helper)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/model.py&quot;, line 427, in _exec_preprocess
    dataset_helper = DatasetHelper(dataset, dataset_sink_mode, sink_size, epoch_num)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/dataset_helper.py&quot;, line 335, in __init__
    self.iter = iterclass(dataset, sink_size, epoch_num)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/dataset_helper.py&quot;, line 530, in __init__
    super().__init__(dataset, sink_size, epoch_num)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/dataset_helper.py&quot;, line 429, in __init__
    create_data_info_queue=create_data_info_queue)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/_utils.py&quot;, line 74, in _exec_datagraph
    phase=phase)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/common/api.py&quot;, line 1264, in init_dataset
    need_run=need_run):
RuntimeError: Ascend kernel runtime initialization failed. The details refer to &#39;Ascend Error Message&#39;.

----------------------------------------------------
- Framework Error Message:
----------------------------------------------------
Malloc device memory failed, free memory size is less than half of total memory size.Device 0 Device HBM total size:34359738368 Device HBM free size:2140602368 may be other processes occupying this card, check as: ps -ef|grep python
</pre></div>
</div>
</section>
<section id="ee9999-runtime-task-execution-failure">
<h3>EE9999: Runtime Task Execution Failure<a class="headerlink" href="#ee9999-runtime-task-execution-failure" title="Permalink to this headline"></a></h3>
<p>The operator or task of runtime is generally related to the control flow, such as event wait, send, recv, etc. When the task of runtime fails, it will report an <code class="docutils literal notranslate"><span class="pre">EE9999</span> <span class="pre">Task</span> <span class="pre">execute</span> <span class="pre">failed</span></code> error, as below:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">CRITICAL</span><span class="p">]</span><span class="w"> </span><span class="n">DEVICE</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">fffd5affd0f0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.798.038</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">hal</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend_data_queue</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">291</span><span class="p">]</span><span class="w"> </span><span class="n">ParseType</span><span class="p">]</span><span class="w"> </span><span class="n">Got</span><span class="w"> </span><span class="n">unsupported</span><span class="w"> </span><span class="n">acl</span><span class="w"> </span><span class="n">datatype</span><span class="o">:</span><span class="w"> </span><span class="mi">-1</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">MD</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">fffd5affd0f0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.798.688</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">minddata</span><span class="o">/</span><span class="n">dataset</span><span class="o">/</span><span class="n">util</span><span class="o">/</span><span class="n">task</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">75</span><span class="p">]</span><span class="w"> </span><span class="k">operator</span><span class="p">()]</span><span class="w"> </span><span class="n">Unexpected</span><span class="w"> </span><span class="n">error</span><span class="p">.</span><span class="w"> </span><span class="n">Got</span><span class="w"> </span><span class="n">unsupported</span><span class="w"> </span><span class="n">acl</span><span class="w"> </span><span class="n">datatype</span><span class="o">:</span><span class="w"> </span><span class="mi">-1</span>

<span class="o">----------------------------------------------------</span>
<span class="o">-</span><span class="w"> </span><span class="n">C</span><span class="o">++</span><span class="w"> </span><span class="n">Call</span><span class="w"> </span><span class="n">Stack</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">For</span><span class="w"> </span><span class="n">framework</span><span class="w"> </span><span class="n">developers</span><span class="p">)</span>
<span class="o">----------------------------------------------------</span>
<span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">hal</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend_data_queue</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">291</span><span class="w"> </span><span class="n">ParseType</span>

<span class="n">Line</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">74</span>
<span class="nl">File</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">minddata</span><span class="o">/</span><span class="n">dataset</span><span class="o">/</span><span class="n">util</span><span class="o">/</span><span class="n">task</span><span class="p">.</span><span class="n">cc</span>

<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">MD</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">fffd5affd0f0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.798.741</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">minddata</span><span class="o">/</span><span class="n">dataset</span><span class="o">/</span><span class="n">util</span><span class="o">/</span><span class="n">task_manager</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">222</span><span class="p">]</span><span class="w"> </span><span class="n">InterruptMaster</span><span class="p">]</span><span class="w"> </span><span class="n">Task</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">err</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="p">(</span><span class="n">more</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="n">logs</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">Unexpected</span><span class="w"> </span><span class="n">error</span><span class="p">.</span><span class="w"> </span><span class="n">Got</span><span class="w"> </span><span class="n">unsupported</span><span class="w"> </span><span class="n">acl</span><span class="w"> </span><span class="n">datatype</span><span class="o">:</span><span class="w"> </span><span class="mi">-1</span>

<span class="n">INFO</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10</span><span class="w"> </span><span class="mi">09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mi">46</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">train</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">dataset_func</span><span class="p">.</span><span class="n">py</span><span class="o">:</span><span class="n">op_network_with_create_dict_iterator</span><span class="o">:</span><span class="mi">302</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Iter</span><span class="w"> </span><span class="n">Num</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span>
<span class="n">INFO</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10</span><span class="w"> </span><span class="mi">09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mi">46</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">train</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">dataset_func</span><span class="p">.</span><span class="n">py</span><span class="o">:</span><span class="n">op_network_with_create_dict_iterator</span><span class="o">:</span><span class="mi">302</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Iter</span><span class="w"> </span><span class="n">Num</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span>
<span class="n">INFO</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10</span><span class="w"> </span><span class="mi">09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mi">46</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">train</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">dataset_func</span><span class="p">.</span><span class="n">py</span><span class="o">:</span><span class="n">op_network_with_create_dict_iterator</span><span class="o">:</span><span class="mi">302</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Iter</span><span class="w"> </span><span class="n">Num</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span>
<span class="n">INFO</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10</span><span class="w"> </span><span class="mi">09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mi">46</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">train</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">dataset_func</span><span class="p">.</span><span class="n">py</span><span class="o">:</span><span class="n">op_network_with_create_dict_iterator</span><span class="o">:</span><span class="mi">302</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Iter</span><span class="w"> </span><span class="n">Num</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span>
<span class="n">INFO</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10</span><span class="w"> </span><span class="mi">09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mi">46</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">train</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">dataset_func</span><span class="p">.</span><span class="n">py</span><span class="o">:</span><span class="n">op_network_with_create_dict_iterator</span><span class="o">:</span><span class="mi">302</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Iter</span><span class="w"> </span><span class="n">Num</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.322.063</span><span class="w"> </span><span class="p">[</span><span class="n">engine</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">1263</span><span class="p">]</span><span class="mi">163618</span><span class="w"> </span><span class="n">ReportExceptProc</span><span class="o">:</span><span class="n">Task</span><span class="w"> </span><span class="n">exception</span><span class="o">!</span><span class="w"> </span><span class="n">device_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">stream_id</span><span class="o">=</span><span class="mi">17</span><span class="p">,</span><span class="w"> </span><span class="n">task_id</span><span class="o">=</span><span class="mi">43</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="n">retCode</span><span class="o">=</span><span class="mh">0x91</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">].</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.323.519</span><span class="w"> </span><span class="p">[</span><span class="n">task</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">92</span><span class="p">]</span><span class="mi">163618</span><span class="w"> </span><span class="n">PrintErrorInfo</span><span class="o">:</span><span class="n">Task</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">info</span><span class="o">:</span><span class="w"> </span><span class="n">device_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">stream_id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">task_id</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">flip_num</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">task_type</span><span class="o">=</span><span class="mf">3.</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.323.542</span><span class="w"> </span><span class="p">[</span><span class="n">task</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">3239</span><span class="p">]</span><span class="mi">163618</span><span class="w"> </span><span class="n">ReportErrorInfo</span><span class="o">:</span><span class="n">model</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">retCode</span><span class="o">=</span><span class="mh">0x91</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">].</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.323.553</span><span class="w"> </span><span class="p">[</span><span class="n">task</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">3210</span><span class="p">]</span><span class="mi">163618</span><span class="w"> </span><span class="n">PrintErrorInfo</span><span class="o">:</span><span class="n">model</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">device_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">stream_id</span><span class="o">=</span><span class="mi">17</span><span class="p">,</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">task_id</span><span class="o">=</span><span class="mi">43</span><span class="p">,</span><span class="w"> </span><span class="n">flip_num</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">model_id</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">first_task_id</span><span class="o">=</span><span class="mi">65535</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.323.578</span><span class="w"> </span><span class="p">[</span><span class="n">callback</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">91</span><span class="p">]</span><span class="mi">163618</span><span class="w"> </span><span class="n">Notify</span><span class="o">:</span><span class="n">notify</span><span class="w"> </span><span class="p">[</span><span class="n">HCCL</span><span class="p">]</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="n">start</span><span class="p">.</span><span class="n">notify</span><span class="w"> </span><span class="n">taskid</span><span class="o">:</span><span class="mi">3</span><span class="w"> </span><span class="n">streamid</span><span class="o">:</span><span class="mi">2</span><span class="w"> </span><span class="n">retcode</span><span class="o">:</span><span class="mi">507011</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.324.653</span><span class="w"> </span><span class="p">[</span><span class="n">callback</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">91</span><span class="p">]</span><span class="mi">163618</span><span class="w"> </span><span class="n">Notify</span><span class="o">:</span><span class="n">notify</span><span class="w"> </span><span class="p">[</span><span class="n">MindSpore</span><span class="p">]</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="n">start</span><span class="p">.</span><span class="n">notify</span><span class="w"> </span><span class="n">taskid</span><span class="o">:</span><span class="mi">3</span><span class="w"> </span><span class="n">streamid</span><span class="o">:</span><span class="mi">2</span><span class="w"> </span><span class="n">retcode</span><span class="o">:</span><span class="mi">507011</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.324.699</span><span class="w"> </span><span class="p">[</span><span class="n">stream</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">1041</span><span class="p">]</span><span class="mi">163618</span><span class="w"> </span><span class="n">GetError</span><span class="o">:</span><span class="n">Stream</span><span class="w"> </span><span class="n">Synchronize</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">stream_id</span><span class="o">=</span><span class="mi">17</span><span class="p">,</span><span class="w"> </span><span class="n">retCode</span><span class="o">=</span><span class="mh">0x91</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">].</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.324.711</span><span class="w"> </span><span class="p">[</span><span class="n">stream</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">1044</span><span class="p">]</span><span class="mi">163618</span><span class="w"> </span><span class="n">GetError</span><span class="o">:</span><span class="n">report</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">module_type</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="n">module_name</span><span class="o">=</span><span class="n">EE9999</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.324.720</span><span class="w"> </span><span class="p">[</span><span class="n">stream</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">1044</span><span class="p">]</span><span class="mi">163618</span><span class="w"> </span><span class="n">GetError</span><span class="o">:</span><span class="n">Task</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">info</span><span class="o">:</span><span class="w"> </span><span class="n">device_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">stream_id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">task_id</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">flip_num</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">task_type</span><span class="o">=</span><span class="mf">3.</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.324.788</span><span class="w"> </span><span class="p">[</span><span class="n">logger</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">314</span><span class="p">]</span><span class="mi">163618</span><span class="w"> </span><span class="n">StreamSynchronize</span><span class="o">:</span><span class="n">Stream</span><span class="w"> </span><span class="n">synchronize</span><span class="w"> </span><span class="n">failed</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.324.830</span><span class="w"> </span><span class="p">[</span><span class="n">api_c</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">721</span><span class="p">]</span><span class="mi">163618</span><span class="w"> </span><span class="n">rtStreamSynchronize</span><span class="o">:</span><span class="n">ErrCode</span><span class="o">=</span><span class="mi">507011</span><span class="p">,</span><span class="w"> </span><span class="n">desc</span><span class="o">=</span><span class="p">[</span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">],</span><span class="w"> </span><span class="n">InnerCode</span><span class="o">=</span><span class="mh">0x7150050</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.324.841</span><span class="w"> </span><span class="p">[</span><span class="n">error_message_manage</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">49</span><span class="p">]</span><span class="mi">163618</span><span class="w"> </span><span class="n">FuncErrorReason</span><span class="o">:</span><span class="n">report</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">module_type</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">module_name</span><span class="o">=</span><span class="n">EE8888</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.324.855</span><span class="w"> </span><span class="p">[</span><span class="n">error_message_manage</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">49</span><span class="p">]</span><span class="mi">163618</span><span class="w"> </span><span class="n">FuncErrorReason</span><span class="o">:</span><span class="n">rtStreamSynchronize</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="o">=</span><span class="p">[</span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">]</span>
<span class="p">[</span><span class="n">CRITICAL</span><span class="p">]</span><span class="w"> </span><span class="n">GE</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">fffdf7fff0f0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.337.038</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">hal</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ge_runtime</span><span class="o">/</span><span class="n">runtime_model</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">241</span><span class="p">]</span><span class="w"> </span><span class="n">Run</span><span class="p">]</span><span class="w"> </span><span class="n">Call</span><span class="w"> </span><span class="n">rt</span><span class="w"> </span><span class="n">api</span><span class="w"> </span><span class="n">rtStreamSynchronize</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">ret</span><span class="o">:</span><span class="w"> </span><span class="mi">507011</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">DEVICE</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">fffdf7fff0f0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.337.259</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">hal</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend_kernel_runtime</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">761</span><span class="p">]</span><span class="w"> </span><span class="n">DumpTaskExceptionInfo</span><span class="p">]</span><span class="w"> </span><span class="n">Task</span><span class="w"> </span><span class="n">fail</span><span class="w"> </span><span class="n">infos</span><span class="w"> </span><span class="n">task_id</span><span class="o">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">stream_id</span><span class="o">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">tid</span><span class="o">:</span><span class="w"> </span><span class="mi">160186</span><span class="p">,</span><span class="w"> </span><span class="n">device_id</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">retcode</span><span class="o">:</span><span class="w"> </span><span class="mi">507011</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">)</span>
<span class="p">[</span><span class="n">CRITICAL</span><span class="p">]</span><span class="w"> </span><span class="n">DEVICE</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">fffdf7fff0f0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.337.775</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">hal</span><span class="o">/</span><span class="n">hardware</span><span class="o">/</span><span class="n">ascend_graph_executor</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">214</span><span class="p">]</span><span class="w"> </span><span class="n">RunGraph</span><span class="p">]</span><span class="w"> </span><span class="n">Run</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">error</span><span class="o">!</span><span class="n">Ascend</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="n">Message</span><span class="o">:</span><span class="n">EE9999</span><span class="o">:</span><span class="w"> </span><span class="n">Inner</span><span class="w"> </span><span class="n">Error</span><span class="p">,</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">contact</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">engineer</span><span class="o">!</span>
<span class="n">EE9999</span><span class="w">  </span><span class="n">Task</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">info</span><span class="o">:</span><span class="w"> </span><span class="n">device_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">stream_id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">task_id</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">flip_num</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">task_type</span><span class="o">=</span><span class="mf">3.</span><span class="p">[</span><span class="n">FUNC</span><span class="o">:</span><span class="n">GetError</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">stream</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">1044</span><span class="p">]</span>
<span class="w">        </span><span class="n">TraceBack</span><span class="w"> </span><span class="p">(</span><span class="n">most</span><span class="w"> </span><span class="n">recent</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="o">:</span>
<span class="w">        </span><span class="n">rtStreamSynchronize</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="o">=</span><span class="p">[</span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">][</span><span class="n">FUNC</span><span class="o">:</span><span class="n">FuncErrorReason</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">error_message_manage</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">49</span><span class="p">]</span>

<span class="p">[</span><span class="n">WARNING</span><span class="p">]</span><span class="w"> </span><span class="n">MD</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">ffff9339d010</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.342.881</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">minddata</span><span class="o">/</span><span class="n">dataset</span><span class="o">/</span><span class="n">engine</span><span class="o">/</span><span class="n">datasetops</span><span class="o">/</span><span class="n">data_queue_op</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">93</span><span class="p">]</span><span class="w"> </span><span class="o">~</span><span class="n">DataQueueOp</span><span class="p">]</span><span class="w"> </span><span class="n">preprocess_batch</span><span class="o">:</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">batch_queue</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="n">push_start_time</span><span class="o">:</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.739.740</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.748.507</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.772.387</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.772.965</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.775.373</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.779.644</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.787.036</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.791.382</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.795.615</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.797.560</span><span class="p">;</span><span class="w"> </span><span class="n">push_end_time</span><span class="o">:</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.742.372</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.749.065</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.772.929</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.773.347</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.775.811</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.780.110</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.787.544</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.791.876</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.796.089</span><span class="p">,</span><span class="w"> </span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mf">46.797.952</span><span class="p">.</span>
<span class="p">[</span><span class="n">TRACE</span><span class="p">]</span><span class="w"> </span><span class="n">HCCL</span><span class="p">(</span><span class="mi">160186</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-10-09</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mf">45.806.979</span><span class="w"> </span><span class="p">[</span><span class="n">status</span><span class="o">:</span><span class="n">stop</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">hcom</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">336</span><span class="p">][</span><span class="n">hccl</span><span class="mi">-160186-0-1673313336</span><span class="o">-</span><span class="n">hccl_world_group</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="n">hcom</span><span class="w"> </span><span class="n">destroy</span><span class="w"> </span><span class="n">complete</span><span class="p">,</span><span class="n">take</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="p">[</span><span class="mi">86560</span><span class="p">]</span><span class="n">us</span><span class="p">,</span><span class="w"> </span><span class="n">rankNum</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span><span class="w"> </span><span class="n">rank</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">Traceback</span><span class="w"> </span><span class="p">(</span><span class="n">most</span><span class="w"> </span><span class="n">recent</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="o">:</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;train.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">&lt;</span><span class="k">module</span><span class="o">&gt;</span>
<span class="w">    </span><span class="n">dataset_base</span><span class="p">.</span><span class="n">op_network_with_tdt</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span><span class="w"> </span><span class="n">epoch_num</span><span class="o">=</span><span class="n">beyond_epoch_num</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/jenkins/solution_test/common/ms_aw/function/data_processing/dataset_func.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">375</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">op_network_with_tdt</span>
<span class="w">    </span><span class="n">assert_iter_num</span><span class="o">=</span><span class="n">assert_iter_num</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/jenkins/solution_test/common/ms_aw/function/data_processing/dataset_func.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">301</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">op_network_with_create_dict_iterator</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">network</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/nn/cell.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">618</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">__call__</span>
<span class="w">    </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">compile_and_run</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/nn/cell.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">1007</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">compile_and_run</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">_cell_graph_executor</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">new_inputs</span><span class="p">,</span><span class="w"> </span><span class="n">phase</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">phase</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/common/api.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">1192</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">__call__</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="n">phase</span><span class="o">=</span><span class="n">phase</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/common/api.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">1229</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">run</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">_exec_pip</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="n">phase</span><span class="o">=</span><span class="n">phase_real</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/common/api.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">98</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">wrapper</span>
<span class="w">    </span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fn</span><span class="p">(</span><span class="o">*</span><span class="n">arg</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/common/api.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">1211</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">_exec_pip</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">_graph_executor</span><span class="p">(</span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="n">phase</span><span class="p">)</span>
<span class="nl">RuntimeError</span><span class="p">:</span><span class="w"> </span><span class="n">Run</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">error</span><span class="o">!</span>

<span class="o">----------------------------------------------------</span>
<span class="o">-</span><span class="w"> </span><span class="n">Ascend</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="n">Message</span><span class="o">:</span>
<span class="o">----------------------------------------------------</span>
<span class="nl">EE9999</span><span class="p">:</span><span class="w"> </span><span class="n">Inner</span><span class="w"> </span><span class="n">Error</span><span class="p">,</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">contact</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">engineer</span><span class="o">!</span>
<span class="n">EE9999</span><span class="w">  </span><span class="n">Task</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">info</span><span class="o">:</span><span class="w"> </span><span class="n">device_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">stream_id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">task_id</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">flip_num</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">task_type</span><span class="o">=</span><span class="mf">3.</span><span class="p">[</span><span class="n">FUNC</span><span class="o">:</span><span class="n">GetError</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">stream</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">1044</span><span class="p">]</span>
<span class="w">        </span><span class="n">TraceBack</span><span class="w"> </span><span class="p">(</span><span class="n">most</span><span class="w"> </span><span class="n">recent</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="o">:</span>
<span class="w">        </span><span class="n">rtStreamSynchronize</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="o">=</span><span class="p">[</span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">failed</span><span class="p">][</span><span class="n">FUNC</span><span class="o">:</span><span class="n">FuncErrorReason</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">error_message_manage</span><span class="p">.</span><span class="n">cc</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">49</span><span class="p">]</span>

<span class="o">----------------------------------------------------</span>
<span class="o">-</span><span class="w"> </span><span class="n">C</span><span class="o">++</span><span class="w"> </span><span class="n">Call</span><span class="w"> </span><span class="n">Stack</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">For</span><span class="w"> </span><span class="n">framework</span><span class="w"> </span><span class="n">developers</span><span class="p">)</span>
<span class="o">----------------------------------------------------</span>
<span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">hal</span><span class="o">/</span><span class="n">hardware</span><span class="o">/</span><span class="n">ascend_graph_executor</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">214</span><span class="w"> </span><span class="n">RunGraph</span>
</pre></div>
</div>
<p>Generally, this kind of error may be caused by the GetNext timeout for fetching data or framework problems such as control flow and flow assignment. Users can first check whether the problem is caused by the GetNext timeout for fetching data. Some of the following cases may cause GetNext timeout for fetching data:</p>
<ol class="arabic simple">
<li><p>The amount of consumption data in the user script is greater than the amount of production data.</p></li>
<li><p>When executing the multi-device distributed program, the process of one card may hang, which may cause the timeout of other devices.</p></li>
</ol>
<p>If the problem is not caused by GetNext timeout, users can submit issues to <a class="reference external" href="https://gitee.com/mindspore">MindSpore Community</a> for help.</p>
</section>
<section id="ee1001-device-id-setting-error">
<h3>EE1001: Device ID Setting Error<a class="headerlink" href="#ee1001-device-id-setting-error" title="Permalink to this headline"></a></h3>
<p>Users can specify which card their application runs on by using the environment variable DEVICE_ID or by setting the device_id in the context. If the device id is not set correctly, it may report <code class="docutils literal notranslate"><span class="pre">EE1001</span></code> error, such as the following error scenario. There are only 8 cards in the server, the available device id range is [0, 8), and the user incorrectly set the device_id=8.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span>Traceback (most recent call last):
  File &quot;train.py&quot;, line 379, in &lt;module&gt;
    train_net()
  File &quot;/home/jenkins/ResNet/scripts/train/src/model_utils/moxing_adapter.py&quot;, line 104, in wrapped_func
    run_func(*args, **kwargs)
  File &quot;train.py&quot;, line 312, in train_net
    net = resnet(class_num=config.class_num)
  File &quot;/home/jenkins/ResNet/scripts/train/src/resnet.py&quot;, line 561, in resnet50
    class_num)
  File &quot;/home/jenkins/ResNet/scripts/train/src/resnet.py&quot;, line 381, in __init__
    super(ResNet, self).__init__()
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/nn/cell.py&quot;, line 118, in __init__
    init_pipeline()
RuntimeError: Device 8 call rtSetDevice failed, ret[107001]. The details refer to &#39;Ascend Error Message&#39;.

----------------------------------------------------
- Ascend Error Message:
----------------------------------------------------
EE1001: The argument is invalid.Reason: Set device failed, invalid device, set device=8, valid device range is [0, 8)
        TraceBack (most recent call last):
        rtSetDevice execute failed, reason=[device id error][FUNC:FuncErrorReason][FILE:error_message_manage.cc][LINE:49]

(Please search &quot;Ascend Error Message&quot; at https://www.mindspore.cn for error code description)
</pre></div>
</div>
<p>When you encounter such problem, just check the device id setting according to the error log.</p>
</section>
</section>
<section id="hccl-hccp-faq">
<h2>HCCL &amp; HCCP FAQ<a class="headerlink" href="#hccl-hccp-faq" title="Permalink to this headline"></a></h2>
<p>HCCL is the Huawei Collective Communication Library, which provides high-performance collective communication functions between servers in deep learning training scenarios, and its communication process is divided into the following three stages:</p>
<ol class="arabic simple">
<li><p>Communication initialization: Obtain the necessary configuration of the aggregate communication parameters and initialize the network devices. The initialization phase does not involve any previous interaction between different devices.</p></li>
<li><p>Establish communication connections: Establishing a socket connection and exchanging communication parameters and memory information between the two communication ends. During the establishment of the communication connection phase, HCCL builds a link with other cards in combination with the network topology and exchanges information about the parameters used for communication based on the cluster information provided by the user. If no timely response is received from other cards within the build timeout threshold (MindSpore default setting of 600s, configurable via the environment variable HCCL_CONNECT_TIMEOUT), a build timeout error is reported and training is exited.</p></li>
<li><p>Perform communication operations: Synchronize device execution state and pass memory data via Notify. In the communication operation execution stage, HCCL will schedule NOTIFY/SDMA and other tasks according to the communication algorithm and send them to the task scheduler of the Ascend device through runtime, and the device will schedule and execute the task according to the scheduling information. The Notify class task is used for inter-card synchronization. Notify wait blocks the task stream until the corresponding Notify record arrives, to ensure that each other’s memory is in a ready state when subsequent communication operations are performed.</p></li>
</ol>
<p>The error codes for HCCL &amp; HCCP start with <code class="docutils literal notranslate"><span class="pre">EI</span></code> and <code class="docutils literal notranslate"><span class="pre">EJ</span></code>. Throughout the communication process, single card problems and communication link problems in the cluster may lead to a large number of timeout errors, so when locating cluster communication problems, we need to collect the log information of the whole cluster and lock the location where the problems occur.</p>
<section id="ei0006-socket-build-timeout">
<h3>EI0006: Socket Build Timeout<a class="headerlink" href="#ei0006-socket-build-timeout" title="Permalink to this headline"></a></h3>
<p>When the socker build timeout occurs, it will report an <code class="docutils literal notranslate"><span class="pre">EI0006</span></code> error, and the MindSpore log will show a <code class="docutils literal notranslate"><span class="pre">Distribute</span> <span class="pre">Task</span> <span class="pre">Failed</span></code> error. This means the cluster has a socket build timeout error, as shown in the following log:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span>[ERROR] ASCENDCL(83434,python):2022-11-30-23:31:08.729.325 [tensor_data_transfer.cpp:899]89062 acltdtSendTensor: [Push][Data]failed to send, tdt result = -1, device is 1, name is 62576f78-70c2-11ed-b633-000132214e48
[WARNING] DEVICE(83434,fffcf1ffb1e0,python):2022-11-30-23:31:08.986.720 [mindspore/ccsrc/plugin/device/ascend/hal/device/ascend_data_queue.cc:257] Push] Device queue thread had been interrupted by TdtHandle::DestroyHandle, you can ignore the above error: &#39;failed to send...&#39;. In this scenario, the training ends first without using all epoch(s) data, and the data preprocessing is blocked by the data transmission channel on the device side. So we force the data transmission channel to stop.
[WARNING] MD(83434,ffff852cf5d0,python):2022-11-30-23:31:08.999.090 [mindspore/ccsrc/minddata/dataset/engine/datasetops/data_queue_op.cc:93] ~DataQueueOp] preprocess_batch: 49; batch_queue: 0, 0, 0, 0, 0, 0, 0, 0, 0, 64; push_start_time: 2022-11-30-23:19:41.234.869, 2022-11-30-23:19:41.273.919, 2022-11-30-23:19:41.333.753, 2022-11-30-23:19:41.415.529, 2022-11-30-23:19:41.479.177, 2022-11-30-23:19:41.557.576, 2022-11-30-23:19:41.605.967, 2022-11-30-23:19:41.682.957, 2022-11-30-23:19:41.719.645, 2022-11-30-23:19:41.785.832; push_end_time: 2022-11-30-23:19:41.245.668, 2022-11-30-23:19:41.284.989, 2022-11-30-23:19:41.344.248, 2022-11-30-23:19:41.430.124, 2022-11-30-23:19:41.491.263, 2022-11-30-23:19:41.569.235, 2022-11-30-23:19:41.624.471, 2022-11-30-23:19:41.700.708, 2022-11-30-23:19:41.735.413, 2022-11-30-23:31:08.986.853.
[TRACE] HCCL(83434,python):2022-11-30-23:31:10.455.138 [status:stop] [hcom.cc:264][hccl-83434-0-1669821563-hccl_world_group][1]hcom destroy complete,take time [323391]us, rankNum[8], rank[1]
Traceback (most recent call last):
  File &quot;train.py&quot;, line 377, in &lt;module&gt;
    train_net()
  File &quot;/home/jenkins/solution_test/remaining/test_scripts/process/train_parallel1/src/model_utils/moxing_adapter.py&quot;, line 104, in wrapped_func
    run_func(*args, **kwargs)
  File &quot;train.py&quot;, line 370, in train_net
    sink_size=100, dataset_sink_mode=dataset_sink_mode)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/model.py&quot;, line 1052, in train
    initial_epoch=initial_epoch)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/model.py&quot;, line 98, in wrapper
    func(self, *args, **kwargs)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/model.py&quot;, line 614, in _train
    cb_params, sink_size, initial_epoch, valid_infos)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/train/model.py&quot;, line 692, in _train_dataset_sink_process
    outputs = train_network(*inputs)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/nn/cell.py&quot;, line 627, in __call__
    out = self.compile_and_run(*args)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/nn/cell.py&quot;, line 945, in compile_and_run
    self.compile(*inputs)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/nn/cell.py&quot;, line 919, in compile
    jit_config_dict=self._jit_config_dict)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/common/api.py&quot;, line 1347, in compile
    result = self._graph_executor.compile(obj, args_list, phase, self._use_vm_mode())
RuntimeError: Preprocess failed before run graph 1. The details refer to &#39;Ascend Error Message&#39;.

----------------------------------------------------
- Ascend Error Message:
----------------------------------------------------
EI0006: Getting socket times out. Reason: 1. The remote does not initiate a connect request. some NPUs in the cluster are abnormal.    2. The remote does not initiate a connect request because the collective communication operator is started too late or is not started by some NPU in the cluster.    3. The communication link is disconnected. (For example, the IP addresses are not on the same network segment or the TLS configurations are inconsistent.)
        Solution: 1. Check the rank service processes with other errors or no errors in the cluster.2. If this error is reported for all NPUs, check whether the time difference between the earliest and latest errors is greater than the connect timeout interval (120s by default). If so, adjust the timeout interval by using the HCCL_CONNECT_TIMEOUT environment variable.3. Check the connectivity of the communication link between nodes. (For details, see the TLS command and HCCN connectivity check examples.)

(Please search &quot;Ascend Error Message&quot; at https://www.mindspore.cn for error code description)

----------------------------------------------------
- Framework Error Message: (For framework developers)
----------------------------------------------------
Distribute Task Failed,
error msg: davinci_model : load task fail, return ret: 1343225860
</pre></div>
</div>
<p>As stated in the log, the common reasons for socket build timeouts are:</p>
<ol class="arabic simple">
<li><p>Some cards were not executed to the correct building stage, and the error has occurred before the stage.</p></li>
<li><p>Some cards are blocked by certain tasks that take longer than 600 seconds (configurable via HCCL_CONNECT_TIMEOUT) before the corresponding phase is executed.</p></li>
<li><p>The communication link between nodes is not working or is unstable.</p></li>
</ol>
<p>After collecting INFO logs (including CANN logs) for all cards in the cluster, the following steps can be followed to troubleshoot:</p>
<ol class="arabic">
<li><p>Check the error logs of all cards. If a card does not report a socket build timeout error, you can use the log time check to determine whether there is a business process error exit, jamming or core downtime that causes the cluster socket build timeout, and then turn to a single card to locate the problem.</p></li>
<li><p>If all cards report socket build timeout errors, check whether the difference between the earliest and latest time in the error log of each card exceeds the timeout threshold. If the threshold is exceeded, please locate the latest rank execution blocking cause or adjust the timeout threshold (default is 600 seconds in MindSpore, set by environment variable HCCL_CONNECT_TIMEOUT)</p></li>
<li><p>Check whether a Device network port communication link in the cluster works. The common reasons are:</p>
<p>a. IP is not in the same network segment or there is a problem with the subnet mask configuration.</p>
<p>b. IP conflict. There are two ranks with the same IP in the cluster.</p>
<p>c. The TLS (security enhancement) settings are inconsistent across ranks.</p>
</li>
</ol>
</section>
<section id="ei0002-notify-wait-timeout">
<h3>EI0002: notify wait timeout<a class="headerlink" href="#ei0002-notify-wait-timeout" title="Permalink to this headline"></a></h3>
<p>Commonly used in the execution phase. The task of the HCCL operator is executed on each Device of the specified cluster, and the state is synchronized via notify. If an exception occurs on any card or communication link before/during the execution, the cluster synchronization will fail and the remaining cards will have a notify wait timeout and report an <code class="docutils literal notranslate"><span class="pre">EI0002</span></code> error as follows:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span>[ERROR] ASCENDCL(162844,python):2022-12-01-00:26:58.086.834 [tensor_data_transfer.cpp:899]168498 acltdtSendTensor: [Push][Data]failed to send, tdt result = -1, device is 1, name is 1393be34-70ca-11ed-9be5-000132214e48
[WARNING] DEVICE(162844,fffce77fe1e0,python):2022-12-01-00:26:58.388.563 [mindspore/ccsrc/plugin/device/ascend/hal/device/ascend_data_queue.cc:257] Push] Device queue thread had been interrupted by TdtHandle::DestroyHandle, you can ignore the above error: &#39;failed to send...&#39;. In this scenario, the training ends first without using all epoch(s) data, and the data preprocessing is blocked by the data transmission channel on the device side. So we force the data transmission channel to stop.
[CRITICAL] DEVICE(162844,fffd6cff91e0,python):2022-12-01-00:26:58.399.787 [mindspore/ccsrc/plugin/device/ascend/hal/hardware/ascend_graph_executor.cc:240] RunGraph] Run task for graph:kernel_graph_1 error! The details refer to &#39;Ascend Error Message&#39;.Ascend Error Message:EI0002: The wait execution of the Notify register times out. Reason: The Notify register has not received the Notify record from remote rank [0].base information: [streamID:[14], taskID[4], taskType[Notify Wait], tag[HcomAllReduce_6629421139219749105_0].] task information: [notify id:[0x0000000100000058], stage:[ffffffff], remote rank:[0].
there are(is) 1 abnormal device(s):
        serverId[10.*.*.*], deviceId[0], Heartbeat Lost Occurred, Possible Reason: 1. Process has exited, 2. Network Disconnected
]
        Possible Cause: 1. An exception occurs during the execution on some NPUs in the cluster. As a result, collective communication operation failed.2. The execution speed on some NPU in the cluster is too slow to complete a communication operation within the timeout interval. (default 1800s, You can set the interval by using HCCL_EXEC_TIMEOUT.)3. The number of training samples of each NPU is inconsistent.4. Packet loss or other connectivity problems occur on the communication link.
        Solution: 1. If this error is reported on part of these ranks, check other ranks to see whether other errors have been reported earlier.2. If this error is reported for all ranks, check whether the error reporting time is consistent (the maximum difference must not exceed 1800s). If not, locate the cause or adjust the locate the cause or set the HCCL_EXEC_TIMEOUT environment variable to a larger value.3. Check whether the completion queue element (CQE) of the error exists in the plog(grep -rn &#39;error cqe&#39;). If so, check the network connection status. (For details, see the TLS command and HCCN connectivity check examples.)4. Ensure that the number of training samples of each NPU is consistent.
        TraceBack (most recent call last):
        Notify wait execute failed, device_id=1, stream_id=14, task_id=4, flip_num=0, notify_id=11[FUNC:GetError][FILE:stream.cc][LINE:921]
        rtStreamSynchronize execute failed, reason=[the model stream execute failed][FUNC:FuncErrorReason][FILE:error_message_manage.cc][LINE:49]

(Please search &quot;Ascend Error Message&quot; at https://www.mindspore.cn for error code description)
[WARNING] MD(162844,fffce77fe1e0,python):2022-12-01-00:26:58.399.793 [mindspore/ccsrc/minddata/dataset/engine/datasetops/data_queue_op.cc:257] SendDataToAscend] Thread has already been terminated.
malloc_consolidate(): invalid chunk size
</pre></div>
</div>
<p>As stated in the log, common reasons for notify wait timeouts are:</p>
<ol class="arabic simple">
<li><p>Some cards were not executed to the notify synchronization stage, and the error has occurred before the stage.</p></li>
<li><p>Some cards are blocked by certain tasks that take longer than 1800 seconds (configurable via HCCL_EXEC_TIMEOUT) before the corresponding phase is executed.</p></li>
<li><p>Inconsistent sequence of task execution between some cards due to network models, etc.</p></li>
<li><p>The communication link between nodes is unstable.</p></li>
</ol>
<p>After collecting INFO logs (including CANN logs) for all cards in the cluster, the following steps can be followed to troubleshoot:</p>
<ol class="arabic simple">
<li><p>Check the error logs of all cards. If a card does not report a notify wait timeout error, you can check the log time to determine whether there is a business process error exit, stuck or core downtime of the cluster notify wait timeout, and then turn to a single card problem location.</p></li>
<li><p>If all cards report notify wait timeout errors, check whether the difference between the earliest and latest time in the error log of each card exceeds the timeout threshold. If the threshold is exceeded, please locate the latest rank execution blocking cause (e.g. save checkpoint) or adjust the timeout threshold (default is 1800 seconds, set via the environment variable HCCL_EXEC_TIMEOUT).</p></li>
<li><p>Check whether there is Device network port communication link instability in the cluster, troubleshoot the Device side logs of all cards, and locate the cause of network packet loss if there is an error cqe print and the time is within the business interval.</p></li>
</ol>
</section>
<section id="ei0004-illegal-ranktable-configuration">
<h3>EI0004: Illegal ranktable configuration<a class="headerlink" href="#ei0004-illegal-ranktable-configuration" title="Permalink to this headline"></a></h3>
<p>The user needs to configure the multi-machine multi-card information needed for distributed training through the ranktable file for HCCL initialization. If the relevant ranktable configuration is illegal, an <code class="docutils literal notranslate"><span class="pre">EI0004</span></code> error will be reported, such as the following error scenario, where two device_id are repeatedly set to 1 in the ranktable, resulting in an illegal configuration.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">WARNING</span><span class="p">]</span><span class="w"> </span><span class="n">HCCL_ADPT</span><span class="p">(</span><span class="mi">89999</span><span class="p">,</span><span class="n">ffffa5a47010</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2023</span><span class="mo">-01</span><span class="mi">-16-20</span><span class="o">:</span><span class="mi">43</span><span class="o">:</span><span class="mf">48.480.465</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">hal</span><span class="o">/</span><span class="n">hccl_adapter</span><span class="o">/</span><span class="n">hccl_adapter</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">47</span><span class="p">]</span><span class="w"> </span><span class="n">GenHcclOptions</span><span class="p">]</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">DEPLOY_MODE</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">set</span><span class="p">.</span><span class="w"> </span><span class="n">Now</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="mi">0</span>

<span class="n">Traceback</span><span class="w"> </span><span class="p">(</span><span class="n">most</span><span class="w"> </span><span class="n">recent</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="o">:</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;train.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">379</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">&lt;</span><span class="k">module</span><span class="o">&gt;</span>
<span class="w">    </span><span class="n">train_net</span><span class="p">()</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/jenkins/ResNet/scripts/train_parallel0/src/model_utils/moxing_adapter.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">104</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">wrapped_func</span>
<span class="w">    </span><span class="n">run_func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;train.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">305</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">train_net</span>
<span class="w">    </span><span class="n">set_parameter</span><span class="p">()</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;train.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">151</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">set_parameter</span>
<span class="w">    </span><span class="n">init</span><span class="p">()</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/communication/management.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">161</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">init</span>
<span class="w">    </span><span class="n">init_hccl</span><span class="p">()</span>
<span class="nl">RuntimeError</span><span class="p">:</span><span class="w"> </span><span class="n">Ascend</span><span class="w"> </span><span class="n">collective</span><span class="w"> </span><span class="n">communication</span><span class="w"> </span><span class="n">initialization</span><span class="w"> </span><span class="n">failed</span><span class="p">.</span>

<span class="o">----------------------------------------------------</span>
<span class="o">-</span><span class="w"> </span><span class="n">Ascend</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="n">Message</span><span class="o">:</span>
<span class="o">----------------------------------------------------</span>
<span class="nl">EI0004</span><span class="p">:</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">ranktable</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">invalid</span><span class="p">,</span><span class="n">Reason</span><span class="o">:</span><span class="p">[</span><span class="n">The</span><span class="w"> </span><span class="n">ranktable</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">devId</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">inconsistent</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">devId</span><span class="p">.].</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">configured</span><span class="w"> </span><span class="n">ranktable</span><span class="p">.</span><span class="w"> </span><span class="p">[{</span><span class="s">&quot;server_count&quot;</span><span class="o">:</span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="s">&quot;server_list&quot;</span><span class="o">:</span><span class="p">[{</span><span class="s">&quot;device&quot;</span><span class="o">:</span><span class="p">[{</span><span class="s">&quot;device_id&quot;</span><span class="o">:</span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="s">&quot;device_ip&quot;</span><span class="o">:</span><span class="s">&quot;192.168.100.101&quot;</span><span class="p">,</span><span class="s">&quot;rank_id&quot;</span><span class="o">:</span><span class="s">&quot;0&quot;</span><span class="p">},{</span><span class="s">&quot;device_id&quot;</span><span class="o">:</span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="s">&quot;device_ip&quot;</span><span class="o">:</span><span class="s">&quot;192.168.101.101&quot;</span><span class="p">,</span><span class="s">&quot;rank_id&quot;</span><span class="o">:</span><span class="s">&quot;1&quot;</span><span class="p">},{</span><span class="s">&quot;device_id&quot;</span><span class="o">:</span><span class="s">&quot;2&quot;</span><span class="p">,</span><span class="s">&quot;device_ip&quot;</span><span class="o">:</span><span class="s">&quot;192.168.102.101&quot;</span><span class="p">,</span><span class="s">&quot;rank_id&quot;</span><span class="o">:</span><span class="s">&quot;2&quot;</span><span class="p">},{</span><span class="s">&quot;device_id&quot;</span><span class="o">:</span><span class="s">&quot;3&quot;</span><span class="p">,</span><span class="s">&quot;device_ip&quot;</span><span class="o">:</span><span class="s">&quot;192.168.103.101&quot;</span><span class="p">,</span><span class="s">&quot;rank_id&quot;</span><span class="o">:</span><span class="s">&quot;3&quot;</span><span class="p">},{</span><span class="s">&quot;device_id&quot;</span><span class="o">:</span><span class="s">&quot;4&quot;</span><span class="p">,</span><span class="s">&quot;device_ip&quot;</span><span class="o">:</span><span class="s">&quot;192.168.100.102&quot;</span><span class="p">,</span><span class="s">&quot;rank_id&quot;</span><span class="o">:</span><span class="s">&quot;4&quot;</span><span class="p">},{</span><span class="s">&quot;device_id&quot;</span><span class="o">:</span><span class="s">&quot;5&quot;</span><span class="p">,</span><span class="s">&quot;device_ip&quot;</span><span class="o">:</span><span class="s">&quot;192.168.101.102&quot;</span><span class="p">,</span><span class="s">&quot;rank_id&quot;</span><span class="o">:</span><span class="s">&quot;5&quot;</span><span class="p">},{</span><span class="s">&quot;device_id&quot;</span><span class="o">:</span><span class="s">&quot;6&quot;</span><span class="p">,</span><span class="s">&quot;device_ip&quot;</span><span class="o">:</span><span class="s">&quot;192.168.102.102&quot;</span><span class="p">,</span><span class="s">&quot;rank_id&quot;</span><span class="o">:</span><span class="s">&quot;6&quot;</span><span class="p">},{</span><span class="s">&quot;device_id&quot;</span><span class="o">:</span><span class="s">&quot;7&quot;</span><span class="p">,</span><span class="s">&quot;device_ip&quot;</span><span class="o">:</span><span class="s">&quot;192.168.103.102&quot;</span><span class="p">,</span><span class="s">&quot;rank_id&quot;</span><span class="o">:</span><span class="s">&quot;7&quot;</span><span class="p">}],</span><span class="s">&quot;host_nic_ip&quot;</span><span class="o">:</span><span class="s">&quot;reserve&quot;</span><span class="p">,</span><span class="s">&quot;server_id&quot;</span><span class="o">:</span><span class="s">&quot;10.*.*.*&quot;</span><span class="p">}],</span><span class="s">&quot;status&quot;</span><span class="o">:</span><span class="s">&quot;completed&quot;</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="o">:</span><span class="s">&quot;1.0&quot;</span><span class="p">}]</span>
<span class="w">        </span><span class="nl">Solution</span><span class="p">:</span><span class="w"> </span><span class="n">Try</span><span class="w"> </span><span class="n">again</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">cluster</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ranktable</span><span class="w"> </span><span class="n">file</span><span class="p">.</span><span class="w"> </span><span class="n">Ensure</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">operating</span><span class="w"> </span><span class="n">environment</span><span class="p">.</span>

<span class="p">(</span><span class="n">Please</span><span class="w"> </span><span class="n">search</span><span class="w"> </span><span class="s">&quot;Ascend Error Message&quot;</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">https</span><span class="o">:</span><span class="c1">//www.mindspore.cn for error code description)</span>

<span class="o">----------------------------------------------------</span>
<span class="o">-</span><span class="w"> </span><span class="n">Framework</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="n">Message</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">For</span><span class="w"> </span><span class="n">framework</span><span class="w"> </span><span class="n">developers</span><span class="p">)</span>
<span class="o">----------------------------------------------------</span>
<span class="n">Init</span><span class="w"> </span><span class="n">hccl</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="n">adapter</span><span class="w"> </span><span class="n">failed</span><span class="p">.</span>

<span class="o">----------------------------------------------------</span>
<span class="o">-</span><span class="w"> </span><span class="n">C</span><span class="o">++</span><span class="w"> </span><span class="n">Call</span><span class="w"> </span><span class="n">Stack</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">For</span><span class="w"> </span><span class="n">framework</span><span class="w"> </span><span class="n">developers</span><span class="p">)</span>
<span class="o">----------------------------------------------------</span>
<span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">hal</span><span class="o">/</span><span class="n">hardware</span><span class="o">/</span><span class="n">ascend_collective_comm_lib</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">112</span><span class="w"> </span><span class="n">Initialize</span>
<span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">hal</span><span class="o">/</span><span class="n">hccl_adapter</span><span class="o">/</span><span class="n">hccl_adapter</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">402</span><span class="w"> </span><span class="n">InitKernelInfoStore</span>
</pre></div>
</div>
<p>When you encounter such an error, just fix the ranktable configuration file according to the error log.</p>
</section>
<section id="ei0005-inconsistent-communication-parameters-between-cards">
<h3>EI0005: Inconsistent Communication Parameters Between Cards<a class="headerlink" href="#ei0005-inconsistent-communication-parameters-between-cards" title="Permalink to this headline"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">EI0005</span></code> error is reported when there are inconsistencies in the communication parameters between cards, such as inconsistencies in the size of the input shape used for AllReduce between cards, as in the following error reporting scenario, where there is a parameter named count that is inconsistent in size when communicating between cards.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span>[WARNING] HCCL_ADPT(50288,ffff8fec4010,python):2023-01-16-20:37:22.585.027 [mindspore/ccsrc/plugin/device/ascend/hal/hccl_adapter/hccl_adapter.cc:47] GenHcclOptions] The environment variable DEPLOY_MODE is not set. Now set to default value 0
[WARNING] MD(50288,fffe35f4b0f0,python):2023-01-16-20:38:57.747.318 [mindspore/ccsrc/minddata/dataset/engine/datasetops/source/generator_op.cc:198] operator()] Bad performance attention, it takes more than 25 seconds to generator.__next__ new row, which might cause `GetNext` timeout problem when sink_mode=True. You can increase the parameter num_parallel_workers in GeneratorDataset / optimize the efficiency of obtaining samples in the user-defined generator function.
dataset length:  848
data pre-process time is 0.2904245853424072

Traceback (most recent call last):
  File &quot;e2e_feed_dev.py&quot;, line 294, in &lt;module&gt;
    run()
  File &quot;e2e_feed_dev.py&quot;, line 277, in run
    label_indices, label_values)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/nn/cell.py&quot;, line 626, in __call__
    out = self.compile_and_run(*args)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/nn/cell.py&quot;, line 945, in compile_and_run
    self.compile(*inputs)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/nn/cell.py&quot;, line 919, in compile
    jit_config_dict=self._jit_config_dict)
  File &quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/common/api.py&quot;, line 1337, in compile
    result = self._graph_executor.compile(obj, args_list, phase, self._use_vm_mode())
RuntimeError: Preprocess failed before run graph 0. The details refer to &#39;Ascend Error Message&#39;.

----------------------------------------------------
- Ascend Error Message:
----------------------------------------------------
EI0005: The arguments for collective communication are inconsistent between ranks: tag [HcomAllReduce_6629421139219749105_0], parameter [count], local [9556480], remote [9555712]
        Solution: Check whether the training script and ranktable of each NPU are consistent.

(Please search &quot;Ascend Error Message&quot; at https://www.mindspore.cn for error code description)

----------------------------------------------------
- Framework Error Message: (For framework developers)
----------------------------------------------------
Distribute Task Failed,
error msg: davinci_model : load task fail, return ret: 1343225860

----------------------------------------------------
- C++ Call Stack: (For framework developers)
----------------------------------------------------
mindspore/ccsrc/plugin/device/ascend/hal/hardware/ascend_kernel_executor.cc:206 PreprocessBeforeRunGraph
mindspore/ccsrc/plugin/device/ascend/hal/device/ascend_kernel_runtime.cc:578 LoadTask
mindspore/ccsrc/plugin/device/ascend/hal/device/ge_runtime/task/hccl_task.cc:104 Distribute
</pre></div>
</div>
<p>When such errors are occurred, the communication parameters in error can be identified through logs and IR diagrams and corrected in the network script.</p>
</section>
<section id="ej0001-hccp-initialization-failure">
<h3>EJ0001: HCCP Initialization Failure<a class="headerlink" href="#ej0001-hccp-initialization-failure" title="Permalink to this headline"></a></h3>
<p>The HCCP process is responsible for implementing the communication function, and HCCL can call the HCCP interface for communication. HCCP initialization failure will report <code class="docutils literal notranslate"><span class="pre">EJ0001</span></code> error, such as the following scenario. When the previous eight-card training task has not yet finished in the same server to start a new eight-card training task, initialization failure will occur. You need to wait for the previous eight-card training task to finish before starting a new eight-card training task.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">HCCL</span><span class="p">(</span><span class="mi">17381</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022-12</span><span class="mo">-01-03</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mf">29.001.054</span><span class="w"> </span><span class="p">[</span><span class="n">network_manager</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">64</span><span class="p">][</span><span class="n">hccl</span><span class="mi">-17381-0-1669834948</span><span class="o">-</span><span class="n">hccl_world_group</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="n">call</span><span class="w"> </span><span class="n">trace</span><span class="o">:</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">7</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">HCCL</span><span class="p">(</span><span class="mi">17381</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022-12</span><span class="mo">-01-03</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mf">29.001.066</span><span class="w"> </span><span class="p">[</span><span class="n">hccl_impl_base</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">239</span><span class="p">][</span><span class="n">hccl</span><span class="mi">-17381-0-1669834948</span><span class="o">-</span><span class="n">hccl_world_group</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="n">call</span><span class="w"> </span><span class="n">trace</span><span class="o">:</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">7</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">HCCL</span><span class="p">(</span><span class="mi">17381</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022-12</span><span class="mo">-01-03</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mf">29.001.076</span><span class="w"> </span><span class="p">[</span><span class="n">hccl_impl</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">731</span><span class="p">][</span><span class="n">hccl</span><span class="mi">-17381-0-1669834948</span><span class="o">-</span><span class="n">hccl_world_group</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="n">call</span><span class="w"> </span><span class="n">trace</span><span class="o">:</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">7</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">HCCL</span><span class="p">(</span><span class="mi">17381</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022-12</span><span class="mo">-01-03</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mf">29.001.104</span><span class="w"> </span><span class="p">[</span><span class="n">hccl_comm</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">100</span><span class="p">][</span><span class="n">hccl</span><span class="mi">-17381-0-1669834948</span><span class="o">-</span><span class="n">hccl_world_group</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="n">HcclComm</span><span class="p">][</span><span class="n">Init</span><span class="p">]</span><span class="n">errNo</span><span class="p">[</span><span class="mh">0x0000000005000007</span><span class="p">]</span><span class="w"> </span><span class="n">hccl</span><span class="w"> </span><span class="n">initialize</span><span class="w"> </span><span class="n">failed</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">HCCL</span><span class="p">(</span><span class="mi">17381</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022-12</span><span class="mo">-01-03</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mf">29.001.116</span><span class="w"> </span><span class="p">[</span><span class="n">hcom</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">80</span><span class="p">][</span><span class="n">hccl</span><span class="mi">-17381-0-1669834948</span><span class="o">-</span><span class="n">hccl_world_group</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="n">Init</span><span class="p">][</span><span class="n">Result</span><span class="p">]</span><span class="n">errNo</span><span class="p">[</span><span class="mh">0x0000000005010007</span><span class="p">]</span><span class="w"> </span><span class="n">hcclComm</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="n">error</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">HCCL</span><span class="p">(</span><span class="mi">17381</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022-12</span><span class="mo">-01-03</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mf">29.001.129</span><span class="w"> </span><span class="p">[</span><span class="n">hcom</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">94</span><span class="p">][</span><span class="n">hccl</span><span class="mi">-17381-0-1669834948</span><span class="o">-</span><span class="n">hccl_world_group</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="n">Init</span><span class="p">][</span><span class="n">Result</span><span class="p">]</span><span class="n">hcom</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">rankNum</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span><span class="w"> </span><span class="n">rank</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">server</span><span class="p">[</span><span class="mf">10.</span><span class="o">*</span><span class="p">.</span><span class="o">*</span><span class="p">.</span><span class="o">*</span><span class="p">],</span><span class="w"> </span><span class="n">device</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="k">return</span><span class="p">[</span><span class="mi">83951623</span><span class="p">]</span>
<span class="p">[</span><span class="n">TRACE</span><span class="p">]</span><span class="w"> </span><span class="n">HCCL</span><span class="p">(</span><span class="mi">17381</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022-12</span><span class="mo">-01-03</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mf">29.001.628</span><span class="w"> </span><span class="p">[</span><span class="n">status</span><span class="o">:</span><span class="n">stop</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">hcom</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">264</span><span class="p">][</span><span class="n">hccl</span><span class="mi">-17381-0-1669834948</span><span class="o">-</span><span class="n">hccl_world_group</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="n">hcom</span><span class="w"> </span><span class="n">destroy</span><span class="w"> </span><span class="n">complete</span><span class="p">,</span><span class="n">take</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="p">[</span><span class="mi">486</span><span class="p">]</span><span class="n">us</span><span class="p">,</span><span class="w"> </span><span class="n">rankNum</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span><span class="w"> </span><span class="n">rank</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">HCCL</span><span class="p">(</span><span class="mi">17381</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022-12</span><span class="mo">-01-03</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mf">29.001.645</span><span class="w"> </span><span class="p">[</span><span class="n">hcom</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">190</span><span class="p">][</span><span class="n">hccl</span><span class="mi">-17381-0-1669834948</span><span class="o">-</span><span class="n">hccl_world_group</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="n">HcomInitByFile</span><span class="p">]</span><span class="n">errNo</span><span class="p">[</span><span class="mh">0x0000000005000007</span><span class="p">]</span><span class="w"> </span><span class="n">rankTablePath</span><span class="p">[</span><span class="o">/</span><span class="n">ms_test</span><span class="o">/</span><span class="n">workspace</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">hccl_8p</span><span class="p">.</span><span class="n">json</span><span class="p">]</span><span class="w"> </span><span class="n">identify</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">hcom</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="n">failed</span><span class="p">.</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">HCCL</span><span class="p">(</span><span class="mi">17381</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022-12</span><span class="mo">-01-03</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mf">29.001.662</span><span class="w"> </span><span class="p">[</span><span class="n">hcom_plugin</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">202</span><span class="p">][</span><span class="n">hccl</span><span class="mi">-17381-0-1669834948</span><span class="o">-</span><span class="n">hccl_world_group</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="n">Init</span><span class="p">][</span><span class="n">HcomPlugin</span><span class="p">]</span><span class="n">errNo</span><span class="p">[</span><span class="mh">0x0000000005010007</span><span class="p">]</span><span class="w"> </span><span class="n">Initialize</span><span class="o">:</span><span class="w"> </span><span class="n">HcomInitByFile</span><span class="w"> </span><span class="n">failed</span><span class="p">.</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">HCCL</span><span class="p">(</span><span class="mi">17381</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022-12</span><span class="mo">-01-03</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mf">29.001.675</span><span class="w"> </span><span class="p">[</span><span class="n">hcom_plugin</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">61</span><span class="p">][</span><span class="n">hccl</span><span class="mi">-17381-0-1669834948</span><span class="o">-</span><span class="n">hccl_world_group</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="n">Initialize</span><span class="p">][</span><span class="n">Plugin</span><span class="p">]</span><span class="n">Initialize</span><span class="w"> </span><span class="n">Hcom</span><span class="w"> </span><span class="n">failed</span>
<span class="p">[</span><span class="n">CRITICAL</span><span class="p">]</span><span class="w"> </span><span class="n">HCCL_ADPT</span><span class="p">(</span><span class="mi">17381</span><span class="p">,</span><span class="n">ffff890145d0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022-12</span><span class="mo">-01-03</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mf">29.001.753</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">hal</span><span class="o">/</span><span class="n">hccl_adapter</span><span class="o">/</span><span class="n">hccl_adapter</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">402</span><span class="p">]</span><span class="w"> </span><span class="n">InitKernelInfoStore</span><span class="p">]</span><span class="w"> </span><span class="n">Init</span><span class="w"> </span><span class="n">hccl</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="n">adapter</span><span class="w"> </span><span class="n">failed</span><span class="p">.</span>
<span class="p">[</span><span class="n">CRITICAL</span><span class="p">]</span><span class="w"> </span><span class="n">DEVICE</span><span class="p">(</span><span class="mi">17381</span><span class="p">,</span><span class="n">ffff890145d0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022-12</span><span class="mo">-01-03</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mf">29.002.576</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">hal</span><span class="o">/</span><span class="n">hardware</span><span class="o">/</span><span class="n">ascend_collective_comm_lib</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">112</span><span class="p">]</span><span class="w"> </span><span class="n">Initialize</span><span class="p">]</span><span class="w"> </span><span class="n">Ascend</span><span class="w"> </span><span class="n">collective</span><span class="w"> </span><span class="n">communication</span><span class="w"> </span><span class="n">initialization</span><span class="w"> </span><span class="n">failed</span><span class="p">.</span><span class="n">Ascend</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="n">Message</span><span class="o">:</span><span class="n">EJ0001</span><span class="o">:</span><span class="w"> </span><span class="n">Failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">initialize</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">HCCP</span><span class="w"> </span><span class="n">process</span><span class="p">.</span><span class="w"> </span><span class="n">Reason</span><span class="o">:</span><span class="w"> </span><span class="n">Maybe</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">training</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">running</span><span class="p">.</span>
<span class="w">        </span><span class="nl">Solution</span><span class="p">:</span><span class="w"> </span><span class="n">Wait</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mi">10</span><span class="n">s</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">killing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">training</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">again</span><span class="p">.</span>
<span class="w">        </span><span class="n">TraceBack</span><span class="w"> </span><span class="p">(</span><span class="n">most</span><span class="w"> </span><span class="n">recent</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="o">:</span>
<span class="w">        </span><span class="n">tsd</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">wait</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">fail</span><span class="p">,</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">code</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="w"> </span><span class="n">unknown</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">error</span><span class="p">.[</span><span class="n">FUNC</span><span class="o">:</span><span class="n">WaitRsp</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">process_mode_manager</span><span class="p">.</span><span class="n">cpp</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">233</span><span class="p">]</span>

<span class="p">(</span><span class="n">Please</span><span class="w"> </span><span class="n">search</span><span class="w"> </span><span class="s">&quot;Ascend Error Message&quot;</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">https</span><span class="o">:</span><span class="c1">//www.mindspore.cn for error code description)Framework Error Message:Init hccl graph adapter failed.</span>

<span class="o">----------------------------------------------------</span>
<span class="o">-</span><span class="w"> </span><span class="n">C</span><span class="o">++</span><span class="w"> </span><span class="n">Call</span><span class="w"> </span><span class="n">Stack</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">For</span><span class="w"> </span><span class="n">framework</span><span class="w"> </span><span class="n">developers</span><span class="p">)</span>
<span class="o">----------------------------------------------------</span>
<span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">hal</span><span class="o">/</span><span class="n">hccl_adapter</span><span class="o">/</span><span class="n">hccl_adapter</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">402</span><span class="w"> </span><span class="n">InitKernelInfoStore</span>

<span class="p">[</span><span class="n">CRITICAL</span><span class="p">]</span><span class="w"> </span><span class="n">DEVICE</span><span class="p">(</span><span class="mi">17381</span><span class="p">,</span><span class="n">ffff890145d0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022-12</span><span class="mo">-01-03</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mf">29.011.280</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">kernel_runtime</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">124</span><span class="p">]</span><span class="w"> </span><span class="n">LockRuntime</span><span class="p">]</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">pointer</span><span class="p">[</span><span class="n">stream</span><span class="p">]</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">null</span><span class="p">.</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">DEVICE</span><span class="p">(</span><span class="mi">17381</span><span class="p">,</span><span class="n">ffff890145d0</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022-12</span><span class="mo">-01-03</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mf">29.011.608</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">kernel_runtime_manager</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">138</span><span class="p">]</span><span class="w"> </span><span class="n">WaitTaskFinishOnDevice</span><span class="p">]</span><span class="w"> </span><span class="n">SyncStream</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">exception</span><span class="o">:</span><span class="n">The</span><span class="w"> </span><span class="n">pointer</span><span class="p">[</span><span class="n">stream</span><span class="p">]</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">null</span><span class="p">.</span>

<span class="o">----------------------------------------------------</span>
<span class="o">-</span><span class="w"> </span><span class="n">C</span><span class="o">++</span><span class="w"> </span><span class="n">Call</span><span class="w"> </span><span class="n">Stack</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">For</span><span class="w"> </span><span class="n">framework</span><span class="w"> </span><span class="n">developers</span><span class="p">)</span>
<span class="o">----------------------------------------------------</span>
<span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">kernel_runtime</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">124</span><span class="w"> </span><span class="n">LockRuntime</span>


<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">RUNTIME</span><span class="p">(</span><span class="mi">17381</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022-12</span><span class="mo">-01-03</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mf">29.091.105</span><span class="w"> </span><span class="p">[</span><span class="n">engine</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">1044</span><span class="p">]</span><span class="mi">17901</span><span class="w"> </span><span class="n">ReportStatusFailProc</span><span class="o">:</span><span class="n">Device</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="n">failure</span><span class="p">,</span><span class="w"> </span><span class="n">ret</span><span class="o">=</span><span class="mi">118554641</span><span class="p">,</span><span class="n">start</span><span class="w"> </span><span class="n">exception</span><span class="w"> </span><span class="n">CallBack</span><span class="p">.</span>
<span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">DRV</span><span class="p">(</span><span class="mi">17381</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022-12</span><span class="mo">-01-03</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mf">29.391.021</span><span class="w"> </span><span class="p">[</span><span class="n">ascend</span><span class="p">][</span><span class="n">curpid</span><span class="o">:</span><span class="w"> </span><span class="mi">17381</span><span class="p">,</span><span class="w"> </span><span class="mi">17381</span><span class="p">][</span><span class="n">drv</span><span class="p">][</span><span class="n">tsdrv</span><span class="p">][</span><span class="n">share_log_read</span><span class="w"> </span><span class="mi">552</span><span class="p">]</span><span class="n">hdc</span><span class="w"> </span><span class="n">connect</span><span class="w"> </span><span class="n">down</span><span class="p">,</span><span class="w"> </span><span class="n">devid</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">fid</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">tsid</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">hdc</span><span class="w"> </span><span class="n">connect</span><span class="w"> </span><span class="n">down</span><span class="p">,</span><span class="w"> </span><span class="n">devid</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">fid</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">tsid</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">Traceback</span><span class="w"> </span><span class="p">(</span><span class="n">most</span><span class="w"> </span><span class="n">recent</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="o">:</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;train.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">377</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">&lt;</span><span class="k">module</span><span class="o">&gt;</span>
<span class="w">    </span><span class="n">train_net</span><span class="p">()</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/jenkins/workspace/TDT_deployment/solution_test/remaining/test_scripts/mindspore/reliability/fmea/business/process/multitask/test_ms_fmea_multi_task_two_8p_0001_2_GRAPH_MODE/scripts/train_parallel0/src/model_utils/moxing_adapter.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">104</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">wrapped_func</span>
<span class="w">    </span><span class="n">run_func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;train.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">304</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">train_net</span>
<span class="w">    </span><span class="n">set_parameter</span><span class="p">()</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;train.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">151</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">set_parameter</span>
<span class="w">    </span><span class="n">init</span><span class="p">()</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/communication/management.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">152</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">init</span>
<span class="w">    </span><span class="n">init_hccl</span><span class="p">()</span>
<span class="nl">RuntimeError</span><span class="p">:</span><span class="w"> </span><span class="n">Ascend</span><span class="w"> </span><span class="n">collective</span><span class="w"> </span><span class="n">communication</span><span class="w"> </span><span class="n">initialization</span><span class="w"> </span><span class="n">failed</span><span class="p">.</span>

<span class="o">----------------------------------------------------</span>
<span class="o">-</span><span class="w"> </span><span class="n">Ascend</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="n">Message</span><span class="o">:</span>
<span class="o">----------------------------------------------------</span>
<span class="nl">EJ0001</span><span class="p">:</span><span class="w"> </span><span class="n">Failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">initialize</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">HCCP</span><span class="w"> </span><span class="n">process</span><span class="p">.</span><span class="w"> </span><span class="n">Reason</span><span class="o">:</span><span class="w"> </span><span class="n">Maybe</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">training</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">running</span><span class="p">.</span>
<span class="w">        </span><span class="nl">Solution</span><span class="p">:</span><span class="w"> </span><span class="n">Wait</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mi">10</span><span class="n">s</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">killing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">training</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">again</span><span class="p">.</span>
<span class="w">        </span><span class="n">TraceBack</span><span class="w"> </span><span class="p">(</span><span class="n">most</span><span class="w"> </span><span class="n">recent</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="o">:</span>
<span class="w">        </span><span class="n">tsd</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">wait</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">fail</span><span class="p">,</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">code</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="w"> </span><span class="n">unknown</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">error</span><span class="p">.[</span><span class="n">FUNC</span><span class="o">:</span><span class="n">WaitRsp</span><span class="p">][</span><span class="kt">FILE</span><span class="o">:</span><span class="n">process_mode_manager</span><span class="p">.</span><span class="n">cpp</span><span class="p">][</span><span class="n">LINE</span><span class="o">:</span><span class="mi">233</span><span class="p">]</span>

<span class="p">(</span><span class="n">Please</span><span class="w"> </span><span class="n">search</span><span class="w"> </span><span class="s">&quot;Ascend Error Message&quot;</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">https</span><span class="o">:</span><span class="c1">//www.mindspore.cn for error code description)</span>

<span class="o">----------------------------------------------------</span>
<span class="o">-</span><span class="w"> </span><span class="n">Framework</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="n">Message</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">For</span><span class="w"> </span><span class="n">framework</span><span class="w"> </span><span class="n">developers</span><span class="p">)</span>
<span class="o">----------------------------------------------------</span>
<span class="n">Init</span><span class="w"> </span><span class="n">hccl</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="n">adapter</span><span class="w"> </span><span class="n">failed</span><span class="p">.</span>

<span class="o">----------------------------------------------------</span>
<span class="o">-</span><span class="w"> </span><span class="n">C</span><span class="o">++</span><span class="w"> </span><span class="n">Call</span><span class="w"> </span><span class="n">Stack</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">For</span><span class="w"> </span><span class="n">framework</span><span class="w"> </span><span class="n">developers</span><span class="p">)</span>
<span class="o">----------------------------------------------------</span>
<span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">hal</span><span class="o">/</span><span class="n">hardware</span><span class="o">/</span><span class="n">ascend_collective_comm_lib</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">112</span><span class="w"> </span><span class="n">Initialize</span>
<span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">hal</span><span class="o">/</span><span class="n">hccl_adapter</span><span class="o">/</span><span class="n">hccl_adapter</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">402</span><span class="w"> </span><span class="n">InitKernelInfoStore</span>
</pre></div>
</div>
<p>When you encounter such an error, just solve it according to the initialization error cause and solution of the log.</p>
</section>
</section>
<section id="profiling-faq">
<h2>profiling FAQ<a class="headerlink" href="#profiling-faq" title="Permalink to this headline"></a></h2>
<p>The profiling issue error code starts with <code class="docutils literal notranslate"><span class="pre">EK</span></code>.</p>
<section id="ek0001-illegal-parameter-problem">
<h3>EK0001: Illegal Parameter Problem<a class="headerlink" href="#ek0001-illegal-parameter-problem" title="Permalink to this headline"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">EK0001</span></code> error is reported when CANN’s profiling module interface encounters an illegal parameter. The most common illegal parameter error for users is the incorrect path setting for profiling, such as the following error:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ERROR</span><span class="p">]</span><span class="w"> </span><span class="n">PROFILER</span><span class="p">(</span><span class="mi">138694</span><span class="p">,</span><span class="n">ffffaa6c8480</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022</span><span class="mo">-01</span><span class="mi">-10-14</span><span class="o">:</span><span class="mi">19</span><span class="o">:</span><span class="mf">56.741.053</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">profiler</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">ascend_profiling</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">51</span><span class="p">]</span><span class="w"> </span><span class="n">ReportErrorMessage</span><span class="p">]</span><span class="w"> </span><span class="n">Ascend</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">occurred</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">message</span><span class="o">:</span>
<span class="nl">EK0001</span><span class="p">:</span><span class="w"> </span><span class="n">Path</span><span class="w"> </span><span class="p">[</span><span class="o">/</span><span class="n">ms_test</span><span class="o">/</span><span class="n">ci</span><span class="o">/</span><span class="n">user_scene</span><span class="o">/</span><span class="n">profiler_chinese_中文</span><span class="o">/</span><span class="n">resnet</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">train</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">profiler</span><span class="p">]</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="p">[</span><span class="n">profilerResultPath</span><span class="p">]</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">invalid</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">exist</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Path</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">contain</span><span class="w"> </span><span class="n">A</span><span class="o">-</span><span class="n">Za</span><span class="o">-</span><span class="n">z0</span><span class="mi">-9</span><span class="o">-</span><span class="n">_</span><span class="p">.</span>

<span class="p">[</span><span class="n">CRITICAL</span><span class="p">]</span><span class="w"> </span><span class="n">PROFILER</span><span class="p">(</span><span class="mi">138694</span><span class="p">,</span><span class="n">ffffaa6c8480</span><span class="p">,</span><span class="n">python</span><span class="p">)</span><span class="o">:</span><span class="mi">2022</span><span class="mo">-01</span><span class="mi">-10-14</span><span class="o">:</span><span class="mi">19</span><span class="o">:</span><span class="mf">56.741.123</span><span class="w"> </span><span class="p">[</span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">profiler</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">ascend_profiling</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">79</span><span class="p">]</span><span class="w"> </span><span class="n">InitProfiling</span><span class="p">]</span><span class="w"> </span><span class="n">Failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">aclprofInit</span><span class="w"> </span><span class="n">function</span><span class="p">.</span>

<span class="n">Traceback</span><span class="w"> </span><span class="p">(</span><span class="n">most</span><span class="w"> </span><span class="n">recent</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="o">:</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;train.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">387</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">&lt;</span><span class="k">module</span><span class="o">&gt;</span>
<span class="w">    </span><span class="n">train_net</span><span class="p">()</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/ms_test/ci/user_scene/profiler_chinese_中文/resnet/scripts/train/src/model_utils/moxing_adapter.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">104</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">wrapped_func</span>
<span class="w">    </span><span class="n">run_func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;train.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">325</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">train_net</span>
<span class="w">    </span><span class="n">profiler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Profiler</span><span class="p">()</span>
<span class="w">  </span><span class="n">File</span><span class="w"> </span><span class="s">&quot;/home/miniconda3/envs/ci/lib/python3.7/site-packages/mindspore/profiler/profiling.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">195</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">__init__</span>
<span class="w">    </span><span class="n">self</span><span class="p">.</span><span class="n">_ascend_profiler</span><span class="p">.</span><span class="n">init</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_output_path</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_dev_id</span><span class="p">),</span><span class="w"> </span><span class="n">profiling_options</span><span class="p">)</span>
<span class="nl">RuntimeError</span><span class="p">:</span><span class="w"> </span><span class="n">mindspore</span><span class="o">/</span><span class="n">ccsrc</span><span class="o">/</span><span class="n">profiler</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">ascend</span><span class="o">/</span><span class="n">ascend_profiling</span><span class="p">.</span><span class="n">cc</span><span class="o">:</span><span class="mi">79</span><span class="w"> </span><span class="n">InitProfiling</span><span class="p">]</span><span class="w"> </span><span class="n">Failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">aclprofInit</span><span class="w"> </span><span class="n">function</span><span class="p">.</span>
</pre></div>
</div>
<p>From the error message of CANN in ERROR log, we can know that the path character of profiling can only contain <code class="docutils literal notranslate"><span class="pre">A-Za-z0-9-_</span></code>, and the path of profiling in the above error contains <code class="docutils literal notranslate"><span class="pre">Chinese</span></code> characters, which leads to illegal path error, thus causing profiling initialization failure. If you encounter such problem, you can correct the profiling path or other parameters according to the error message.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mindrt_debug.html" class="btn btn-neutral float-left" title="Network Construction and Training Error Analysis" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mindir.html" class="btn btn-neutral float-right" title="IR File Analysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, MindSpore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
</body>
</html>